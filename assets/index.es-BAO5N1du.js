const __vite__fileDeps=["assets/index-DOl8xZYz.js","assets/index-T4w9T8WG.js","assets/index-D2wmlp-p.css"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{g as M0,f as G8,h as V8,p as Fr,i as Re,B as lh,e as Wi,d as bc,c as bn,W as D0,_ as Q8}from"./index-T4w9T8WG.js";var Ht={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var kl=function(e,t){return kl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var n in i)i.hasOwnProperty(n)&&(r[n]=i[n])},kl(e,t)};function Y8(e,t){kl(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var zl=function(){return zl=Object.assign||function(t){for(var r,i=1,n=arguments.length;i<n;i++){r=arguments[i];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},zl.apply(this,arguments)};function J8(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(r[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,i=Object.getOwnPropertySymbols(e);n<i.length;n++)t.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(e,i[n])&&(r[i[n]]=e[i[n]]);return r}function W8(e,t,r,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,r):i,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(e,t,r,i);else for(var d=e.length-1;d>=0;d--)(f=e[d])&&(o=(n<3?f(o):n>3?f(t,r,o):f(t,r))||o);return n>3&&o&&Object.defineProperty(t,r,o),o}function X8(e,t){return function(r,i){t(r,i,e)}}function Z8(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function t5(e,t,r,i){function n(o){return o instanceof r?o:new r(function(f){f(o)})}return new(r||(r=Promise))(function(o,f){function d(w){try{g(i.next(w))}catch(S){f(S)}}function v(w){try{g(i.throw(w))}catch(S){f(S)}}function g(w){w.done?o(w.value):n(w.value).then(d,v)}g((i=i.apply(e,t||[])).next())})}function e5(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},i,n,o,f;return f={next:d(0),throw:d(1),return:d(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function d(g){return function(w){return v([g,w])}}function v(g){if(i)throw new TypeError("Generator is already executing.");for(;r;)try{if(i=1,n&&(o=g[0]&2?n.return:g[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,g[1])).done)return o;switch(n=0,o&&(g=[g[0]&2,o.value]),g[0]){case 0:case 1:o=g;break;case 4:return r.label++,{value:g[1],done:!1};case 5:r.label++,n=g[1],g=[0];continue;case 7:g=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(g[0]===6||g[0]===2)){r=0;continue}if(g[0]===3&&(!o||g[1]>o[0]&&g[1]<o[3])){r.label=g[1];break}if(g[0]===6&&r.label<o[1]){r.label=o[1],o=g;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(g);break}o[2]&&r.ops.pop(),r.trys.pop();continue}g=t.call(e,r)}catch(w){g=[6,w],n=0}finally{i=o=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}}function r5(e,t,r,i){i===void 0&&(i=r),e[i]=t[r]}function i5(e,t){for(var r in e)r!=="default"&&!t.hasOwnProperty(r)&&(t[r]=e[r])}function jl(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],i=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function $m(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var i=r.call(e),n,o=[],f;try{for(;(t===void 0||t-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(d){f={error:d}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(f)throw f.error}}return o}function n5(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat($m(arguments[t]));return e}function s5(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var i=Array(e),n=0,t=0;t<r;t++)for(var o=arguments[t],f=0,d=o.length;f<d;f++,n++)i[n]=o[f];return i}function rh(e){return this instanceof rh?(this.v=e,this):new rh(e)}function o5(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=r.apply(e,t||[]),n,o=[];return n={},f("next"),f("throw"),f("return"),n[Symbol.asyncIterator]=function(){return this},n;function f(x){i[x]&&(n[x]=function(C){return new Promise(function(N,V){o.push([x,C,N,V])>1||d(x,C)})})}function d(x,C){try{v(i[x](C))}catch(N){S(o[0][3],N)}}function v(x){x.value instanceof rh?Promise.resolve(x.value.v).then(g,w):S(o[0][2],x)}function g(x){d("next",x)}function w(x){d("throw",x)}function S(x,C){x(C),o.shift(),o.length&&d(o[0][0],o[0][1])}}function a5(e){var t,r;return t={},i("next"),i("throw",function(n){throw n}),i("return"),t[Symbol.iterator]=function(){return this},t;function i(n,o){t[n]=e[n]?function(f){return(r=!r)?{value:rh(e[n](f)),done:n==="return"}:o?o(f):f}:o}}function h5(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof jl=="function"?jl(e):e[Symbol.iterator](),r={},i("next"),i("throw"),i("return"),r[Symbol.asyncIterator]=function(){return this},r);function i(o){r[o]=e[o]&&function(f){return new Promise(function(d,v){f=e[o](f),n(d,v,f.done,f.value)})}}function n(o,f,d,v){Promise.resolve(v).then(function(g){o({value:g,done:d})},f)}}function u5(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function c5(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function f5(e){return e&&e.__esModule?e:{default:e}}function l5(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function d5(e,t,r){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,r),r}const p5=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return zl},__asyncDelegator:a5,__asyncGenerator:o5,__asyncValues:h5,__await:rh,__awaiter:t5,__classPrivateFieldGet:l5,__classPrivateFieldSet:d5,__createBinding:r5,__decorate:W8,__exportStar:i5,__extends:Y8,__generator:e5,__importDefault:f5,__importStar:c5,__makeTemplateObject:u5,__metadata:Z8,__param:X8,__read:$m,__rest:J8,__spread:n5,__spreadArrays:s5,__values:jl},Symbol.toStringTag,{value:"Module"})),Ac=M0(p5);var Vf={},La={},n1;function g5(){if(n1)return La;n1=1,Object.defineProperty(La,"__esModule",{value:!0}),La.delay=void 0;function e(t){return new Promise(r=>{setTimeout(()=>{r(!0)},t)})}return La.delay=e,La}var ro={},Qf={},io={},s1;function m5(){return s1||(s1=1,Object.defineProperty(io,"__esModule",{value:!0}),io.ONE_THOUSAND=io.ONE_HUNDRED=void 0,io.ONE_HUNDRED=100,io.ONE_THOUSAND=1e3),io}var Yf={},o1;function v5(){return o1||(o1=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ONE_YEAR=e.FOUR_WEEKS=e.THREE_WEEKS=e.TWO_WEEKS=e.ONE_WEEK=e.THIRTY_DAYS=e.SEVEN_DAYS=e.FIVE_DAYS=e.THREE_DAYS=e.ONE_DAY=e.TWENTY_FOUR_HOURS=e.TWELVE_HOURS=e.SIX_HOURS=e.THREE_HOURS=e.ONE_HOUR=e.SIXTY_MINUTES=e.THIRTY_MINUTES=e.TEN_MINUTES=e.FIVE_MINUTES=e.ONE_MINUTE=e.SIXTY_SECONDS=e.THIRTY_SECONDS=e.TEN_SECONDS=e.FIVE_SECONDS=e.ONE_SECOND=void 0,e.ONE_SECOND=1,e.FIVE_SECONDS=5,e.TEN_SECONDS=10,e.THIRTY_SECONDS=30,e.SIXTY_SECONDS=60,e.ONE_MINUTE=e.SIXTY_SECONDS,e.FIVE_MINUTES=e.ONE_MINUTE*5,e.TEN_MINUTES=e.ONE_MINUTE*10,e.THIRTY_MINUTES=e.ONE_MINUTE*30,e.SIXTY_MINUTES=e.ONE_MINUTE*60,e.ONE_HOUR=e.SIXTY_MINUTES,e.THREE_HOURS=e.ONE_HOUR*3,e.SIX_HOURS=e.ONE_HOUR*6,e.TWELVE_HOURS=e.ONE_HOUR*12,e.TWENTY_FOUR_HOURS=e.ONE_HOUR*24,e.ONE_DAY=e.TWENTY_FOUR_HOURS,e.THREE_DAYS=e.ONE_DAY*3,e.FIVE_DAYS=e.ONE_DAY*5,e.SEVEN_DAYS=e.ONE_DAY*7,e.THIRTY_DAYS=e.ONE_DAY*30,e.ONE_WEEK=e.SEVEN_DAYS,e.TWO_WEEKS=e.ONE_WEEK*2,e.THREE_WEEKS=e.ONE_WEEK*3,e.FOUR_WEEKS=e.ONE_WEEK*4,e.ONE_YEAR=e.ONE_DAY*365}(Yf)),Yf}var a1;function km(){return a1||(a1=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});const t=Ac;t.__exportStar(m5(),e),t.__exportStar(v5(),e)}(Qf)),Qf}var h1;function y5(){if(h1)return ro;h1=1,Object.defineProperty(ro,"__esModule",{value:!0}),ro.fromMiliseconds=ro.toMiliseconds=void 0;const e=km();function t(i){return i*e.ONE_THOUSAND}ro.toMiliseconds=t;function r(i){return Math.floor(i/e.ONE_THOUSAND)}return ro.fromMiliseconds=r,ro}var u1;function w5(){return u1||(u1=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});const t=Ac;t.__exportStar(g5(),e),t.__exportStar(y5(),e)}(Vf)),Vf}var qo={},c1;function b5(){if(c1)return qo;c1=1,Object.defineProperty(qo,"__esModule",{value:!0}),qo.Watch=void 0;class e{constructor(){this.timestamps=new Map}start(r){if(this.timestamps.has(r))throw new Error(`Watch already started for label: ${r}`);this.timestamps.set(r,{started:Date.now()})}stop(r){const i=this.get(r);if(typeof i.elapsed<"u")throw new Error(`Watch already stopped for label: ${r}`);const n=Date.now()-i.started;this.timestamps.set(r,{started:i.started,elapsed:n})}get(r){const i=this.timestamps.get(r);if(typeof i>"u")throw new Error(`No timestamp found for label: ${r}`);return i}elapsed(r){const i=this.get(r);return i.elapsed||Date.now()-i.started}}return qo.Watch=e,qo.default=e,qo}var Jf={},Fa={},f1;function A5(){if(f1)return Fa;f1=1,Object.defineProperty(Fa,"__esModule",{value:!0}),Fa.IWatch=void 0;class e{}return Fa.IWatch=e,Fa}var l1;function _5(){return l1||(l1=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Ac.__exportStar(A5(),e)}(Jf)),Jf}(function(e){Object.defineProperty(e,"__esModule",{value:!0});const t=Ac;t.__exportStar(w5(),e),t.__exportStar(b5(),e),t.__exportStar(_5(),e),t.__exportStar(km(),e)})(Ht);var Ge={};Object.defineProperty(Ge,"__esModule",{value:!0});Ge.getLocalStorage=Ge.getLocalStorageOrThrow=Ge.getCrypto=Ge.getCryptoOrThrow=Ge.getLocation=Ge.getLocationOrThrow=Ge.getNavigator=Ge.getNavigatorOrThrow=Ge.getDocument=Ge.getDocumentOrThrow=Ge.getFromWindowOrThrow=Ge.getFromWindow=void 0;function po(e){let t;return typeof window<"u"&&typeof window[e]<"u"&&(t=window[e]),t}Ge.getFromWindow=po;function sa(e){const t=po(e);if(!t)throw new Error(`${e} is not defined in Window`);return t}Ge.getFromWindowOrThrow=sa;function E5(){return sa("document")}Ge.getDocumentOrThrow=E5;function S5(){return po("document")}Ge.getDocument=S5;function I5(){return sa("navigator")}Ge.getNavigatorOrThrow=I5;function M5(){return po("navigator")}Ge.getNavigator=M5;function D5(){return sa("location")}Ge.getLocationOrThrow=D5;function x5(){return po("location")}Ge.getLocation=x5;function C5(){return sa("crypto")}Ge.getCryptoOrThrow=C5;function O5(){return po("crypto")}Ge.getCrypto=O5;function N5(){return sa("localStorage")}Ge.getLocalStorageOrThrow=N5;function P5(){return po("localStorage")}Ge.getLocalStorage=P5;var x0={};Object.defineProperty(x0,"__esModule",{value:!0});x0.getWindowMetadata=void 0;const d1=Ge;function R5(){let e,t;try{e=d1.getDocumentOrThrow(),t=d1.getLocationOrThrow()}catch{return null}function r(){const S=e.getElementsByTagName("link"),x=[];for(let C=0;C<S.length;C++){const N=S[C],V=N.getAttribute("rel");if(V&&V.toLowerCase().indexOf("icon")>-1){const z=N.getAttribute("href");if(z)if(z.toLowerCase().indexOf("https:")===-1&&z.toLowerCase().indexOf("http:")===-1&&z.indexOf("//")!==0){let X=t.protocol+"//"+t.host;if(z.indexOf("/")===0)X+=z;else{const G=t.pathname.split("/");G.pop();const Y=G.join("/");X+=Y+"/"+z}x.push(X)}else if(z.indexOf("//")===0){const X=t.protocol+z;x.push(X)}else x.push(z)}}return x}function i(...S){const x=e.getElementsByTagName("meta");for(let C=0;C<x.length;C++){const N=x[C],V=["itemprop","property","name"].map(z=>N.getAttribute(z)).filter(z=>z?S.includes(z):!1);if(V.length&&V){const z=N.getAttribute("content");if(z)return z}}return""}function n(){let S=i("name","og:site_name","og:title","twitter:title");return S||(S=e.title),S}function o(){return i("description","og:description","twitter:description","keywords")}const f=n(),d=o(),v=t.origin,g=r();return{description:d,url:v,icons:g,name:f}}x0.getWindowMetadata=R5;var ih={},T5=e=>encodeURIComponent(e).replace(/[!'()*]/g,t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`),zm="%[a-f0-9]{2}",p1=new RegExp("("+zm+")|([^%]+?)","gi"),g1=new RegExp("("+zm+")+","gi");function Hl(e,t){try{return[decodeURIComponent(e.join(""))]}catch{}if(e.length===1)return e;t=t||1;var r=e.slice(0,t),i=e.slice(t);return Array.prototype.concat.call([],Hl(r),Hl(i))}function B5(e){try{return decodeURIComponent(e)}catch{for(var t=e.match(p1)||[],r=1;r<t.length;r++)e=Hl(t,r).join(""),t=e.match(p1)||[];return e}}function U5(e){for(var t={"%FE%FF":"��","%FF%FE":"��"},r=g1.exec(e);r;){try{t[r[0]]=decodeURIComponent(r[0])}catch{var i=B5(r[0]);i!==r[0]&&(t[r[0]]=i)}r=g1.exec(e)}t["%C2"]="�";for(var n=Object.keys(t),o=0;o<n.length;o++){var f=n[o];e=e.replace(new RegExp(f,"g"),t[f])}return e}var L5=function(e){if(typeof e!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch{return U5(e)}},F5=(e,t)=>{if(!(typeof e=="string"&&typeof t=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(t==="")return[e];const r=e.indexOf(t);return r===-1?[e]:[e.slice(0,r),e.slice(r+t.length)]},q5=function(e,t){for(var r={},i=Object.keys(e),n=Array.isArray(t),o=0;o<i.length;o++){var f=i[o],d=e[f];(n?t.indexOf(f)!==-1:t(f,d,e))&&(r[f]=d)}return r};(function(e){const t=T5,r=L5,i=F5,n=q5,o=G=>G==null,f=Symbol("encodeFragmentIdentifier");function d(G){switch(G.arrayFormat){case"index":return Y=>($,j)=>{const k=$.length;return j===void 0||G.skipNull&&j===null||G.skipEmptyString&&j===""?$:j===null?[...$,[w(Y,G),"[",k,"]"].join("")]:[...$,[w(Y,G),"[",w(k,G),"]=",w(j,G)].join("")]};case"bracket":return Y=>($,j)=>j===void 0||G.skipNull&&j===null||G.skipEmptyString&&j===""?$:j===null?[...$,[w(Y,G),"[]"].join("")]:[...$,[w(Y,G),"[]=",w(j,G)].join("")];case"colon-list-separator":return Y=>($,j)=>j===void 0||G.skipNull&&j===null||G.skipEmptyString&&j===""?$:j===null?[...$,[w(Y,G),":list="].join("")]:[...$,[w(Y,G),":list=",w(j,G)].join("")];case"comma":case"separator":case"bracket-separator":{const Y=G.arrayFormat==="bracket-separator"?"[]=":"=";return $=>(j,k)=>k===void 0||G.skipNull&&k===null||G.skipEmptyString&&k===""?j:(k=k===null?"":k,j.length===0?[[w($,G),Y,w(k,G)].join("")]:[[j,w(k,G)].join(G.arrayFormatSeparator)])}default:return Y=>($,j)=>j===void 0||G.skipNull&&j===null||G.skipEmptyString&&j===""?$:j===null?[...$,w(Y,G)]:[...$,[w(Y,G),"=",w(j,G)].join("")]}}function v(G){let Y;switch(G.arrayFormat){case"index":return($,j,k)=>{if(Y=/\[(\d*)\]$/.exec($),$=$.replace(/\[\d*\]$/,""),!Y){k[$]=j;return}k[$]===void 0&&(k[$]={}),k[$][Y[1]]=j};case"bracket":return($,j,k)=>{if(Y=/(\[\])$/.exec($),$=$.replace(/\[\]$/,""),!Y){k[$]=j;return}if(k[$]===void 0){k[$]=[j];return}k[$]=[].concat(k[$],j)};case"colon-list-separator":return($,j,k)=>{if(Y=/(:list)$/.exec($),$=$.replace(/:list$/,""),!Y){k[$]=j;return}if(k[$]===void 0){k[$]=[j];return}k[$]=[].concat(k[$],j)};case"comma":case"separator":return($,j,k)=>{const _=typeof j=="string"&&j.includes(G.arrayFormatSeparator),L=typeof j=="string"&&!_&&S(j,G).includes(G.arrayFormatSeparator);j=L?S(j,G):j;const ot=_||L?j.split(G.arrayFormatSeparator).map(ct=>S(ct,G)):j===null?j:S(j,G);k[$]=ot};case"bracket-separator":return($,j,k)=>{const _=/(\[\])$/.test($);if($=$.replace(/\[\]$/,""),!_){k[$]=j&&S(j,G);return}const L=j===null?[]:j.split(G.arrayFormatSeparator).map(ot=>S(ot,G));if(k[$]===void 0){k[$]=L;return}k[$]=[].concat(k[$],L)};default:return($,j,k)=>{if(k[$]===void 0){k[$]=j;return}k[$]=[].concat(k[$],j)}}}function g(G){if(typeof G!="string"||G.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function w(G,Y){return Y.encode?Y.strict?t(G):encodeURIComponent(G):G}function S(G,Y){return Y.decode?r(G):G}function x(G){return Array.isArray(G)?G.sort():typeof G=="object"?x(Object.keys(G)).sort((Y,$)=>Number(Y)-Number($)).map(Y=>G[Y]):G}function C(G){const Y=G.indexOf("#");return Y!==-1&&(G=G.slice(0,Y)),G}function N(G){let Y="";const $=G.indexOf("#");return $!==-1&&(Y=G.slice($)),Y}function V(G){G=C(G);const Y=G.indexOf("?");return Y===-1?"":G.slice(Y+1)}function z(G,Y){return Y.parseNumbers&&!Number.isNaN(Number(G))&&typeof G=="string"&&G.trim()!==""?G=Number(G):Y.parseBooleans&&G!==null&&(G.toLowerCase()==="true"||G.toLowerCase()==="false")&&(G=G.toLowerCase()==="true"),G}function X(G,Y){Y=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},Y),g(Y.arrayFormatSeparator);const $=v(Y),j=Object.create(null);if(typeof G!="string"||(G=G.trim().replace(/^[?#&]/,""),!G))return j;for(const k of G.split("&")){if(k==="")continue;let[_,L]=i(Y.decode?k.replace(/\+/g," "):k,"=");L=L===void 0?null:["comma","separator","bracket-separator"].includes(Y.arrayFormat)?L:S(L,Y),$(S(_,Y),L,j)}for(const k of Object.keys(j)){const _=j[k];if(typeof _=="object"&&_!==null)for(const L of Object.keys(_))_[L]=z(_[L],Y);else j[k]=z(_,Y)}return Y.sort===!1?j:(Y.sort===!0?Object.keys(j).sort():Object.keys(j).sort(Y.sort)).reduce((k,_)=>{const L=j[_];return L&&typeof L=="object"&&!Array.isArray(L)?k[_]=x(L):k[_]=L,k},Object.create(null))}e.extract=V,e.parse=X,e.stringify=(G,Y)=>{if(!G)return"";Y=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},Y),g(Y.arrayFormatSeparator);const $=L=>Y.skipNull&&o(G[L])||Y.skipEmptyString&&G[L]==="",j=d(Y),k={};for(const L of Object.keys(G))$(L)||(k[L]=G[L]);const _=Object.keys(k);return Y.sort!==!1&&_.sort(Y.sort),_.map(L=>{const ot=G[L];return ot===void 0?"":ot===null?w(L,Y):Array.isArray(ot)?ot.length===0&&Y.arrayFormat==="bracket-separator"?w(L,Y)+"[]":ot.reduce(j(L),[]).join("&"):w(L,Y)+"="+w(ot,Y)}).filter(L=>L.length>0).join("&")},e.parseUrl=(G,Y)=>{Y=Object.assign({decode:!0},Y);const[$,j]=i(G,"#");return Object.assign({url:$.split("?")[0]||"",query:X(V(G),Y)},Y&&Y.parseFragmentIdentifier&&j?{fragmentIdentifier:S(j,Y)}:{})},e.stringifyUrl=(G,Y)=>{Y=Object.assign({encode:!0,strict:!0,[f]:!0},Y);const $=C(G.url).split("?")[0]||"",j=e.extract(G.url),k=e.parse(j,{sort:!1}),_=Object.assign(k,G.query);let L=e.stringify(_,Y);L&&(L=`?${L}`);let ot=N(G.url);return G.fragmentIdentifier&&(ot=`#${Y[f]?w(G.fragmentIdentifier,Y):G.fragmentIdentifier}`),`${$}${L}${ot}`},e.pick=(G,Y,$)=>{$=Object.assign({parseFragmentIdentifier:!0,[f]:!1},$);const{url:j,query:k,fragmentIdentifier:_}=e.parseUrl(G,$);return e.stringifyUrl({url:j,query:n(k,Y),fragmentIdentifier:_},$)},e.exclude=(G,Y,$)=>{const j=Array.isArray(Y)?k=>!Y.includes(k):(k,_)=>!Y(k,_);return e.pick(G,j,$)}})(ih);var C0={},_c={},pe={},jm={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(d,v){var g=d>>>16&65535,w=d&65535,S=v>>>16&65535,x=v&65535;return w*x+(g*x+w*S<<16>>>0)|0}e.mul=Math.imul||t;function r(d,v){return d+v|0}e.add=r;function i(d,v){return d-v|0}e.sub=i;function n(d,v){return d<<v|d>>>32-v}e.rotl=n;function o(d,v){return d<<32-v|d>>>v}e.rotr=o;function f(d){return typeof d=="number"&&isFinite(d)&&Math.floor(d)===d}e.isInteger=Number.isInteger||f,e.MAX_SAFE_INTEGER=9007199254740991,e.isSafeInteger=function(d){return e.isInteger(d)&&d>=-e.MAX_SAFE_INTEGER&&d<=e.MAX_SAFE_INTEGER}})(jm);Object.defineProperty(pe,"__esModule",{value:!0});var Hm=jm;function $5(e,t){return t===void 0&&(t=0),(e[t+0]<<8|e[t+1])<<16>>16}pe.readInt16BE=$5;function k5(e,t){return t===void 0&&(t=0),(e[t+0]<<8|e[t+1])>>>0}pe.readUint16BE=k5;function z5(e,t){return t===void 0&&(t=0),(e[t+1]<<8|e[t])<<16>>16}pe.readInt16LE=z5;function j5(e,t){return t===void 0&&(t=0),(e[t+1]<<8|e[t])>>>0}pe.readUint16LE=j5;function Km(e,t,r){return t===void 0&&(t=new Uint8Array(2)),r===void 0&&(r=0),t[r+0]=e>>>8,t[r+1]=e>>>0,t}pe.writeUint16BE=Km;pe.writeInt16BE=Km;function Gm(e,t,r){return t===void 0&&(t=new Uint8Array(2)),r===void 0&&(r=0),t[r+0]=e>>>0,t[r+1]=e>>>8,t}pe.writeUint16LE=Gm;pe.writeInt16LE=Gm;function Kl(e,t){return t===void 0&&(t=0),e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]}pe.readInt32BE=Kl;function Gl(e,t){return t===void 0&&(t=0),(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}pe.readUint32BE=Gl;function Vl(e,t){return t===void 0&&(t=0),e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]}pe.readInt32LE=Vl;function Ql(e,t){return t===void 0&&(t=0),(e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t])>>>0}pe.readUint32LE=Ql;function ic(e,t,r){return t===void 0&&(t=new Uint8Array(4)),r===void 0&&(r=0),t[r+0]=e>>>24,t[r+1]=e>>>16,t[r+2]=e>>>8,t[r+3]=e>>>0,t}pe.writeUint32BE=ic;pe.writeInt32BE=ic;function nc(e,t,r){return t===void 0&&(t=new Uint8Array(4)),r===void 0&&(r=0),t[r+0]=e>>>0,t[r+1]=e>>>8,t[r+2]=e>>>16,t[r+3]=e>>>24,t}pe.writeUint32LE=nc;pe.writeInt32LE=nc;function H5(e,t){t===void 0&&(t=0);var r=Kl(e,t),i=Kl(e,t+4);return r*4294967296+i-(i>>31)*4294967296}pe.readInt64BE=H5;function K5(e,t){t===void 0&&(t=0);var r=Gl(e,t),i=Gl(e,t+4);return r*4294967296+i}pe.readUint64BE=K5;function G5(e,t){t===void 0&&(t=0);var r=Vl(e,t),i=Vl(e,t+4);return i*4294967296+r-(r>>31)*4294967296}pe.readInt64LE=G5;function V5(e,t){t===void 0&&(t=0);var r=Ql(e,t),i=Ql(e,t+4);return i*4294967296+r}pe.readUint64LE=V5;function Vm(e,t,r){return t===void 0&&(t=new Uint8Array(8)),r===void 0&&(r=0),ic(e/4294967296>>>0,t,r),ic(e>>>0,t,r+4),t}pe.writeUint64BE=Vm;pe.writeInt64BE=Vm;function Qm(e,t,r){return t===void 0&&(t=new Uint8Array(8)),r===void 0&&(r=0),nc(e>>>0,t,r),nc(e/4294967296>>>0,t,r+4),t}pe.writeUint64LE=Qm;pe.writeInt64LE=Qm;function Q5(e,t,r){if(r===void 0&&(r=0),e%8!==0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(e/8>t.length-r)throw new Error("readUintBE: array is too short for the given bitLength");for(var i=0,n=1,o=e/8+r-1;o>=r;o--)i+=t[o]*n,n*=256;return i}pe.readUintBE=Q5;function Y5(e,t,r){if(r===void 0&&(r=0),e%8!==0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(e/8>t.length-r)throw new Error("readUintLE: array is too short for the given bitLength");for(var i=0,n=1,o=r;o<r+e/8;o++)i+=t[o]*n,n*=256;return i}pe.readUintLE=Y5;function J5(e,t,r,i){if(r===void 0&&(r=new Uint8Array(e/8)),i===void 0&&(i=0),e%8!==0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!Hm.isSafeInteger(t))throw new Error("writeUintBE value must be an integer");for(var n=1,o=e/8+i-1;o>=i;o--)r[o]=t/n&255,n*=256;return r}pe.writeUintBE=J5;function W5(e,t,r,i){if(r===void 0&&(r=new Uint8Array(e/8)),i===void 0&&(i=0),e%8!==0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!Hm.isSafeInteger(t))throw new Error("writeUintLE value must be an integer");for(var n=1,o=i;o<i+e/8;o++)r[o]=t/n&255,n*=256;return r}pe.writeUintLE=W5;function X5(e,t){t===void 0&&(t=0);var r=new DataView(e.buffer,e.byteOffset,e.byteLength);return r.getFloat32(t)}pe.readFloat32BE=X5;function Z5(e,t){t===void 0&&(t=0);var r=new DataView(e.buffer,e.byteOffset,e.byteLength);return r.getFloat32(t,!0)}pe.readFloat32LE=Z5;function t_(e,t){t===void 0&&(t=0);var r=new DataView(e.buffer,e.byteOffset,e.byteLength);return r.getFloat64(t)}pe.readFloat64BE=t_;function e_(e,t){t===void 0&&(t=0);var r=new DataView(e.buffer,e.byteOffset,e.byteLength);return r.getFloat64(t,!0)}pe.readFloat64LE=e_;function r_(e,t,r){t===void 0&&(t=new Uint8Array(4)),r===void 0&&(r=0);var i=new DataView(t.buffer,t.byteOffset,t.byteLength);return i.setFloat32(r,e),t}pe.writeFloat32BE=r_;function i_(e,t,r){t===void 0&&(t=new Uint8Array(4)),r===void 0&&(r=0);var i=new DataView(t.buffer,t.byteOffset,t.byteLength);return i.setFloat32(r,e,!0),t}pe.writeFloat32LE=i_;function n_(e,t,r){t===void 0&&(t=new Uint8Array(8)),r===void 0&&(r=0);var i=new DataView(t.buffer,t.byteOffset,t.byteLength);return i.setFloat64(r,e),t}pe.writeFloat64BE=n_;function s_(e,t,r){t===void 0&&(t=new Uint8Array(8)),r===void 0&&(r=0);var i=new DataView(t.buffer,t.byteOffset,t.byteLength);return i.setFloat64(r,e,!0),t}pe.writeFloat64LE=s_;var Ci={};Object.defineProperty(Ci,"__esModule",{value:!0});function o_(e){for(var t=0;t<e.length;t++)e[t]=0;return e}Ci.wipe=o_;Object.defineProperty(_c,"__esModule",{value:!0});var Br=pe,Yl=Ci,a_=20;function h_(e,t,r){for(var i=1634760805,n=857760878,o=2036477234,f=1797285236,d=r[3]<<24|r[2]<<16|r[1]<<8|r[0],v=r[7]<<24|r[6]<<16|r[5]<<8|r[4],g=r[11]<<24|r[10]<<16|r[9]<<8|r[8],w=r[15]<<24|r[14]<<16|r[13]<<8|r[12],S=r[19]<<24|r[18]<<16|r[17]<<8|r[16],x=r[23]<<24|r[22]<<16|r[21]<<8|r[20],C=r[27]<<24|r[26]<<16|r[25]<<8|r[24],N=r[31]<<24|r[30]<<16|r[29]<<8|r[28],V=t[3]<<24|t[2]<<16|t[1]<<8|t[0],z=t[7]<<24|t[6]<<16|t[5]<<8|t[4],X=t[11]<<24|t[10]<<16|t[9]<<8|t[8],G=t[15]<<24|t[14]<<16|t[13]<<8|t[12],Y=i,$=n,j=o,k=f,_=d,L=v,ot=g,ct=w,ht=S,_t=x,h=C,u=N,p=V,b=z,M=X,D=G,O=0;O<a_;O+=2)Y=Y+_|0,p^=Y,p=p>>>16|p<<16,ht=ht+p|0,_^=ht,_=_>>>20|_<<12,$=$+L|0,b^=$,b=b>>>16|b<<16,_t=_t+b|0,L^=_t,L=L>>>20|L<<12,j=j+ot|0,M^=j,M=M>>>16|M<<16,h=h+M|0,ot^=h,ot=ot>>>20|ot<<12,k=k+ct|0,D^=k,D=D>>>16|D<<16,u=u+D|0,ct^=u,ct=ct>>>20|ct<<12,j=j+ot|0,M^=j,M=M>>>24|M<<8,h=h+M|0,ot^=h,ot=ot>>>25|ot<<7,k=k+ct|0,D^=k,D=D>>>24|D<<8,u=u+D|0,ct^=u,ct=ct>>>25|ct<<7,$=$+L|0,b^=$,b=b>>>24|b<<8,_t=_t+b|0,L^=_t,L=L>>>25|L<<7,Y=Y+_|0,p^=Y,p=p>>>24|p<<8,ht=ht+p|0,_^=ht,_=_>>>25|_<<7,Y=Y+L|0,D^=Y,D=D>>>16|D<<16,h=h+D|0,L^=h,L=L>>>20|L<<12,$=$+ot|0,p^=$,p=p>>>16|p<<16,u=u+p|0,ot^=u,ot=ot>>>20|ot<<12,j=j+ct|0,b^=j,b=b>>>16|b<<16,ht=ht+b|0,ct^=ht,ct=ct>>>20|ct<<12,k=k+_|0,M^=k,M=M>>>16|M<<16,_t=_t+M|0,_^=_t,_=_>>>20|_<<12,j=j+ct|0,b^=j,b=b>>>24|b<<8,ht=ht+b|0,ct^=ht,ct=ct>>>25|ct<<7,k=k+_|0,M^=k,M=M>>>24|M<<8,_t=_t+M|0,_^=_t,_=_>>>25|_<<7,$=$+ot|0,p^=$,p=p>>>24|p<<8,u=u+p|0,ot^=u,ot=ot>>>25|ot<<7,Y=Y+L|0,D^=Y,D=D>>>24|D<<8,h=h+D|0,L^=h,L=L>>>25|L<<7;Br.writeUint32LE(Y+i|0,e,0),Br.writeUint32LE($+n|0,e,4),Br.writeUint32LE(j+o|0,e,8),Br.writeUint32LE(k+f|0,e,12),Br.writeUint32LE(_+d|0,e,16),Br.writeUint32LE(L+v|0,e,20),Br.writeUint32LE(ot+g|0,e,24),Br.writeUint32LE(ct+w|0,e,28),Br.writeUint32LE(ht+S|0,e,32),Br.writeUint32LE(_t+x|0,e,36),Br.writeUint32LE(h+C|0,e,40),Br.writeUint32LE(u+N|0,e,44),Br.writeUint32LE(p+V|0,e,48),Br.writeUint32LE(b+z|0,e,52),Br.writeUint32LE(M+X|0,e,56),Br.writeUint32LE(D+G|0,e,60)}function Ym(e,t,r,i,n){if(n===void 0&&(n=0),e.length!==32)throw new Error("ChaCha: key size must be 32 bytes");if(i.length<r.length)throw new Error("ChaCha: destination is shorter than source");var o,f;if(n===0){if(t.length!==8&&t.length!==12)throw new Error("ChaCha nonce must be 8 or 12 bytes");o=new Uint8Array(16),f=o.length-t.length,o.set(t,f)}else{if(t.length!==16)throw new Error("ChaCha nonce with counter must be 16 bytes");o=t,f=n}for(var d=new Uint8Array(64),v=0;v<r.length;v+=64){h_(d,o,e);for(var g=v;g<v+64&&g<r.length;g++)i[g]=r[g]^d[g-v];c_(o,0,f)}return Yl.wipe(d),n===0&&Yl.wipe(o),i}_c.streamXOR=Ym;function u_(e,t,r,i){return i===void 0&&(i=0),Yl.wipe(r),Ym(e,t,r,r,i)}_c.stream=u_;function c_(e,t,r){for(var i=1;r--;)i=i+(e[t]&255)|0,e[t]=i&255,i>>>=8,t++;if(i>0)throw new Error("ChaCha: counter overflow")}var Jm={},ks={};Object.defineProperty(ks,"__esModule",{value:!0});function f_(e,t,r){return~(e-1)&t|e-1&r}ks.select=f_;function l_(e,t){return(e|0)-(t|0)-1>>>31&1}ks.lessOrEqual=l_;function Wm(e,t){if(e.length!==t.length)return 0;for(var r=0,i=0;i<e.length;i++)r|=e[i]^t[i];return 1&r-1>>>8}ks.compare=Wm;function d_(e,t){return e.length===0||t.length===0?!1:Wm(e,t)!==0}ks.equal=d_;(function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=ks,r=Ci;e.DIGEST_LENGTH=16;var i=function(){function f(d){this.digestLength=e.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var v=d[0]|d[1]<<8;this._r[0]=v&8191;var g=d[2]|d[3]<<8;this._r[1]=(v>>>13|g<<3)&8191;var w=d[4]|d[5]<<8;this._r[2]=(g>>>10|w<<6)&7939;var S=d[6]|d[7]<<8;this._r[3]=(w>>>7|S<<9)&8191;var x=d[8]|d[9]<<8;this._r[4]=(S>>>4|x<<12)&255,this._r[5]=x>>>1&8190;var C=d[10]|d[11]<<8;this._r[6]=(x>>>14|C<<2)&8191;var N=d[12]|d[13]<<8;this._r[7]=(C>>>11|N<<5)&8065;var V=d[14]|d[15]<<8;this._r[8]=(N>>>8|V<<8)&8191,this._r[9]=V>>>5&127,this._pad[0]=d[16]|d[17]<<8,this._pad[1]=d[18]|d[19]<<8,this._pad[2]=d[20]|d[21]<<8,this._pad[3]=d[22]|d[23]<<8,this._pad[4]=d[24]|d[25]<<8,this._pad[5]=d[26]|d[27]<<8,this._pad[6]=d[28]|d[29]<<8,this._pad[7]=d[30]|d[31]<<8}return f.prototype._blocks=function(d,v,g){for(var w=this._fin?0:2048,S=this._h[0],x=this._h[1],C=this._h[2],N=this._h[3],V=this._h[4],z=this._h[5],X=this._h[6],G=this._h[7],Y=this._h[8],$=this._h[9],j=this._r[0],k=this._r[1],_=this._r[2],L=this._r[3],ot=this._r[4],ct=this._r[5],ht=this._r[6],_t=this._r[7],h=this._r[8],u=this._r[9];g>=16;){var p=d[v+0]|d[v+1]<<8;S+=p&8191;var b=d[v+2]|d[v+3]<<8;x+=(p>>>13|b<<3)&8191;var M=d[v+4]|d[v+5]<<8;C+=(b>>>10|M<<6)&8191;var D=d[v+6]|d[v+7]<<8;N+=(M>>>7|D<<9)&8191;var O=d[v+8]|d[v+9]<<8;V+=(D>>>4|O<<12)&8191,z+=O>>>1&8191;var A=d[v+10]|d[v+11]<<8;X+=(O>>>14|A<<2)&8191;var c=d[v+12]|d[v+13]<<8;G+=(A>>>11|c<<5)&8191;var I=d[v+14]|d[v+15]<<8;Y+=(c>>>8|I<<8)&8191,$+=I>>>5|w;var Z=0,nt=Z;nt+=S*j,nt+=x*(5*u),nt+=C*(5*h),nt+=N*(5*_t),nt+=V*(5*ht),Z=nt>>>13,nt&=8191,nt+=z*(5*ct),nt+=X*(5*ot),nt+=G*(5*L),nt+=Y*(5*_),nt+=$*(5*k),Z+=nt>>>13,nt&=8191;var m=Z;m+=S*k,m+=x*j,m+=C*(5*u),m+=N*(5*h),m+=V*(5*_t),Z=m>>>13,m&=8191,m+=z*(5*ht),m+=X*(5*ct),m+=G*(5*ot),m+=Y*(5*L),m+=$*(5*_),Z+=m>>>13,m&=8191;var H=Z;H+=S*_,H+=x*k,H+=C*j,H+=N*(5*u),H+=V*(5*h),Z=H>>>13,H&=8191,H+=z*(5*_t),H+=X*(5*ht),H+=G*(5*ct),H+=Y*(5*ot),H+=$*(5*L),Z+=H>>>13,H&=8191;var R=Z;R+=S*L,R+=x*_,R+=C*k,R+=N*j,R+=V*(5*u),Z=R>>>13,R&=8191,R+=z*(5*h),R+=X*(5*_t),R+=G*(5*ht),R+=Y*(5*ct),R+=$*(5*ot),Z+=R>>>13,R&=8191;var T=Z;T+=S*ot,T+=x*L,T+=C*_,T+=N*k,T+=V*j,Z=T>>>13,T&=8191,T+=z*(5*u),T+=X*(5*h),T+=G*(5*_t),T+=Y*(5*ht),T+=$*(5*ct),Z+=T>>>13,T&=8191;var q=Z;q+=S*ct,q+=x*ot,q+=C*L,q+=N*_,q+=V*k,Z=q>>>13,q&=8191,q+=z*j,q+=X*(5*u),q+=G*(5*h),q+=Y*(5*_t),q+=$*(5*ht),Z+=q>>>13,q&=8191;var y=Z;y+=S*ht,y+=x*ct,y+=C*ot,y+=N*L,y+=V*_,Z=y>>>13,y&=8191,y+=z*k,y+=X*j,y+=G*(5*u),y+=Y*(5*h),y+=$*(5*_t),Z+=y>>>13,y&=8191;var B=Z;B+=S*_t,B+=x*ht,B+=C*ct,B+=N*ot,B+=V*L,Z=B>>>13,B&=8191,B+=z*_,B+=X*k,B+=G*j,B+=Y*(5*u),B+=$*(5*h),Z+=B>>>13,B&=8191;var W=Z;W+=S*h,W+=x*_t,W+=C*ht,W+=N*ct,W+=V*ot,Z=W>>>13,W&=8191,W+=z*L,W+=X*_,W+=G*k,W+=Y*j,W+=$*(5*u),Z+=W>>>13,W&=8191;var st=Z;st+=S*u,st+=x*h,st+=C*_t,st+=N*ht,st+=V*ct,Z=st>>>13,st&=8191,st+=z*ot,st+=X*L,st+=G*_,st+=Y*k,st+=$*j,Z+=st>>>13,st&=8191,Z=(Z<<2)+Z|0,Z=Z+nt|0,nt=Z&8191,Z=Z>>>13,m+=Z,S=nt,x=m,C=H,N=R,V=T,z=q,X=y,G=B,Y=W,$=st,v+=16,g-=16}this._h[0]=S,this._h[1]=x,this._h[2]=C,this._h[3]=N,this._h[4]=V,this._h[5]=z,this._h[6]=X,this._h[7]=G,this._h[8]=Y,this._h[9]=$},f.prototype.finish=function(d,v){v===void 0&&(v=0);var g=new Uint16Array(10),w,S,x,C;if(this._leftover){for(C=this._leftover,this._buffer[C++]=1;C<16;C++)this._buffer[C]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(w=this._h[1]>>>13,this._h[1]&=8191,C=2;C<10;C++)this._h[C]+=w,w=this._h[C]>>>13,this._h[C]&=8191;for(this._h[0]+=w*5,w=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=w,w=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=w,g[0]=this._h[0]+5,w=g[0]>>>13,g[0]&=8191,C=1;C<10;C++)g[C]=this._h[C]+w,w=g[C]>>>13,g[C]&=8191;for(g[9]-=8192,S=(w^1)-1,C=0;C<10;C++)g[C]&=S;for(S=~S,C=0;C<10;C++)this._h[C]=this._h[C]&S|g[C];for(this._h[0]=(this._h[0]|this._h[1]<<13)&65535,this._h[1]=(this._h[1]>>>3|this._h[2]<<10)&65535,this._h[2]=(this._h[2]>>>6|this._h[3]<<7)&65535,this._h[3]=(this._h[3]>>>9|this._h[4]<<4)&65535,this._h[4]=(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14)&65535,this._h[5]=(this._h[6]>>>2|this._h[7]<<11)&65535,this._h[6]=(this._h[7]>>>5|this._h[8]<<8)&65535,this._h[7]=(this._h[8]>>>8|this._h[9]<<5)&65535,x=this._h[0]+this._pad[0],this._h[0]=x&65535,C=1;C<8;C++)x=(this._h[C]+this._pad[C]|0)+(x>>>16)|0,this._h[C]=x&65535;return d[v+0]=this._h[0]>>>0,d[v+1]=this._h[0]>>>8,d[v+2]=this._h[1]>>>0,d[v+3]=this._h[1]>>>8,d[v+4]=this._h[2]>>>0,d[v+5]=this._h[2]>>>8,d[v+6]=this._h[3]>>>0,d[v+7]=this._h[3]>>>8,d[v+8]=this._h[4]>>>0,d[v+9]=this._h[4]>>>8,d[v+10]=this._h[5]>>>0,d[v+11]=this._h[5]>>>8,d[v+12]=this._h[6]>>>0,d[v+13]=this._h[6]>>>8,d[v+14]=this._h[7]>>>0,d[v+15]=this._h[7]>>>8,this._finished=!0,this},f.prototype.update=function(d){var v=0,g=d.length,w;if(this._leftover){w=16-this._leftover,w>g&&(w=g);for(var S=0;S<w;S++)this._buffer[this._leftover+S]=d[v+S];if(g-=w,v+=w,this._leftover+=w,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(g>=16&&(w=g-g%16,this._blocks(d,v,w),v+=w,g-=w),g){for(var S=0;S<g;S++)this._buffer[this._leftover+S]=d[v+S];this._leftover+=g}return this},f.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var d=new Uint8Array(16);return this.finish(d),d},f.prototype.clean=function(){return r.wipe(this._buffer),r.wipe(this._r),r.wipe(this._h),r.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},f}();e.Poly1305=i;function n(f,d){var v=new i(f);v.update(d);var g=v.digest();return v.clean(),g}e.oneTimeAuth=n;function o(f,d){return f.length!==e.DIGEST_LENGTH||d.length!==e.DIGEST_LENGTH?!1:t.equal(f,d)}e.equal=o})(Jm);(function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=_c,r=Jm,i=Ci,n=pe,o=ks;e.KEY_LENGTH=32,e.NONCE_LENGTH=12,e.TAG_LENGTH=16;var f=new Uint8Array(16),d=function(){function v(g){if(this.nonceLength=e.NONCE_LENGTH,this.tagLength=e.TAG_LENGTH,g.length!==e.KEY_LENGTH)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(g)}return v.prototype.seal=function(g,w,S,x){if(g.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var C=new Uint8Array(16);C.set(g,C.length-g.length);var N=new Uint8Array(32);t.stream(this._key,C,N,4);var V=w.length+this.tagLength,z;if(x){if(x.length!==V)throw new Error("ChaCha20Poly1305: incorrect destination length");z=x}else z=new Uint8Array(V);return t.streamXOR(this._key,C,w,z,4),this._authenticate(z.subarray(z.length-this.tagLength,z.length),N,z.subarray(0,z.length-this.tagLength),S),i.wipe(C),z},v.prototype.open=function(g,w,S,x){if(g.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(w.length<this.tagLength)return null;var C=new Uint8Array(16);C.set(g,C.length-g.length);var N=new Uint8Array(32);t.stream(this._key,C,N,4);var V=new Uint8Array(this.tagLength);if(this._authenticate(V,N,w.subarray(0,w.length-this.tagLength),S),!o.equal(V,w.subarray(w.length-this.tagLength,w.length)))return null;var z=w.length-this.tagLength,X;if(x){if(x.length!==z)throw new Error("ChaCha20Poly1305: incorrect destination length");X=x}else X=new Uint8Array(z);return t.streamXOR(this._key,C,w.subarray(0,w.length-this.tagLength),X,4),i.wipe(C),X},v.prototype.clean=function(){return i.wipe(this._key),this},v.prototype._authenticate=function(g,w,S,x){var C=new r.Poly1305(w);x&&(C.update(x),x.length%16>0&&C.update(f.subarray(x.length%16))),C.update(S),S.length%16>0&&C.update(f.subarray(S.length%16));var N=new Uint8Array(8);x&&n.writeUint64LE(x.length,N),C.update(N),n.writeUint64LE(S.length,N),C.update(N);for(var V=C.digest(),z=0;z<V.length;z++)g[z]=V[z];C.clean(),i.wipe(V),i.wipe(N)},v}();e.ChaCha20Poly1305=d})(C0);var Xm={},dh={},O0={};Object.defineProperty(O0,"__esModule",{value:!0});function p_(e){return typeof e.saveState<"u"&&typeof e.restoreState<"u"&&typeof e.cleanSavedState<"u"}O0.isSerializableHash=p_;Object.defineProperty(dh,"__esModule",{value:!0});var xn=O0,g_=ks,m_=Ci,Zm=function(){function e(t,r){this._finished=!1,this._inner=new t,this._outer=new t,this.blockSize=this._outer.blockSize,this.digestLength=this._outer.digestLength;var i=new Uint8Array(this.blockSize);r.length>this.blockSize?this._inner.update(r).finish(i).clean():i.set(r);for(var n=0;n<i.length;n++)i[n]^=54;this._inner.update(i);for(var n=0;n<i.length;n++)i[n]^=106;this._outer.update(i),xn.isSerializableHash(this._inner)&&xn.isSerializableHash(this._outer)&&(this._innerKeyedState=this._inner.saveState(),this._outerKeyedState=this._outer.saveState()),m_.wipe(i)}return e.prototype.reset=function(){if(!xn.isSerializableHash(this._inner)||!xn.isSerializableHash(this._outer))throw new Error("hmac: can't reset() because hash doesn't implement restoreState()");return this._inner.restoreState(this._innerKeyedState),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},e.prototype.clean=function(){xn.isSerializableHash(this._inner)&&this._inner.cleanSavedState(this._innerKeyedState),xn.isSerializableHash(this._outer)&&this._outer.cleanSavedState(this._outerKeyedState),this._inner.clean(),this._outer.clean()},e.prototype.update=function(t){return this._inner.update(t),this},e.prototype.finish=function(t){return this._finished?(this._outer.finish(t),this):(this._inner.finish(t),this._outer.update(t.subarray(0,this.digestLength)).finish(t),this._finished=!0,this)},e.prototype.digest=function(){var t=new Uint8Array(this.digestLength);return this.finish(t),t},e.prototype.saveState=function(){if(!xn.isSerializableHash(this._inner))throw new Error("hmac: can't saveState() because hash doesn't implement it");return this._inner.saveState()},e.prototype.restoreState=function(t){if(!xn.isSerializableHash(this._inner)||!xn.isSerializableHash(this._outer))throw new Error("hmac: can't restoreState() because hash doesn't implement it");return this._inner.restoreState(t),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},e.prototype.cleanSavedState=function(t){if(!xn.isSerializableHash(this._inner))throw new Error("hmac: can't cleanSavedState() because hash doesn't implement it");this._inner.cleanSavedState(t)},e}();dh.HMAC=Zm;function v_(e,t,r){var i=new Zm(e,t);i.update(r);var n=i.digest();return i.clean(),n}dh.hmac=v_;dh.equal=g_.equal;Object.defineProperty(Xm,"__esModule",{value:!0});var m1=dh,v1=Ci,y_=function(){function e(t,r,i,n){i===void 0&&(i=new Uint8Array(0)),this._counter=new Uint8Array(1),this._hash=t,this._info=n;var o=m1.hmac(this._hash,i,r);this._hmac=new m1.HMAC(t,o),this._buffer=new Uint8Array(this._hmac.digestLength),this._bufpos=this._buffer.length}return e.prototype._fillBuffer=function(){this._counter[0]++;var t=this._counter[0];if(t===0)throw new Error("hkdf: cannot expand more");this._hmac.reset(),t>1&&this._hmac.update(this._buffer),this._info&&this._hmac.update(this._info),this._hmac.update(this._counter),this._hmac.finish(this._buffer),this._bufpos=0},e.prototype.expand=function(t){for(var r=new Uint8Array(t),i=0;i<r.length;i++)this._bufpos===this._buffer.length&&this._fillBuffer(),r[i]=this._buffer[this._bufpos++];return r},e.prototype.clean=function(){this._hmac.clean(),v1.wipe(this._buffer),v1.wipe(this._counter),this._bufpos=0},e}(),w_=Xm.HKDF=y_,oa={},Ec={},Sc={};Object.defineProperty(Sc,"__esModule",{value:!0});Sc.BrowserRandomSource=void 0;const y1=65536;class b_{constructor(){this.isAvailable=!1,this.isInstantiated=!1;const t=typeof self<"u"?self.crypto||self.msCrypto:null;t&&t.getRandomValues!==void 0&&(this._crypto=t,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(t){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");const r=new Uint8Array(t);for(let i=0;i<r.length;i+=y1)this._crypto.getRandomValues(r.subarray(i,i+Math.min(r.length-i,y1)));return r}}Sc.BrowserRandomSource=b_;var Ic={};Object.defineProperty(Ic,"__esModule",{value:!0});Ic.NodeRandomSource=void 0;const A_=Ci;class __{constructor(){if(this.isAvailable=!1,this.isInstantiated=!1,typeof G8<"u"){const t=V8();t&&t.randomBytes&&(this._crypto=t,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(t){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let r=this._crypto.randomBytes(t);if(r.length!==t)throw new Error("NodeRandomSource: got fewer bytes than requested");const i=new Uint8Array(t);for(let n=0;n<i.length;n++)i[n]=r[n];return(0,A_.wipe)(r),i}}Ic.NodeRandomSource=__;Object.defineProperty(Ec,"__esModule",{value:!0});Ec.SystemRandomSource=void 0;const E_=Sc,S_=Ic;class I_{constructor(){if(this.isAvailable=!1,this.name="",this._source=new E_.BrowserRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Browser";return}if(this._source=new S_.NodeRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Node";return}}randomBytes(t){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(t)}}Ec.SystemRandomSource=I_;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.randomStringForEntropy=e.randomString=e.randomUint32=e.randomBytes=e.defaultRandomSource=void 0;const t=Ec,r=pe,i=Ci;e.defaultRandomSource=new t.SystemRandomSource;function n(g,w=e.defaultRandomSource){return w.randomBytes(g)}e.randomBytes=n;function o(g=e.defaultRandomSource){const w=n(4,g),S=(0,r.readUint32LE)(w);return(0,i.wipe)(w),S}e.randomUint32=o;const f="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function d(g,w=f,S=e.defaultRandomSource){if(w.length<2)throw new Error("randomString charset is too short");if(w.length>256)throw new Error("randomString charset is too long");let x="";const C=w.length,N=256-256%C;for(;g>0;){const V=n(Math.ceil(g*256/N),S);for(let z=0;z<V.length&&g>0;z++){const X=V[z];X<N&&(x+=w.charAt(X%C),g--)}(0,i.wipe)(V)}return x}e.randomString=d;function v(g,w=f,S=e.defaultRandomSource){const x=Math.ceil(g/(Math.log(w.length)/Math.LN2));return d(x,w,S)}e.randomStringForEntropy=v})(oa);var Mc={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=pe,r=Ci;e.DIGEST_LENGTH=32,e.BLOCK_SIZE=64;var i=function(){function d(){this.digestLength=e.DIGEST_LENGTH,this.blockSize=e.BLOCK_SIZE,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return d.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},d.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},d.prototype.clean=function(){r.wipe(this._buffer),r.wipe(this._temp),this.reset()},d.prototype.update=function(v,g){if(g===void 0&&(g=v.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var w=0;if(this._bytesHashed+=g,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&g>0;)this._buffer[this._bufferLength++]=v[w++],g--;this._bufferLength===this.blockSize&&(o(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(g>=this.blockSize&&(w=o(this._temp,this._state,v,w,g),g%=this.blockSize);g>0;)this._buffer[this._bufferLength++]=v[w++],g--;return this},d.prototype.finish=function(v){if(!this._finished){var g=this._bytesHashed,w=this._bufferLength,S=g/536870912|0,x=g<<3,C=g%64<56?64:128;this._buffer[w]=128;for(var N=w+1;N<C-8;N++)this._buffer[N]=0;t.writeUint32BE(S,this._buffer,C-8),t.writeUint32BE(x,this._buffer,C-4),o(this._temp,this._state,this._buffer,0,C),this._finished=!0}for(var N=0;N<this.digestLength/4;N++)t.writeUint32BE(this._state[N],v,N*4);return this},d.prototype.digest=function(){var v=new Uint8Array(this.digestLength);return this.finish(v),v},d.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},d.prototype.restoreState=function(v){return this._state.set(v.state),this._bufferLength=v.bufferLength,v.buffer&&this._buffer.set(v.buffer),this._bytesHashed=v.bytesHashed,this._finished=!1,this},d.prototype.cleanSavedState=function(v){r.wipe(v.state),v.buffer&&r.wipe(v.buffer),v.bufferLength=0,v.bytesHashed=0},d}();e.SHA256=i;var n=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function o(d,v,g,w,S){for(;S>=64;){for(var x=v[0],C=v[1],N=v[2],V=v[3],z=v[4],X=v[5],G=v[6],Y=v[7],$=0;$<16;$++){var j=w+$*4;d[$]=t.readUint32BE(g,j)}for(var $=16;$<64;$++){var k=d[$-2],_=(k>>>17|k<<15)^(k>>>19|k<<13)^k>>>10;k=d[$-15];var L=(k>>>7|k<<25)^(k>>>18|k<<14)^k>>>3;d[$]=(_+d[$-7]|0)+(L+d[$-16]|0)}for(var $=0;$<64;$++){var _=(((z>>>6|z<<26)^(z>>>11|z<<21)^(z>>>25|z<<7))+(z&X^~z&G)|0)+(Y+(n[$]+d[$]|0)|0)|0,L=((x>>>2|x<<30)^(x>>>13|x<<19)^(x>>>22|x<<10))+(x&C^x&N^C&N)|0;Y=G,G=X,X=z,z=V+_|0,V=N,N=C,C=x,x=_+L|0}v[0]+=x,v[1]+=C,v[2]+=N,v[3]+=V,v[4]+=z,v[5]+=X,v[6]+=G,v[7]+=Y,w+=64,S-=64}return w}function f(d){var v=new i;v.update(d);var g=v.digest();return v.clean(),g}e.hash=f})(Mc);var N0={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.sharedKey=e.generateKeyPair=e.generateKeyPairFromSeed=e.scalarMultBase=e.scalarMult=e.SHARED_KEY_LENGTH=e.SECRET_KEY_LENGTH=e.PUBLIC_KEY_LENGTH=void 0;const t=oa,r=Ci;e.PUBLIC_KEY_LENGTH=32,e.SECRET_KEY_LENGTH=32,e.SHARED_KEY_LENGTH=32;function i($){const j=new Float64Array(16);if($)for(let k=0;k<$.length;k++)j[k]=$[k];return j}const n=new Uint8Array(32);n[0]=9;const o=i([56129,1]);function f($){let j=1;for(let k=0;k<16;k++){let _=$[k]+j+65535;j=Math.floor(_/65536),$[k]=_-j*65536}$[0]+=j-1+37*(j-1)}function d($,j,k){const _=~(k-1);for(let L=0;L<16;L++){const ot=_&($[L]^j[L]);$[L]^=ot,j[L]^=ot}}function v($,j){const k=i(),_=i();for(let L=0;L<16;L++)_[L]=j[L];f(_),f(_),f(_);for(let L=0;L<2;L++){k[0]=_[0]-65517;for(let ct=1;ct<15;ct++)k[ct]=_[ct]-65535-(k[ct-1]>>16&1),k[ct-1]&=65535;k[15]=_[15]-32767-(k[14]>>16&1);const ot=k[15]>>16&1;k[14]&=65535,d(_,k,1-ot)}for(let L=0;L<16;L++)$[2*L]=_[L]&255,$[2*L+1]=_[L]>>8}function g($,j){for(let k=0;k<16;k++)$[k]=j[2*k]+(j[2*k+1]<<8);$[15]&=32767}function w($,j,k){for(let _=0;_<16;_++)$[_]=j[_]+k[_]}function S($,j,k){for(let _=0;_<16;_++)$[_]=j[_]-k[_]}function x($,j,k){let _,L,ot=0,ct=0,ht=0,_t=0,h=0,u=0,p=0,b=0,M=0,D=0,O=0,A=0,c=0,I=0,Z=0,nt=0,m=0,H=0,R=0,T=0,q=0,y=0,B=0,W=0,st=0,rt=0,Et=0,It=0,bt=0,me=0,Pt=0,At=k[0],Jt=k[1],vt=k[2],yt=k[3],re=k[4],gt=k[5],wt=k[6],Qt=k[7],mt=k[8],St=k[9],Wt=k[10],Mt=k[11],Dt=k[12],oe=k[13],Ct=k[14],xt=k[15];_=j[0],ot+=_*At,ct+=_*Jt,ht+=_*vt,_t+=_*yt,h+=_*re,u+=_*gt,p+=_*wt,b+=_*Qt,M+=_*mt,D+=_*St,O+=_*Wt,A+=_*Mt,c+=_*Dt,I+=_*oe,Z+=_*Ct,nt+=_*xt,_=j[1],ct+=_*At,ht+=_*Jt,_t+=_*vt,h+=_*yt,u+=_*re,p+=_*gt,b+=_*wt,M+=_*Qt,D+=_*mt,O+=_*St,A+=_*Wt,c+=_*Mt,I+=_*Dt,Z+=_*oe,nt+=_*Ct,m+=_*xt,_=j[2],ht+=_*At,_t+=_*Jt,h+=_*vt,u+=_*yt,p+=_*re,b+=_*gt,M+=_*wt,D+=_*Qt,O+=_*mt,A+=_*St,c+=_*Wt,I+=_*Mt,Z+=_*Dt,nt+=_*oe,m+=_*Ct,H+=_*xt,_=j[3],_t+=_*At,h+=_*Jt,u+=_*vt,p+=_*yt,b+=_*re,M+=_*gt,D+=_*wt,O+=_*Qt,A+=_*mt,c+=_*St,I+=_*Wt,Z+=_*Mt,nt+=_*Dt,m+=_*oe,H+=_*Ct,R+=_*xt,_=j[4],h+=_*At,u+=_*Jt,p+=_*vt,b+=_*yt,M+=_*re,D+=_*gt,O+=_*wt,A+=_*Qt,c+=_*mt,I+=_*St,Z+=_*Wt,nt+=_*Mt,m+=_*Dt,H+=_*oe,R+=_*Ct,T+=_*xt,_=j[5],u+=_*At,p+=_*Jt,b+=_*vt,M+=_*yt,D+=_*re,O+=_*gt,A+=_*wt,c+=_*Qt,I+=_*mt,Z+=_*St,nt+=_*Wt,m+=_*Mt,H+=_*Dt,R+=_*oe,T+=_*Ct,q+=_*xt,_=j[6],p+=_*At,b+=_*Jt,M+=_*vt,D+=_*yt,O+=_*re,A+=_*gt,c+=_*wt,I+=_*Qt,Z+=_*mt,nt+=_*St,m+=_*Wt,H+=_*Mt,R+=_*Dt,T+=_*oe,q+=_*Ct,y+=_*xt,_=j[7],b+=_*At,M+=_*Jt,D+=_*vt,O+=_*yt,A+=_*re,c+=_*gt,I+=_*wt,Z+=_*Qt,nt+=_*mt,m+=_*St,H+=_*Wt,R+=_*Mt,T+=_*Dt,q+=_*oe,y+=_*Ct,B+=_*xt,_=j[8],M+=_*At,D+=_*Jt,O+=_*vt,A+=_*yt,c+=_*re,I+=_*gt,Z+=_*wt,nt+=_*Qt,m+=_*mt,H+=_*St,R+=_*Wt,T+=_*Mt,q+=_*Dt,y+=_*oe,B+=_*Ct,W+=_*xt,_=j[9],D+=_*At,O+=_*Jt,A+=_*vt,c+=_*yt,I+=_*re,Z+=_*gt,nt+=_*wt,m+=_*Qt,H+=_*mt,R+=_*St,T+=_*Wt,q+=_*Mt,y+=_*Dt,B+=_*oe,W+=_*Ct,st+=_*xt,_=j[10],O+=_*At,A+=_*Jt,c+=_*vt,I+=_*yt,Z+=_*re,nt+=_*gt,m+=_*wt,H+=_*Qt,R+=_*mt,T+=_*St,q+=_*Wt,y+=_*Mt,B+=_*Dt,W+=_*oe,st+=_*Ct,rt+=_*xt,_=j[11],A+=_*At,c+=_*Jt,I+=_*vt,Z+=_*yt,nt+=_*re,m+=_*gt,H+=_*wt,R+=_*Qt,T+=_*mt,q+=_*St,y+=_*Wt,B+=_*Mt,W+=_*Dt,st+=_*oe,rt+=_*Ct,Et+=_*xt,_=j[12],c+=_*At,I+=_*Jt,Z+=_*vt,nt+=_*yt,m+=_*re,H+=_*gt,R+=_*wt,T+=_*Qt,q+=_*mt,y+=_*St,B+=_*Wt,W+=_*Mt,st+=_*Dt,rt+=_*oe,Et+=_*Ct,It+=_*xt,_=j[13],I+=_*At,Z+=_*Jt,nt+=_*vt,m+=_*yt,H+=_*re,R+=_*gt,T+=_*wt,q+=_*Qt,y+=_*mt,B+=_*St,W+=_*Wt,st+=_*Mt,rt+=_*Dt,Et+=_*oe,It+=_*Ct,bt+=_*xt,_=j[14],Z+=_*At,nt+=_*Jt,m+=_*vt,H+=_*yt,R+=_*re,T+=_*gt,q+=_*wt,y+=_*Qt,B+=_*mt,W+=_*St,st+=_*Wt,rt+=_*Mt,Et+=_*Dt,It+=_*oe,bt+=_*Ct,me+=_*xt,_=j[15],nt+=_*At,m+=_*Jt,H+=_*vt,R+=_*yt,T+=_*re,q+=_*gt,y+=_*wt,B+=_*Qt,W+=_*mt,st+=_*St,rt+=_*Wt,Et+=_*Mt,It+=_*Dt,bt+=_*oe,me+=_*Ct,Pt+=_*xt,ot+=38*m,ct+=38*H,ht+=38*R,_t+=38*T,h+=38*q,u+=38*y,p+=38*B,b+=38*W,M+=38*st,D+=38*rt,O+=38*Et,A+=38*It,c+=38*bt,I+=38*me,Z+=38*Pt,L=1,_=ot+L+65535,L=Math.floor(_/65536),ot=_-L*65536,_=ct+L+65535,L=Math.floor(_/65536),ct=_-L*65536,_=ht+L+65535,L=Math.floor(_/65536),ht=_-L*65536,_=_t+L+65535,L=Math.floor(_/65536),_t=_-L*65536,_=h+L+65535,L=Math.floor(_/65536),h=_-L*65536,_=u+L+65535,L=Math.floor(_/65536),u=_-L*65536,_=p+L+65535,L=Math.floor(_/65536),p=_-L*65536,_=b+L+65535,L=Math.floor(_/65536),b=_-L*65536,_=M+L+65535,L=Math.floor(_/65536),M=_-L*65536,_=D+L+65535,L=Math.floor(_/65536),D=_-L*65536,_=O+L+65535,L=Math.floor(_/65536),O=_-L*65536,_=A+L+65535,L=Math.floor(_/65536),A=_-L*65536,_=c+L+65535,L=Math.floor(_/65536),c=_-L*65536,_=I+L+65535,L=Math.floor(_/65536),I=_-L*65536,_=Z+L+65535,L=Math.floor(_/65536),Z=_-L*65536,_=nt+L+65535,L=Math.floor(_/65536),nt=_-L*65536,ot+=L-1+37*(L-1),L=1,_=ot+L+65535,L=Math.floor(_/65536),ot=_-L*65536,_=ct+L+65535,L=Math.floor(_/65536),ct=_-L*65536,_=ht+L+65535,L=Math.floor(_/65536),ht=_-L*65536,_=_t+L+65535,L=Math.floor(_/65536),_t=_-L*65536,_=h+L+65535,L=Math.floor(_/65536),h=_-L*65536,_=u+L+65535,L=Math.floor(_/65536),u=_-L*65536,_=p+L+65535,L=Math.floor(_/65536),p=_-L*65536,_=b+L+65535,L=Math.floor(_/65536),b=_-L*65536,_=M+L+65535,L=Math.floor(_/65536),M=_-L*65536,_=D+L+65535,L=Math.floor(_/65536),D=_-L*65536,_=O+L+65535,L=Math.floor(_/65536),O=_-L*65536,_=A+L+65535,L=Math.floor(_/65536),A=_-L*65536,_=c+L+65535,L=Math.floor(_/65536),c=_-L*65536,_=I+L+65535,L=Math.floor(_/65536),I=_-L*65536,_=Z+L+65535,L=Math.floor(_/65536),Z=_-L*65536,_=nt+L+65535,L=Math.floor(_/65536),nt=_-L*65536,ot+=L-1+37*(L-1),$[0]=ot,$[1]=ct,$[2]=ht,$[3]=_t,$[4]=h,$[5]=u,$[6]=p,$[7]=b,$[8]=M,$[9]=D,$[10]=O,$[11]=A,$[12]=c,$[13]=I,$[14]=Z,$[15]=nt}function C($,j){x($,j,j)}function N($,j){const k=i();for(let _=0;_<16;_++)k[_]=j[_];for(let _=253;_>=0;_--)C(k,k),_!==2&&_!==4&&x(k,k,j);for(let _=0;_<16;_++)$[_]=k[_]}function V($,j){const k=new Uint8Array(32),_=new Float64Array(80),L=i(),ot=i(),ct=i(),ht=i(),_t=i(),h=i();for(let M=0;M<31;M++)k[M]=$[M];k[31]=$[31]&127|64,k[0]&=248,g(_,j);for(let M=0;M<16;M++)ot[M]=_[M];L[0]=ht[0]=1;for(let M=254;M>=0;--M){const D=k[M>>>3]>>>(M&7)&1;d(L,ot,D),d(ct,ht,D),w(_t,L,ct),S(L,L,ct),w(ct,ot,ht),S(ot,ot,ht),C(ht,_t),C(h,L),x(L,ct,L),x(ct,ot,_t),w(_t,L,ct),S(L,L,ct),C(ot,L),S(ct,ht,h),x(L,ct,o),w(L,L,ht),x(ct,ct,L),x(L,ht,h),x(ht,ot,_),C(ot,_t),d(L,ot,D),d(ct,ht,D)}for(let M=0;M<16;M++)_[M+16]=L[M],_[M+32]=ct[M],_[M+48]=ot[M],_[M+64]=ht[M];const u=_.subarray(32),p=_.subarray(16);N(u,u),x(p,p,u);const b=new Uint8Array(32);return v(b,p),b}e.scalarMult=V;function z($){return V($,n)}e.scalarMultBase=z;function X($){if($.length!==e.SECRET_KEY_LENGTH)throw new Error(`x25519: seed must be ${e.SECRET_KEY_LENGTH} bytes`);const j=new Uint8Array($);return{publicKey:z(j),secretKey:j}}e.generateKeyPairFromSeed=X;function G($){const j=(0,t.randomBytes)(32,$),k=X(j);return(0,r.wipe)(j),k}e.generateKeyPair=G;function Y($,j,k=!1){if($.length!==e.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect secret key length");if(j.length!==e.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect public key length");const _=V($,j);if(k){let L=0;for(let ot=0;ot<_.length;ot++)L|=_[ot];if(L===0)throw new Error("X25519: invalid shared key")}return _}e.sharedKey=Y})(N0);function tv(e=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(e):new Uint8Array(e)}function Jl(e,t){t||(t=e.reduce((n,o)=>n+o.length,0));const r=tv(t);let i=0;for(const n of e)r.set(n,i),i+=n.length;return r}function M_(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),i=0;i<r.length;i++)r[i]=255;for(var n=0;n<e.length;n++){var o=e.charAt(n),f=o.charCodeAt(0);if(r[f]!==255)throw new TypeError(o+" is ambiguous");r[f]=n}var d=e.length,v=e.charAt(0),g=Math.log(d)/Math.log(256),w=Math.log(256)/Math.log(d);function S(N){if(N instanceof Uint8Array||(ArrayBuffer.isView(N)?N=new Uint8Array(N.buffer,N.byteOffset,N.byteLength):Array.isArray(N)&&(N=Uint8Array.from(N))),!(N instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(N.length===0)return"";for(var V=0,z=0,X=0,G=N.length;X!==G&&N[X]===0;)X++,V++;for(var Y=(G-X)*w+1>>>0,$=new Uint8Array(Y);X!==G;){for(var j=N[X],k=0,_=Y-1;(j!==0||k<z)&&_!==-1;_--,k++)j+=256*$[_]>>>0,$[_]=j%d>>>0,j=j/d>>>0;if(j!==0)throw new Error("Non-zero carry");z=k,X++}for(var L=Y-z;L!==Y&&$[L]===0;)L++;for(var ot=v.repeat(V);L<Y;++L)ot+=e.charAt($[L]);return ot}function x(N){if(typeof N!="string")throw new TypeError("Expected String");if(N.length===0)return new Uint8Array;var V=0;if(N[V]!==" "){for(var z=0,X=0;N[V]===v;)z++,V++;for(var G=(N.length-V)*g+1>>>0,Y=new Uint8Array(G);N[V];){var $=r[N.charCodeAt(V)];if($===255)return;for(var j=0,k=G-1;($!==0||j<X)&&k!==-1;k--,j++)$+=d*Y[k]>>>0,Y[k]=$%256>>>0,$=$/256>>>0;if($!==0)throw new Error("Non-zero carry");X=j,V++}if(N[V]!==" "){for(var _=G-X;_!==G&&Y[_]===0;)_++;for(var L=new Uint8Array(z+(G-_)),ot=z;_!==G;)L[ot++]=Y[_++];return L}}}function C(N){var V=x(N);if(V)return V;throw new Error(`Non-${t} character`)}return{encode:S,decodeUnsafe:x,decode:C}}var D_=M_,x_=D_;const C_=e=>{if(e instanceof Uint8Array&&e.constructor.name==="Uint8Array")return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")},O_=e=>new TextEncoder().encode(e),N_=e=>new TextDecoder().decode(e);class P_{constructor(t,r,i){this.name=t,this.prefix=r,this.baseEncode=i}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}}class R_{constructor(t,r,i){if(this.name=t,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=i}decode(t){if(typeof t=="string"){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(t){return ev(this,t)}}class T_{constructor(t){this.decoders=t}or(t){return ev(this,t)}decode(t){const r=t[0],i=this.decoders[r];if(i)return i.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const ev=(e,t)=>new T_({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class B_{constructor(t,r,i,n){this.name=t,this.prefix=r,this.baseEncode=i,this.baseDecode=n,this.encoder=new P_(t,r,i),this.decoder=new R_(t,r,n)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}}const Dc=({name:e,prefix:t,encode:r,decode:i})=>new B_(e,t,r,i),ph=({prefix:e,name:t,alphabet:r})=>{const{encode:i,decode:n}=x_(r,t);return Dc({prefix:e,name:t,encode:i,decode:o=>C_(n(o))})},U_=(e,t,r,i)=>{const n={};for(let w=0;w<t.length;++w)n[t[w]]=w;let o=e.length;for(;e[o-1]==="=";)--o;const f=new Uint8Array(o*r/8|0);let d=0,v=0,g=0;for(let w=0;w<o;++w){const S=n[e[w]];if(S===void 0)throw new SyntaxError(`Non-${i} character`);v=v<<r|S,d+=r,d>=8&&(d-=8,f[g++]=255&v>>d)}if(d>=r||255&v<<8-d)throw new SyntaxError("Unexpected end of data");return f},L_=(e,t,r)=>{const i=t[t.length-1]==="=",n=(1<<r)-1;let o="",f=0,d=0;for(let v=0;v<e.length;++v)for(d=d<<8|e[v],f+=8;f>r;)f-=r,o+=t[n&d>>f];if(f&&(o+=t[n&d<<r-f]),i)for(;o.length*r&7;)o+="=";return o},Nr=({name:e,prefix:t,bitsPerChar:r,alphabet:i})=>Dc({prefix:t,name:e,encode(n){return L_(n,i,r)},decode(n){return U_(n,i,r,e)}}),F_=Dc({prefix:"\0",name:"identity",encode:e=>N_(e),decode:e=>O_(e)}),q_=Object.freeze(Object.defineProperty({__proto__:null,identity:F_},Symbol.toStringTag,{value:"Module"})),$_=Nr({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),k_=Object.freeze(Object.defineProperty({__proto__:null,base2:$_},Symbol.toStringTag,{value:"Module"})),z_=Nr({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),j_=Object.freeze(Object.defineProperty({__proto__:null,base8:z_},Symbol.toStringTag,{value:"Module"})),H_=ph({prefix:"9",name:"base10",alphabet:"0123456789"}),K_=Object.freeze(Object.defineProperty({__proto__:null,base10:H_},Symbol.toStringTag,{value:"Module"})),G_=Nr({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),V_=Nr({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),Q_=Object.freeze(Object.defineProperty({__proto__:null,base16:G_,base16upper:V_},Symbol.toStringTag,{value:"Module"})),Y_=Nr({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),J_=Nr({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),W_=Nr({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),X_=Nr({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Z_=Nr({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),t4=Nr({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),e4=Nr({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),r4=Nr({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),i4=Nr({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),n4=Object.freeze(Object.defineProperty({__proto__:null,base32:Y_,base32hex:Z_,base32hexpad:e4,base32hexpadupper:r4,base32hexupper:t4,base32pad:W_,base32padupper:X_,base32upper:J_,base32z:i4},Symbol.toStringTag,{value:"Module"})),s4=ph({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),o4=ph({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),a4=Object.freeze(Object.defineProperty({__proto__:null,base36:s4,base36upper:o4},Symbol.toStringTag,{value:"Module"})),h4=ph({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),u4=ph({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),c4=Object.freeze(Object.defineProperty({__proto__:null,base58btc:h4,base58flickr:u4},Symbol.toStringTag,{value:"Module"})),f4=Nr({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),l4=Nr({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),d4=Nr({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),p4=Nr({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),g4=Object.freeze(Object.defineProperty({__proto__:null,base64:f4,base64pad:l4,base64url:d4,base64urlpad:p4},Symbol.toStringTag,{value:"Module"})),rv=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),m4=rv.reduce((e,t,r)=>(e[r]=t,e),[]),v4=rv.reduce((e,t,r)=>(e[t.codePointAt(0)]=r,e),[]);function y4(e){return e.reduce((t,r)=>(t+=m4[r],t),"")}function w4(e){const t=[];for(const r of e){const i=v4[r.codePointAt(0)];if(i===void 0)throw new Error(`Non-base256emoji character: ${r}`);t.push(i)}return new Uint8Array(t)}const b4=Dc({prefix:"🚀",name:"base256emoji",encode:y4,decode:w4}),A4=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:b4},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const w1={...q_,...k_,...j_,...K_,...Q_,...n4,...a4,...c4,...g4,...A4};function iv(e,t,r,i){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:i}}}const b1=iv("utf8","u",e=>"u"+new TextDecoder("utf8").decode(e),e=>new TextEncoder().encode(e.substring(1))),Wf=iv("ascii","a",e=>{let t="a";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t},e=>{e=e.substring(1);const t=tv(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}),nv={utf8:b1,"utf-8":b1,hex:w1.base16,latin1:Wf,ascii:Wf,binary:Wf,...w1};function li(e,t="utf8"){const r=nv[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(e,"utf8"):r.decoder.decode(`${r.prefix}${e}`)}function Qr(e,t="utf8"){const r=nv[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8"):r.encoder.encode(e).substring(1)}const _4={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}};function A1(e,t=[]){const r=[];return Object.keys(e).forEach(i=>{if(t.length&&!t.includes(i))return;const n=e[i];r.push(...n.accounts)}),r}var sv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof Re<"u"?Re:typeof self<"u"?self:{};function E4(e){var t=e.default;if(typeof t=="function"){var r=function(){return t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(i){var n=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(r,i,n.get?n:{enumerable:!0,get:function(){return e[i]}})}),r}var S4={exports:{}};/**
* [js-sha3]{@link https://github.com/emn178/js-sha3}
*
* @version 0.8.0
* @author Chen, Yi-Cyuan [emn178@gmail.com]
* @copyright Chen, Yi-Cyuan 2015-2018
* @license MIT
*/(function(e){(function(){var t="input is invalid type",r="finalize already called",i=typeof window=="object",n=i?window:{};n.JS_SHA3_NO_WINDOW&&(i=!1);var o=!i&&typeof self=="object",f=!n.JS_SHA3_NO_NODE_JS&&typeof Fr=="object"&&Fr.versions&&Fr.versions.node;f?n=sv:o&&(n=self);var d=!n.JS_SHA3_NO_COMMON_JS&&!0&&e.exports,v=!n.JS_SHA3_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",g="0123456789abcdef".split(""),w=[31,7936,2031616,520093696],S=[4,1024,262144,67108864],x=[1,256,65536,16777216],C=[6,1536,393216,100663296],N=[0,8,16,24],V=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],z=[224,256,384,512],X=[128,256],G=["hex","buffer","arrayBuffer","array","digest"],Y={128:168,256:136};(n.JS_SHA3_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(m){return Object.prototype.toString.call(m)==="[object Array]"}),v&&(n.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(m){return typeof m=="object"&&m.buffer&&m.buffer.constructor===ArrayBuffer});for(var $=function(m,H,R){return function(T){return new I(m,H,m).update(T)[R]()}},j=function(m,H,R){return function(T,q){return new I(m,H,q).update(T)[R]()}},k=function(m,H,R){return function(T,q,y,B){return u["cshake"+m].update(T,q,y,B)[R]()}},_=function(m,H,R){return function(T,q,y,B){return u["kmac"+m].update(T,q,y,B)[R]()}},L=function(m,H,R,T){for(var q=0;q<G.length;++q){var y=G[q];m[y]=H(R,T,y)}return m},ot=function(m,H){var R=$(m,H,"hex");return R.create=function(){return new I(m,H,m)},R.update=function(T){return R.create().update(T)},L(R,$,m,H)},ct=function(m,H){var R=j(m,H,"hex");return R.create=function(T){return new I(m,H,T)},R.update=function(T,q){return R.create(q).update(T)},L(R,j,m,H)},ht=function(m,H){var R=Y[m],T=k(m,H,"hex");return T.create=function(q,y,B){return!y&&!B?u["shake"+m].create(q):new I(m,H,q).bytepad([y,B],R)},T.update=function(q,y,B,W){return T.create(y,B,W).update(q)},L(T,k,m,H)},_t=function(m,H){var R=Y[m],T=_(m,H,"hex");return T.create=function(q,y,B){return new Z(m,H,y).bytepad(["KMAC",B],R).bytepad([q],R)},T.update=function(q,y,B,W){return T.create(q,B,W).update(y)},L(T,_,m,H)},h=[{name:"keccak",padding:x,bits:z,createMethod:ot},{name:"sha3",padding:C,bits:z,createMethod:ot},{name:"shake",padding:w,bits:X,createMethod:ct},{name:"cshake",padding:S,bits:X,createMethod:ht},{name:"kmac",padding:S,bits:X,createMethod:_t}],u={},p=[],b=0;b<h.length;++b)for(var M=h[b],D=M.bits,O=0;O<D.length;++O){var A=M.name+"_"+D[O];if(p.push(A),u[A]=M.createMethod(D[O],M.padding),M.name!=="sha3"){var c=M.name+D[O];p.push(c),u[c]=u[A]}}function I(m,H,R){this.blocks=[],this.s=[],this.padding=H,this.outputBits=R,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(m<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=R>>5,this.extraBytes=(R&31)>>3;for(var T=0;T<50;++T)this.s[T]=0}I.prototype.update=function(m){if(this.finalized)throw new Error(r);var H,R=typeof m;if(R!=="string"){if(R==="object"){if(m===null)throw new Error(t);if(v&&m.constructor===ArrayBuffer)m=new Uint8Array(m);else if(!Array.isArray(m)&&(!v||!ArrayBuffer.isView(m)))throw new Error(t)}else throw new Error(t);H=!0}for(var T=this.blocks,q=this.byteCount,y=m.length,B=this.blockCount,W=0,st=this.s,rt,Et;W<y;){if(this.reset)for(this.reset=!1,T[0]=this.block,rt=1;rt<B+1;++rt)T[rt]=0;if(H)for(rt=this.start;W<y&&rt<q;++W)T[rt>>2]|=m[W]<<N[rt++&3];else for(rt=this.start;W<y&&rt<q;++W)Et=m.charCodeAt(W),Et<128?T[rt>>2]|=Et<<N[rt++&3]:Et<2048?(T[rt>>2]|=(192|Et>>6)<<N[rt++&3],T[rt>>2]|=(128|Et&63)<<N[rt++&3]):Et<55296||Et>=57344?(T[rt>>2]|=(224|Et>>12)<<N[rt++&3],T[rt>>2]|=(128|Et>>6&63)<<N[rt++&3],T[rt>>2]|=(128|Et&63)<<N[rt++&3]):(Et=65536+((Et&1023)<<10|m.charCodeAt(++W)&1023),T[rt>>2]|=(240|Et>>18)<<N[rt++&3],T[rt>>2]|=(128|Et>>12&63)<<N[rt++&3],T[rt>>2]|=(128|Et>>6&63)<<N[rt++&3],T[rt>>2]|=(128|Et&63)<<N[rt++&3]);if(this.lastByteIndex=rt,rt>=q){for(this.start=rt-q,this.block=T[B],rt=0;rt<B;++rt)st[rt]^=T[rt];nt(st),this.reset=!0}else this.start=rt}return this},I.prototype.encode=function(m,H){var R=m&255,T=1,q=[R];for(m=m>>8,R=m&255;R>0;)q.unshift(R),m=m>>8,R=m&255,++T;return H?q.push(T):q.unshift(T),this.update(q),q.length},I.prototype.encodeString=function(m){var H,R=typeof m;if(R!=="string"){if(R==="object"){if(m===null)throw new Error(t);if(v&&m.constructor===ArrayBuffer)m=new Uint8Array(m);else if(!Array.isArray(m)&&(!v||!ArrayBuffer.isView(m)))throw new Error(t)}else throw new Error(t);H=!0}var T=0,q=m.length;if(H)T=q;else for(var y=0;y<m.length;++y){var B=m.charCodeAt(y);B<128?T+=1:B<2048?T+=2:B<55296||B>=57344?T+=3:(B=65536+((B&1023)<<10|m.charCodeAt(++y)&1023),T+=4)}return T+=this.encode(T*8),this.update(m),T},I.prototype.bytepad=function(m,H){for(var R=this.encode(H),T=0;T<m.length;++T)R+=this.encodeString(m[T]);var q=H-R%H,y=[];return y.length=q,this.update(y),this},I.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var m=this.blocks,H=this.lastByteIndex,R=this.blockCount,T=this.s;if(m[H>>2]|=this.padding[H&3],this.lastByteIndex===this.byteCount)for(m[0]=m[R],H=1;H<R+1;++H)m[H]=0;for(m[R-1]|=2147483648,H=0;H<R;++H)T[H]^=m[H];nt(T)}},I.prototype.toString=I.prototype.hex=function(){this.finalize();for(var m=this.blockCount,H=this.s,R=this.outputBlocks,T=this.extraBytes,q=0,y=0,B="",W;y<R;){for(q=0;q<m&&y<R;++q,++y)W=H[q],B+=g[W>>4&15]+g[W&15]+g[W>>12&15]+g[W>>8&15]+g[W>>20&15]+g[W>>16&15]+g[W>>28&15]+g[W>>24&15];y%m===0&&(nt(H),q=0)}return T&&(W=H[q],B+=g[W>>4&15]+g[W&15],T>1&&(B+=g[W>>12&15]+g[W>>8&15]),T>2&&(B+=g[W>>20&15]+g[W>>16&15])),B},I.prototype.arrayBuffer=function(){this.finalize();var m=this.blockCount,H=this.s,R=this.outputBlocks,T=this.extraBytes,q=0,y=0,B=this.outputBits>>3,W;T?W=new ArrayBuffer(R+1<<2):W=new ArrayBuffer(B);for(var st=new Uint32Array(W);y<R;){for(q=0;q<m&&y<R;++q,++y)st[y]=H[q];y%m===0&&nt(H)}return T&&(st[q]=H[q],W=W.slice(0,B)),W},I.prototype.buffer=I.prototype.arrayBuffer,I.prototype.digest=I.prototype.array=function(){this.finalize();for(var m=this.blockCount,H=this.s,R=this.outputBlocks,T=this.extraBytes,q=0,y=0,B=[],W,st;y<R;){for(q=0;q<m&&y<R;++q,++y)W=y<<2,st=H[q],B[W]=st&255,B[W+1]=st>>8&255,B[W+2]=st>>16&255,B[W+3]=st>>24&255;y%m===0&&nt(H)}return T&&(W=y<<2,st=H[q],B[W]=st&255,T>1&&(B[W+1]=st>>8&255),T>2&&(B[W+2]=st>>16&255)),B};function Z(m,H,R){I.call(this,m,H,R)}Z.prototype=new I,Z.prototype.finalize=function(){return this.encode(this.outputBits,!0),I.prototype.finalize.call(this)};var nt=function(m){var H,R,T,q,y,B,W,st,rt,Et,It,bt,me,Pt,At,Jt,vt,yt,re,gt,wt,Qt,mt,St,Wt,Mt,Dt,oe,Ct,xt,Te,Vt,Xt,Be,Zt,te,Xe,Ut,Rt,be,Lt,Tt,ve,$t,kt,Ae,zt,Ft,_e,qt,Nt,Ie,jt,ie,pr,ne,Yt,rr,ir,nr,sr,or,ke;for(T=0;T<48;T+=2)q=m[0]^m[10]^m[20]^m[30]^m[40],y=m[1]^m[11]^m[21]^m[31]^m[41],B=m[2]^m[12]^m[22]^m[32]^m[42],W=m[3]^m[13]^m[23]^m[33]^m[43],st=m[4]^m[14]^m[24]^m[34]^m[44],rt=m[5]^m[15]^m[25]^m[35]^m[45],Et=m[6]^m[16]^m[26]^m[36]^m[46],It=m[7]^m[17]^m[27]^m[37]^m[47],bt=m[8]^m[18]^m[28]^m[38]^m[48],me=m[9]^m[19]^m[29]^m[39]^m[49],H=bt^(B<<1|W>>>31),R=me^(W<<1|B>>>31),m[0]^=H,m[1]^=R,m[10]^=H,m[11]^=R,m[20]^=H,m[21]^=R,m[30]^=H,m[31]^=R,m[40]^=H,m[41]^=R,H=q^(st<<1|rt>>>31),R=y^(rt<<1|st>>>31),m[2]^=H,m[3]^=R,m[12]^=H,m[13]^=R,m[22]^=H,m[23]^=R,m[32]^=H,m[33]^=R,m[42]^=H,m[43]^=R,H=B^(Et<<1|It>>>31),R=W^(It<<1|Et>>>31),m[4]^=H,m[5]^=R,m[14]^=H,m[15]^=R,m[24]^=H,m[25]^=R,m[34]^=H,m[35]^=R,m[44]^=H,m[45]^=R,H=st^(bt<<1|me>>>31),R=rt^(me<<1|bt>>>31),m[6]^=H,m[7]^=R,m[16]^=H,m[17]^=R,m[26]^=H,m[27]^=R,m[36]^=H,m[37]^=R,m[46]^=H,m[47]^=R,H=Et^(q<<1|y>>>31),R=It^(y<<1|q>>>31),m[8]^=H,m[9]^=R,m[18]^=H,m[19]^=R,m[28]^=H,m[29]^=R,m[38]^=H,m[39]^=R,m[48]^=H,m[49]^=R,Pt=m[0],At=m[1],Ae=m[11]<<4|m[10]>>>28,zt=m[10]<<4|m[11]>>>28,oe=m[20]<<3|m[21]>>>29,Ct=m[21]<<3|m[20]>>>29,nr=m[31]<<9|m[30]>>>23,sr=m[30]<<9|m[31]>>>23,Tt=m[40]<<18|m[41]>>>14,ve=m[41]<<18|m[40]>>>14,Be=m[2]<<1|m[3]>>>31,Zt=m[3]<<1|m[2]>>>31,Jt=m[13]<<12|m[12]>>>20,vt=m[12]<<12|m[13]>>>20,Ft=m[22]<<10|m[23]>>>22,_e=m[23]<<10|m[22]>>>22,xt=m[33]<<13|m[32]>>>19,Te=m[32]<<13|m[33]>>>19,or=m[42]<<2|m[43]>>>30,ke=m[43]<<2|m[42]>>>30,ie=m[5]<<30|m[4]>>>2,pr=m[4]<<30|m[5]>>>2,te=m[14]<<6|m[15]>>>26,Xe=m[15]<<6|m[14]>>>26,yt=m[25]<<11|m[24]>>>21,re=m[24]<<11|m[25]>>>21,qt=m[34]<<15|m[35]>>>17,Nt=m[35]<<15|m[34]>>>17,Vt=m[45]<<29|m[44]>>>3,Xt=m[44]<<29|m[45]>>>3,St=m[6]<<28|m[7]>>>4,Wt=m[7]<<28|m[6]>>>4,ne=m[17]<<23|m[16]>>>9,Yt=m[16]<<23|m[17]>>>9,Ut=m[26]<<25|m[27]>>>7,Rt=m[27]<<25|m[26]>>>7,gt=m[36]<<21|m[37]>>>11,wt=m[37]<<21|m[36]>>>11,Ie=m[47]<<24|m[46]>>>8,jt=m[46]<<24|m[47]>>>8,$t=m[8]<<27|m[9]>>>5,kt=m[9]<<27|m[8]>>>5,Mt=m[18]<<20|m[19]>>>12,Dt=m[19]<<20|m[18]>>>12,rr=m[29]<<7|m[28]>>>25,ir=m[28]<<7|m[29]>>>25,be=m[38]<<8|m[39]>>>24,Lt=m[39]<<8|m[38]>>>24,Qt=m[48]<<14|m[49]>>>18,mt=m[49]<<14|m[48]>>>18,m[0]=Pt^~Jt&yt,m[1]=At^~vt&re,m[10]=St^~Mt&oe,m[11]=Wt^~Dt&Ct,m[20]=Be^~te&Ut,m[21]=Zt^~Xe&Rt,m[30]=$t^~Ae&Ft,m[31]=kt^~zt&_e,m[40]=ie^~ne&rr,m[41]=pr^~Yt&ir,m[2]=Jt^~yt&gt,m[3]=vt^~re&wt,m[12]=Mt^~oe&xt,m[13]=Dt^~Ct&Te,m[22]=te^~Ut&be,m[23]=Xe^~Rt&Lt,m[32]=Ae^~Ft&qt,m[33]=zt^~_e&Nt,m[42]=ne^~rr&nr,m[43]=Yt^~ir&sr,m[4]=yt^~gt&Qt,m[5]=re^~wt&mt,m[14]=oe^~xt&Vt,m[15]=Ct^~Te&Xt,m[24]=Ut^~be&Tt,m[25]=Rt^~Lt&ve,m[34]=Ft^~qt&Ie,m[35]=_e^~Nt&jt,m[44]=rr^~nr&or,m[45]=ir^~sr&ke,m[6]=gt^~Qt&Pt,m[7]=wt^~mt&At,m[16]=xt^~Vt&St,m[17]=Te^~Xt&Wt,m[26]=be^~Tt&Be,m[27]=Lt^~ve&Zt,m[36]=qt^~Ie&$t,m[37]=Nt^~jt&kt,m[46]=nr^~or&ie,m[47]=sr^~ke&pr,m[8]=Qt^~Pt&Jt,m[9]=mt^~At&vt,m[18]=Vt^~St&Mt,m[19]=Xt^~Wt&Dt,m[28]=Tt^~Be&te,m[29]=ve^~Zt&Xe,m[38]=Ie^~$t&Ae,m[39]=jt^~kt&zt,m[48]=or^~ie&ne,m[49]=ke^~pr&Yt,m[0]^=V[T],m[1]^=V[T+1]};if(d)e.exports=u;else for(b=0;b<p.length;++b)n[p[b]]=u[p[b]]})()})(S4);const I4="logger/5.7.0";let _1=!1,E1=!1;const ju={debug:1,default:2,info:2,warning:3,error:4,off:5};let S1=ju.default,Xf=null;function M4(){try{const e=[];if(["NFD","NFC","NFKD","NFKC"].forEach(t=>{try{if("test".normalize(t)!=="test")throw new Error("bad normalize")}catch{e.push(t)}}),e.length)throw new Error("missing "+e.join(", "));if("é".normalize("NFD")!=="é")throw new Error("broken implementation")}catch(e){return e.message}return null}const I1=M4();var Wl;(function(e){e.DEBUG="DEBUG",e.INFO="INFO",e.WARNING="WARNING",e.ERROR="ERROR",e.OFF="OFF"})(Wl||(Wl={}));var mn;(function(e){e.UNKNOWN_ERROR="UNKNOWN_ERROR",e.NOT_IMPLEMENTED="NOT_IMPLEMENTED",e.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",e.NETWORK_ERROR="NETWORK_ERROR",e.SERVER_ERROR="SERVER_ERROR",e.TIMEOUT="TIMEOUT",e.BUFFER_OVERRUN="BUFFER_OVERRUN",e.NUMERIC_FAULT="NUMERIC_FAULT",e.MISSING_NEW="MISSING_NEW",e.INVALID_ARGUMENT="INVALID_ARGUMENT",e.MISSING_ARGUMENT="MISSING_ARGUMENT",e.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",e.CALL_EXCEPTION="CALL_EXCEPTION",e.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",e.NONCE_EXPIRED="NONCE_EXPIRED",e.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",e.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",e.TRANSACTION_REPLACED="TRANSACTION_REPLACED",e.ACTION_REJECTED="ACTION_REJECTED"})(mn||(mn={}));const M1="0123456789abcdef";let di=class wr{constructor(t){Object.defineProperty(this,"version",{enumerable:!0,value:t,writable:!1})}_log(t,r){const i=t.toLowerCase();ju[i]==null&&this.throwArgumentError("invalid log level name","logLevel",t),!(S1>ju[i])&&console.log.apply(console,r)}debug(...t){this._log(wr.levels.DEBUG,t)}info(...t){this._log(wr.levels.INFO,t)}warn(...t){this._log(wr.levels.WARNING,t)}makeError(t,r,i){if(E1)return this.makeError("censored error",r,{});r||(r=wr.errors.UNKNOWN_ERROR),i||(i={});const n=[];Object.keys(i).forEach(v=>{const g=i[v];try{if(g instanceof Uint8Array){let w="";for(let S=0;S<g.length;S++)w+=M1[g[S]>>4],w+=M1[g[S]&15];n.push(v+"=Uint8Array(0x"+w+")")}else n.push(v+"="+JSON.stringify(g))}catch{n.push(v+"="+JSON.stringify(i[v].toString()))}}),n.push(`code=${r}`),n.push(`version=${this.version}`);const o=t;let f="";switch(r){case mn.NUMERIC_FAULT:{f="NUMERIC_FAULT";const v=t;switch(v){case"overflow":case"underflow":case"division-by-zero":f+="-"+v;break;case"negative-power":case"negative-width":f+="-unsupported";break;case"unbound-bitwise-result":f+="-unbound-result";break}break}case mn.CALL_EXCEPTION:case mn.INSUFFICIENT_FUNDS:case mn.MISSING_NEW:case mn.NONCE_EXPIRED:case mn.REPLACEMENT_UNDERPRICED:case mn.TRANSACTION_REPLACED:case mn.UNPREDICTABLE_GAS_LIMIT:f=r;break}f&&(t+=" [ See: https://links.ethers.org/v5-errors-"+f+" ]"),n.length&&(t+=" ("+n.join(", ")+")");const d=new Error(t);return d.reason=o,d.code=r,Object.keys(i).forEach(function(v){d[v]=i[v]}),d}throwError(t,r,i){throw this.makeError(t,r,i)}throwArgumentError(t,r,i){return this.throwError(t,wr.errors.INVALID_ARGUMENT,{argument:r,value:i})}assert(t,r,i,n){t||this.throwError(r,i,n)}assertArgument(t,r,i,n){t||this.throwArgumentError(r,i,n)}checkNormalize(t){I1&&this.throwError("platform missing String.prototype.normalize",wr.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:I1})}checkSafeUint53(t,r){typeof t=="number"&&(r==null&&(r="value not safe"),(t<0||t>=9007199254740991)&&this.throwError(r,wr.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:t}),t%1&&this.throwError(r,wr.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:t}))}checkArgumentCount(t,r,i){i?i=": "+i:i="",t<r&&this.throwError("missing argument"+i,wr.errors.MISSING_ARGUMENT,{count:t,expectedCount:r}),t>r&&this.throwError("too many arguments"+i,wr.errors.UNEXPECTED_ARGUMENT,{count:t,expectedCount:r})}checkNew(t,r){(t===Object||t==null)&&this.throwError("missing new",wr.errors.MISSING_NEW,{name:r.name})}checkAbstract(t,r){t===r?this.throwError("cannot instantiate abstract class "+JSON.stringify(r.name)+" directly; use a sub-class",wr.errors.UNSUPPORTED_OPERATION,{name:t.name,operation:"new"}):(t===Object||t==null)&&this.throwError("missing new",wr.errors.MISSING_NEW,{name:r.name})}static globalLogger(){return Xf||(Xf=new wr(I4)),Xf}static setCensorship(t,r){if(!t&&r&&this.globalLogger().throwError("cannot permanently disable censorship",wr.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),_1){if(!t)return;this.globalLogger().throwError("error censorship permanent",wr.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}E1=!!t,_1=!!r}static setLogLevel(t){const r=ju[t.toLowerCase()];if(r==null){wr.globalLogger().warn("invalid log level - "+t);return}S1=r}static from(t){return new wr(t)}};di.errors=mn,di.levels=Wl;const D4="bytes/5.7.0",Ls=new di(D4);function ov(e){return!!e.toHexString}function Hu(e){return e.slice||(e.slice=function(){const t=Array.prototype.slice.call(arguments);return Hu(new Uint8Array(Array.prototype.slice.apply(e,t)))}),e}function D1(e){return typeof e=="number"&&e==e&&e%1===0}function gh(e){if(e==null)return!1;if(e.constructor===Uint8Array)return!0;if(typeof e=="string"||!D1(e.length)||e.length<0)return!1;for(let t=0;t<e.length;t++){const r=e[t];if(!D1(r)||r<0||r>=256)return!1}return!0}function av(e,t){if(t||(t={}),typeof e=="number"){Ls.checkSafeUint53(e,"invalid arrayify value");const r=[];for(;e;)r.unshift(e&255),e=parseInt(String(e/256));return r.length===0&&r.push(0),Hu(new Uint8Array(r))}if(t.allowMissingPrefix&&typeof e=="string"&&e.substring(0,2)!=="0x"&&(e="0x"+e),ov(e)&&(e=e.toHexString()),ta(e)){let r=e.substring(2);r.length%2&&(t.hexPad==="left"?r="0"+r:t.hexPad==="right"?r+="0":Ls.throwArgumentError("hex data is odd-length","value",e));const i=[];for(let n=0;n<r.length;n+=2)i.push(parseInt(r.substring(n,n+2),16));return Hu(new Uint8Array(i))}return gh(e)?Hu(new Uint8Array(e)):Ls.throwArgumentError("invalid arrayify value","value",e)}function ta(e,t){return!(typeof e!="string"||!e.match(/^0x[0-9A-Fa-f]*$/)||t)}const Zf="0123456789abcdef";function hv(e,t){if(t||(t={}),typeof e=="number"){Ls.checkSafeUint53(e,"invalid hexlify value");let r="";for(;e;)r=Zf[e&15]+r,e=Math.floor(e/16);return r.length?(r.length%2&&(r="0"+r),"0x"+r):"0x00"}if(typeof e=="bigint")return e=e.toString(16),e.length%2?"0x0"+e:"0x"+e;if(t.allowMissingPrefix&&typeof e=="string"&&e.substring(0,2)!=="0x"&&(e="0x"+e),ov(e))return e.toHexString();if(ta(e))return e.length%2&&(t.hexPad==="left"?e="0x0"+e.substring(2):t.hexPad==="right"?e+="0":Ls.throwArgumentError("hex data is odd-length","value",e)),e.toLowerCase();if(gh(e)){let r="0x";for(let i=0;i<e.length;i++){let n=e[i];r+=Zf[(n&240)>>4]+Zf[n&15]}return r}return Ls.throwArgumentError("invalid hexlify value","value",e)}function sc(e,t){for(typeof e!="string"?e=hv(e):ta(e)||Ls.throwArgumentError("invalid hex string","value",e),e.length>2*t+2&&Ls.throwArgumentError("value out of range","value",arguments[1]);e.length<2*t+2;)e="0x0"+e.substring(2);return e}var uv={exports:{}},x4={},C4=Object.freeze({__proto__:null,default:x4}),O4=E4(C4);(function(e){(function(t,r){function i(h,u){if(!h)throw new Error(u||"Assertion failed")}function n(h,u){h.super_=u;var p=function(){};p.prototype=u.prototype,h.prototype=new p,h.prototype.constructor=h}function o(h,u,p){if(o.isBN(h))return h;this.negative=0,this.words=null,this.length=0,this.red=null,h!==null&&((u==="le"||u==="be")&&(p=u,u=10),this._init(h||0,u||10,p||"be"))}typeof t=="object"?t.exports=o:r.BN=o,o.BN=o,o.wordSize=26;var f;try{typeof window<"u"&&typeof window.Buffer<"u"?f=window.Buffer:f=O4.Buffer}catch{}o.isBN=function(h){return h instanceof o?!0:h!==null&&typeof h=="object"&&h.constructor.wordSize===o.wordSize&&Array.isArray(h.words)},o.max=function(h,u){return h.cmp(u)>0?h:u},o.min=function(h,u){return h.cmp(u)<0?h:u},o.prototype._init=function(h,u,p){if(typeof h=="number")return this._initNumber(h,u,p);if(typeof h=="object")return this._initArray(h,u,p);u==="hex"&&(u=16),i(u===(u|0)&&u>=2&&u<=36),h=h.toString().replace(/\s+/g,"");var b=0;h[0]==="-"&&(b++,this.negative=1),b<h.length&&(u===16?this._parseHex(h,b,p):(this._parseBase(h,u,b),p==="le"&&this._initArray(this.toArray(),u,p)))},o.prototype._initNumber=function(h,u,p){h<0&&(this.negative=1,h=-h),h<67108864?(this.words=[h&67108863],this.length=1):h<4503599627370496?(this.words=[h&67108863,h/67108864&67108863],this.length=2):(i(h<9007199254740992),this.words=[h&67108863,h/67108864&67108863,1],this.length=3),p==="le"&&this._initArray(this.toArray(),u,p)},o.prototype._initArray=function(h,u,p){if(i(typeof h.length=="number"),h.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(h.length/3),this.words=new Array(this.length);for(var b=0;b<this.length;b++)this.words[b]=0;var M,D,O=0;if(p==="be")for(b=h.length-1,M=0;b>=0;b-=3)D=h[b]|h[b-1]<<8|h[b-2]<<16,this.words[M]|=D<<O&67108863,this.words[M+1]=D>>>26-O&67108863,O+=24,O>=26&&(O-=26,M++);else if(p==="le")for(b=0,M=0;b<h.length;b+=3)D=h[b]|h[b+1]<<8|h[b+2]<<16,this.words[M]|=D<<O&67108863,this.words[M+1]=D>>>26-O&67108863,O+=24,O>=26&&(O-=26,M++);return this._strip()};function d(h,u){var p=h.charCodeAt(u);if(p>=48&&p<=57)return p-48;if(p>=65&&p<=70)return p-55;if(p>=97&&p<=102)return p-87;i(!1,"Invalid character in "+h)}function v(h,u,p){var b=d(h,p);return p-1>=u&&(b|=d(h,p-1)<<4),b}o.prototype._parseHex=function(h,u,p){this.length=Math.ceil((h.length-u)/6),this.words=new Array(this.length);for(var b=0;b<this.length;b++)this.words[b]=0;var M=0,D=0,O;if(p==="be")for(b=h.length-1;b>=u;b-=2)O=v(h,u,b)<<M,this.words[D]|=O&67108863,M>=18?(M-=18,D+=1,this.words[D]|=O>>>26):M+=8;else{var A=h.length-u;for(b=A%2===0?u+1:u;b<h.length;b+=2)O=v(h,u,b)<<M,this.words[D]|=O&67108863,M>=18?(M-=18,D+=1,this.words[D]|=O>>>26):M+=8}this._strip()};function g(h,u,p,b){for(var M=0,D=0,O=Math.min(h.length,p),A=u;A<O;A++){var c=h.charCodeAt(A)-48;M*=b,c>=49?D=c-49+10:c>=17?D=c-17+10:D=c,i(c>=0&&D<b,"Invalid character"),M+=D}return M}o.prototype._parseBase=function(h,u,p){this.words=[0],this.length=1;for(var b=0,M=1;M<=67108863;M*=u)b++;b--,M=M/u|0;for(var D=h.length-p,O=D%b,A=Math.min(D,D-O)+p,c=0,I=p;I<A;I+=b)c=g(h,I,I+b,u),this.imuln(M),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(O!==0){var Z=1;for(c=g(h,I,h.length,u),I=0;I<O;I++)Z*=u;this.imuln(Z),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}this._strip()},o.prototype.copy=function(h){h.words=new Array(this.length);for(var u=0;u<this.length;u++)h.words[u]=this.words[u];h.length=this.length,h.negative=this.negative,h.red=this.red};function w(h,u){h.words=u.words,h.length=u.length,h.negative=u.negative,h.red=u.red}if(o.prototype._move=function(h){w(h,this)},o.prototype.clone=function(){var h=new o(null);return this.copy(h),h},o.prototype._expand=function(h){for(;this.length<h;)this.words[this.length++]=0;return this},o.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},o.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{o.prototype[Symbol.for("nodejs.util.inspect.custom")]=S}catch{o.prototype.inspect=S}else o.prototype.inspect=S;function S(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var x=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],C=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],N=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];o.prototype.toString=function(h,u){h=h||10,u=u|0||1;var p;if(h===16||h==="hex"){p="";for(var b=0,M=0,D=0;D<this.length;D++){var O=this.words[D],A=((O<<b|M)&16777215).toString(16);M=O>>>24-b&16777215,b+=2,b>=26&&(b-=26,D--),M!==0||D!==this.length-1?p=x[6-A.length]+A+p:p=A+p}for(M!==0&&(p=M.toString(16)+p);p.length%u!==0;)p="0"+p;return this.negative!==0&&(p="-"+p),p}if(h===(h|0)&&h>=2&&h<=36){var c=C[h],I=N[h];p="";var Z=this.clone();for(Z.negative=0;!Z.isZero();){var nt=Z.modrn(I).toString(h);Z=Z.idivn(I),Z.isZero()?p=nt+p:p=x[c-nt.length]+nt+p}for(this.isZero()&&(p="0"+p);p.length%u!==0;)p="0"+p;return this.negative!==0&&(p="-"+p),p}i(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var h=this.words[0];return this.length===2?h+=this.words[1]*67108864:this.length===3&&this.words[2]===1?h+=4503599627370496+this.words[1]*67108864:this.length>2&&i(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-h:h},o.prototype.toJSON=function(){return this.toString(16,2)},f&&(o.prototype.toBuffer=function(h,u){return this.toArrayLike(f,h,u)}),o.prototype.toArray=function(h,u){return this.toArrayLike(Array,h,u)};var V=function(h,u){return h.allocUnsafe?h.allocUnsafe(u):new h(u)};o.prototype.toArrayLike=function(h,u,p){this._strip();var b=this.byteLength(),M=p||Math.max(1,b);i(b<=M,"byte array longer than desired length"),i(M>0,"Requested array length <= 0");var D=V(h,M),O=u==="le"?"LE":"BE";return this["_toArrayLike"+O](D,b),D},o.prototype._toArrayLikeLE=function(h,u){for(var p=0,b=0,M=0,D=0;M<this.length;M++){var O=this.words[M]<<D|b;h[p++]=O&255,p<h.length&&(h[p++]=O>>8&255),p<h.length&&(h[p++]=O>>16&255),D===6?(p<h.length&&(h[p++]=O>>24&255),b=0,D=0):(b=O>>>24,D+=2)}if(p<h.length)for(h[p++]=b;p<h.length;)h[p++]=0},o.prototype._toArrayLikeBE=function(h,u){for(var p=h.length-1,b=0,M=0,D=0;M<this.length;M++){var O=this.words[M]<<D|b;h[p--]=O&255,p>=0&&(h[p--]=O>>8&255),p>=0&&(h[p--]=O>>16&255),D===6?(p>=0&&(h[p--]=O>>24&255),b=0,D=0):(b=O>>>24,D+=2)}if(p>=0)for(h[p--]=b;p>=0;)h[p--]=0},Math.clz32?o.prototype._countBits=function(h){return 32-Math.clz32(h)}:o.prototype._countBits=function(h){var u=h,p=0;return u>=4096&&(p+=13,u>>>=13),u>=64&&(p+=7,u>>>=7),u>=8&&(p+=4,u>>>=4),u>=2&&(p+=2,u>>>=2),p+u},o.prototype._zeroBits=function(h){if(h===0)return 26;var u=h,p=0;return u&8191||(p+=13,u>>>=13),u&127||(p+=7,u>>>=7),u&15||(p+=4,u>>>=4),u&3||(p+=2,u>>>=2),u&1||p++,p},o.prototype.bitLength=function(){var h=this.words[this.length-1],u=this._countBits(h);return(this.length-1)*26+u};function z(h){for(var u=new Array(h.bitLength()),p=0;p<u.length;p++){var b=p/26|0,M=p%26;u[p]=h.words[b]>>>M&1}return u}o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var h=0,u=0;u<this.length;u++){var p=this._zeroBits(this.words[u]);if(h+=p,p!==26)break}return h},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(h){return this.negative!==0?this.abs().inotn(h).iaddn(1):this.clone()},o.prototype.fromTwos=function(h){return this.testn(h-1)?this.notn(h).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return this.negative!==0},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(h){for(;this.length<h.length;)this.words[this.length++]=0;for(var u=0;u<h.length;u++)this.words[u]=this.words[u]|h.words[u];return this._strip()},o.prototype.ior=function(h){return i((this.negative|h.negative)===0),this.iuor(h)},o.prototype.or=function(h){return this.length>h.length?this.clone().ior(h):h.clone().ior(this)},o.prototype.uor=function(h){return this.length>h.length?this.clone().iuor(h):h.clone().iuor(this)},o.prototype.iuand=function(h){var u;this.length>h.length?u=h:u=this;for(var p=0;p<u.length;p++)this.words[p]=this.words[p]&h.words[p];return this.length=u.length,this._strip()},o.prototype.iand=function(h){return i((this.negative|h.negative)===0),this.iuand(h)},o.prototype.and=function(h){return this.length>h.length?this.clone().iand(h):h.clone().iand(this)},o.prototype.uand=function(h){return this.length>h.length?this.clone().iuand(h):h.clone().iuand(this)},o.prototype.iuxor=function(h){var u,p;this.length>h.length?(u=this,p=h):(u=h,p=this);for(var b=0;b<p.length;b++)this.words[b]=u.words[b]^p.words[b];if(this!==u)for(;b<u.length;b++)this.words[b]=u.words[b];return this.length=u.length,this._strip()},o.prototype.ixor=function(h){return i((this.negative|h.negative)===0),this.iuxor(h)},o.prototype.xor=function(h){return this.length>h.length?this.clone().ixor(h):h.clone().ixor(this)},o.prototype.uxor=function(h){return this.length>h.length?this.clone().iuxor(h):h.clone().iuxor(this)},o.prototype.inotn=function(h){i(typeof h=="number"&&h>=0);var u=Math.ceil(h/26)|0,p=h%26;this._expand(u),p>0&&u--;for(var b=0;b<u;b++)this.words[b]=~this.words[b]&67108863;return p>0&&(this.words[b]=~this.words[b]&67108863>>26-p),this._strip()},o.prototype.notn=function(h){return this.clone().inotn(h)},o.prototype.setn=function(h,u){i(typeof h=="number"&&h>=0);var p=h/26|0,b=h%26;return this._expand(p+1),u?this.words[p]=this.words[p]|1<<b:this.words[p]=this.words[p]&~(1<<b),this._strip()},o.prototype.iadd=function(h){var u;if(this.negative!==0&&h.negative===0)return this.negative=0,u=this.isub(h),this.negative^=1,this._normSign();if(this.negative===0&&h.negative!==0)return h.negative=0,u=this.isub(h),h.negative=1,u._normSign();var p,b;this.length>h.length?(p=this,b=h):(p=h,b=this);for(var M=0,D=0;D<b.length;D++)u=(p.words[D]|0)+(b.words[D]|0)+M,this.words[D]=u&67108863,M=u>>>26;for(;M!==0&&D<p.length;D++)u=(p.words[D]|0)+M,this.words[D]=u&67108863,M=u>>>26;if(this.length=p.length,M!==0)this.words[this.length]=M,this.length++;else if(p!==this)for(;D<p.length;D++)this.words[D]=p.words[D];return this},o.prototype.add=function(h){var u;return h.negative!==0&&this.negative===0?(h.negative=0,u=this.sub(h),h.negative^=1,u):h.negative===0&&this.negative!==0?(this.negative=0,u=h.sub(this),this.negative=1,u):this.length>h.length?this.clone().iadd(h):h.clone().iadd(this)},o.prototype.isub=function(h){if(h.negative!==0){h.negative=0;var u=this.iadd(h);return h.negative=1,u._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(h),this.negative=1,this._normSign();var p=this.cmp(h);if(p===0)return this.negative=0,this.length=1,this.words[0]=0,this;var b,M;p>0?(b=this,M=h):(b=h,M=this);for(var D=0,O=0;O<M.length;O++)u=(b.words[O]|0)-(M.words[O]|0)+D,D=u>>26,this.words[O]=u&67108863;for(;D!==0&&O<b.length;O++)u=(b.words[O]|0)+D,D=u>>26,this.words[O]=u&67108863;if(D===0&&O<b.length&&b!==this)for(;O<b.length;O++)this.words[O]=b.words[O];return this.length=Math.max(this.length,O),b!==this&&(this.negative=1),this._strip()},o.prototype.sub=function(h){return this.clone().isub(h)};function X(h,u,p){p.negative=u.negative^h.negative;var b=h.length+u.length|0;p.length=b,b=b-1|0;var M=h.words[0]|0,D=u.words[0]|0,O=M*D,A=O&67108863,c=O/67108864|0;p.words[0]=A;for(var I=1;I<b;I++){for(var Z=c>>>26,nt=c&67108863,m=Math.min(I,u.length-1),H=Math.max(0,I-h.length+1);H<=m;H++){var R=I-H|0;M=h.words[R]|0,D=u.words[H]|0,O=M*D+nt,Z+=O/67108864|0,nt=O&67108863}p.words[I]=nt|0,c=Z|0}return c!==0?p.words[I]=c|0:p.length--,p._strip()}var G=function(h,u,p){var b=h.words,M=u.words,D=p.words,O=0,A,c,I,Z=b[0]|0,nt=Z&8191,m=Z>>>13,H=b[1]|0,R=H&8191,T=H>>>13,q=b[2]|0,y=q&8191,B=q>>>13,W=b[3]|0,st=W&8191,rt=W>>>13,Et=b[4]|0,It=Et&8191,bt=Et>>>13,me=b[5]|0,Pt=me&8191,At=me>>>13,Jt=b[6]|0,vt=Jt&8191,yt=Jt>>>13,re=b[7]|0,gt=re&8191,wt=re>>>13,Qt=b[8]|0,mt=Qt&8191,St=Qt>>>13,Wt=b[9]|0,Mt=Wt&8191,Dt=Wt>>>13,oe=M[0]|0,Ct=oe&8191,xt=oe>>>13,Te=M[1]|0,Vt=Te&8191,Xt=Te>>>13,Be=M[2]|0,Zt=Be&8191,te=Be>>>13,Xe=M[3]|0,Ut=Xe&8191,Rt=Xe>>>13,be=M[4]|0,Lt=be&8191,Tt=be>>>13,ve=M[5]|0,$t=ve&8191,kt=ve>>>13,Ae=M[6]|0,zt=Ae&8191,Ft=Ae>>>13,_e=M[7]|0,qt=_e&8191,Nt=_e>>>13,Ie=M[8]|0,jt=Ie&8191,ie=Ie>>>13,pr=M[9]|0,ne=pr&8191,Yt=pr>>>13;p.negative=h.negative^u.negative,p.length=19,A=Math.imul(nt,Ct),c=Math.imul(nt,xt),c=c+Math.imul(m,Ct)|0,I=Math.imul(m,xt);var rr=(O+A|0)+((c&8191)<<13)|0;O=(I+(c>>>13)|0)+(rr>>>26)|0,rr&=67108863,A=Math.imul(R,Ct),c=Math.imul(R,xt),c=c+Math.imul(T,Ct)|0,I=Math.imul(T,xt),A=A+Math.imul(nt,Vt)|0,c=c+Math.imul(nt,Xt)|0,c=c+Math.imul(m,Vt)|0,I=I+Math.imul(m,Xt)|0;var ir=(O+A|0)+((c&8191)<<13)|0;O=(I+(c>>>13)|0)+(ir>>>26)|0,ir&=67108863,A=Math.imul(y,Ct),c=Math.imul(y,xt),c=c+Math.imul(B,Ct)|0,I=Math.imul(B,xt),A=A+Math.imul(R,Vt)|0,c=c+Math.imul(R,Xt)|0,c=c+Math.imul(T,Vt)|0,I=I+Math.imul(T,Xt)|0,A=A+Math.imul(nt,Zt)|0,c=c+Math.imul(nt,te)|0,c=c+Math.imul(m,Zt)|0,I=I+Math.imul(m,te)|0;var nr=(O+A|0)+((c&8191)<<13)|0;O=(I+(c>>>13)|0)+(nr>>>26)|0,nr&=67108863,A=Math.imul(st,Ct),c=Math.imul(st,xt),c=c+Math.imul(rt,Ct)|0,I=Math.imul(rt,xt),A=A+Math.imul(y,Vt)|0,c=c+Math.imul(y,Xt)|0,c=c+Math.imul(B,Vt)|0,I=I+Math.imul(B,Xt)|0,A=A+Math.imul(R,Zt)|0,c=c+Math.imul(R,te)|0,c=c+Math.imul(T,Zt)|0,I=I+Math.imul(T,te)|0,A=A+Math.imul(nt,Ut)|0,c=c+Math.imul(nt,Rt)|0,c=c+Math.imul(m,Ut)|0,I=I+Math.imul(m,Rt)|0;var sr=(O+A|0)+((c&8191)<<13)|0;O=(I+(c>>>13)|0)+(sr>>>26)|0,sr&=67108863,A=Math.imul(It,Ct),c=Math.imul(It,xt),c=c+Math.imul(bt,Ct)|0,I=Math.imul(bt,xt),A=A+Math.imul(st,Vt)|0,c=c+Math.imul(st,Xt)|0,c=c+Math.imul(rt,Vt)|0,I=I+Math.imul(rt,Xt)|0,A=A+Math.imul(y,Zt)|0,c=c+Math.imul(y,te)|0,c=c+Math.imul(B,Zt)|0,I=I+Math.imul(B,te)|0,A=A+Math.imul(R,Ut)|0,c=c+Math.imul(R,Rt)|0,c=c+Math.imul(T,Ut)|0,I=I+Math.imul(T,Rt)|0,A=A+Math.imul(nt,Lt)|0,c=c+Math.imul(nt,Tt)|0,c=c+Math.imul(m,Lt)|0,I=I+Math.imul(m,Tt)|0;var or=(O+A|0)+((c&8191)<<13)|0;O=(I+(c>>>13)|0)+(or>>>26)|0,or&=67108863,A=Math.imul(Pt,Ct),c=Math.imul(Pt,xt),c=c+Math.imul(At,Ct)|0,I=Math.imul(At,xt),A=A+Math.imul(It,Vt)|0,c=c+Math.imul(It,Xt)|0,c=c+Math.imul(bt,Vt)|0,I=I+Math.imul(bt,Xt)|0,A=A+Math.imul(st,Zt)|0,c=c+Math.imul(st,te)|0,c=c+Math.imul(rt,Zt)|0,I=I+Math.imul(rt,te)|0,A=A+Math.imul(y,Ut)|0,c=c+Math.imul(y,Rt)|0,c=c+Math.imul(B,Ut)|0,I=I+Math.imul(B,Rt)|0,A=A+Math.imul(R,Lt)|0,c=c+Math.imul(R,Tt)|0,c=c+Math.imul(T,Lt)|0,I=I+Math.imul(T,Tt)|0,A=A+Math.imul(nt,$t)|0,c=c+Math.imul(nt,kt)|0,c=c+Math.imul(m,$t)|0,I=I+Math.imul(m,kt)|0;var ke=(O+A|0)+((c&8191)<<13)|0;O=(I+(c>>>13)|0)+(ke>>>26)|0,ke&=67108863,A=Math.imul(vt,Ct),c=Math.imul(vt,xt),c=c+Math.imul(yt,Ct)|0,I=Math.imul(yt,xt),A=A+Math.imul(Pt,Vt)|0,c=c+Math.imul(Pt,Xt)|0,c=c+Math.imul(At,Vt)|0,I=I+Math.imul(At,Xt)|0,A=A+Math.imul(It,Zt)|0,c=c+Math.imul(It,te)|0,c=c+Math.imul(bt,Zt)|0,I=I+Math.imul(bt,te)|0,A=A+Math.imul(st,Ut)|0,c=c+Math.imul(st,Rt)|0,c=c+Math.imul(rt,Ut)|0,I=I+Math.imul(rt,Rt)|0,A=A+Math.imul(y,Lt)|0,c=c+Math.imul(y,Tt)|0,c=c+Math.imul(B,Lt)|0,I=I+Math.imul(B,Tt)|0,A=A+Math.imul(R,$t)|0,c=c+Math.imul(R,kt)|0,c=c+Math.imul(T,$t)|0,I=I+Math.imul(T,kt)|0,A=A+Math.imul(nt,zt)|0,c=c+Math.imul(nt,Ft)|0,c=c+Math.imul(m,zt)|0,I=I+Math.imul(m,Ft)|0;var Wr=(O+A|0)+((c&8191)<<13)|0;O=(I+(c>>>13)|0)+(Wr>>>26)|0,Wr&=67108863,A=Math.imul(gt,Ct),c=Math.imul(gt,xt),c=c+Math.imul(wt,Ct)|0,I=Math.imul(wt,xt),A=A+Math.imul(vt,Vt)|0,c=c+Math.imul(vt,Xt)|0,c=c+Math.imul(yt,Vt)|0,I=I+Math.imul(yt,Xt)|0,A=A+Math.imul(Pt,Zt)|0,c=c+Math.imul(Pt,te)|0,c=c+Math.imul(At,Zt)|0,I=I+Math.imul(At,te)|0,A=A+Math.imul(It,Ut)|0,c=c+Math.imul(It,Rt)|0,c=c+Math.imul(bt,Ut)|0,I=I+Math.imul(bt,Rt)|0,A=A+Math.imul(st,Lt)|0,c=c+Math.imul(st,Tt)|0,c=c+Math.imul(rt,Lt)|0,I=I+Math.imul(rt,Tt)|0,A=A+Math.imul(y,$t)|0,c=c+Math.imul(y,kt)|0,c=c+Math.imul(B,$t)|0,I=I+Math.imul(B,kt)|0,A=A+Math.imul(R,zt)|0,c=c+Math.imul(R,Ft)|0,c=c+Math.imul(T,zt)|0,I=I+Math.imul(T,Ft)|0,A=A+Math.imul(nt,qt)|0,c=c+Math.imul(nt,Nt)|0,c=c+Math.imul(m,qt)|0,I=I+Math.imul(m,Nt)|0;var Xi=(O+A|0)+((c&8191)<<13)|0;O=(I+(c>>>13)|0)+(Xi>>>26)|0,Xi&=67108863,A=Math.imul(mt,Ct),c=Math.imul(mt,xt),c=c+Math.imul(St,Ct)|0,I=Math.imul(St,xt),A=A+Math.imul(gt,Vt)|0,c=c+Math.imul(gt,Xt)|0,c=c+Math.imul(wt,Vt)|0,I=I+Math.imul(wt,Xt)|0,A=A+Math.imul(vt,Zt)|0,c=c+Math.imul(vt,te)|0,c=c+Math.imul(yt,Zt)|0,I=I+Math.imul(yt,te)|0,A=A+Math.imul(Pt,Ut)|0,c=c+Math.imul(Pt,Rt)|0,c=c+Math.imul(At,Ut)|0,I=I+Math.imul(At,Rt)|0,A=A+Math.imul(It,Lt)|0,c=c+Math.imul(It,Tt)|0,c=c+Math.imul(bt,Lt)|0,I=I+Math.imul(bt,Tt)|0,A=A+Math.imul(st,$t)|0,c=c+Math.imul(st,kt)|0,c=c+Math.imul(rt,$t)|0,I=I+Math.imul(rt,kt)|0,A=A+Math.imul(y,zt)|0,c=c+Math.imul(y,Ft)|0,c=c+Math.imul(B,zt)|0,I=I+Math.imul(B,Ft)|0,A=A+Math.imul(R,qt)|0,c=c+Math.imul(R,Nt)|0,c=c+Math.imul(T,qt)|0,I=I+Math.imul(T,Nt)|0,A=A+Math.imul(nt,jt)|0,c=c+Math.imul(nt,ie)|0,c=c+Math.imul(m,jt)|0,I=I+Math.imul(m,ie)|0;var Xr=(O+A|0)+((c&8191)<<13)|0;O=(I+(c>>>13)|0)+(Xr>>>26)|0,Xr&=67108863,A=Math.imul(Mt,Ct),c=Math.imul(Mt,xt),c=c+Math.imul(Dt,Ct)|0,I=Math.imul(Dt,xt),A=A+Math.imul(mt,Vt)|0,c=c+Math.imul(mt,Xt)|0,c=c+Math.imul(St,Vt)|0,I=I+Math.imul(St,Xt)|0,A=A+Math.imul(gt,Zt)|0,c=c+Math.imul(gt,te)|0,c=c+Math.imul(wt,Zt)|0,I=I+Math.imul(wt,te)|0,A=A+Math.imul(vt,Ut)|0,c=c+Math.imul(vt,Rt)|0,c=c+Math.imul(yt,Ut)|0,I=I+Math.imul(yt,Rt)|0,A=A+Math.imul(Pt,Lt)|0,c=c+Math.imul(Pt,Tt)|0,c=c+Math.imul(At,Lt)|0,I=I+Math.imul(At,Tt)|0,A=A+Math.imul(It,$t)|0,c=c+Math.imul(It,kt)|0,c=c+Math.imul(bt,$t)|0,I=I+Math.imul(bt,kt)|0,A=A+Math.imul(st,zt)|0,c=c+Math.imul(st,Ft)|0,c=c+Math.imul(rt,zt)|0,I=I+Math.imul(rt,Ft)|0,A=A+Math.imul(y,qt)|0,c=c+Math.imul(y,Nt)|0,c=c+Math.imul(B,qt)|0,I=I+Math.imul(B,Nt)|0,A=A+Math.imul(R,jt)|0,c=c+Math.imul(R,ie)|0,c=c+Math.imul(T,jt)|0,I=I+Math.imul(T,ie)|0,A=A+Math.imul(nt,ne)|0,c=c+Math.imul(nt,Yt)|0,c=c+Math.imul(m,ne)|0,I=I+Math.imul(m,Yt)|0;var Zi=(O+A|0)+((c&8191)<<13)|0;O=(I+(c>>>13)|0)+(Zi>>>26)|0,Zi&=67108863,A=Math.imul(Mt,Vt),c=Math.imul(Mt,Xt),c=c+Math.imul(Dt,Vt)|0,I=Math.imul(Dt,Xt),A=A+Math.imul(mt,Zt)|0,c=c+Math.imul(mt,te)|0,c=c+Math.imul(St,Zt)|0,I=I+Math.imul(St,te)|0,A=A+Math.imul(gt,Ut)|0,c=c+Math.imul(gt,Rt)|0,c=c+Math.imul(wt,Ut)|0,I=I+Math.imul(wt,Rt)|0,A=A+Math.imul(vt,Lt)|0,c=c+Math.imul(vt,Tt)|0,c=c+Math.imul(yt,Lt)|0,I=I+Math.imul(yt,Tt)|0,A=A+Math.imul(Pt,$t)|0,c=c+Math.imul(Pt,kt)|0,c=c+Math.imul(At,$t)|0,I=I+Math.imul(At,kt)|0,A=A+Math.imul(It,zt)|0,c=c+Math.imul(It,Ft)|0,c=c+Math.imul(bt,zt)|0,I=I+Math.imul(bt,Ft)|0,A=A+Math.imul(st,qt)|0,c=c+Math.imul(st,Nt)|0,c=c+Math.imul(rt,qt)|0,I=I+Math.imul(rt,Nt)|0,A=A+Math.imul(y,jt)|0,c=c+Math.imul(y,ie)|0,c=c+Math.imul(B,jt)|0,I=I+Math.imul(B,ie)|0,A=A+Math.imul(R,ne)|0,c=c+Math.imul(R,Yt)|0,c=c+Math.imul(T,ne)|0,I=I+Math.imul(T,Yt)|0;var tn=(O+A|0)+((c&8191)<<13)|0;O=(I+(c>>>13)|0)+(tn>>>26)|0,tn&=67108863,A=Math.imul(Mt,Zt),c=Math.imul(Mt,te),c=c+Math.imul(Dt,Zt)|0,I=Math.imul(Dt,te),A=A+Math.imul(mt,Ut)|0,c=c+Math.imul(mt,Rt)|0,c=c+Math.imul(St,Ut)|0,I=I+Math.imul(St,Rt)|0,A=A+Math.imul(gt,Lt)|0,c=c+Math.imul(gt,Tt)|0,c=c+Math.imul(wt,Lt)|0,I=I+Math.imul(wt,Tt)|0,A=A+Math.imul(vt,$t)|0,c=c+Math.imul(vt,kt)|0,c=c+Math.imul(yt,$t)|0,I=I+Math.imul(yt,kt)|0,A=A+Math.imul(Pt,zt)|0,c=c+Math.imul(Pt,Ft)|0,c=c+Math.imul(At,zt)|0,I=I+Math.imul(At,Ft)|0,A=A+Math.imul(It,qt)|0,c=c+Math.imul(It,Nt)|0,c=c+Math.imul(bt,qt)|0,I=I+Math.imul(bt,Nt)|0,A=A+Math.imul(st,jt)|0,c=c+Math.imul(st,ie)|0,c=c+Math.imul(rt,jt)|0,I=I+Math.imul(rt,ie)|0,A=A+Math.imul(y,ne)|0,c=c+Math.imul(y,Yt)|0,c=c+Math.imul(B,ne)|0,I=I+Math.imul(B,Yt)|0;var Zr=(O+A|0)+((c&8191)<<13)|0;O=(I+(c>>>13)|0)+(Zr>>>26)|0,Zr&=67108863,A=Math.imul(Mt,Ut),c=Math.imul(Mt,Rt),c=c+Math.imul(Dt,Ut)|0,I=Math.imul(Dt,Rt),A=A+Math.imul(mt,Lt)|0,c=c+Math.imul(mt,Tt)|0,c=c+Math.imul(St,Lt)|0,I=I+Math.imul(St,Tt)|0,A=A+Math.imul(gt,$t)|0,c=c+Math.imul(gt,kt)|0,c=c+Math.imul(wt,$t)|0,I=I+Math.imul(wt,kt)|0,A=A+Math.imul(vt,zt)|0,c=c+Math.imul(vt,Ft)|0,c=c+Math.imul(yt,zt)|0,I=I+Math.imul(yt,Ft)|0,A=A+Math.imul(Pt,qt)|0,c=c+Math.imul(Pt,Nt)|0,c=c+Math.imul(At,qt)|0,I=I+Math.imul(At,Nt)|0,A=A+Math.imul(It,jt)|0,c=c+Math.imul(It,ie)|0,c=c+Math.imul(bt,jt)|0,I=I+Math.imul(bt,ie)|0,A=A+Math.imul(st,ne)|0,c=c+Math.imul(st,Yt)|0,c=c+Math.imul(rt,ne)|0,I=I+Math.imul(rt,Yt)|0;var Oi=(O+A|0)+((c&8191)<<13)|0;O=(I+(c>>>13)|0)+(Oi>>>26)|0,Oi&=67108863,A=Math.imul(Mt,Lt),c=Math.imul(Mt,Tt),c=c+Math.imul(Dt,Lt)|0,I=Math.imul(Dt,Tt),A=A+Math.imul(mt,$t)|0,c=c+Math.imul(mt,kt)|0,c=c+Math.imul(St,$t)|0,I=I+Math.imul(St,kt)|0,A=A+Math.imul(gt,zt)|0,c=c+Math.imul(gt,Ft)|0,c=c+Math.imul(wt,zt)|0,I=I+Math.imul(wt,Ft)|0,A=A+Math.imul(vt,qt)|0,c=c+Math.imul(vt,Nt)|0,c=c+Math.imul(yt,qt)|0,I=I+Math.imul(yt,Nt)|0,A=A+Math.imul(Pt,jt)|0,c=c+Math.imul(Pt,ie)|0,c=c+Math.imul(At,jt)|0,I=I+Math.imul(At,ie)|0,A=A+Math.imul(It,ne)|0,c=c+Math.imul(It,Yt)|0,c=c+Math.imul(bt,ne)|0,I=I+Math.imul(bt,Yt)|0;var Ni=(O+A|0)+((c&8191)<<13)|0;O=(I+(c>>>13)|0)+(Ni>>>26)|0,Ni&=67108863,A=Math.imul(Mt,$t),c=Math.imul(Mt,kt),c=c+Math.imul(Dt,$t)|0,I=Math.imul(Dt,kt),A=A+Math.imul(mt,zt)|0,c=c+Math.imul(mt,Ft)|0,c=c+Math.imul(St,zt)|0,I=I+Math.imul(St,Ft)|0,A=A+Math.imul(gt,qt)|0,c=c+Math.imul(gt,Nt)|0,c=c+Math.imul(wt,qt)|0,I=I+Math.imul(wt,Nt)|0,A=A+Math.imul(vt,jt)|0,c=c+Math.imul(vt,ie)|0,c=c+Math.imul(yt,jt)|0,I=I+Math.imul(yt,ie)|0,A=A+Math.imul(Pt,ne)|0,c=c+Math.imul(Pt,Yt)|0,c=c+Math.imul(At,ne)|0,I=I+Math.imul(At,Yt)|0;var gr=(O+A|0)+((c&8191)<<13)|0;O=(I+(c>>>13)|0)+(gr>>>26)|0,gr&=67108863,A=Math.imul(Mt,zt),c=Math.imul(Mt,Ft),c=c+Math.imul(Dt,zt)|0,I=Math.imul(Dt,Ft),A=A+Math.imul(mt,qt)|0,c=c+Math.imul(mt,Nt)|0,c=c+Math.imul(St,qt)|0,I=I+Math.imul(St,Nt)|0,A=A+Math.imul(gt,jt)|0,c=c+Math.imul(gt,ie)|0,c=c+Math.imul(wt,jt)|0,I=I+Math.imul(wt,ie)|0,A=A+Math.imul(vt,ne)|0,c=c+Math.imul(vt,Yt)|0,c=c+Math.imul(yt,ne)|0,I=I+Math.imul(yt,Yt)|0;var en=(O+A|0)+((c&8191)<<13)|0;O=(I+(c>>>13)|0)+(en>>>26)|0,en&=67108863,A=Math.imul(Mt,qt),c=Math.imul(Mt,Nt),c=c+Math.imul(Dt,qt)|0,I=Math.imul(Dt,Nt),A=A+Math.imul(mt,jt)|0,c=c+Math.imul(mt,ie)|0,c=c+Math.imul(St,jt)|0,I=I+Math.imul(St,ie)|0,A=A+Math.imul(gt,ne)|0,c=c+Math.imul(gt,Yt)|0,c=c+Math.imul(wt,ne)|0,I=I+Math.imul(wt,Yt)|0;var rn=(O+A|0)+((c&8191)<<13)|0;O=(I+(c>>>13)|0)+(rn>>>26)|0,rn&=67108863,A=Math.imul(Mt,jt),c=Math.imul(Mt,ie),c=c+Math.imul(Dt,jt)|0,I=Math.imul(Dt,ie),A=A+Math.imul(mt,ne)|0,c=c+Math.imul(mt,Yt)|0,c=c+Math.imul(St,ne)|0,I=I+Math.imul(St,Yt)|0;var nn=(O+A|0)+((c&8191)<<13)|0;O=(I+(c>>>13)|0)+(nn>>>26)|0,nn&=67108863,A=Math.imul(Mt,ne),c=Math.imul(Mt,Yt),c=c+Math.imul(Dt,ne)|0,I=Math.imul(Dt,Yt);var sn=(O+A|0)+((c&8191)<<13)|0;return O=(I+(c>>>13)|0)+(sn>>>26)|0,sn&=67108863,D[0]=rr,D[1]=ir,D[2]=nr,D[3]=sr,D[4]=or,D[5]=ke,D[6]=Wr,D[7]=Xi,D[8]=Xr,D[9]=Zi,D[10]=tn,D[11]=Zr,D[12]=Oi,D[13]=Ni,D[14]=gr,D[15]=en,D[16]=rn,D[17]=nn,D[18]=sn,O!==0&&(D[19]=O,p.length++),p};Math.imul||(G=X);function Y(h,u,p){p.negative=u.negative^h.negative,p.length=h.length+u.length;for(var b=0,M=0,D=0;D<p.length-1;D++){var O=M;M=0;for(var A=b&67108863,c=Math.min(D,u.length-1),I=Math.max(0,D-h.length+1);I<=c;I++){var Z=D-I,nt=h.words[Z]|0,m=u.words[I]|0,H=nt*m,R=H&67108863;O=O+(H/67108864|0)|0,R=R+A|0,A=R&67108863,O=O+(R>>>26)|0,M+=O>>>26,O&=67108863}p.words[D]=A,b=O,O=M}return b!==0?p.words[D]=b:p.length--,p._strip()}function $(h,u,p){return Y(h,u,p)}o.prototype.mulTo=function(h,u){var p,b=this.length+h.length;return this.length===10&&h.length===10?p=G(this,h,u):b<63?p=X(this,h,u):b<1024?p=Y(this,h,u):p=$(this,h,u),p},o.prototype.mul=function(h){var u=new o(null);return u.words=new Array(this.length+h.length),this.mulTo(h,u)},o.prototype.mulf=function(h){var u=new o(null);return u.words=new Array(this.length+h.length),$(this,h,u)},o.prototype.imul=function(h){return this.clone().mulTo(h,this)},o.prototype.imuln=function(h){var u=h<0;u&&(h=-h),i(typeof h=="number"),i(h<67108864);for(var p=0,b=0;b<this.length;b++){var M=(this.words[b]|0)*h,D=(M&67108863)+(p&67108863);p>>=26,p+=M/67108864|0,p+=D>>>26,this.words[b]=D&67108863}return p!==0&&(this.words[b]=p,this.length++),u?this.ineg():this},o.prototype.muln=function(h){return this.clone().imuln(h)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(h){var u=z(h);if(u.length===0)return new o(1);for(var p=this,b=0;b<u.length&&u[b]===0;b++,p=p.sqr());if(++b<u.length)for(var M=p.sqr();b<u.length;b++,M=M.sqr())u[b]!==0&&(p=p.mul(M));return p},o.prototype.iushln=function(h){i(typeof h=="number"&&h>=0);var u=h%26,p=(h-u)/26,b=67108863>>>26-u<<26-u,M;if(u!==0){var D=0;for(M=0;M<this.length;M++){var O=this.words[M]&b,A=(this.words[M]|0)-O<<u;this.words[M]=A|D,D=O>>>26-u}D&&(this.words[M]=D,this.length++)}if(p!==0){for(M=this.length-1;M>=0;M--)this.words[M+p]=this.words[M];for(M=0;M<p;M++)this.words[M]=0;this.length+=p}return this._strip()},o.prototype.ishln=function(h){return i(this.negative===0),this.iushln(h)},o.prototype.iushrn=function(h,u,p){i(typeof h=="number"&&h>=0);var b;u?b=(u-u%26)/26:b=0;var M=h%26,D=Math.min((h-M)/26,this.length),O=67108863^67108863>>>M<<M,A=p;if(b-=D,b=Math.max(0,b),A){for(var c=0;c<D;c++)A.words[c]=this.words[c];A.length=D}if(D!==0)if(this.length>D)for(this.length-=D,c=0;c<this.length;c++)this.words[c]=this.words[c+D];else this.words[0]=0,this.length=1;var I=0;for(c=this.length-1;c>=0&&(I!==0||c>=b);c--){var Z=this.words[c]|0;this.words[c]=I<<26-M|Z>>>M,I=Z&O}return A&&I!==0&&(A.words[A.length++]=I),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},o.prototype.ishrn=function(h,u,p){return i(this.negative===0),this.iushrn(h,u,p)},o.prototype.shln=function(h){return this.clone().ishln(h)},o.prototype.ushln=function(h){return this.clone().iushln(h)},o.prototype.shrn=function(h){return this.clone().ishrn(h)},o.prototype.ushrn=function(h){return this.clone().iushrn(h)},o.prototype.testn=function(h){i(typeof h=="number"&&h>=0);var u=h%26,p=(h-u)/26,b=1<<u;if(this.length<=p)return!1;var M=this.words[p];return!!(M&b)},o.prototype.imaskn=function(h){i(typeof h=="number"&&h>=0);var u=h%26,p=(h-u)/26;if(i(this.negative===0,"imaskn works only with positive numbers"),this.length<=p)return this;if(u!==0&&p++,this.length=Math.min(p,this.length),u!==0){var b=67108863^67108863>>>u<<u;this.words[this.length-1]&=b}return this._strip()},o.prototype.maskn=function(h){return this.clone().imaskn(h)},o.prototype.iaddn=function(h){return i(typeof h=="number"),i(h<67108864),h<0?this.isubn(-h):this.negative!==0?this.length===1&&(this.words[0]|0)<=h?(this.words[0]=h-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(h),this.negative=1,this):this._iaddn(h)},o.prototype._iaddn=function(h){this.words[0]+=h;for(var u=0;u<this.length&&this.words[u]>=67108864;u++)this.words[u]-=67108864,u===this.length-1?this.words[u+1]=1:this.words[u+1]++;return this.length=Math.max(this.length,u+1),this},o.prototype.isubn=function(h){if(i(typeof h=="number"),i(h<67108864),h<0)return this.iaddn(-h);if(this.negative!==0)return this.negative=0,this.iaddn(h),this.negative=1,this;if(this.words[0]-=h,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var u=0;u<this.length&&this.words[u]<0;u++)this.words[u]+=67108864,this.words[u+1]-=1;return this._strip()},o.prototype.addn=function(h){return this.clone().iaddn(h)},o.prototype.subn=function(h){return this.clone().isubn(h)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(h,u,p){var b=h.length+p,M;this._expand(b);var D,O=0;for(M=0;M<h.length;M++){D=(this.words[M+p]|0)+O;var A=(h.words[M]|0)*u;D-=A&67108863,O=(D>>26)-(A/67108864|0),this.words[M+p]=D&67108863}for(;M<this.length-p;M++)D=(this.words[M+p]|0)+O,O=D>>26,this.words[M+p]=D&67108863;if(O===0)return this._strip();for(i(O===-1),O=0,M=0;M<this.length;M++)D=-(this.words[M]|0)+O,O=D>>26,this.words[M]=D&67108863;return this.negative=1,this._strip()},o.prototype._wordDiv=function(h,u){var p=this.length-h.length,b=this.clone(),M=h,D=M.words[M.length-1]|0,O=this._countBits(D);p=26-O,p!==0&&(M=M.ushln(p),b.iushln(p),D=M.words[M.length-1]|0);var A=b.length-M.length,c;if(u!=="mod"){c=new o(null),c.length=A+1,c.words=new Array(c.length);for(var I=0;I<c.length;I++)c.words[I]=0}var Z=b.clone()._ishlnsubmul(M,1,A);Z.negative===0&&(b=Z,c&&(c.words[A]=1));for(var nt=A-1;nt>=0;nt--){var m=(b.words[M.length+nt]|0)*67108864+(b.words[M.length+nt-1]|0);for(m=Math.min(m/D|0,67108863),b._ishlnsubmul(M,m,nt);b.negative!==0;)m--,b.negative=0,b._ishlnsubmul(M,1,nt),b.isZero()||(b.negative^=1);c&&(c.words[nt]=m)}return c&&c._strip(),b._strip(),u!=="div"&&p!==0&&b.iushrn(p),{div:c||null,mod:b}},o.prototype.divmod=function(h,u,p){if(i(!h.isZero()),this.isZero())return{div:new o(0),mod:new o(0)};var b,M,D;return this.negative!==0&&h.negative===0?(D=this.neg().divmod(h,u),u!=="mod"&&(b=D.div.neg()),u!=="div"&&(M=D.mod.neg(),p&&M.negative!==0&&M.iadd(h)),{div:b,mod:M}):this.negative===0&&h.negative!==0?(D=this.divmod(h.neg(),u),u!=="mod"&&(b=D.div.neg()),{div:b,mod:D.mod}):this.negative&h.negative?(D=this.neg().divmod(h.neg(),u),u!=="div"&&(M=D.mod.neg(),p&&M.negative!==0&&M.isub(h)),{div:D.div,mod:M}):h.length>this.length||this.cmp(h)<0?{div:new o(0),mod:this}:h.length===1?u==="div"?{div:this.divn(h.words[0]),mod:null}:u==="mod"?{div:null,mod:new o(this.modrn(h.words[0]))}:{div:this.divn(h.words[0]),mod:new o(this.modrn(h.words[0]))}:this._wordDiv(h,u)},o.prototype.div=function(h){return this.divmod(h,"div",!1).div},o.prototype.mod=function(h){return this.divmod(h,"mod",!1).mod},o.prototype.umod=function(h){return this.divmod(h,"mod",!0).mod},o.prototype.divRound=function(h){var u=this.divmod(h);if(u.mod.isZero())return u.div;var p=u.div.negative!==0?u.mod.isub(h):u.mod,b=h.ushrn(1),M=h.andln(1),D=p.cmp(b);return D<0||M===1&&D===0?u.div:u.div.negative!==0?u.div.isubn(1):u.div.iaddn(1)},o.prototype.modrn=function(h){var u=h<0;u&&(h=-h),i(h<=67108863);for(var p=(1<<26)%h,b=0,M=this.length-1;M>=0;M--)b=(p*b+(this.words[M]|0))%h;return u?-b:b},o.prototype.modn=function(h){return this.modrn(h)},o.prototype.idivn=function(h){var u=h<0;u&&(h=-h),i(h<=67108863);for(var p=0,b=this.length-1;b>=0;b--){var M=(this.words[b]|0)+p*67108864;this.words[b]=M/h|0,p=M%h}return this._strip(),u?this.ineg():this},o.prototype.divn=function(h){return this.clone().idivn(h)},o.prototype.egcd=function(h){i(h.negative===0),i(!h.isZero());var u=this,p=h.clone();u.negative!==0?u=u.umod(h):u=u.clone();for(var b=new o(1),M=new o(0),D=new o(0),O=new o(1),A=0;u.isEven()&&p.isEven();)u.iushrn(1),p.iushrn(1),++A;for(var c=p.clone(),I=u.clone();!u.isZero();){for(var Z=0,nt=1;!(u.words[0]&nt)&&Z<26;++Z,nt<<=1);if(Z>0)for(u.iushrn(Z);Z-- >0;)(b.isOdd()||M.isOdd())&&(b.iadd(c),M.isub(I)),b.iushrn(1),M.iushrn(1);for(var m=0,H=1;!(p.words[0]&H)&&m<26;++m,H<<=1);if(m>0)for(p.iushrn(m);m-- >0;)(D.isOdd()||O.isOdd())&&(D.iadd(c),O.isub(I)),D.iushrn(1),O.iushrn(1);u.cmp(p)>=0?(u.isub(p),b.isub(D),M.isub(O)):(p.isub(u),D.isub(b),O.isub(M))}return{a:D,b:O,gcd:p.iushln(A)}},o.prototype._invmp=function(h){i(h.negative===0),i(!h.isZero());var u=this,p=h.clone();u.negative!==0?u=u.umod(h):u=u.clone();for(var b=new o(1),M=new o(0),D=p.clone();u.cmpn(1)>0&&p.cmpn(1)>0;){for(var O=0,A=1;!(u.words[0]&A)&&O<26;++O,A<<=1);if(O>0)for(u.iushrn(O);O-- >0;)b.isOdd()&&b.iadd(D),b.iushrn(1);for(var c=0,I=1;!(p.words[0]&I)&&c<26;++c,I<<=1);if(c>0)for(p.iushrn(c);c-- >0;)M.isOdd()&&M.iadd(D),M.iushrn(1);u.cmp(p)>=0?(u.isub(p),b.isub(M)):(p.isub(u),M.isub(b))}var Z;return u.cmpn(1)===0?Z=b:Z=M,Z.cmpn(0)<0&&Z.iadd(h),Z},o.prototype.gcd=function(h){if(this.isZero())return h.abs();if(h.isZero())return this.abs();var u=this.clone(),p=h.clone();u.negative=0,p.negative=0;for(var b=0;u.isEven()&&p.isEven();b++)u.iushrn(1),p.iushrn(1);do{for(;u.isEven();)u.iushrn(1);for(;p.isEven();)p.iushrn(1);var M=u.cmp(p);if(M<0){var D=u;u=p,p=D}else if(M===0||p.cmpn(1)===0)break;u.isub(p)}while(!0);return p.iushln(b)},o.prototype.invm=function(h){return this.egcd(h).a.umod(h)},o.prototype.isEven=function(){return(this.words[0]&1)===0},o.prototype.isOdd=function(){return(this.words[0]&1)===1},o.prototype.andln=function(h){return this.words[0]&h},o.prototype.bincn=function(h){i(typeof h=="number");var u=h%26,p=(h-u)/26,b=1<<u;if(this.length<=p)return this._expand(p+1),this.words[p]|=b,this;for(var M=b,D=p;M!==0&&D<this.length;D++){var O=this.words[D]|0;O+=M,M=O>>>26,O&=67108863,this.words[D]=O}return M!==0&&(this.words[D]=M,this.length++),this},o.prototype.isZero=function(){return this.length===1&&this.words[0]===0},o.prototype.cmpn=function(h){var u=h<0;if(this.negative!==0&&!u)return-1;if(this.negative===0&&u)return 1;this._strip();var p;if(this.length>1)p=1;else{u&&(h=-h),i(h<=67108863,"Number is too big");var b=this.words[0]|0;p=b===h?0:b<h?-1:1}return this.negative!==0?-p|0:p},o.prototype.cmp=function(h){if(this.negative!==0&&h.negative===0)return-1;if(this.negative===0&&h.negative!==0)return 1;var u=this.ucmp(h);return this.negative!==0?-u|0:u},o.prototype.ucmp=function(h){if(this.length>h.length)return 1;if(this.length<h.length)return-1;for(var u=0,p=this.length-1;p>=0;p--){var b=this.words[p]|0,M=h.words[p]|0;if(b!==M){b<M?u=-1:b>M&&(u=1);break}}return u},o.prototype.gtn=function(h){return this.cmpn(h)===1},o.prototype.gt=function(h){return this.cmp(h)===1},o.prototype.gten=function(h){return this.cmpn(h)>=0},o.prototype.gte=function(h){return this.cmp(h)>=0},o.prototype.ltn=function(h){return this.cmpn(h)===-1},o.prototype.lt=function(h){return this.cmp(h)===-1},o.prototype.lten=function(h){return this.cmpn(h)<=0},o.prototype.lte=function(h){return this.cmp(h)<=0},o.prototype.eqn=function(h){return this.cmpn(h)===0},o.prototype.eq=function(h){return this.cmp(h)===0},o.red=function(h){return new ht(h)},o.prototype.toRed=function(h){return i(!this.red,"Already a number in reduction context"),i(this.negative===0,"red works only with positives"),h.convertTo(this)._forceRed(h)},o.prototype.fromRed=function(){return i(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(h){return this.red=h,this},o.prototype.forceRed=function(h){return i(!this.red,"Already a number in reduction context"),this._forceRed(h)},o.prototype.redAdd=function(h){return i(this.red,"redAdd works only with red numbers"),this.red.add(this,h)},o.prototype.redIAdd=function(h){return i(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,h)},o.prototype.redSub=function(h){return i(this.red,"redSub works only with red numbers"),this.red.sub(this,h)},o.prototype.redISub=function(h){return i(this.red,"redISub works only with red numbers"),this.red.isub(this,h)},o.prototype.redShl=function(h){return i(this.red,"redShl works only with red numbers"),this.red.shl(this,h)},o.prototype.redMul=function(h){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,h),this.red.mul(this,h)},o.prototype.redIMul=function(h){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,h),this.red.imul(this,h)},o.prototype.redSqr=function(){return i(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return i(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return i(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return i(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return i(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(h){return i(this.red&&!h.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,h)};var j={k256:null,p224:null,p192:null,p25519:null};function k(h,u){this.name=h,this.p=new o(u,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}k.prototype._tmp=function(){var h=new o(null);return h.words=new Array(Math.ceil(this.n/13)),h},k.prototype.ireduce=function(h){var u=h,p;do this.split(u,this.tmp),u=this.imulK(u),u=u.iadd(this.tmp),p=u.bitLength();while(p>this.n);var b=p<this.n?-1:u.ucmp(this.p);return b===0?(u.words[0]=0,u.length=1):b>0?u.isub(this.p):u.strip!==void 0?u.strip():u._strip(),u},k.prototype.split=function(h,u){h.iushrn(this.n,0,u)},k.prototype.imulK=function(h){return h.imul(this.k)};function _(){k.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}n(_,k),_.prototype.split=function(h,u){for(var p=4194303,b=Math.min(h.length,9),M=0;M<b;M++)u.words[M]=h.words[M];if(u.length=b,h.length<=9){h.words[0]=0,h.length=1;return}var D=h.words[9];for(u.words[u.length++]=D&p,M=10;M<h.length;M++){var O=h.words[M]|0;h.words[M-10]=(O&p)<<4|D>>>22,D=O}D>>>=22,h.words[M-10]=D,D===0&&h.length>10?h.length-=10:h.length-=9},_.prototype.imulK=function(h){h.words[h.length]=0,h.words[h.length+1]=0,h.length+=2;for(var u=0,p=0;p<h.length;p++){var b=h.words[p]|0;u+=b*977,h.words[p]=u&67108863,u=b*64+(u/67108864|0)}return h.words[h.length-1]===0&&(h.length--,h.words[h.length-1]===0&&h.length--),h};function L(){k.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}n(L,k);function ot(){k.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}n(ot,k);function ct(){k.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}n(ct,k),ct.prototype.imulK=function(h){for(var u=0,p=0;p<h.length;p++){var b=(h.words[p]|0)*19+u,M=b&67108863;b>>>=26,h.words[p]=M,u=b}return u!==0&&(h.words[h.length++]=u),h},o._prime=function(h){if(j[h])return j[h];var u;if(h==="k256")u=new _;else if(h==="p224")u=new L;else if(h==="p192")u=new ot;else if(h==="p25519")u=new ct;else throw new Error("Unknown prime "+h);return j[h]=u,u};function ht(h){if(typeof h=="string"){var u=o._prime(h);this.m=u.p,this.prime=u}else i(h.gtn(1),"modulus must be greater than 1"),this.m=h,this.prime=null}ht.prototype._verify1=function(h){i(h.negative===0,"red works only with positives"),i(h.red,"red works only with red numbers")},ht.prototype._verify2=function(h,u){i((h.negative|u.negative)===0,"red works only with positives"),i(h.red&&h.red===u.red,"red works only with red numbers")},ht.prototype.imod=function(h){return this.prime?this.prime.ireduce(h)._forceRed(this):(w(h,h.umod(this.m)._forceRed(this)),h)},ht.prototype.neg=function(h){return h.isZero()?h.clone():this.m.sub(h)._forceRed(this)},ht.prototype.add=function(h,u){this._verify2(h,u);var p=h.add(u);return p.cmp(this.m)>=0&&p.isub(this.m),p._forceRed(this)},ht.prototype.iadd=function(h,u){this._verify2(h,u);var p=h.iadd(u);return p.cmp(this.m)>=0&&p.isub(this.m),p},ht.prototype.sub=function(h,u){this._verify2(h,u);var p=h.sub(u);return p.cmpn(0)<0&&p.iadd(this.m),p._forceRed(this)},ht.prototype.isub=function(h,u){this._verify2(h,u);var p=h.isub(u);return p.cmpn(0)<0&&p.iadd(this.m),p},ht.prototype.shl=function(h,u){return this._verify1(h),this.imod(h.ushln(u))},ht.prototype.imul=function(h,u){return this._verify2(h,u),this.imod(h.imul(u))},ht.prototype.mul=function(h,u){return this._verify2(h,u),this.imod(h.mul(u))},ht.prototype.isqr=function(h){return this.imul(h,h.clone())},ht.prototype.sqr=function(h){return this.mul(h,h)},ht.prototype.sqrt=function(h){if(h.isZero())return h.clone();var u=this.m.andln(3);if(i(u%2===1),u===3){var p=this.m.add(new o(1)).iushrn(2);return this.pow(h,p)}for(var b=this.m.subn(1),M=0;!b.isZero()&&b.andln(1)===0;)M++,b.iushrn(1);i(!b.isZero());var D=new o(1).toRed(this),O=D.redNeg(),A=this.m.subn(1).iushrn(1),c=this.m.bitLength();for(c=new o(2*c*c).toRed(this);this.pow(c,A).cmp(O)!==0;)c.redIAdd(O);for(var I=this.pow(c,b),Z=this.pow(h,b.addn(1).iushrn(1)),nt=this.pow(h,b),m=M;nt.cmp(D)!==0;){for(var H=nt,R=0;H.cmp(D)!==0;R++)H=H.redSqr();i(R<m);var T=this.pow(I,new o(1).iushln(m-R-1));Z=Z.redMul(T),I=T.redSqr(),nt=nt.redMul(I),m=R}return Z},ht.prototype.invm=function(h){var u=h._invmp(this.m);return u.negative!==0?(u.negative=0,this.imod(u).redNeg()):this.imod(u)},ht.prototype.pow=function(h,u){if(u.isZero())return new o(1).toRed(this);if(u.cmpn(1)===0)return h.clone();var p=4,b=new Array(1<<p);b[0]=new o(1).toRed(this),b[1]=h;for(var M=2;M<b.length;M++)b[M]=this.mul(b[M-1],h);var D=b[0],O=0,A=0,c=u.bitLength()%26;for(c===0&&(c=26),M=u.length-1;M>=0;M--){for(var I=u.words[M],Z=c-1;Z>=0;Z--){var nt=I>>Z&1;if(D!==b[0]&&(D=this.sqr(D)),nt===0&&O===0){A=0;continue}O<<=1,O|=nt,A++,!(A!==p&&(M!==0||Z!==0))&&(D=this.mul(D,b[O]),A=0,O=0)}c=26}return D},ht.prototype.convertTo=function(h){var u=h.umod(this.m);return u===h?u.clone():u},ht.prototype.convertFrom=function(h){var u=h.clone();return u.red=null,u},o.mont=function(h){return new _t(h)};function _t(h){ht.call(this,h),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}n(_t,ht),_t.prototype.convertTo=function(h){return this.imod(h.ushln(this.shift))},_t.prototype.convertFrom=function(h){var u=this.imod(h.mul(this.rinv));return u.red=null,u},_t.prototype.imul=function(h,u){if(h.isZero()||u.isZero())return h.words[0]=0,h.length=1,h;var p=h.imul(u),b=p.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),M=p.isub(b).iushrn(this.shift),D=M;return M.cmp(this.m)>=0?D=M.isub(this.m):M.cmpn(0)<0&&(D=M.iadd(this.m)),D._forceRed(this)},_t.prototype.mul=function(h,u){if(h.isZero()||u.isZero())return new o(0)._forceRed(this);var p=h.mul(u),b=p.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),M=p.isub(b).iushrn(this.shift),D=M;return M.cmp(this.m)>=0?D=M.isub(this.m):M.cmpn(0)<0&&(D=M.iadd(this.m)),D._forceRed(this)},_t.prototype.invm=function(h){var u=this.imod(h._invmp(this.m).mul(this.r2));return u._forceRed(this)}})(e,sv)})(uv);var le=uv.exports;const cv="bignumber/5.7.0";var Xl=le.BN;const cs=new di(cv),tl={},x1=9007199254740991;function N4(e){return e!=null&&(Yr.isBigNumber(e)||typeof e=="number"&&e%1===0||typeof e=="string"&&!!e.match(/^-?[0-9]+$/)||ta(e)||typeof e=="bigint"||gh(e))}let C1=!1,Yr=class pn{constructor(t,r){t!==tl&&cs.throwError("cannot call constructor directly; use BigNumber.from",di.errors.UNSUPPORTED_OPERATION,{operation:"new (BigNumber)"}),this._hex=r,this._isBigNumber=!0,Object.freeze(this)}fromTwos(t){return si(De(this).fromTwos(t))}toTwos(t){return si(De(this).toTwos(t))}abs(){return this._hex[0]==="-"?pn.from(this._hex.substring(1)):this}add(t){return si(De(this).add(De(t)))}sub(t){return si(De(this).sub(De(t)))}div(t){return pn.from(t).isZero()&&$i("division-by-zero","div"),si(De(this).div(De(t)))}mul(t){return si(De(this).mul(De(t)))}mod(t){const r=De(t);return r.isNeg()&&$i("division-by-zero","mod"),si(De(this).umod(r))}pow(t){const r=De(t);return r.isNeg()&&$i("negative-power","pow"),si(De(this).pow(r))}and(t){const r=De(t);return(this.isNegative()||r.isNeg())&&$i("unbound-bitwise-result","and"),si(De(this).and(r))}or(t){const r=De(t);return(this.isNegative()||r.isNeg())&&$i("unbound-bitwise-result","or"),si(De(this).or(r))}xor(t){const r=De(t);return(this.isNegative()||r.isNeg())&&$i("unbound-bitwise-result","xor"),si(De(this).xor(r))}mask(t){return(this.isNegative()||t<0)&&$i("negative-width","mask"),si(De(this).maskn(t))}shl(t){return(this.isNegative()||t<0)&&$i("negative-width","shl"),si(De(this).shln(t))}shr(t){return(this.isNegative()||t<0)&&$i("negative-width","shr"),si(De(this).shrn(t))}eq(t){return De(this).eq(De(t))}lt(t){return De(this).lt(De(t))}lte(t){return De(this).lte(De(t))}gt(t){return De(this).gt(De(t))}gte(t){return De(this).gte(De(t))}isNegative(){return this._hex[0]==="-"}isZero(){return De(this).isZero()}toNumber(){try{return De(this).toNumber()}catch{$i("overflow","toNumber",this.toString())}return null}toBigInt(){try{return BigInt(this.toString())}catch{}return cs.throwError("this platform does not support BigInt",di.errors.UNSUPPORTED_OPERATION,{value:this.toString()})}toString(){return arguments.length>0&&(arguments[0]===10?C1||(C1=!0,cs.warn("BigNumber.toString does not accept any parameters; base-10 is assumed")):arguments[0]===16?cs.throwError("BigNumber.toString does not accept any parameters; use bigNumber.toHexString()",di.errors.UNEXPECTED_ARGUMENT,{}):cs.throwError("BigNumber.toString does not accept parameters",di.errors.UNEXPECTED_ARGUMENT,{})),De(this).toString(10)}toHexString(){return this._hex}toJSON(t){return{type:"BigNumber",hex:this.toHexString()}}static from(t){if(t instanceof pn)return t;if(typeof t=="string")return t.match(/^-?0x[0-9a-f]+$/i)?new pn(tl,nh(t)):t.match(/^-?[0-9]+$/)?new pn(tl,nh(new Xl(t))):cs.throwArgumentError("invalid BigNumber string","value",t);if(typeof t=="number")return t%1&&$i("underflow","BigNumber.from",t),(t>=x1||t<=-x1)&&$i("overflow","BigNumber.from",t),pn.from(String(t));const r=t;if(typeof r=="bigint")return pn.from(r.toString());if(gh(r))return pn.from(hv(r));if(r)if(r.toHexString){const i=r.toHexString();if(typeof i=="string")return pn.from(i)}else{let i=r._hex;if(i==null&&r.type==="BigNumber"&&(i=r.hex),typeof i=="string"&&(ta(i)||i[0]==="-"&&ta(i.substring(1))))return pn.from(i)}return cs.throwArgumentError("invalid BigNumber value","value",t)}static isBigNumber(t){return!!(t&&t._isBigNumber)}};function nh(e){if(typeof e!="string")return nh(e.toString(16));if(e[0]==="-")return e=e.substring(1),e[0]==="-"&&cs.throwArgumentError("invalid hex","value",e),e=nh(e),e==="0x00"?e:"-"+e;if(e.substring(0,2)!=="0x"&&(e="0x"+e),e==="0x")return"0x00";for(e.length%2&&(e="0x0"+e.substring(2));e.length>4&&e.substring(0,4)==="0x00";)e="0x"+e.substring(4);return e}function si(e){return Yr.from(nh(e))}function De(e){const t=Yr.from(e).toHexString();return t[0]==="-"?new Xl("-"+t.substring(3),16):new Xl(t.substring(2),16)}function $i(e,t,r){const i={fault:e,operation:t};return r!=null&&(i.value=r),cs.throwError(e,di.errors.NUMERIC_FAULT,i)}const Kr=new di(cv),Wa={},fv=Yr.from(0),lv=Yr.from(-1);function dv(e,t,r,i){const n={fault:t,operation:r};return i!==void 0&&(n.value=i),Kr.throwError(e,di.errors.NUMERIC_FAULT,n)}let Xa="0";for(;Xa.length<256;)Xa+=Xa;function P0(e){if(typeof e!="number")try{e=Yr.from(e).toNumber()}catch{}return typeof e=="number"&&e>=0&&e<=256&&!(e%1)?"1"+Xa.substring(0,e):Kr.throwArgumentError("invalid decimal size","decimals",e)}function el(e,t){t==null&&(t=0);const r=P0(t);e=Yr.from(e);const i=e.lt(fv);i&&(e=e.mul(lv));let n=e.mod(r).toString();for(;n.length<r.length-1;)n="0"+n;n=n.match(/^([0-9]*[1-9]|0)(0*)/)[1];const o=e.div(r).toString();return r.length===1?e=o:e=o+"."+n,i&&(e="-"+e),e}function ss(e,t){t==null&&(t=0);const r=P0(t);(typeof e!="string"||!e.match(/^-?[0-9.]+$/))&&Kr.throwArgumentError("invalid decimal value","value",e);const i=e.substring(0,1)==="-";i&&(e=e.substring(1)),e==="."&&Kr.throwArgumentError("missing value","value",e);const n=e.split(".");n.length>2&&Kr.throwArgumentError("too many decimal points","value",e);let o=n[0],f=n[1];for(o||(o="0"),f||(f="0");f[f.length-1]==="0";)f=f.substring(0,f.length-1);for(f.length>r.length-1&&dv("fractional component exceeds decimals","underflow","parseFixed"),f===""&&(f="0");f.length<r.length-1;)f+="0";const d=Yr.from(o),v=Yr.from(f);let g=d.mul(r).add(v);return i&&(g=g.mul(lv)),g}let rl=class Zl{constructor(t,r,i,n){t!==Wa&&Kr.throwError("cannot use FixedFormat constructor; use FixedFormat.from",di.errors.UNSUPPORTED_OPERATION,{operation:"new FixedFormat"}),this.signed=r,this.width=i,this.decimals=n,this.name=(r?"":"u")+"fixed"+String(i)+"x"+String(n),this._multiplier=P0(n),Object.freeze(this)}static from(t){if(t instanceof Zl)return t;typeof t=="number"&&(t=`fixed128x${t}`);let r=!0,i=128,n=18;if(typeof t=="string"){if(t!=="fixed")if(t==="ufixed")r=!1;else{const o=t.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);o||Kr.throwArgumentError("invalid fixed format","format",t),r=o[1]!=="u",i=parseInt(o[2]),n=parseInt(o[3])}}else if(t){const o=(f,d,v)=>t[f]==null?v:(typeof t[f]!==d&&Kr.throwArgumentError("invalid fixed format ("+f+" not "+d+")","format."+f,t[f]),t[f]);r=o("signed","boolean",r),i=o("width","number",i),n=o("decimals","number",n)}return i%8&&Kr.throwArgumentError("invalid fixed format width (not byte aligned)","format.width",i),n>80&&Kr.throwArgumentError("invalid fixed format (decimals too large)","format.decimals",n),new Zl(Wa,r,i,n)}},pv=class jr{constructor(t,r,i,n){t!==Wa&&Kr.throwError("cannot use FixedNumber constructor; use FixedNumber.from",di.errors.UNSUPPORTED_OPERATION,{operation:"new FixedFormat"}),this.format=n,this._hex=r,this._value=i,this._isFixedNumber=!0,Object.freeze(this)}_checkFormat(t){this.format.name!==t.format.name&&Kr.throwArgumentError("incompatible format; use fixedNumber.toFormat","other",t)}addUnsafe(t){this._checkFormat(t);const r=ss(this._value,this.format.decimals),i=ss(t._value,t.format.decimals);return jr.fromValue(r.add(i),this.format.decimals,this.format)}subUnsafe(t){this._checkFormat(t);const r=ss(this._value,this.format.decimals),i=ss(t._value,t.format.decimals);return jr.fromValue(r.sub(i),this.format.decimals,this.format)}mulUnsafe(t){this._checkFormat(t);const r=ss(this._value,this.format.decimals),i=ss(t._value,t.format.decimals);return jr.fromValue(r.mul(i).div(this.format._multiplier),this.format.decimals,this.format)}divUnsafe(t){this._checkFormat(t);const r=ss(this._value,this.format.decimals),i=ss(t._value,t.format.decimals);return jr.fromValue(r.mul(this.format._multiplier).div(i),this.format.decimals,this.format)}floor(){const t=this.toString().split(".");t.length===1&&t.push("0");let r=jr.from(t[0],this.format);const i=!t[1].match(/^(0*)$/);return this.isNegative()&&i&&(r=r.subUnsafe(O1.toFormat(r.format))),r}ceiling(){const t=this.toString().split(".");t.length===1&&t.push("0");let r=jr.from(t[0],this.format);const i=!t[1].match(/^(0*)$/);return!this.isNegative()&&i&&(r=r.addUnsafe(O1.toFormat(r.format))),r}round(t){t==null&&(t=0);const r=this.toString().split(".");if(r.length===1&&r.push("0"),(t<0||t>80||t%1)&&Kr.throwArgumentError("invalid decimal count","decimals",t),r[1].length<=t)return this;const i=jr.from("1"+Xa.substring(0,t),this.format),n=P4.toFormat(this.format);return this.mulUnsafe(i).addUnsafe(n).floor().divUnsafe(i)}isZero(){return this._value==="0.0"||this._value==="0"}isNegative(){return this._value[0]==="-"}toString(){return this._value}toHexString(t){if(t==null)return this._hex;t%8&&Kr.throwArgumentError("invalid byte width","width",t);const r=Yr.from(this._hex).fromTwos(this.format.width).toTwos(t).toHexString();return sc(r,t/8)}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(t){return jr.fromString(this._value,t)}static fromValue(t,r,i){return i==null&&r!=null&&!N4(r)&&(i=r,r=null),r==null&&(r=0),i==null&&(i="fixed"),jr.fromString(el(t,r),rl.from(i))}static fromString(t,r){r==null&&(r="fixed");const i=rl.from(r),n=ss(t,i.decimals);!i.signed&&n.lt(fv)&&dv("unsigned value cannot be negative","overflow","value",t);let o=null;i.signed?o=n.toTwos(i.width).toHexString():(o=n.toHexString(),o=sc(o,i.width/8));const f=el(n,i.decimals);return new jr(Wa,o,f,i)}static fromBytes(t,r){r==null&&(r="fixed");const i=rl.from(r);if(av(t).length>i.width/8)throw new Error("overflow");let n=Yr.from(t);i.signed&&(n=n.fromTwos(i.width));const o=n.toTwos((i.signed?0:1)+i.width).toHexString(),f=el(n,i.decimals);return new jr(Wa,o,f,i)}static from(t,r){if(typeof t=="string")return jr.fromString(t,r);if(gh(t))return jr.fromBytes(t,r);try{return jr.fromValue(t,0,r)}catch(i){if(i.code!==di.errors.INVALID_ARGUMENT)throw i}return Kr.throwArgumentError("invalid FixedNumber value","value",t)}static isFixedNumber(t){return!!(t&&t._isFixedNumber)}};const O1=pv.from(1),P4=pv.from("0.5");var N1;(function(e){e.current="",e.NFC="NFC",e.NFD="NFD",e.NFKC="NFKC",e.NFKD="NFKD"})(N1||(N1={}));var P1;(function(e){e.UNEXPECTED_CONTINUE="unexpected continuation byte",e.BAD_PREFIX="bad codepoint prefix",e.OVERRUN="string overrun",e.MISSING_CONTINUE="missing continuation byte",e.OUT_OF_RANGE="out of UTF-8 range",e.UTF16_SURROGATE="UTF-16 surrogate",e.OVERLONG="overlong representation"})(P1||(P1={}));function R4(e){if(e.length%4!==0)throw new Error("bad data");let t=[];for(let r=0;r<e.length;r+=4)t.push(parseInt(e.substring(r,r+4),16));return t}function il(e,t){t||(t=function(n){return[parseInt(n,16)]});let r=0,i={};return e.split(",").forEach(n=>{let o=n.split(":");r+=parseInt(o[0],16),i[r]=t(o[1])}),i}function R1(e){let t=0;return e.split(",").map(r=>{let i=r.split("-");i.length===1?i[1]="0":i[1]===""&&(i[1]="1");let n=t+parseInt(i[0],16);return t=parseInt(i[1],16),{l:n,h:t}})}R1("221,13-1b,5f-,40-10,51-f,11-3,3-3,2-2,2-4,8,2,15,2d,28-8,88,48,27-,3-5,11-20,27-,8,28,3-5,12,18,b-a,1c-4,6-16,2-d,2-2,2,1b-4,17-9,8f-,10,f,1f-2,1c-34,33-14e,4,36-,13-,6-2,1a-f,4,9-,3-,17,8,2-2,5-,2,8-,3-,4-8,2-3,3,6-,16-6,2-,7-3,3-,17,8,3,3,3-,2,6-3,3-,4-a,5,2-6,10-b,4,8,2,4,17,8,3,6-,b,4,4-,2-e,2-4,b-10,4,9-,3-,17,8,3-,5-,9-2,3-,4-7,3-3,3,4-3,c-10,3,7-2,4,5-2,3,2,3-2,3-2,4-2,9,4-3,6-2,4,5-8,2-e,d-d,4,9,4,18,b,6-3,8,4,5-6,3-8,3-3,b-11,3,9,4,18,b,6-3,8,4,5-6,3-6,2,3-3,b-11,3,9,4,18,11-3,7-,4,5-8,2-7,3-3,b-11,3,13-2,19,a,2-,8-2,2-3,7,2,9-11,4-b,3b-3,1e-24,3,2-,3,2-,2-5,5,8,4,2,2-,3,e,4-,6,2,7-,b-,3-21,49,23-5,1c-3,9,25,10-,2-2f,23,6,3,8-2,5-5,1b-45,27-9,2a-,2-3,5b-4,45-4,53-5,8,40,2,5-,8,2,5-,28,2,5-,20,2,5-,8,2,5-,8,8,18,20,2,5-,8,28,14-5,1d-22,56-b,277-8,1e-2,52-e,e,8-a,18-8,15-b,e,4,3-b,5e-2,b-15,10,b-5,59-7,2b-555,9d-3,5b-5,17-,7-,27-,7-,9,2,2,2,20-,36,10,f-,7,14-,4,a,54-3,2-6,6-5,9-,1c-10,13-1d,1c-14,3c-,10-6,32-b,240-30,28-18,c-14,a0,115-,3,66-,b-76,5,5-,1d,24,2,5-2,2,8-,35-2,19,f-10,1d-3,311-37f,1b,5a-b,d7-19,d-3,41,57-,68-4,29-3,5f,29-37,2e-2,25-c,2c-2,4e-3,30,78-3,64-,20,19b7-49,51a7-59,48e-2,38-738,2ba5-5b,222f-,3c-94,8-b,6-4,1b,6,2,3,3,6d-20,16e-f,41-,37-7,2e-2,11-f,5-b,18-,b,14,5-3,6,88-,2,bf-2,7-,7-,7-,4-2,8,8-9,8-2ff,20,5-b,1c-b4,27-,27-cbb1,f7-9,28-2,b5-221,56,48,3-,2-,3-,5,d,2,5,3,42,5-,9,8,1d,5,6,2-2,8,153-3,123-3,33-27fd,a6da-5128,21f-5df,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3,2-1d,61-ff7d"),"ad,34f,1806,180b,180c,180d,200b,200c,200d,2060,feff".split(",").map(e=>parseInt(e,16)),il("b5:3bc,c3:ff,7:73,2:253,5:254,3:256,1:257,5:259,1:25b,3:260,1:263,2:269,1:268,5:26f,1:272,2:275,7:280,3:283,5:288,3:28a,1:28b,5:292,3f:195,1:1bf,29:19e,125:3b9,8b:3b2,1:3b8,1:3c5,3:3c6,1:3c0,1a:3ba,1:3c1,1:3c3,2:3b8,1:3b5,1bc9:3b9,1c:1f76,1:1f77,f:1f7a,1:1f7b,d:1f78,1:1f79,1:1f7c,1:1f7d,107:63,5:25b,4:68,1:68,1:68,3:69,1:69,1:6c,3:6e,4:70,1:71,1:72,1:72,1:72,7:7a,2:3c9,2:7a,2:6b,1:e5,1:62,1:63,3:65,1:66,2:6d,b:3b3,1:3c0,6:64,1b574:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3"),il("179:1,2:1,2:1,5:1,2:1,a:4f,a:1,8:1,2:1,2:1,3:1,5:1,3:1,4:1,2:1,3:1,4:1,8:2,1:1,2:2,1:1,2:2,27:2,195:26,2:25,1:25,1:25,2:40,2:3f,1:3f,33:1,11:-6,1:-9,1ac7:-3a,6d:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,b:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,c:-8,2:-8,2:-8,2:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,49:-8,1:-8,1:-4a,1:-4a,d:-56,1:-56,1:-56,1:-56,d:-8,1:-8,f:-8,1:-8,3:-7"),il("df:00730073,51:00690307,19:02BC006E,a7:006A030C,18a:002003B9,16:03B903080301,20:03C503080301,1d7:05650582,190f:00680331,1:00740308,1:0077030A,1:0079030A,1:006102BE,b6:03C50313,2:03C503130300,2:03C503130301,2:03C503130342,2a:1F0003B9,1:1F0103B9,1:1F0203B9,1:1F0303B9,1:1F0403B9,1:1F0503B9,1:1F0603B9,1:1F0703B9,1:1F0003B9,1:1F0103B9,1:1F0203B9,1:1F0303B9,1:1F0403B9,1:1F0503B9,1:1F0603B9,1:1F0703B9,1:1F2003B9,1:1F2103B9,1:1F2203B9,1:1F2303B9,1:1F2403B9,1:1F2503B9,1:1F2603B9,1:1F2703B9,1:1F2003B9,1:1F2103B9,1:1F2203B9,1:1F2303B9,1:1F2403B9,1:1F2503B9,1:1F2603B9,1:1F2703B9,1:1F6003B9,1:1F6103B9,1:1F6203B9,1:1F6303B9,1:1F6403B9,1:1F6503B9,1:1F6603B9,1:1F6703B9,1:1F6003B9,1:1F6103B9,1:1F6203B9,1:1F6303B9,1:1F6403B9,1:1F6503B9,1:1F6603B9,1:1F6703B9,3:1F7003B9,1:03B103B9,1:03AC03B9,2:03B10342,1:03B1034203B9,5:03B103B9,6:1F7403B9,1:03B703B9,1:03AE03B9,2:03B70342,1:03B7034203B9,5:03B703B9,6:03B903080300,1:03B903080301,3:03B90342,1:03B903080342,b:03C503080300,1:03C503080301,1:03C10313,2:03C50342,1:03C503080342,b:1F7C03B9,1:03C903B9,1:03CE03B9,2:03C90342,1:03C9034203B9,5:03C903B9,ac:00720073,5b:00B00063,6:00B00066,d:006E006F,a:0073006D,1:00740065006C,1:0074006D,124f:006800700061,2:00610075,2:006F0076,b:00700061,1:006E0061,1:03BC0061,1:006D0061,1:006B0061,1:006B0062,1:006D0062,1:00670062,3:00700066,1:006E0066,1:03BC0066,4:0068007A,1:006B0068007A,1:006D0068007A,1:00670068007A,1:00740068007A,15:00700061,1:006B00700061,1:006D00700061,1:006700700061,8:00700076,1:006E0076,1:03BC0076,1:006D0076,1:006B0076,1:006D0076,1:00700077,1:006E0077,1:03BC0077,1:006D0077,1:006B0077,1:006D0077,1:006B03C9,1:006D03C9,2:00620071,3:00632215006B0067,1:0063006F002E,1:00640062,1:00670079,2:00680070,2:006B006B,1:006B006D,9:00700068,2:00700070006D,1:00700072,2:00730076,1:00770062,c723:00660066,1:00660069,1:0066006C,1:006600660069,1:00660066006C,1:00730074,1:00730074,d:05740576,1:05740565,1:0574056B,1:057E0576,1:0574056D",R4),R1("80-20,2a0-,39c,32,f71,18e,7f2-f,19-7,30-4,7-5,f81-b,5,a800-20ff,4d1-1f,110,fa-6,d174-7,2e84-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,2,1f-5f,ff7f-20001");function T4(e){e=atob(e);const t=[];for(let r=0;r<e.length;r++)t.push(e.charCodeAt(r));return av(t)}function gv(e,t){t==null&&(t=1);const r=[],i=r.forEach,n=function(o,f){i.call(o,function(d){f>0&&Array.isArray(d)?n(d,f-1):r.push(d)})};return n(e,t),r}function B4(e){const t={};for(let r=0;r<e.length;r++){const i=e[r];t[i[0]]=i[1]}return t}function U4(e){let t=0;function r(){return e[t++]<<8|e[t++]}let i=r(),n=1,o=[0,1];for(let j=1;j<i;j++)o.push(n+=r());let f=r(),d=t;t+=f;let v=0,g=0;function w(){return v==0&&(g=g<<8|e[t++],v=8),g>>--v&1}const S=31,x=Math.pow(2,S),C=x>>>1,N=C>>1,V=x-1;let z=0;for(let j=0;j<S;j++)z=z<<1|w();let X=[],G=0,Y=x;for(;;){let j=Math.floor(((z-G+1)*n-1)/Y),k=0,_=i;for(;_-k>1;){let ct=k+_>>>1;j<o[ct]?_=ct:k=ct}if(k==0)break;X.push(k);let L=G+Math.floor(Y*o[k]/n),ot=G+Math.floor(Y*o[k+1]/n)-1;for(;!((L^ot)&C);)z=z<<1&V|w(),L=L<<1&V,ot=ot<<1&V|1;for(;L&~ot&N;)z=z&C|z<<1&V>>>1|w(),L=L<<1^C,ot=(ot^C)<<1|C|1;G=L,Y=1+ot-L}let $=i-4;return X.map(j=>{switch(j-$){case 3:return $+65792+(e[d++]<<16|e[d++]<<8|e[d++]);case 2:return $+256+(e[d++]<<8|e[d++]);case 1:return $+e[d++];default:return j-1}})}function L4(e){let t=0;return()=>e[t++]}function F4(e){return L4(U4(e))}function q4(e){return e&1?~e>>1:e>>1}function $4(e,t){let r=Array(e);for(let i=0;i<e;i++)r[i]=1+t();return r}function T1(e,t){let r=Array(e);for(let i=0,n=-1;i<e;i++)r[i]=n+=1+t();return r}function k4(e,t){let r=Array(e);for(let i=0,n=0;i<e;i++)r[i]=n+=q4(t());return r}function oc(e,t){let r=T1(e(),e),i=e(),n=T1(i,e),o=$4(i,e);for(let f=0;f<i;f++)for(let d=0;d<o[f];d++)r.push(n[f]+d);return t?r.map(f=>t[f]):r}function z4(e){let t=[];for(;;){let r=e();if(r==0)break;t.push(H4(r,e))}for(;;){let r=e()-1;if(r<0)break;t.push(K4(r,e))}return B4(gv(t))}function j4(e){let t=[];for(;;){let r=e();if(r==0)break;t.push(r)}return t}function mv(e,t,r){let i=Array(e).fill(void 0).map(()=>[]);for(let n=0;n<t;n++)k4(e,r).forEach((o,f)=>i[f].push(o));return i}function H4(e,t){let r=1+t(),i=t(),n=j4(t),o=mv(n.length,1+e,t);return gv(o.map((f,d)=>{const v=f[0],g=f.slice(1);return Array(n[d]).fill(void 0).map((w,S)=>{let x=S*i;return[v+S*r,g.map(C=>C+x)]})}))}function K4(e,t){let r=1+t();return mv(r,1+e,t).map(i=>[i[0],i.slice(1)])}function G4(e){let t=oc(e).sort((i,n)=>i-n);return r();function r(){let i=[];for(;;){let g=oc(e,t);if(g.length==0)break;i.push({set:new Set(g),node:r()})}i.sort((g,w)=>w.set.size-g.set.size);let n=e(),o=n%3;n=n/3|0;let f=!!(n&1);n>>=1;let d=n==1,v=n==2;return{branches:i,valid:o,fe0f:f,save:d,check:v}}}function V4(){return F4(T4("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"))}const Du=V4();new Set(oc(Du)),new Set(oc(Du)),z4(Du),G4(Du);const Q4=new Uint8Array(32);Q4.fill(0);const Y4=new Uint8Array(32);Y4.fill(0),Yr.from(-1);const J4=Yr.from(0),W4=Yr.from(1);Yr.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),sc(W4.toHexString(),32),sc(J4.toHexString(),32);var Cn={},Ce={},mh=vv;function vv(e,t){if(!e)throw new Error(t||"Assertion failed")}vv.equal=function(e,t,r){if(e!=t)throw new Error(r||"Assertion failed: "+e+" != "+t)};var t0={exports:{}};typeof Object.create=="function"?t0.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:t0.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}};var X4=mh,Z4=t0.exports;Ce.inherits=Z4;function tE(e,t){return(e.charCodeAt(t)&64512)!==55296||t<0||t+1>=e.length?!1:(e.charCodeAt(t+1)&64512)===56320}function eE(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var r=[];if(typeof e=="string")if(t){if(t==="hex")for(e=e.replace(/[^a-z0-9]+/ig,""),e.length%2!==0&&(e="0"+e),n=0;n<e.length;n+=2)r.push(parseInt(e[n]+e[n+1],16))}else for(var i=0,n=0;n<e.length;n++){var o=e.charCodeAt(n);o<128?r[i++]=o:o<2048?(r[i++]=o>>6|192,r[i++]=o&63|128):tE(e,n)?(o=65536+((o&1023)<<10)+(e.charCodeAt(++n)&1023),r[i++]=o>>18|240,r[i++]=o>>12&63|128,r[i++]=o>>6&63|128,r[i++]=o&63|128):(r[i++]=o>>12|224,r[i++]=o>>6&63|128,r[i++]=o&63|128)}else for(n=0;n<e.length;n++)r[n]=e[n]|0;return r}Ce.toArray=eE;function rE(e){for(var t="",r=0;r<e.length;r++)t+=wv(e[r].toString(16));return t}Ce.toHex=rE;function yv(e){var t=e>>>24|e>>>8&65280|e<<8&16711680|(e&255)<<24;return t>>>0}Ce.htonl=yv;function iE(e,t){for(var r="",i=0;i<e.length;i++){var n=e[i];t==="little"&&(n=yv(n)),r+=bv(n.toString(16))}return r}Ce.toHex32=iE;function wv(e){return e.length===1?"0"+e:e}Ce.zero2=wv;function bv(e){return e.length===7?"0"+e:e.length===6?"00"+e:e.length===5?"000"+e:e.length===4?"0000"+e:e.length===3?"00000"+e:e.length===2?"000000"+e:e.length===1?"0000000"+e:e}Ce.zero8=bv;function nE(e,t,r,i){var n=r-t;X4(n%4===0);for(var o=new Array(n/4),f=0,d=t;f<o.length;f++,d+=4){var v;i==="big"?v=e[d]<<24|e[d+1]<<16|e[d+2]<<8|e[d+3]:v=e[d+3]<<24|e[d+2]<<16|e[d+1]<<8|e[d],o[f]=v>>>0}return o}Ce.join32=nE;function sE(e,t){for(var r=new Array(e.length*4),i=0,n=0;i<e.length;i++,n+=4){var o=e[i];t==="big"?(r[n]=o>>>24,r[n+1]=o>>>16&255,r[n+2]=o>>>8&255,r[n+3]=o&255):(r[n+3]=o>>>24,r[n+2]=o>>>16&255,r[n+1]=o>>>8&255,r[n]=o&255)}return r}Ce.split32=sE;function oE(e,t){return e>>>t|e<<32-t}Ce.rotr32=oE;function aE(e,t){return e<<t|e>>>32-t}Ce.rotl32=aE;function hE(e,t){return e+t>>>0}Ce.sum32=hE;function uE(e,t,r){return e+t+r>>>0}Ce.sum32_3=uE;function cE(e,t,r,i){return e+t+r+i>>>0}Ce.sum32_4=cE;function fE(e,t,r,i,n){return e+t+r+i+n>>>0}Ce.sum32_5=fE;function lE(e,t,r,i){var n=e[t],o=e[t+1],f=i+o>>>0,d=(f<i?1:0)+r+n;e[t]=d>>>0,e[t+1]=f}Ce.sum64=lE;function dE(e,t,r,i){var n=t+i>>>0,o=(n<t?1:0)+e+r;return o>>>0}Ce.sum64_hi=dE;function pE(e,t,r,i){var n=t+i;return n>>>0}Ce.sum64_lo=pE;function gE(e,t,r,i,n,o,f,d){var v=0,g=t;g=g+i>>>0,v+=g<t?1:0,g=g+o>>>0,v+=g<o?1:0,g=g+d>>>0,v+=g<d?1:0;var w=e+r+n+f+v;return w>>>0}Ce.sum64_4_hi=gE;function mE(e,t,r,i,n,o,f,d){var v=t+i+o+d;return v>>>0}Ce.sum64_4_lo=mE;function vE(e,t,r,i,n,o,f,d,v,g){var w=0,S=t;S=S+i>>>0,w+=S<t?1:0,S=S+o>>>0,w+=S<o?1:0,S=S+d>>>0,w+=S<d?1:0,S=S+g>>>0,w+=S<g?1:0;var x=e+r+n+f+v+w;return x>>>0}Ce.sum64_5_hi=vE;function yE(e,t,r,i,n,o,f,d,v,g){var w=t+i+o+d+g;return w>>>0}Ce.sum64_5_lo=yE;function wE(e,t,r){var i=t<<32-r|e>>>r;return i>>>0}Ce.rotr64_hi=wE;function bE(e,t,r){var i=e<<32-r|t>>>r;return i>>>0}Ce.rotr64_lo=bE;function AE(e,t,r){return e>>>r}Ce.shr64_hi=AE;function _E(e,t,r){var i=e<<32-r|t>>>r;return i>>>0}Ce.shr64_lo=_E;var aa={},B1=Ce,EE=mh;function xu(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}aa.BlockHash=xu,xu.prototype.update=function(e,t){if(e=B1.toArray(e,t),this.pending?this.pending=this.pending.concat(e):this.pending=e,this.pendingTotal+=e.length,this.pending.length>=this._delta8){e=this.pending;var r=e.length%this._delta8;this.pending=e.slice(e.length-r,e.length),this.pending.length===0&&(this.pending=null),e=B1.join32(e,0,e.length-r,this.endian);for(var i=0;i<e.length;i+=this._delta32)this._update(e,i,i+this._delta32)}return this},xu.prototype.digest=function(e){return this.update(this._pad()),EE(this.pending===null),this._digest(e)},xu.prototype._pad=function(){var e=this.pendingTotal,t=this._delta8,r=t-(e+this.padLength)%t,i=new Array(r+this.padLength);i[0]=128;for(var n=1;n<r;n++)i[n]=0;if(e<<=3,this.endian==="big"){for(var o=8;o<this.padLength;o++)i[n++]=0;i[n++]=0,i[n++]=0,i[n++]=0,i[n++]=0,i[n++]=e>>>24&255,i[n++]=e>>>16&255,i[n++]=e>>>8&255,i[n++]=e&255}else for(i[n++]=e&255,i[n++]=e>>>8&255,i[n++]=e>>>16&255,i[n++]=e>>>24&255,i[n++]=0,i[n++]=0,i[n++]=0,i[n++]=0,o=8;o<this.padLength;o++)i[n++]=0;return i};var jo={},Vn={},SE=Ce,qn=SE.rotr32;function IE(e,t,r,i){if(e===0)return Av(t,r,i);if(e===1||e===3)return Ev(t,r,i);if(e===2)return _v(t,r,i)}Vn.ft_1=IE;function Av(e,t,r){return e&t^~e&r}Vn.ch32=Av;function _v(e,t,r){return e&t^e&r^t&r}Vn.maj32=_v;function Ev(e,t,r){return e^t^r}Vn.p32=Ev;function ME(e){return qn(e,2)^qn(e,13)^qn(e,22)}Vn.s0_256=ME;function DE(e){return qn(e,6)^qn(e,11)^qn(e,25)}Vn.s1_256=DE;function xE(e){return qn(e,7)^qn(e,18)^e>>>3}Vn.g0_256=xE;function CE(e){return qn(e,17)^qn(e,19)^e>>>10}Vn.g1_256=CE;var ea=Ce,OE=aa,NE=Vn,nl=ea.rotl32,qa=ea.sum32,PE=ea.sum32_5,RE=NE.ft_1,Sv=OE.BlockHash,TE=[1518500249,1859775393,2400959708,3395469782];function Bn(){if(!(this instanceof Bn))return new Bn;Sv.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}ea.inherits(Bn,Sv);var BE=Bn;Bn.blockSize=512,Bn.outSize=160,Bn.hmacStrength=80,Bn.padLength=64,Bn.prototype._update=function(e,t){for(var r=this.W,i=0;i<16;i++)r[i]=e[t+i];for(;i<r.length;i++)r[i]=nl(r[i-3]^r[i-8]^r[i-14]^r[i-16],1);var n=this.h[0],o=this.h[1],f=this.h[2],d=this.h[3],v=this.h[4];for(i=0;i<r.length;i++){var g=~~(i/20),w=PE(nl(n,5),RE(g,o,f,d),v,r[i],TE[g]);v=d,d=f,f=nl(o,30),o=n,n=w}this.h[0]=qa(this.h[0],n),this.h[1]=qa(this.h[1],o),this.h[2]=qa(this.h[2],f),this.h[3]=qa(this.h[3],d),this.h[4]=qa(this.h[4],v)},Bn.prototype._digest=function(e){return e==="hex"?ea.toHex32(this.h,"big"):ea.split32(this.h,"big")};var ra=Ce,UE=aa,ha=Vn,LE=mh,fn=ra.sum32,FE=ra.sum32_4,qE=ra.sum32_5,$E=ha.ch32,kE=ha.maj32,zE=ha.s0_256,jE=ha.s1_256,HE=ha.g0_256,KE=ha.g1_256,Iv=UE.BlockHash,GE=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function Un(){if(!(this instanceof Un))return new Un;Iv.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=GE,this.W=new Array(64)}ra.inherits(Un,Iv);var Mv=Un;Un.blockSize=512,Un.outSize=256,Un.hmacStrength=192,Un.padLength=64,Un.prototype._update=function(e,t){for(var r=this.W,i=0;i<16;i++)r[i]=e[t+i];for(;i<r.length;i++)r[i]=FE(KE(r[i-2]),r[i-7],HE(r[i-15]),r[i-16]);var n=this.h[0],o=this.h[1],f=this.h[2],d=this.h[3],v=this.h[4],g=this.h[5],w=this.h[6],S=this.h[7];for(LE(this.k.length===r.length),i=0;i<r.length;i++){var x=qE(S,jE(v),$E(v,g,w),this.k[i],r[i]),C=fn(zE(n),kE(n,o,f));S=w,w=g,g=v,v=fn(d,x),d=f,f=o,o=n,n=fn(x,C)}this.h[0]=fn(this.h[0],n),this.h[1]=fn(this.h[1],o),this.h[2]=fn(this.h[2],f),this.h[3]=fn(this.h[3],d),this.h[4]=fn(this.h[4],v),this.h[5]=fn(this.h[5],g),this.h[6]=fn(this.h[6],w),this.h[7]=fn(this.h[7],S)},Un.prototype._digest=function(e){return e==="hex"?ra.toHex32(this.h,"big"):ra.split32(this.h,"big")};var e0=Ce,Dv=Mv;function ls(){if(!(this instanceof ls))return new ls;Dv.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}e0.inherits(ls,Dv);var VE=ls;ls.blockSize=512,ls.outSize=224,ls.hmacStrength=192,ls.padLength=64,ls.prototype._digest=function(e){return e==="hex"?e0.toHex32(this.h.slice(0,7),"big"):e0.split32(this.h.slice(0,7),"big")};var pi=Ce,QE=aa,YE=mh,$n=pi.rotr64_hi,kn=pi.rotr64_lo,xv=pi.shr64_hi,Cv=pi.shr64_lo,xs=pi.sum64,sl=pi.sum64_hi,ol=pi.sum64_lo,JE=pi.sum64_4_hi,WE=pi.sum64_4_lo,XE=pi.sum64_5_hi,ZE=pi.sum64_5_lo,Ov=QE.BlockHash,t7=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function yn(){if(!(this instanceof yn))return new yn;Ov.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=t7,this.W=new Array(160)}pi.inherits(yn,Ov);var Nv=yn;yn.blockSize=1024,yn.outSize=512,yn.hmacStrength=192,yn.padLength=128,yn.prototype._prepareBlock=function(e,t){for(var r=this.W,i=0;i<32;i++)r[i]=e[t+i];for(;i<r.length;i+=2){var n=f7(r[i-4],r[i-3]),o=l7(r[i-4],r[i-3]),f=r[i-14],d=r[i-13],v=u7(r[i-30],r[i-29]),g=c7(r[i-30],r[i-29]),w=r[i-32],S=r[i-31];r[i]=JE(n,o,f,d,v,g,w,S),r[i+1]=WE(n,o,f,d,v,g,w,S)}},yn.prototype._update=function(e,t){this._prepareBlock(e,t);var r=this.W,i=this.h[0],n=this.h[1],o=this.h[2],f=this.h[3],d=this.h[4],v=this.h[5],g=this.h[6],w=this.h[7],S=this.h[8],x=this.h[9],C=this.h[10],N=this.h[11],V=this.h[12],z=this.h[13],X=this.h[14],G=this.h[15];YE(this.k.length===r.length);for(var Y=0;Y<r.length;Y+=2){var $=X,j=G,k=a7(S,x),_=h7(S,x),L=e7(S,x,C,N,V),ot=r7(S,x,C,N,V,z),ct=this.k[Y],ht=this.k[Y+1],_t=r[Y],h=r[Y+1],u=XE($,j,k,_,L,ot,ct,ht,_t,h),p=ZE($,j,k,_,L,ot,ct,ht,_t,h);$=s7(i,n),j=o7(i,n),k=i7(i,n,o,f,d),_=n7(i,n,o,f,d,v);var b=sl($,j,k,_),M=ol($,j,k,_);X=V,G=z,V=C,z=N,C=S,N=x,S=sl(g,w,u,p),x=ol(w,w,u,p),g=d,w=v,d=o,v=f,o=i,f=n,i=sl(u,p,b,M),n=ol(u,p,b,M)}xs(this.h,0,i,n),xs(this.h,2,o,f),xs(this.h,4,d,v),xs(this.h,6,g,w),xs(this.h,8,S,x),xs(this.h,10,C,N),xs(this.h,12,V,z),xs(this.h,14,X,G)},yn.prototype._digest=function(e){return e==="hex"?pi.toHex32(this.h,"big"):pi.split32(this.h,"big")};function e7(e,t,r,i,n){var o=e&r^~e&n;return o<0&&(o+=4294967296),o}function r7(e,t,r,i,n,o){var f=t&i^~t&o;return f<0&&(f+=4294967296),f}function i7(e,t,r,i,n){var o=e&r^e&n^r&n;return o<0&&(o+=4294967296),o}function n7(e,t,r,i,n,o){var f=t&i^t&o^i&o;return f<0&&(f+=4294967296),f}function s7(e,t){var r=$n(e,t,28),i=$n(t,e,2),n=$n(t,e,7),o=r^i^n;return o<0&&(o+=4294967296),o}function o7(e,t){var r=kn(e,t,28),i=kn(t,e,2),n=kn(t,e,7),o=r^i^n;return o<0&&(o+=4294967296),o}function a7(e,t){var r=$n(e,t,14),i=$n(e,t,18),n=$n(t,e,9),o=r^i^n;return o<0&&(o+=4294967296),o}function h7(e,t){var r=kn(e,t,14),i=kn(e,t,18),n=kn(t,e,9),o=r^i^n;return o<0&&(o+=4294967296),o}function u7(e,t){var r=$n(e,t,1),i=$n(e,t,8),n=xv(e,t,7),o=r^i^n;return o<0&&(o+=4294967296),o}function c7(e,t){var r=kn(e,t,1),i=kn(e,t,8),n=Cv(e,t,7),o=r^i^n;return o<0&&(o+=4294967296),o}function f7(e,t){var r=$n(e,t,19),i=$n(t,e,29),n=xv(e,t,6),o=r^i^n;return o<0&&(o+=4294967296),o}function l7(e,t){var r=kn(e,t,19),i=kn(t,e,29),n=Cv(e,t,6),o=r^i^n;return o<0&&(o+=4294967296),o}var r0=Ce,Pv=Nv;function ds(){if(!(this instanceof ds))return new ds;Pv.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}r0.inherits(ds,Pv);var d7=ds;ds.blockSize=1024,ds.outSize=384,ds.hmacStrength=192,ds.padLength=128,ds.prototype._digest=function(e){return e==="hex"?r0.toHex32(this.h.slice(0,12),"big"):r0.split32(this.h.slice(0,12),"big")},jo.sha1=BE,jo.sha224=VE,jo.sha256=Mv,jo.sha384=d7,jo.sha512=Nv;var Rv={},uo=Ce,p7=aa,Cu=uo.rotl32,U1=uo.sum32,$a=uo.sum32_3,L1=uo.sum32_4,Tv=p7.BlockHash;function On(){if(!(this instanceof On))return new On;Tv.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}uo.inherits(On,Tv),Rv.ripemd160=On,On.blockSize=512,On.outSize=160,On.hmacStrength=192,On.padLength=64,On.prototype._update=function(e,t){for(var r=this.h[0],i=this.h[1],n=this.h[2],o=this.h[3],f=this.h[4],d=r,v=i,g=n,w=o,S=f,x=0;x<80;x++){var C=U1(Cu(L1(r,F1(x,i,n,o),e[v7[x]+t],g7(x)),w7[x]),f);r=f,f=o,o=Cu(n,10),n=i,i=C,C=U1(Cu(L1(d,F1(79-x,v,g,w),e[y7[x]+t],m7(x)),b7[x]),S),d=S,S=w,w=Cu(g,10),g=v,v=C}C=$a(this.h[1],n,w),this.h[1]=$a(this.h[2],o,S),this.h[2]=$a(this.h[3],f,d),this.h[3]=$a(this.h[4],r,v),this.h[4]=$a(this.h[0],i,g),this.h[0]=C},On.prototype._digest=function(e){return e==="hex"?uo.toHex32(this.h,"little"):uo.split32(this.h,"little")};function F1(e,t,r,i){return e<=15?t^r^i:e<=31?t&r|~t&i:e<=47?(t|~r)^i:e<=63?t&i|r&~i:t^(r|~i)}function g7(e){return e<=15?0:e<=31?1518500249:e<=47?1859775393:e<=63?2400959708:2840853838}function m7(e){return e<=15?1352829926:e<=31?1548603684:e<=47?1836072691:e<=63?2053994217:0}var v7=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],y7=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],w7=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],b7=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],A7=Ce,_7=mh;function Yo(e,t,r){if(!(this instanceof Yo))return new Yo(e,t,r);this.Hash=e,this.blockSize=e.blockSize/8,this.outSize=e.outSize/8,this.inner=null,this.outer=null,this._init(A7.toArray(t,r))}var E7=Yo;Yo.prototype._init=function(e){e.length>this.blockSize&&(e=new this.Hash().update(e).digest()),_7(e.length<=this.blockSize);for(var t=e.length;t<this.blockSize;t++)e.push(0);for(t=0;t<e.length;t++)e[t]^=54;for(this.inner=new this.Hash().update(e),t=0;t<e.length;t++)e[t]^=106;this.outer=new this.Hash().update(e)},Yo.prototype.update=function(e,t){return this.inner.update(e,t),this},Yo.prototype.digest=function(e){return this.outer.update(this.inner.digest()),this.outer.digest(e)},function(e){var t=e;t.utils=Ce,t.common=aa,t.sha=jo,t.ripemd=Rv,t.hmac=E7,t.sha1=t.sha.sha1,t.sha256=t.sha.sha256,t.sha224=t.sha.sha224,t.sha384=t.sha.sha384,t.sha512=t.sha.sha512,t.ripemd160=t.ripemd.ripemd160}(Cn);function ua(e,t,r){return r={path:t,exports:{},require:function(i,n){return S7(i,n??r.path)}},e(r,r.exports),r.exports}function S7(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var R0=Bv;function Bv(e,t){if(!e)throw new Error(t||"Assertion failed")}Bv.equal=function(e,t,r){if(e!=t)throw new Error(r||"Assertion failed: "+e+" != "+t)};var An=ua(function(e,t){var r=t;function i(f,d){if(Array.isArray(f))return f.slice();if(!f)return[];var v=[];if(typeof f!="string"){for(var g=0;g<f.length;g++)v[g]=f[g]|0;return v}if(d==="hex"){f=f.replace(/[^a-z0-9]+/ig,""),f.length%2!==0&&(f="0"+f);for(var g=0;g<f.length;g+=2)v.push(parseInt(f[g]+f[g+1],16))}else for(var g=0;g<f.length;g++){var w=f.charCodeAt(g),S=w>>8,x=w&255;S?v.push(S,x):v.push(x)}return v}r.toArray=i;function n(f){return f.length===1?"0"+f:f}r.zero2=n;function o(f){for(var d="",v=0;v<f.length;v++)d+=n(f[v].toString(16));return d}r.toHex=o,r.encode=function(f,d){return d==="hex"?o(f):f}}),Di=ua(function(e,t){var r=t;r.assert=R0,r.toArray=An.toArray,r.zero2=An.zero2,r.toHex=An.toHex,r.encode=An.encode;function i(v,g,w){var S=new Array(Math.max(v.bitLength(),w)+1);S.fill(0);for(var x=1<<g+1,C=v.clone(),N=0;N<S.length;N++){var V,z=C.andln(x-1);C.isOdd()?(z>(x>>1)-1?V=(x>>1)-z:V=z,C.isubn(V)):V=0,S[N]=V,C.iushrn(1)}return S}r.getNAF=i;function n(v,g){var w=[[],[]];v=v.clone(),g=g.clone();for(var S=0,x=0,C;v.cmpn(-S)>0||g.cmpn(-x)>0;){var N=v.andln(3)+S&3,V=g.andln(3)+x&3;N===3&&(N=-1),V===3&&(V=-1);var z;N&1?(C=v.andln(7)+S&7,(C===3||C===5)&&V===2?z=-N:z=N):z=0,w[0].push(z);var X;V&1?(C=g.andln(7)+x&7,(C===3||C===5)&&N===2?X=-V:X=V):X=0,w[1].push(X),2*S===z+1&&(S=1-S),2*x===X+1&&(x=1-x),v.iushrn(1),g.iushrn(1)}return w}r.getJSF=n;function o(v,g,w){var S="_"+g;v.prototype[g]=function(){return this[S]!==void 0?this[S]:this[S]=w.call(this)}}r.cachedProperty=o;function f(v){return typeof v=="string"?r.toArray(v,"hex"):v}r.parseBytes=f;function d(v){return new le(v,"hex","le")}r.intFromLE=d}),Ou=Di.getNAF,I7=Di.getJSF,ac=Di.assert;function Rs(e,t){this.type=e,this.p=new le(t.p,16),this.red=t.prime?le.red(t.prime):le.mont(this.p),this.zero=new le(0).toRed(this.red),this.one=new le(1).toRed(this.red),this.two=new le(2).toRed(this.red),this.n=t.n&&new le(t.n,16),this.g=t.g&&this.pointFromJSON(t.g,t.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var r=this.n&&this.p.div(this.n);!r||r.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var go=Rs;Rs.prototype.point=function(){throw new Error("Not implemented")},Rs.prototype.validate=function(){throw new Error("Not implemented")},Rs.prototype._fixedNafMul=function(e,t){ac(e.precomputed);var r=e._getDoubles(),i=Ou(t,1,this._bitLength),n=(1<<r.step+1)-(r.step%2===0?2:1);n/=3;var o=[],f,d;for(f=0;f<i.length;f+=r.step){d=0;for(var v=f+r.step-1;v>=f;v--)d=(d<<1)+i[v];o.push(d)}for(var g=this.jpoint(null,null,null),w=this.jpoint(null,null,null),S=n;S>0;S--){for(f=0;f<o.length;f++)d=o[f],d===S?w=w.mixedAdd(r.points[f]):d===-S&&(w=w.mixedAdd(r.points[f].neg()));g=g.add(w)}return g.toP()},Rs.prototype._wnafMul=function(e,t){var r=4,i=e._getNAFPoints(r);r=i.wnd;for(var n=i.points,o=Ou(t,r,this._bitLength),f=this.jpoint(null,null,null),d=o.length-1;d>=0;d--){for(var v=0;d>=0&&o[d]===0;d--)v++;if(d>=0&&v++,f=f.dblp(v),d<0)break;var g=o[d];ac(g!==0),e.type==="affine"?g>0?f=f.mixedAdd(n[g-1>>1]):f=f.mixedAdd(n[-g-1>>1].neg()):g>0?f=f.add(n[g-1>>1]):f=f.add(n[-g-1>>1].neg())}return e.type==="affine"?f.toP():f},Rs.prototype._wnafMulAdd=function(e,t,r,i,n){var o=this._wnafT1,f=this._wnafT2,d=this._wnafT3,v=0,g,w,S;for(g=0;g<i;g++){S=t[g];var x=S._getNAFPoints(e);o[g]=x.wnd,f[g]=x.points}for(g=i-1;g>=1;g-=2){var C=g-1,N=g;if(o[C]!==1||o[N]!==1){d[C]=Ou(r[C],o[C],this._bitLength),d[N]=Ou(r[N],o[N],this._bitLength),v=Math.max(d[C].length,v),v=Math.max(d[N].length,v);continue}var V=[t[C],null,null,t[N]];t[C].y.cmp(t[N].y)===0?(V[1]=t[C].add(t[N]),V[2]=t[C].toJ().mixedAdd(t[N].neg())):t[C].y.cmp(t[N].y.redNeg())===0?(V[1]=t[C].toJ().mixedAdd(t[N]),V[2]=t[C].add(t[N].neg())):(V[1]=t[C].toJ().mixedAdd(t[N]),V[2]=t[C].toJ().mixedAdd(t[N].neg()));var z=[-3,-1,-5,-7,0,7,5,1,3],X=I7(r[C],r[N]);for(v=Math.max(X[0].length,v),d[C]=new Array(v),d[N]=new Array(v),w=0;w<v;w++){var G=X[0][w]|0,Y=X[1][w]|0;d[C][w]=z[(G+1)*3+(Y+1)],d[N][w]=0,f[C]=V}}var $=this.jpoint(null,null,null),j=this._wnafT4;for(g=v;g>=0;g--){for(var k=0;g>=0;){var _=!0;for(w=0;w<i;w++)j[w]=d[w][g]|0,j[w]!==0&&(_=!1);if(!_)break;k++,g--}if(g>=0&&k++,$=$.dblp(k),g<0)break;for(w=0;w<i;w++){var L=j[w];L!==0&&(L>0?S=f[w][L-1>>1]:L<0&&(S=f[w][-L-1>>1].neg()),S.type==="affine"?$=$.mixedAdd(S):$=$.add(S))}}for(g=0;g<i;g++)f[g]=null;return n?$:$.toP()};function ki(e,t){this.curve=e,this.type=t,this.precomputed=null}Rs.BasePoint=ki,ki.prototype.eq=function(){throw new Error("Not implemented")},ki.prototype.validate=function(){return this.curve.validate(this)},Rs.prototype.decodePoint=function(e,t){e=Di.toArray(e,t);var r=this.p.byteLength();if((e[0]===4||e[0]===6||e[0]===7)&&e.length-1===2*r){e[0]===6?ac(e[e.length-1]%2===0):e[0]===7&&ac(e[e.length-1]%2===1);var i=this.point(e.slice(1,1+r),e.slice(1+r,1+2*r));return i}else if((e[0]===2||e[0]===3)&&e.length-1===r)return this.pointFromX(e.slice(1,1+r),e[0]===3);throw new Error("Unknown point format")},ki.prototype.encodeCompressed=function(e){return this.encode(e,!0)},ki.prototype._encode=function(e){var t=this.curve.p.byteLength(),r=this.getX().toArray("be",t);return e?[this.getY().isEven()?2:3].concat(r):[4].concat(r,this.getY().toArray("be",t))},ki.prototype.encode=function(e,t){return Di.encode(this._encode(t),e)},ki.prototype.precompute=function(e){if(this.precomputed)return this;var t={doubles:null,naf:null,beta:null};return t.naf=this._getNAFPoints(8),t.doubles=this._getDoubles(4,e),t.beta=this._getBeta(),this.precomputed=t,this},ki.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var t=this.precomputed.doubles;return t?t.points.length>=Math.ceil((e.bitLength()+1)/t.step):!1},ki.prototype._getDoubles=function(e,t){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var r=[this],i=this,n=0;n<t;n+=e){for(var o=0;o<e;o++)i=i.dbl();r.push(i)}return{step:e,points:r}},ki.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var t=[this],r=(1<<e)-1,i=r===1?null:this.dbl(),n=1;n<r;n++)t[n]=t[n-1].add(i);return{wnd:e,points:t}},ki.prototype._getBeta=function(){return null},ki.prototype.dblp=function(e){for(var t=this,r=0;r<e;r++)t=t.dbl();return t};var T0=ua(function(e){typeof Object.create=="function"?e.exports=function(t,r){r&&(t.super_=r,t.prototype=Object.create(r.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(t,r){if(r){t.super_=r;var i=function(){};i.prototype=r.prototype,t.prototype=new i,t.prototype.constructor=t}}}),M7=Di.assert;function Yi(e){go.call(this,"short",e),this.a=new le(e.a,16).toRed(this.red),this.b=new le(e.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(e),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}T0(Yi,go);var D7=Yi;Yi.prototype._getEndomorphism=function(e){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var t,r;if(e.beta)t=new le(e.beta,16).toRed(this.red);else{var i=this._getEndoRoots(this.p);t=i[0].cmp(i[1])<0?i[0]:i[1],t=t.toRed(this.red)}if(e.lambda)r=new le(e.lambda,16);else{var n=this._getEndoRoots(this.n);this.g.mul(n[0]).x.cmp(this.g.x.redMul(t))===0?r=n[0]:(r=n[1],M7(this.g.mul(r).x.cmp(this.g.x.redMul(t))===0))}var o;return e.basis?o=e.basis.map(function(f){return{a:new le(f.a,16),b:new le(f.b,16)}}):o=this._getEndoBasis(r),{beta:t,lambda:r,basis:o}}},Yi.prototype._getEndoRoots=function(e){var t=e===this.p?this.red:le.mont(e),r=new le(2).toRed(t).redInvm(),i=r.redNeg(),n=new le(3).toRed(t).redNeg().redSqrt().redMul(r),o=i.redAdd(n).fromRed(),f=i.redSub(n).fromRed();return[o,f]},Yi.prototype._getEndoBasis=function(e){for(var t=this.n.ushrn(Math.floor(this.n.bitLength()/2)),r=e,i=this.n.clone(),n=new le(1),o=new le(0),f=new le(0),d=new le(1),v,g,w,S,x,C,N,V=0,z,X;r.cmpn(0)!==0;){var G=i.div(r);z=i.sub(G.mul(r)),X=f.sub(G.mul(n));var Y=d.sub(G.mul(o));if(!w&&z.cmp(t)<0)v=N.neg(),g=n,w=z.neg(),S=X;else if(w&&++V===2)break;N=z,i=r,r=z,f=n,n=X,d=o,o=Y}x=z.neg(),C=X;var $=w.sqr().add(S.sqr()),j=x.sqr().add(C.sqr());return j.cmp($)>=0&&(x=v,C=g),w.negative&&(w=w.neg(),S=S.neg()),x.negative&&(x=x.neg(),C=C.neg()),[{a:w,b:S},{a:x,b:C}]},Yi.prototype._endoSplit=function(e){var t=this.endo.basis,r=t[0],i=t[1],n=i.b.mul(e).divRound(this.n),o=r.b.neg().mul(e).divRound(this.n),f=n.mul(r.a),d=o.mul(i.a),v=n.mul(r.b),g=o.mul(i.b),w=e.sub(f).sub(d),S=v.add(g).neg();return{k1:w,k2:S}},Yi.prototype.pointFromX=function(e,t){e=new le(e,16),e.red||(e=e.toRed(this.red));var r=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),i=r.redSqrt();if(i.redSqr().redSub(r).cmp(this.zero)!==0)throw new Error("invalid point");var n=i.fromRed().isOdd();return(t&&!n||!t&&n)&&(i=i.redNeg()),this.point(e,i)},Yi.prototype.validate=function(e){if(e.inf)return!0;var t=e.x,r=e.y,i=this.a.redMul(t),n=t.redSqr().redMul(t).redIAdd(i).redIAdd(this.b);return r.redSqr().redISub(n).cmpn(0)===0},Yi.prototype._endoWnafMulAdd=function(e,t,r){for(var i=this._endoWnafT1,n=this._endoWnafT2,o=0;o<e.length;o++){var f=this._endoSplit(t[o]),d=e[o],v=d._getBeta();f.k1.negative&&(f.k1.ineg(),d=d.neg(!0)),f.k2.negative&&(f.k2.ineg(),v=v.neg(!0)),i[o*2]=d,i[o*2+1]=v,n[o*2]=f.k1,n[o*2+1]=f.k2}for(var g=this._wnafMulAdd(1,i,n,o*2,r),w=0;w<o*2;w++)i[w]=null,n[w]=null;return g};function Er(e,t,r,i){go.BasePoint.call(this,e,"affine"),t===null&&r===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new le(t,16),this.y=new le(r,16),i&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}T0(Er,go.BasePoint),Yi.prototype.point=function(e,t,r){return new Er(this,e,t,r)},Yi.prototype.pointFromJSON=function(e,t){return Er.fromJSON(this,e,t)},Er.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var t=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var r=this.curve,i=function(n){return r.point(n.x.redMul(r.endo.beta),n.y)};e.beta=t,t.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(i)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(i)}}}return t}},Er.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},Er.fromJSON=function(e,t,r){typeof t=="string"&&(t=JSON.parse(t));var i=e.point(t[0],t[1],r);if(!t[2])return i;function n(f){return e.point(f[0],f[1],r)}var o=t[2];return i.precomputed={beta:null,doubles:o.doubles&&{step:o.doubles.step,points:[i].concat(o.doubles.points.map(n))},naf:o.naf&&{wnd:o.naf.wnd,points:[i].concat(o.naf.points.map(n))}},i},Er.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},Er.prototype.isInfinity=function(){return this.inf},Er.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(this.x.cmp(e.x)===0)return this.curve.point(null,null);var t=this.y.redSub(e.y);t.cmpn(0)!==0&&(t=t.redMul(this.x.redSub(e.x).redInvm()));var r=t.redSqr().redISub(this.x).redISub(e.x),i=t.redMul(this.x.redSub(r)).redISub(this.y);return this.curve.point(r,i)},Er.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(e.cmpn(0)===0)return this.curve.point(null,null);var t=this.curve.a,r=this.x.redSqr(),i=e.redInvm(),n=r.redAdd(r).redIAdd(r).redIAdd(t).redMul(i),o=n.redSqr().redISub(this.x.redAdd(this.x)),f=n.redMul(this.x.redSub(o)).redISub(this.y);return this.curve.point(o,f)},Er.prototype.getX=function(){return this.x.fromRed()},Er.prototype.getY=function(){return this.y.fromRed()},Er.prototype.mul=function(e){return e=new le(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)},Er.prototype.mulAdd=function(e,t,r){var i=[this,t],n=[e,r];return this.curve.endo?this.curve._endoWnafMulAdd(i,n):this.curve._wnafMulAdd(1,i,n,2)},Er.prototype.jmulAdd=function(e,t,r){var i=[this,t],n=[e,r];return this.curve.endo?this.curve._endoWnafMulAdd(i,n,!0):this.curve._wnafMulAdd(1,i,n,2,!0)},Er.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||this.x.cmp(e.x)===0&&this.y.cmp(e.y)===0)},Er.prototype.neg=function(e){if(this.inf)return this;var t=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var r=this.precomputed,i=function(n){return n.neg()};t.precomputed={naf:r.naf&&{wnd:r.naf.wnd,points:r.naf.points.map(i)},doubles:r.doubles&&{step:r.doubles.step,points:r.doubles.points.map(i)}}}return t},Er.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var e=this.curve.jpoint(this.x,this.y,this.curve.one);return e};function Dr(e,t,r,i){go.BasePoint.call(this,e,"jacobian"),t===null&&r===null&&i===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new le(0)):(this.x=new le(t,16),this.y=new le(r,16),this.z=new le(i,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}T0(Dr,go.BasePoint),Yi.prototype.jpoint=function(e,t,r){return new Dr(this,e,t,r)},Dr.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),t=e.redSqr(),r=this.x.redMul(t),i=this.y.redMul(t).redMul(e);return this.curve.point(r,i)},Dr.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},Dr.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.z.redSqr(),r=this.z.redSqr(),i=this.x.redMul(t),n=e.x.redMul(r),o=this.y.redMul(t.redMul(e.z)),f=e.y.redMul(r.redMul(this.z)),d=i.redSub(n),v=o.redSub(f);if(d.cmpn(0)===0)return v.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var g=d.redSqr(),w=g.redMul(d),S=i.redMul(g),x=v.redSqr().redIAdd(w).redISub(S).redISub(S),C=v.redMul(S.redISub(x)).redISub(o.redMul(w)),N=this.z.redMul(e.z).redMul(d);return this.curve.jpoint(x,C,N)},Dr.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var t=this.z.redSqr(),r=this.x,i=e.x.redMul(t),n=this.y,o=e.y.redMul(t).redMul(this.z),f=r.redSub(i),d=n.redSub(o);if(f.cmpn(0)===0)return d.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var v=f.redSqr(),g=v.redMul(f),w=r.redMul(v),S=d.redSqr().redIAdd(g).redISub(w).redISub(w),x=d.redMul(w.redISub(S)).redISub(n.redMul(g)),C=this.z.redMul(f);return this.curve.jpoint(S,x,C)},Dr.prototype.dblp=function(e){if(e===0)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var t;if(this.curve.zeroA||this.curve.threeA){var r=this;for(t=0;t<e;t++)r=r.dbl();return r}var i=this.curve.a,n=this.curve.tinv,o=this.x,f=this.y,d=this.z,v=d.redSqr().redSqr(),g=f.redAdd(f);for(t=0;t<e;t++){var w=o.redSqr(),S=g.redSqr(),x=S.redSqr(),C=w.redAdd(w).redIAdd(w).redIAdd(i.redMul(v)),N=o.redMul(S),V=C.redSqr().redISub(N.redAdd(N)),z=N.redISub(V),X=C.redMul(z);X=X.redIAdd(X).redISub(x);var G=g.redMul(d);t+1<e&&(v=v.redMul(x)),o=V,d=G,g=X}return this.curve.jpoint(o,g.redMul(n),d)},Dr.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},Dr.prototype._zeroDbl=function(){var e,t,r;if(this.zOne){var i=this.x.redSqr(),n=this.y.redSqr(),o=n.redSqr(),f=this.x.redAdd(n).redSqr().redISub(i).redISub(o);f=f.redIAdd(f);var d=i.redAdd(i).redIAdd(i),v=d.redSqr().redISub(f).redISub(f),g=o.redIAdd(o);g=g.redIAdd(g),g=g.redIAdd(g),e=v,t=d.redMul(f.redISub(v)).redISub(g),r=this.y.redAdd(this.y)}else{var w=this.x.redSqr(),S=this.y.redSqr(),x=S.redSqr(),C=this.x.redAdd(S).redSqr().redISub(w).redISub(x);C=C.redIAdd(C);var N=w.redAdd(w).redIAdd(w),V=N.redSqr(),z=x.redIAdd(x);z=z.redIAdd(z),z=z.redIAdd(z),e=V.redISub(C).redISub(C),t=N.redMul(C.redISub(e)).redISub(z),r=this.y.redMul(this.z),r=r.redIAdd(r)}return this.curve.jpoint(e,t,r)},Dr.prototype._threeDbl=function(){var e,t,r;if(this.zOne){var i=this.x.redSqr(),n=this.y.redSqr(),o=n.redSqr(),f=this.x.redAdd(n).redSqr().redISub(i).redISub(o);f=f.redIAdd(f);var d=i.redAdd(i).redIAdd(i).redIAdd(this.curve.a),v=d.redSqr().redISub(f).redISub(f);e=v;var g=o.redIAdd(o);g=g.redIAdd(g),g=g.redIAdd(g),t=d.redMul(f.redISub(v)).redISub(g),r=this.y.redAdd(this.y)}else{var w=this.z.redSqr(),S=this.y.redSqr(),x=this.x.redMul(S),C=this.x.redSub(w).redMul(this.x.redAdd(w));C=C.redAdd(C).redIAdd(C);var N=x.redIAdd(x);N=N.redIAdd(N);var V=N.redAdd(N);e=C.redSqr().redISub(V),r=this.y.redAdd(this.z).redSqr().redISub(S).redISub(w);var z=S.redSqr();z=z.redIAdd(z),z=z.redIAdd(z),z=z.redIAdd(z),t=C.redMul(N.redISub(e)).redISub(z)}return this.curve.jpoint(e,t,r)},Dr.prototype._dbl=function(){var e=this.curve.a,t=this.x,r=this.y,i=this.z,n=i.redSqr().redSqr(),o=t.redSqr(),f=r.redSqr(),d=o.redAdd(o).redIAdd(o).redIAdd(e.redMul(n)),v=t.redAdd(t);v=v.redIAdd(v);var g=v.redMul(f),w=d.redSqr().redISub(g.redAdd(g)),S=g.redISub(w),x=f.redSqr();x=x.redIAdd(x),x=x.redIAdd(x),x=x.redIAdd(x);var C=d.redMul(S).redISub(x),N=r.redAdd(r).redMul(i);return this.curve.jpoint(w,C,N)},Dr.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),t=this.y.redSqr(),r=this.z.redSqr(),i=t.redSqr(),n=e.redAdd(e).redIAdd(e),o=n.redSqr(),f=this.x.redAdd(t).redSqr().redISub(e).redISub(i);f=f.redIAdd(f),f=f.redAdd(f).redIAdd(f),f=f.redISub(o);var d=f.redSqr(),v=i.redIAdd(i);v=v.redIAdd(v),v=v.redIAdd(v),v=v.redIAdd(v);var g=n.redIAdd(f).redSqr().redISub(o).redISub(d).redISub(v),w=t.redMul(g);w=w.redIAdd(w),w=w.redIAdd(w);var S=this.x.redMul(d).redISub(w);S=S.redIAdd(S),S=S.redIAdd(S);var x=this.y.redMul(g.redMul(v.redISub(g)).redISub(f.redMul(d)));x=x.redIAdd(x),x=x.redIAdd(x),x=x.redIAdd(x);var C=this.z.redAdd(f).redSqr().redISub(r).redISub(d);return this.curve.jpoint(S,x,C)},Dr.prototype.mul=function(e,t){return e=new le(e,t),this.curve._wnafMul(this,e)},Dr.prototype.eq=function(e){if(e.type==="affine")return this.eq(e.toJ());if(this===e)return!0;var t=this.z.redSqr(),r=e.z.redSqr();if(this.x.redMul(r).redISub(e.x.redMul(t)).cmpn(0)!==0)return!1;var i=t.redMul(this.z),n=r.redMul(e.z);return this.y.redMul(n).redISub(e.y.redMul(i)).cmpn(0)===0},Dr.prototype.eqXToP=function(e){var t=this.z.redSqr(),r=e.toRed(this.curve.red).redMul(t);if(this.x.cmp(r)===0)return!0;for(var i=e.clone(),n=this.curve.redN.redMul(t);;){if(i.iadd(this.curve.n),i.cmp(this.curve.p)>=0)return!1;if(r.redIAdd(n),this.x.cmp(r)===0)return!0}},Dr.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},Dr.prototype.isInfinity=function(){return this.z.cmpn(0)===0};var Ku=ua(function(e,t){var r=t;r.base=go,r.short=D7,r.mont=null,r.edwards=null}),Gu=ua(function(e,t){var r=t,i=Di.assert;function n(d){d.type==="short"?this.curve=new Ku.short(d):d.type==="edwards"?this.curve=new Ku.edwards(d):this.curve=new Ku.mont(d),this.g=this.curve.g,this.n=this.curve.n,this.hash=d.hash,i(this.g.validate(),"Invalid curve"),i(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}r.PresetCurve=n;function o(d,v){Object.defineProperty(r,d,{configurable:!0,enumerable:!0,get:function(){var g=new n(v);return Object.defineProperty(r,d,{configurable:!0,enumerable:!0,value:g}),g}})}o("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:Cn.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),o("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:Cn.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),o("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:Cn.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),o("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:Cn.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),o("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:Cn.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),o("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:Cn.sha256,gRed:!1,g:["9"]}),o("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:Cn.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var f;try{f=null.crash()}catch{f=void 0}o("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:Cn.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",f]})});function Ts(e){if(!(this instanceof Ts))return new Ts(e);this.hash=e.hash,this.predResist=!!e.predResist,this.outLen=this.hash.outSize,this.minEntropy=e.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var t=An.toArray(e.entropy,e.entropyEnc||"hex"),r=An.toArray(e.nonce,e.nonceEnc||"hex"),i=An.toArray(e.pers,e.persEnc||"hex");R0(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(t,r,i)}var q1=Ts;Ts.prototype._init=function(e,t,r){var i=e.concat(t).concat(r);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var n=0;n<this.V.length;n++)this.K[n]=0,this.V[n]=1;this._update(i),this._reseed=1,this.reseedInterval=281474976710656},Ts.prototype._hmac=function(){return new Cn.hmac(this.hash,this.K)},Ts.prototype._update=function(e){var t=this._hmac().update(this.V).update([0]);e&&(t=t.update(e)),this.K=t.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())},Ts.prototype.reseed=function(e,t,r,i){typeof t!="string"&&(i=r,r=t,t=null),e=An.toArray(e,t),r=An.toArray(r,i),R0(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(r||[])),this._reseed=1},Ts.prototype.generate=function(e,t,r,i){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof t!="string"&&(i=r,r=t,t=null),r&&(r=An.toArray(r,i||"hex"),this._update(r));for(var n=[];n.length<e;)this.V=this._hmac().update(this.V).digest(),n=n.concat(this.V);var o=n.slice(0,e);return this._update(r),this._reseed++,An.encode(o,t)};var al=Di.assert;function Ur(e,t){this.ec=e,this.priv=null,this.pub=null,t.priv&&this._importPrivate(t.priv,t.privEnc),t.pub&&this._importPublic(t.pub,t.pubEnc)}var hl=Ur;Ur.fromPublic=function(e,t,r){return t instanceof Ur?t:new Ur(e,{pub:t,pubEnc:r})},Ur.fromPrivate=function(e,t,r){return t instanceof Ur?t:new Ur(e,{priv:t,privEnc:r})},Ur.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},Ur.prototype.getPublic=function(e,t){return typeof e=="string"&&(t=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),t?this.pub.encode(t,e):this.pub},Ur.prototype.getPrivate=function(e){return e==="hex"?this.priv.toString(16,2):this.priv},Ur.prototype._importPrivate=function(e,t){this.priv=new le(e,t||16),this.priv=this.priv.umod(this.ec.curve.n)},Ur.prototype._importPublic=function(e,t){if(e.x||e.y){this.ec.curve.type==="mont"?al(e.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&al(e.x&&e.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(e.x,e.y);return}this.pub=this.ec.curve.decodePoint(e,t)},Ur.prototype.derive=function(e){return e.validate()||al(e.validate(),"public point not validated"),e.mul(this.priv).getX()},Ur.prototype.sign=function(e,t,r){return this.ec.sign(e,this,t,r)},Ur.prototype.verify=function(e,t){return this.ec.verify(e,t,this)},Ur.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var x7=Di.assert;function xc(e,t){if(e instanceof xc)return e;this._importDER(e,t)||(x7(e.r&&e.s,"Signature without r or s"),this.r=new le(e.r,16),this.s=new le(e.s,16),e.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=e.recoveryParam)}var Nu=xc;function C7(){this.place=0}function ul(e,t){var r=e[t.place++];if(!(r&128))return r;var i=r&15;if(i===0||i>4)return!1;for(var n=0,o=0,f=t.place;o<i;o++,f++)n<<=8,n|=e[f],n>>>=0;return n<=127?!1:(t.place=f,n)}function $1(e){for(var t=0,r=e.length-1;!e[t]&&!(e[t+1]&128)&&t<r;)t++;return t===0?e:e.slice(t)}xc.prototype._importDER=function(e,t){e=Di.toArray(e,t);var r=new C7;if(e[r.place++]!==48)return!1;var i=ul(e,r);if(i===!1||i+r.place!==e.length||e[r.place++]!==2)return!1;var n=ul(e,r);if(n===!1)return!1;var o=e.slice(r.place,n+r.place);if(r.place+=n,e[r.place++]!==2)return!1;var f=ul(e,r);if(f===!1||e.length!==f+r.place)return!1;var d=e.slice(r.place,f+r.place);if(o[0]===0)if(o[1]&128)o=o.slice(1);else return!1;if(d[0]===0)if(d[1]&128)d=d.slice(1);else return!1;return this.r=new le(o),this.s=new le(d),this.recoveryParam=null,!0};function cl(e,t){if(t<128){e.push(t);return}var r=1+(Math.log(t)/Math.LN2>>>3);for(e.push(r|128);--r;)e.push(t>>>(r<<3)&255);e.push(t)}xc.prototype.toDER=function(e){var t=this.r.toArray(),r=this.s.toArray();for(t[0]&128&&(t=[0].concat(t)),r[0]&128&&(r=[0].concat(r)),t=$1(t),r=$1(r);!r[0]&&!(r[1]&128);)r=r.slice(1);var i=[2];cl(i,t.length),i=i.concat(t),i.push(2),cl(i,r.length);var n=i.concat(r),o=[48];return cl(o,n.length),o=o.concat(n),Di.encode(o,e)};var O7=function(){throw new Error("unsupported")},Uv=Di.assert;function Gi(e){if(!(this instanceof Gi))return new Gi(e);typeof e=="string"&&(Uv(Object.prototype.hasOwnProperty.call(Gu,e),"Unknown curve "+e),e=Gu[e]),e instanceof Gu.PresetCurve&&(e={curve:e}),this.curve=e.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=e.curve.g,this.g.precompute(e.curve.n.bitLength()+1),this.hash=e.hash||e.curve.hash}var N7=Gi;Gi.prototype.keyPair=function(e){return new hl(this,e)},Gi.prototype.keyFromPrivate=function(e,t){return hl.fromPrivate(this,e,t)},Gi.prototype.keyFromPublic=function(e,t){return hl.fromPublic(this,e,t)},Gi.prototype.genKeyPair=function(e){e||(e={});for(var t=new q1({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||O7(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),r=this.n.byteLength(),i=this.n.sub(new le(2));;){var n=new le(t.generate(r));if(!(n.cmp(i)>0))return n.iaddn(1),this.keyFromPrivate(n)}},Gi.prototype._truncateToN=function(e,t){var r=e.byteLength()*8-this.n.bitLength();return r>0&&(e=e.ushrn(r)),!t&&e.cmp(this.n)>=0?e.sub(this.n):e},Gi.prototype.sign=function(e,t,r,i){typeof r=="object"&&(i=r,r=null),i||(i={}),t=this.keyFromPrivate(t,r),e=this._truncateToN(new le(e,16));for(var n=this.n.byteLength(),o=t.getPrivate().toArray("be",n),f=e.toArray("be",n),d=new q1({hash:this.hash,entropy:o,nonce:f,pers:i.pers,persEnc:i.persEnc||"utf8"}),v=this.n.sub(new le(1)),g=0;;g++){var w=i.k?i.k(g):new le(d.generate(this.n.byteLength()));if(w=this._truncateToN(w,!0),!(w.cmpn(1)<=0||w.cmp(v)>=0)){var S=this.g.mul(w);if(!S.isInfinity()){var x=S.getX(),C=x.umod(this.n);if(C.cmpn(0)!==0){var N=w.invm(this.n).mul(C.mul(t.getPrivate()).iadd(e));if(N=N.umod(this.n),N.cmpn(0)!==0){var V=(S.getY().isOdd()?1:0)|(x.cmp(C)!==0?2:0);return i.canonical&&N.cmp(this.nh)>0&&(N=this.n.sub(N),V^=1),new Nu({r:C,s:N,recoveryParam:V})}}}}}},Gi.prototype.verify=function(e,t,r,i){e=this._truncateToN(new le(e,16)),r=this.keyFromPublic(r,i),t=new Nu(t,"hex");var n=t.r,o=t.s;if(n.cmpn(1)<0||n.cmp(this.n)>=0||o.cmpn(1)<0||o.cmp(this.n)>=0)return!1;var f=o.invm(this.n),d=f.mul(e).umod(this.n),v=f.mul(n).umod(this.n),g;return this.curve._maxwellTrick?(g=this.g.jmulAdd(d,r.getPublic(),v),g.isInfinity()?!1:g.eqXToP(n)):(g=this.g.mulAdd(d,r.getPublic(),v),g.isInfinity()?!1:g.getX().umod(this.n).cmp(n)===0)},Gi.prototype.recoverPubKey=function(e,t,r,i){Uv((3&r)===r,"The recovery param is more than two bits"),t=new Nu(t,i);var n=this.n,o=new le(e),f=t.r,d=t.s,v=r&1,g=r>>1;if(f.cmp(this.curve.p.umod(this.curve.n))>=0&&g)throw new Error("Unable to find sencond key candinate");g?f=this.curve.pointFromX(f.add(this.curve.n),v):f=this.curve.pointFromX(f,v);var w=t.r.invm(n),S=n.sub(o).mul(w).umod(n),x=d.mul(w).umod(n);return this.g.mulAdd(S,f,x)},Gi.prototype.getKeyRecoveryParam=function(e,t,r,i){if(t=new Nu(t,i),t.recoveryParam!==null)return t.recoveryParam;for(var n=0;n<4;n++){var o;try{o=this.recoverPubKey(e,t,n)}catch{continue}if(o.eq(r))return n}throw new Error("Unable to find valid recovery factor")};var P7=ua(function(e,t){var r=t;r.version="6.5.4",r.utils=Di,r.rand=function(){throw new Error("unsupported")},r.curve=Ku,r.curves=Gu,r.ec=N7,r.eddsa=null});P7.ec;var k1;(function(e){e[e.legacy=0]="legacy",e[e.eip2930=1]="eip2930",e[e.eip1559=2]="eip1559"})(k1||(k1={}));const R7={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}};function T7(e,t){const{message:r,code:i}=R7[e];return{message:r,code:i}}function i0(e,t){return!!Array.isArray(e)}const B7=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,U7=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,L7=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function F7(e,t){if(e==="__proto__"||e==="constructor"&&t&&typeof t=="object"&&"prototype"in t){q7(e);return}return t}function q7(e){console.warn(`[destr] Dropping "${e}" key to prevent prototype pollution.`)}function Pu(e,t={}){if(typeof e!="string")return e;const r=e.trim();if(e[0]==='"'&&e.endsWith('"')&&!e.includes("\\"))return r.slice(1,-1);if(r.length<=9){const i=r.toLowerCase();if(i==="true")return!0;if(i==="false")return!1;if(i==="undefined")return;if(i==="null")return null;if(i==="nan")return Number.NaN;if(i==="infinity")return Number.POSITIVE_INFINITY;if(i==="-infinity")return Number.NEGATIVE_INFINITY}if(!L7.test(e)){if(t.strict)throw new SyntaxError("[destr] Invalid JSON");return e}try{if(B7.test(e)||U7.test(e)){if(t.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(e,F7)}return JSON.parse(e)}catch(i){if(t.strict)throw i;return e}}function $7(e){return!e||typeof e.then!="function"?Promise.resolve(e):e}function Ir(e,...t){try{return $7(e(...t))}catch(r){return Promise.reject(r)}}function k7(e){const t=typeof e;return e===null||t!=="object"&&t!=="function"}function z7(e){const t=Object.getPrototypeOf(e);return!t||t.isPrototypeOf(Object)}function Vu(e){if(k7(e))return String(e);if(z7(e)||Array.isArray(e))return JSON.stringify(e);if(typeof e.toJSON=="function")return Vu(e.toJSON());throw new Error("[unstorage] Cannot stringify value!")}function Lv(){if(typeof lh===void 0)throw new TypeError("[unstorage] Buffer is not supported!")}const n0="base64:";function j7(e){if(typeof e=="string")return e;Lv();const t=lh.from(e).toString("base64");return n0+t}function H7(e){return typeof e!="string"||!e.startsWith(n0)?e:(Lv(),lh.from(e.slice(n0.length),"base64"))}function ai(e){return e?e.split("?")[0].replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,""):""}function K7(...e){return ai(e.join(":"))}function Ru(e){return e=ai(e),e?e+":":""}const G7="memory",V7=()=>{const e=new Map;return{name:G7,options:{},hasItem(t){return e.has(t)},getItem(t){return e.get(t)??null},getItemRaw(t){return e.get(t)??null},setItem(t,r){e.set(t,r)},setItemRaw(t,r){e.set(t,r)},removeItem(t){e.delete(t)},getKeys(){return Array.from(e.keys())},clear(){e.clear()},dispose(){e.clear()}}};function Q7(e={}){const t={mounts:{"":e.driver||V7()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},r=g=>{for(const w of t.mountpoints)if(g.startsWith(w))return{base:w,relativeKey:g.slice(w.length),driver:t.mounts[w]};return{base:"",relativeKey:g,driver:t.mounts[""]}},i=(g,w)=>t.mountpoints.filter(S=>S.startsWith(g)||w&&g.startsWith(S)).map(S=>({relativeBase:g.length>S.length?g.slice(S.length):void 0,mountpoint:S,driver:t.mounts[S]})),n=(g,w)=>{if(t.watching){w=ai(w);for(const S of t.watchListeners)S(g,w)}},o=async()=>{if(!t.watching){t.watching=!0;for(const g in t.mounts)t.unwatch[g]=await z1(t.mounts[g],n,g)}},f=async()=>{if(t.watching){for(const g in t.unwatch)await t.unwatch[g]();t.unwatch={},t.watching=!1}},d=(g,w,S)=>{const x=new Map,C=N=>{let V=x.get(N.base);return V||(V={driver:N.driver,base:N.base,items:[]},x.set(N.base,V)),V};for(const N of g){const V=typeof N=="string",z=ai(V?N:N.key),X=V?void 0:N.value,G=V||!N.options?w:{...w,...N.options},Y=r(z);C(Y).items.push({key:z,value:X,relativeKey:Y.relativeKey,options:G})}return Promise.all([...x.values()].map(N=>S(N))).then(N=>N.flat())},v={hasItem(g,w={}){g=ai(g);const{relativeKey:S,driver:x}=r(g);return Ir(x.hasItem,S,w)},getItem(g,w={}){g=ai(g);const{relativeKey:S,driver:x}=r(g);return Ir(x.getItem,S,w).then(C=>Pu(C))},getItems(g,w){return d(g,w,S=>S.driver.getItems?Ir(S.driver.getItems,S.items.map(x=>({key:x.relativeKey,options:x.options})),w).then(x=>x.map(C=>({key:K7(S.base,C.key),value:Pu(C.value)}))):Promise.all(S.items.map(x=>Ir(S.driver.getItem,x.relativeKey,x.options).then(C=>({key:x.key,value:Pu(C)})))))},getItemRaw(g,w={}){g=ai(g);const{relativeKey:S,driver:x}=r(g);return x.getItemRaw?Ir(x.getItemRaw,S,w):Ir(x.getItem,S,w).then(C=>H7(C))},async setItem(g,w,S={}){if(w===void 0)return v.removeItem(g);g=ai(g);const{relativeKey:x,driver:C}=r(g);C.setItem&&(await Ir(C.setItem,x,Vu(w),S),C.watch||n("update",g))},async setItems(g,w){await d(g,w,async S=>{if(S.driver.setItems)return Ir(S.driver.setItems,S.items.map(x=>({key:x.relativeKey,value:Vu(x.value),options:x.options})),w);S.driver.setItem&&await Promise.all(S.items.map(x=>Ir(S.driver.setItem,x.relativeKey,Vu(x.value),x.options)))})},async setItemRaw(g,w,S={}){if(w===void 0)return v.removeItem(g,S);g=ai(g);const{relativeKey:x,driver:C}=r(g);if(C.setItemRaw)await Ir(C.setItemRaw,x,w,S);else if(C.setItem)await Ir(C.setItem,x,j7(w),S);else return;C.watch||n("update",g)},async removeItem(g,w={}){typeof w=="boolean"&&(w={removeMeta:w}),g=ai(g);const{relativeKey:S,driver:x}=r(g);x.removeItem&&(await Ir(x.removeItem,S,w),(w.removeMeta||w.removeMata)&&await Ir(x.removeItem,S+"$",w),x.watch||n("remove",g))},async getMeta(g,w={}){typeof w=="boolean"&&(w={nativeOnly:w}),g=ai(g);const{relativeKey:S,driver:x}=r(g),C=Object.create(null);if(x.getMeta&&Object.assign(C,await Ir(x.getMeta,S,w)),!w.nativeOnly){const N=await Ir(x.getItem,S+"$",w).then(V=>Pu(V));N&&typeof N=="object"&&(typeof N.atime=="string"&&(N.atime=new Date(N.atime)),typeof N.mtime=="string"&&(N.mtime=new Date(N.mtime)),Object.assign(C,N))}return C},setMeta(g,w,S={}){return this.setItem(g+"$",w,S)},removeMeta(g,w={}){return this.removeItem(g+"$",w)},async getKeys(g,w={}){g=Ru(g);const S=i(g,!0);let x=[];const C=[];for(const N of S){const z=(await Ir(N.driver.getKeys,N.relativeBase,w)).map(X=>N.mountpoint+ai(X)).filter(X=>!x.some(G=>X.startsWith(G)));C.push(...z),x=[N.mountpoint,...x.filter(X=>!X.startsWith(N.mountpoint))]}return g?C.filter(N=>N.startsWith(g)&&!N.endsWith("$")):C.filter(N=>!N.endsWith("$"))},async clear(g,w={}){g=Ru(g),await Promise.all(i(g,!1).map(async S=>{if(S.driver.clear)return Ir(S.driver.clear,S.relativeBase,w);if(S.driver.removeItem){const x=await S.driver.getKeys(S.relativeBase||"",w);return Promise.all(x.map(C=>S.driver.removeItem(C,w)))}}))},async dispose(){await Promise.all(Object.values(t.mounts).map(g=>j1(g)))},async watch(g){return await o(),t.watchListeners.push(g),async()=>{t.watchListeners=t.watchListeners.filter(w=>w!==g),t.watchListeners.length===0&&await f()}},async unwatch(){t.watchListeners=[],await f()},mount(g,w){if(g=Ru(g),g&&t.mounts[g])throw new Error(`already mounted at ${g}`);return g&&(t.mountpoints.push(g),t.mountpoints.sort((S,x)=>x.length-S.length)),t.mounts[g]=w,t.watching&&Promise.resolve(z1(w,n,g)).then(S=>{t.unwatch[g]=S}).catch(console.error),v},async unmount(g,w=!0){g=Ru(g),!(!g||!t.mounts[g])&&(t.watching&&g in t.unwatch&&(t.unwatch[g](),delete t.unwatch[g]),w&&await j1(t.mounts[g]),t.mountpoints=t.mountpoints.filter(S=>S!==g),delete t.mounts[g])},getMount(g=""){g=ai(g)+":";const w=r(g);return{driver:w.driver,base:w.base}},getMounts(g="",w={}){return g=ai(g),i(g,w.parents).map(x=>({driver:x.driver,base:x.mountpoint}))}};return v}function z1(e,t,r){return e.watch?e.watch((i,n)=>t(i,r+n)):()=>{}}async function j1(e){typeof e.dispose=="function"&&await Ir(e.dispose)}function mo(e){return new Promise((t,r)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>r(e.error)})}function Fv(e,t){const r=indexedDB.open(e);r.onupgradeneeded=()=>r.result.createObjectStore(t);const i=mo(r);return(n,o)=>i.then(f=>o(f.transaction(t,n).objectStore(t)))}let fl;function vh(){return fl||(fl=Fv("keyval-store","keyval")),fl}function H1(e,t=vh()){return t("readonly",r=>mo(r.get(e)))}function Y7(e,t,r=vh()){return r("readwrite",i=>(i.put(t,e),mo(i.transaction)))}function J7(e,t=vh()){return t("readwrite",r=>(r.delete(e),mo(r.transaction)))}function W7(e=vh()){return e("readwrite",t=>(t.clear(),mo(t.transaction)))}function X7(e,t){return e.openCursor().onsuccess=function(){this.result&&(t(this.result),this.result.continue())},mo(e.transaction)}function Z7(e=vh()){return e("readonly",t=>{if(t.getAllKeys)return mo(t.getAllKeys());const r=[];return X7(t,i=>r.push(i.key)).then(()=>r)})}const tS=e=>JSON.stringify(e,(t,r)=>typeof r=="bigint"?r.toString()+"n":r),eS=e=>{const t=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,r=e.replace(t,'$1"$2n"$3');return JSON.parse(r,(i,n)=>typeof n=="string"&&n.match(/^\d+n$/)?BigInt(n.substring(0,n.length-1)):n)};function B0(e){if(typeof e!="string")throw new Error(`Cannot safe json parse value of type ${typeof e}`);try{return eS(e)}catch{return e}}function U0(e){return typeof e=="string"?e:tS(e)||""}const rS="idb-keyval";var iS=(e={})=>{const t=e.base&&e.base.length>0?`${e.base}:`:"",r=n=>t+n;let i;return e.dbName&&e.storeName&&(i=Fv(e.dbName,e.storeName)),{name:rS,options:e,async hasItem(n){return!(typeof await H1(r(n),i)>"u")},async getItem(n){return await H1(r(n),i)??null},setItem(n,o){return Y7(r(n),o,i)},removeItem(n){return J7(r(n),i)},getKeys(){return Z7(i)},clear(){return W7(i)}}};const nS="WALLET_CONNECT_V2_INDEXED_DB",sS="keyvaluestorage";let oS=class{constructor(){this.indexedDb=Q7({driver:iS({dbName:nS,storeName:sS})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(t=>[t.key,t.value])}async getItem(t){const r=await this.indexedDb.getItem(t);if(r!==null)return r}async setItem(t,r){await this.indexedDb.setItem(t,U0(r))}async removeItem(t){await this.indexedDb.removeItem(t)}};var ll=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof Re<"u"?Re:typeof self<"u"?self:{},Qu={exports:{}};(function(){let e;function t(){}e=t,e.prototype.getItem=function(r){return this.hasOwnProperty(r)?String(this[r]):null},e.prototype.setItem=function(r,i){this[r]=String(i)},e.prototype.removeItem=function(r){delete this[r]},e.prototype.clear=function(){const r=this;Object.keys(r).forEach(function(i){r[i]=void 0,delete r[i]})},e.prototype.key=function(r){return r=r||0,Object.keys(this)[r]},e.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof ll<"u"&&ll.localStorage?Qu.exports=ll.localStorage:typeof window<"u"&&window.localStorage?Qu.exports=window.localStorage:Qu.exports=new t})();function aS(e){var t;return[e[0],B0((t=e[1])!=null?t:"")]}let hS=class{constructor(){this.localStorage=Qu.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(aS)}async getItem(t){const r=this.localStorage.getItem(t);if(r!==null)return B0(r)}async setItem(t,r){this.localStorage.setItem(t,U0(r))}async removeItem(t){this.localStorage.removeItem(t)}};const uS="wc_storage_version",K1=1,cS=async(e,t,r)=>{const i=uS,n=await t.getItem(i);if(n&&n>=K1){r(t);return}const o=await e.getKeys();if(!o.length){r(t);return}const f=[];for(;o.length;){const d=o.shift();if(!d)continue;const v=d.toLowerCase();if(v.includes("wc@")||v.includes("walletconnect")||v.includes("wc_")||v.includes("wallet_connect")){const g=await e.getItem(d);await t.setItem(d,g),f.push(d)}}await t.setItem(i,K1),r(t),fS(e,f)},fS=async(e,t)=>{t.length&&t.forEach(async r=>{await e.removeItem(r)})};let lS=class{constructor(){this.initialized=!1,this.setInitialized=r=>{this.storage=r,this.initialized=!0};const t=new hS;this.storage=t;try{const r=new oS;cS(t,r,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(t){return await this.initialize(),this.storage.getItem(t)}async setItem(t,r){return await this.initialize(),this.storage.setItem(t,r)}async removeItem(t){return await this.initialize(),this.storage.removeItem(t)}async initialize(){this.initialized||await new Promise(t=>{const r=setInterval(()=>{this.initialized&&(clearInterval(r),t())},20)})}};class vo{}let dS=class extends vo{constructor(t){super()}};const G1=Ht.FIVE_SECONDS,yh={pulse:"heartbeat_pulse"};let pS=class qv extends dS{constructor(t){super(t),this.events=new Wi.EventEmitter,this.interval=G1,this.interval=(t==null?void 0:t.interval)||G1}static async init(t){const r=new qv(t);return await r.init(),r}async init(){await this.initialize()}stop(){clearInterval(this.intervalRef)}on(t,r){this.events.on(t,r)}once(t,r){this.events.once(t,r)}off(t,r){this.events.off(t,r)}removeListener(t,r){this.events.removeListener(t,r)}async initialize(){this.intervalRef=setInterval(()=>this.pulse(),Ht.toMiliseconds(this.interval))}pulse(){this.events.emit(yh.pulse)}};function gS(e){try{return JSON.stringify(e)}catch{return'"[Circular]"'}}var mS=vS;function vS(e,t,r){var i=r&&r.stringify||gS,n=1;if(typeof e=="object"&&e!==null){var o=t.length+n;if(o===1)return e;var f=new Array(o);f[0]=i(e);for(var d=1;d<o;d++)f[d]=i(t[d]);return f.join(" ")}if(typeof e!="string")return e;var v=t.length;if(v===0)return e;for(var g="",w=1-n,S=-1,x=e&&e.length||0,C=0;C<x;){if(e.charCodeAt(C)===37&&C+1<x){switch(S=S>-1?S:0,e.charCodeAt(C+1)){case 100:case 102:if(w>=v||t[w]==null)break;S<C&&(g+=e.slice(S,C)),g+=Number(t[w]),S=C+2,C++;break;case 105:if(w>=v||t[w]==null)break;S<C&&(g+=e.slice(S,C)),g+=Math.floor(Number(t[w])),S=C+2,C++;break;case 79:case 111:case 106:if(w>=v||t[w]===void 0)break;S<C&&(g+=e.slice(S,C));var N=typeof t[w];if(N==="string"){g+="'"+t[w]+"'",S=C+2,C++;break}if(N==="function"){g+=t[w].name||"<anonymous>",S=C+2,C++;break}g+=i(t[w]),S=C+2,C++;break;case 115:if(w>=v)break;S<C&&(g+=e.slice(S,C)),g+=String(t[w]),S=C+2,C++;break;case 37:S<C&&(g+=e.slice(S,C)),g+="%",S=C+2,C++,w--;break}++w}++C}return S===-1?e:(S<x&&(g+=e.slice(S)),g)}const V1=mS;var Ho=zn;const sh=DS().console||{},yS={mapHttpRequest:Tu,mapHttpResponse:Tu,wrapRequestSerializer:dl,wrapResponseSerializer:dl,wrapErrorSerializer:dl,req:Tu,res:Tu,err:ES};function wS(e,t){return Array.isArray(e)?e.filter(function(i){return i!=="!stdSerializers.err"}):e===!0?Object.keys(t):!1}function zn(e){e=e||{},e.browser=e.browser||{};const t=e.browser.transmit;if(t&&typeof t.send!="function")throw Error("pino: transmit option must have a send function");const r=e.browser.write||sh;e.browser.write&&(e.browser.asObject=!0);const i=e.serializers||{},n=wS(e.browser.serialize,i);let o=e.browser.serialize;Array.isArray(e.browser.serialize)&&e.browser.serialize.indexOf("!stdSerializers.err")>-1&&(o=!1);const f=["error","fatal","warn","info","debug","trace"];typeof r=="function"&&(r.error=r.fatal=r.warn=r.info=r.debug=r.trace=r),e.enabled===!1&&(e.level="silent");const d=e.level||"info",v=Object.create(r);v.log||(v.log=oh),Object.defineProperty(v,"levelVal",{get:w}),Object.defineProperty(v,"level",{get:S,set:x});const g={transmit:t,serialize:n,asObject:e.browser.asObject,levels:f,timestamp:SS(e)};v.levels=zn.levels,v.level=d,v.setMaxListeners=v.getMaxListeners=v.emit=v.addListener=v.on=v.prependListener=v.once=v.prependOnceListener=v.removeListener=v.removeAllListeners=v.listeners=v.listenerCount=v.eventNames=v.write=v.flush=oh,v.serializers=i,v._serialize=n,v._stdErrSerialize=o,v.child=C,t&&(v._logEvent=s0());function w(){return this.level==="silent"?1/0:this.levels.values[this.level]}function S(){return this._level}function x(N){if(N!=="silent"&&!this.levels.values[N])throw Error("unknown level "+N);this._level=N,$o(g,v,"error","log"),$o(g,v,"fatal","error"),$o(g,v,"warn","error"),$o(g,v,"info","log"),$o(g,v,"debug","log"),$o(g,v,"trace","log")}function C(N,V){if(!N)throw new Error("missing bindings for child Pino");V=V||{},n&&N.serializers&&(V.serializers=N.serializers);const z=V.serializers;if(n&&z){var X=Object.assign({},i,z),G=e.browser.serialize===!0?Object.keys(X):n;delete N.serializers,Cc([N],G,X,this._stdErrSerialize)}function Y($){this._childLevel=($._childLevel|0)+1,this.error=ko($,N,"error"),this.fatal=ko($,N,"fatal"),this.warn=ko($,N,"warn"),this.info=ko($,N,"info"),this.debug=ko($,N,"debug"),this.trace=ko($,N,"trace"),X&&(this.serializers=X,this._serialize=G),t&&(this._logEvent=s0([].concat($._logEvent.bindings,N)))}return Y.prototype=this,new Y(this)}return v}zn.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}};zn.stdSerializers=yS;zn.stdTimeFunctions=Object.assign({},{nullTime:$v,epochTime:kv,unixTime:IS,isoTime:MS});function $o(e,t,r,i){const n=Object.getPrototypeOf(t);t[r]=t.levelVal>t.levels.values[r]?oh:n[r]?n[r]:sh[r]||sh[i]||oh,bS(e,t,r)}function bS(e,t,r){!e.transmit&&t[r]===oh||(t[r]=function(i){return function(){const o=e.timestamp(),f=new Array(arguments.length),d=Object.getPrototypeOf&&Object.getPrototypeOf(this)===sh?sh:this;for(var v=0;v<f.length;v++)f[v]=arguments[v];if(e.serialize&&!e.asObject&&Cc(f,this._serialize,this.serializers,this._stdErrSerialize),e.asObject?i.call(d,AS(this,r,f,o)):i.apply(d,f),e.transmit){const g=e.transmit.level||t.level,w=zn.levels.values[g],S=zn.levels.values[r];if(S<w)return;_S(this,{ts:o,methodLevel:r,methodValue:S,transmitLevel:g,transmitValue:zn.levels.values[e.transmit.level||t.level],send:e.transmit.send,val:t.levelVal},f)}}}(t[r]))}function AS(e,t,r,i){e._serialize&&Cc(r,e._serialize,e.serializers,e._stdErrSerialize);const n=r.slice();let o=n[0];const f={};i&&(f.time=i),f.level=zn.levels.values[t];let d=(e._childLevel|0)+1;if(d<1&&(d=1),o!==null&&typeof o=="object"){for(;d--&&typeof n[0]=="object";)Object.assign(f,n.shift());o=n.length?V1(n.shift(),n):void 0}else typeof o=="string"&&(o=V1(n.shift(),n));return o!==void 0&&(f.msg=o),f}function Cc(e,t,r,i){for(const n in e)if(i&&e[n]instanceof Error)e[n]=zn.stdSerializers.err(e[n]);else if(typeof e[n]=="object"&&!Array.isArray(e[n]))for(const o in e[n])t&&t.indexOf(o)>-1&&o in r&&(e[n][o]=r[o](e[n][o]))}function ko(e,t,r){return function(){const i=new Array(1+arguments.length);i[0]=t;for(var n=1;n<i.length;n++)i[n]=arguments[n-1];return e[r].apply(this,i)}}function _S(e,t,r){const i=t.send,n=t.ts,o=t.methodLevel,f=t.methodValue,d=t.val,v=e._logEvent.bindings;Cc(r,e._serialize||Object.keys(e.serializers),e.serializers,e._stdErrSerialize===void 0?!0:e._stdErrSerialize),e._logEvent.ts=n,e._logEvent.messages=r.filter(function(g){return v.indexOf(g)===-1}),e._logEvent.level.label=o,e._logEvent.level.value=f,i(o,e._logEvent,d),e._logEvent=s0(v)}function s0(e){return{ts:0,messages:[],bindings:e||[],level:{label:"",value:0}}}function ES(e){const t={type:e.constructor.name,msg:e.message,stack:e.stack};for(const r in e)t[r]===void 0&&(t[r]=e[r]);return t}function SS(e){return typeof e.timestamp=="function"?e.timestamp:e.timestamp===!1?$v:kv}function Tu(){return{}}function dl(e){return e}function oh(){}function $v(){return!1}function kv(){return Date.now()}function IS(){return Math.round(Date.now()/1e3)}function MS(){return new Date(Date.now()).toISOString()}function DS(){function e(t){return typeof t<"u"&&t}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return e(self)||e(window)||e(this)||{}}}const wh=bc(Ho),xS=e=>JSON.stringify(e,(t,r)=>typeof r=="bigint"?r.toString()+"n":r);function Q1(e){return typeof e=="string"?e:xS(e)||""}const CS={level:"info"},bh="custom_context",L0=1e3*1024;let OS=class{constructor(t){this.nodeValue=t,this.sizeInBytes=new TextEncoder().encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}},Y1=class{constructor(t){this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=t,this.sizeInBytes=0}append(t){const r=new OS(t);if(r.size>this.maxSizeInBytes)throw new Error(`[LinkedList] Value too big to insert into list: ${t} with size ${r.size}`);for(;this.size+r.size>this.maxSizeInBytes;)this.shift();this.head?(this.tail&&(this.tail.next=r),this.tail=r):(this.head=r,this.tail=r),this.lengthInNodes++,this.sizeInBytes+=r.size}shift(){if(!this.head)return;const t=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=t.size}toArray(){const t=[];let r=this.head;for(;r!==null;)t.push(r.value),r=r.next;return t}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let t=this.head;return{next:()=>{if(!t)return{done:!0,value:null};const r=t.value;return t=t.next,{done:!1,value:r}}}}},zv=class{constructor(t,r=L0){this.level=t??"error",this.levelValue=Ho.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=r,this.logs=new Y1(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(t,r){r===Ho.levels.values.error?console.error(t):r===Ho.levels.values.warn?console.warn(t):r===Ho.levels.values.debug?console.debug(t):r===Ho.levels.values.trace?console.trace(t):console.log(t)}appendToLogs(t){this.logs.append(Q1({timestamp:new Date().toISOString(),log:t}));const r=typeof t=="string"?JSON.parse(t).level:t.level;r>=this.levelValue&&this.forwardToConsole(t,r)}getLogs(){return this.logs}clearLogs(){this.logs=new Y1(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(t){const r=this.getLogArray();return r.push(Q1({extraMetadata:t})),new Blob(r,{type:"application/json"})}},NS=class{constructor(t,r=L0){this.baseChunkLogger=new zv(t,r)}write(t){this.baseChunkLogger.appendToLogs(t)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(t){return this.baseChunkLogger.logsToBlob(t)}downloadLogsBlobInBrowser(t){const r=URL.createObjectURL(this.logsToBlob(t)),i=document.createElement("a");i.href=r,i.download=`walletconnect-logs-${new Date().toISOString()}.txt`,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(r)}},PS=class{constructor(t,r=L0){this.baseChunkLogger=new zv(t,r)}write(t){this.baseChunkLogger.appendToLogs(t)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(t){return this.baseChunkLogger.logsToBlob(t)}};var RS=Object.defineProperty,TS=Object.defineProperties,BS=Object.getOwnPropertyDescriptors,J1=Object.getOwnPropertySymbols,US=Object.prototype.hasOwnProperty,LS=Object.prototype.propertyIsEnumerable,W1=(e,t,r)=>t in e?RS(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,hc=(e,t)=>{for(var r in t||(t={}))US.call(t,r)&&W1(e,r,t[r]);if(J1)for(var r of J1(t))LS.call(t,r)&&W1(e,r,t[r]);return e},uc=(e,t)=>TS(e,BS(t));function Oc(e){return uc(hc({},e),{level:(e==null?void 0:e.level)||CS.level})}function FS(e,t=bh){return e[t]||""}function qS(e,t,r=bh){return e[r]=t,e}function mi(e,t=bh){let r="";return typeof e.bindings>"u"?r=FS(e,t):r=e.bindings().context||"",r}function $S(e,t,r=bh){const i=mi(e,r);return i.trim()?`${i}/${t}`:t}function vi(e,t,r=bh){const i=$S(e,t,r),n=e.child({context:i});return qS(n,i,r)}function kS(e){var t,r;const i=new NS((t=e.opts)==null?void 0:t.level,e.maxSizeInBytes);return{logger:wh(uc(hc({},e.opts),{level:"trace",browser:uc(hc({},(r=e.opts)==null?void 0:r.browser),{write:n=>i.write(n)})})),chunkLoggerController:i}}function zS(e){var t;const r=new PS((t=e.opts)==null?void 0:t.level,e.maxSizeInBytes);return{logger:wh(uc(hc({},e.opts),{level:"trace"}),r),chunkLoggerController:r}}function jS(e){return typeof e.loggerOverride<"u"&&typeof e.loggerOverride!="string"?{logger:e.loggerOverride,chunkLoggerController:null}:typeof window<"u"?kS(e):zS(e)}let HS=class extends vo{constructor(t){super(),this.opts=t,this.protocol="wc",this.version=2}},KS=class extends vo{constructor(t,r){super(),this.core=t,this.logger=r,this.records=new Map}},GS=class{constructor(t,r){this.logger=t,this.core=r}},VS=class extends vo{constructor(t,r){super(),this.relayer=t,this.logger=r}},QS=class extends vo{constructor(t){super()}},YS=class{constructor(t,r,i,n){this.core=t,this.logger=r,this.name=i}},JS=class extends vo{constructor(t,r){super(),this.relayer=t,this.logger=r}},WS=class extends vo{constructor(t,r){super(),this.core=t,this.logger=r}},XS=class{constructor(t,r){this.projectId=t,this.logger=r}},ZS=class{constructor(t,r){this.projectId=t,this.logger=r}},t9=class{constructor(t){this.opts=t,this.protocol="wc",this.version=2}},e9=class{constructor(t){this.client=t}};var F0={},jv={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=pe,r=Ci;e.DIGEST_LENGTH=64,e.BLOCK_SIZE=128;var i=function(){function d(){this.digestLength=e.DIGEST_LENGTH,this.blockSize=e.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return d.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},d.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},d.prototype.clean=function(){r.wipe(this._buffer),r.wipe(this._tempHi),r.wipe(this._tempLo),this.reset()},d.prototype.update=function(v,g){if(g===void 0&&(g=v.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var w=0;if(this._bytesHashed+=g,this._bufferLength>0){for(;this._bufferLength<e.BLOCK_SIZE&&g>0;)this._buffer[this._bufferLength++]=v[w++],g--;this._bufferLength===this.blockSize&&(o(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(g>=this.blockSize&&(w=o(this._tempHi,this._tempLo,this._stateHi,this._stateLo,v,w,g),g%=this.blockSize);g>0;)this._buffer[this._bufferLength++]=v[w++],g--;return this},d.prototype.finish=function(v){if(!this._finished){var g=this._bytesHashed,w=this._bufferLength,S=g/536870912|0,x=g<<3,C=g%128<112?128:256;this._buffer[w]=128;for(var N=w+1;N<C-8;N++)this._buffer[N]=0;t.writeUint32BE(S,this._buffer,C-8),t.writeUint32BE(x,this._buffer,C-4),o(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,C),this._finished=!0}for(var N=0;N<this.digestLength/8;N++)t.writeUint32BE(this._stateHi[N],v,N*8),t.writeUint32BE(this._stateLo[N],v,N*8+4);return this},d.prototype.digest=function(){var v=new Uint8Array(this.digestLength);return this.finish(v),v},d.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},d.prototype.restoreState=function(v){return this._stateHi.set(v.stateHi),this._stateLo.set(v.stateLo),this._bufferLength=v.bufferLength,v.buffer&&this._buffer.set(v.buffer),this._bytesHashed=v.bytesHashed,this._finished=!1,this},d.prototype.cleanSavedState=function(v){r.wipe(v.stateHi),r.wipe(v.stateLo),v.buffer&&r.wipe(v.buffer),v.bufferLength=0,v.bytesHashed=0},d}();e.SHA512=i;var n=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function o(d,v,g,w,S,x,C){for(var N=g[0],V=g[1],z=g[2],X=g[3],G=g[4],Y=g[5],$=g[6],j=g[7],k=w[0],_=w[1],L=w[2],ot=w[3],ct=w[4],ht=w[5],_t=w[6],h=w[7],u,p,b,M,D,O,A,c;C>=128;){for(var I=0;I<16;I++){var Z=8*I+x;d[I]=t.readUint32BE(S,Z),v[I]=t.readUint32BE(S,Z+4)}for(var I=0;I<80;I++){var nt=N,m=V,H=z,R=X,T=G,q=Y,y=$,B=j,W=k,st=_,rt=L,Et=ot,It=ct,bt=ht,me=_t,Pt=h;if(u=j,p=h,D=p&65535,O=p>>>16,A=u&65535,c=u>>>16,u=(G>>>14|ct<<18)^(G>>>18|ct<<14)^(ct>>>9|G<<23),p=(ct>>>14|G<<18)^(ct>>>18|G<<14)^(G>>>9|ct<<23),D+=p&65535,O+=p>>>16,A+=u&65535,c+=u>>>16,u=G&Y^~G&$,p=ct&ht^~ct&_t,D+=p&65535,O+=p>>>16,A+=u&65535,c+=u>>>16,u=n[I*2],p=n[I*2+1],D+=p&65535,O+=p>>>16,A+=u&65535,c+=u>>>16,u=d[I%16],p=v[I%16],D+=p&65535,O+=p>>>16,A+=u&65535,c+=u>>>16,O+=D>>>16,A+=O>>>16,c+=A>>>16,b=A&65535|c<<16,M=D&65535|O<<16,u=b,p=M,D=p&65535,O=p>>>16,A=u&65535,c=u>>>16,u=(N>>>28|k<<4)^(k>>>2|N<<30)^(k>>>7|N<<25),p=(k>>>28|N<<4)^(N>>>2|k<<30)^(N>>>7|k<<25),D+=p&65535,O+=p>>>16,A+=u&65535,c+=u>>>16,u=N&V^N&z^V&z,p=k&_^k&L^_&L,D+=p&65535,O+=p>>>16,A+=u&65535,c+=u>>>16,O+=D>>>16,A+=O>>>16,c+=A>>>16,B=A&65535|c<<16,Pt=D&65535|O<<16,u=R,p=Et,D=p&65535,O=p>>>16,A=u&65535,c=u>>>16,u=b,p=M,D+=p&65535,O+=p>>>16,A+=u&65535,c+=u>>>16,O+=D>>>16,A+=O>>>16,c+=A>>>16,R=A&65535|c<<16,Et=D&65535|O<<16,V=nt,z=m,X=H,G=R,Y=T,$=q,j=y,N=B,_=W,L=st,ot=rt,ct=Et,ht=It,_t=bt,h=me,k=Pt,I%16===15)for(var Z=0;Z<16;Z++)u=d[Z],p=v[Z],D=p&65535,O=p>>>16,A=u&65535,c=u>>>16,u=d[(Z+9)%16],p=v[(Z+9)%16],D+=p&65535,O+=p>>>16,A+=u&65535,c+=u>>>16,b=d[(Z+1)%16],M=v[(Z+1)%16],u=(b>>>1|M<<31)^(b>>>8|M<<24)^b>>>7,p=(M>>>1|b<<31)^(M>>>8|b<<24)^(M>>>7|b<<25),D+=p&65535,O+=p>>>16,A+=u&65535,c+=u>>>16,b=d[(Z+14)%16],M=v[(Z+14)%16],u=(b>>>19|M<<13)^(M>>>29|b<<3)^b>>>6,p=(M>>>19|b<<13)^(b>>>29|M<<3)^(M>>>6|b<<26),D+=p&65535,O+=p>>>16,A+=u&65535,c+=u>>>16,O+=D>>>16,A+=O>>>16,c+=A>>>16,d[Z]=A&65535|c<<16,v[Z]=D&65535|O<<16}u=N,p=k,D=p&65535,O=p>>>16,A=u&65535,c=u>>>16,u=g[0],p=w[0],D+=p&65535,O+=p>>>16,A+=u&65535,c+=u>>>16,O+=D>>>16,A+=O>>>16,c+=A>>>16,g[0]=N=A&65535|c<<16,w[0]=k=D&65535|O<<16,u=V,p=_,D=p&65535,O=p>>>16,A=u&65535,c=u>>>16,u=g[1],p=w[1],D+=p&65535,O+=p>>>16,A+=u&65535,c+=u>>>16,O+=D>>>16,A+=O>>>16,c+=A>>>16,g[1]=V=A&65535|c<<16,w[1]=_=D&65535|O<<16,u=z,p=L,D=p&65535,O=p>>>16,A=u&65535,c=u>>>16,u=g[2],p=w[2],D+=p&65535,O+=p>>>16,A+=u&65535,c+=u>>>16,O+=D>>>16,A+=O>>>16,c+=A>>>16,g[2]=z=A&65535|c<<16,w[2]=L=D&65535|O<<16,u=X,p=ot,D=p&65535,O=p>>>16,A=u&65535,c=u>>>16,u=g[3],p=w[3],D+=p&65535,O+=p>>>16,A+=u&65535,c+=u>>>16,O+=D>>>16,A+=O>>>16,c+=A>>>16,g[3]=X=A&65535|c<<16,w[3]=ot=D&65535|O<<16,u=G,p=ct,D=p&65535,O=p>>>16,A=u&65535,c=u>>>16,u=g[4],p=w[4],D+=p&65535,O+=p>>>16,A+=u&65535,c+=u>>>16,O+=D>>>16,A+=O>>>16,c+=A>>>16,g[4]=G=A&65535|c<<16,w[4]=ct=D&65535|O<<16,u=Y,p=ht,D=p&65535,O=p>>>16,A=u&65535,c=u>>>16,u=g[5],p=w[5],D+=p&65535,O+=p>>>16,A+=u&65535,c+=u>>>16,O+=D>>>16,A+=O>>>16,c+=A>>>16,g[5]=Y=A&65535|c<<16,w[5]=ht=D&65535|O<<16,u=$,p=_t,D=p&65535,O=p>>>16,A=u&65535,c=u>>>16,u=g[6],p=w[6],D+=p&65535,O+=p>>>16,A+=u&65535,c+=u>>>16,O+=D>>>16,A+=O>>>16,c+=A>>>16,g[6]=$=A&65535|c<<16,w[6]=_t=D&65535|O<<16,u=j,p=h,D=p&65535,O=p>>>16,A=u&65535,c=u>>>16,u=g[7],p=w[7],D+=p&65535,O+=p>>>16,A+=u&65535,c+=u>>>16,O+=D>>>16,A+=O>>>16,c+=A>>>16,g[7]=j=A&65535|c<<16,w[7]=h=D&65535|O<<16,x+=128,C-=128}return x}function f(d){var v=new i;v.update(d);var g=v.digest();return v.clean(),g}e.hash=f})(jv);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.convertSecretKeyToX25519=e.convertPublicKeyToX25519=e.verify=e.sign=e.extractPublicKeyFromSecretKey=e.generateKeyPair=e.generateKeyPairFromSeed=e.SEED_LENGTH=e.SECRET_KEY_LENGTH=e.PUBLIC_KEY_LENGTH=e.SIGNATURE_LENGTH=void 0;const t=oa,r=jv,i=Ci;e.SIGNATURE_LENGTH=64,e.PUBLIC_KEY_LENGTH=32,e.SECRET_KEY_LENGTH=64,e.SEED_LENGTH=32;function n(R){const T=new Float64Array(16);if(R)for(let q=0;q<R.length;q++)T[q]=R[q];return T}const o=new Uint8Array(32);o[0]=9;const f=n(),d=n([1]),v=n([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),g=n([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),w=n([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),S=n([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),x=n([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function C(R,T){for(let q=0;q<16;q++)R[q]=T[q]|0}function N(R){let T=1;for(let q=0;q<16;q++){let y=R[q]+T+65535;T=Math.floor(y/65536),R[q]=y-T*65536}R[0]+=T-1+37*(T-1)}function V(R,T,q){const y=~(q-1);for(let B=0;B<16;B++){const W=y&(R[B]^T[B]);R[B]^=W,T[B]^=W}}function z(R,T){const q=n(),y=n();for(let B=0;B<16;B++)y[B]=T[B];N(y),N(y),N(y);for(let B=0;B<2;B++){q[0]=y[0]-65517;for(let st=1;st<15;st++)q[st]=y[st]-65535-(q[st-1]>>16&1),q[st-1]&=65535;q[15]=y[15]-32767-(q[14]>>16&1);const W=q[15]>>16&1;q[14]&=65535,V(y,q,1-W)}for(let B=0;B<16;B++)R[2*B]=y[B]&255,R[2*B+1]=y[B]>>8}function X(R,T){let q=0;for(let y=0;y<32;y++)q|=R[y]^T[y];return(1&q-1>>>8)-1}function G(R,T){const q=new Uint8Array(32),y=new Uint8Array(32);return z(q,R),z(y,T),X(q,y)}function Y(R){const T=new Uint8Array(32);return z(T,R),T[0]&1}function $(R,T){for(let q=0;q<16;q++)R[q]=T[2*q]+(T[2*q+1]<<8);R[15]&=32767}function j(R,T,q){for(let y=0;y<16;y++)R[y]=T[y]+q[y]}function k(R,T,q){for(let y=0;y<16;y++)R[y]=T[y]-q[y]}function _(R,T,q){let y,B,W=0,st=0,rt=0,Et=0,It=0,bt=0,me=0,Pt=0,At=0,Jt=0,vt=0,yt=0,re=0,gt=0,wt=0,Qt=0,mt=0,St=0,Wt=0,Mt=0,Dt=0,oe=0,Ct=0,xt=0,Te=0,Vt=0,Xt=0,Be=0,Zt=0,te=0,Xe=0,Ut=q[0],Rt=q[1],be=q[2],Lt=q[3],Tt=q[4],ve=q[5],$t=q[6],kt=q[7],Ae=q[8],zt=q[9],Ft=q[10],_e=q[11],qt=q[12],Nt=q[13],Ie=q[14],jt=q[15];y=T[0],W+=y*Ut,st+=y*Rt,rt+=y*be,Et+=y*Lt,It+=y*Tt,bt+=y*ve,me+=y*$t,Pt+=y*kt,At+=y*Ae,Jt+=y*zt,vt+=y*Ft,yt+=y*_e,re+=y*qt,gt+=y*Nt,wt+=y*Ie,Qt+=y*jt,y=T[1],st+=y*Ut,rt+=y*Rt,Et+=y*be,It+=y*Lt,bt+=y*Tt,me+=y*ve,Pt+=y*$t,At+=y*kt,Jt+=y*Ae,vt+=y*zt,yt+=y*Ft,re+=y*_e,gt+=y*qt,wt+=y*Nt,Qt+=y*Ie,mt+=y*jt,y=T[2],rt+=y*Ut,Et+=y*Rt,It+=y*be,bt+=y*Lt,me+=y*Tt,Pt+=y*ve,At+=y*$t,Jt+=y*kt,vt+=y*Ae,yt+=y*zt,re+=y*Ft,gt+=y*_e,wt+=y*qt,Qt+=y*Nt,mt+=y*Ie,St+=y*jt,y=T[3],Et+=y*Ut,It+=y*Rt,bt+=y*be,me+=y*Lt,Pt+=y*Tt,At+=y*ve,Jt+=y*$t,vt+=y*kt,yt+=y*Ae,re+=y*zt,gt+=y*Ft,wt+=y*_e,Qt+=y*qt,mt+=y*Nt,St+=y*Ie,Wt+=y*jt,y=T[4],It+=y*Ut,bt+=y*Rt,me+=y*be,Pt+=y*Lt,At+=y*Tt,Jt+=y*ve,vt+=y*$t,yt+=y*kt,re+=y*Ae,gt+=y*zt,wt+=y*Ft,Qt+=y*_e,mt+=y*qt,St+=y*Nt,Wt+=y*Ie,Mt+=y*jt,y=T[5],bt+=y*Ut,me+=y*Rt,Pt+=y*be,At+=y*Lt,Jt+=y*Tt,vt+=y*ve,yt+=y*$t,re+=y*kt,gt+=y*Ae,wt+=y*zt,Qt+=y*Ft,mt+=y*_e,St+=y*qt,Wt+=y*Nt,Mt+=y*Ie,Dt+=y*jt,y=T[6],me+=y*Ut,Pt+=y*Rt,At+=y*be,Jt+=y*Lt,vt+=y*Tt,yt+=y*ve,re+=y*$t,gt+=y*kt,wt+=y*Ae,Qt+=y*zt,mt+=y*Ft,St+=y*_e,Wt+=y*qt,Mt+=y*Nt,Dt+=y*Ie,oe+=y*jt,y=T[7],Pt+=y*Ut,At+=y*Rt,Jt+=y*be,vt+=y*Lt,yt+=y*Tt,re+=y*ve,gt+=y*$t,wt+=y*kt,Qt+=y*Ae,mt+=y*zt,St+=y*Ft,Wt+=y*_e,Mt+=y*qt,Dt+=y*Nt,oe+=y*Ie,Ct+=y*jt,y=T[8],At+=y*Ut,Jt+=y*Rt,vt+=y*be,yt+=y*Lt,re+=y*Tt,gt+=y*ve,wt+=y*$t,Qt+=y*kt,mt+=y*Ae,St+=y*zt,Wt+=y*Ft,Mt+=y*_e,Dt+=y*qt,oe+=y*Nt,Ct+=y*Ie,xt+=y*jt,y=T[9],Jt+=y*Ut,vt+=y*Rt,yt+=y*be,re+=y*Lt,gt+=y*Tt,wt+=y*ve,Qt+=y*$t,mt+=y*kt,St+=y*Ae,Wt+=y*zt,Mt+=y*Ft,Dt+=y*_e,oe+=y*qt,Ct+=y*Nt,xt+=y*Ie,Te+=y*jt,y=T[10],vt+=y*Ut,yt+=y*Rt,re+=y*be,gt+=y*Lt,wt+=y*Tt,Qt+=y*ve,mt+=y*$t,St+=y*kt,Wt+=y*Ae,Mt+=y*zt,Dt+=y*Ft,oe+=y*_e,Ct+=y*qt,xt+=y*Nt,Te+=y*Ie,Vt+=y*jt,y=T[11],yt+=y*Ut,re+=y*Rt,gt+=y*be,wt+=y*Lt,Qt+=y*Tt,mt+=y*ve,St+=y*$t,Wt+=y*kt,Mt+=y*Ae,Dt+=y*zt,oe+=y*Ft,Ct+=y*_e,xt+=y*qt,Te+=y*Nt,Vt+=y*Ie,Xt+=y*jt,y=T[12],re+=y*Ut,gt+=y*Rt,wt+=y*be,Qt+=y*Lt,mt+=y*Tt,St+=y*ve,Wt+=y*$t,Mt+=y*kt,Dt+=y*Ae,oe+=y*zt,Ct+=y*Ft,xt+=y*_e,Te+=y*qt,Vt+=y*Nt,Xt+=y*Ie,Be+=y*jt,y=T[13],gt+=y*Ut,wt+=y*Rt,Qt+=y*be,mt+=y*Lt,St+=y*Tt,Wt+=y*ve,Mt+=y*$t,Dt+=y*kt,oe+=y*Ae,Ct+=y*zt,xt+=y*Ft,Te+=y*_e,Vt+=y*qt,Xt+=y*Nt,Be+=y*Ie,Zt+=y*jt,y=T[14],wt+=y*Ut,Qt+=y*Rt,mt+=y*be,St+=y*Lt,Wt+=y*Tt,Mt+=y*ve,Dt+=y*$t,oe+=y*kt,Ct+=y*Ae,xt+=y*zt,Te+=y*Ft,Vt+=y*_e,Xt+=y*qt,Be+=y*Nt,Zt+=y*Ie,te+=y*jt,y=T[15],Qt+=y*Ut,mt+=y*Rt,St+=y*be,Wt+=y*Lt,Mt+=y*Tt,Dt+=y*ve,oe+=y*$t,Ct+=y*kt,xt+=y*Ae,Te+=y*zt,Vt+=y*Ft,Xt+=y*_e,Be+=y*qt,Zt+=y*Nt,te+=y*Ie,Xe+=y*jt,W+=38*mt,st+=38*St,rt+=38*Wt,Et+=38*Mt,It+=38*Dt,bt+=38*oe,me+=38*Ct,Pt+=38*xt,At+=38*Te,Jt+=38*Vt,vt+=38*Xt,yt+=38*Be,re+=38*Zt,gt+=38*te,wt+=38*Xe,B=1,y=W+B+65535,B=Math.floor(y/65536),W=y-B*65536,y=st+B+65535,B=Math.floor(y/65536),st=y-B*65536,y=rt+B+65535,B=Math.floor(y/65536),rt=y-B*65536,y=Et+B+65535,B=Math.floor(y/65536),Et=y-B*65536,y=It+B+65535,B=Math.floor(y/65536),It=y-B*65536,y=bt+B+65535,B=Math.floor(y/65536),bt=y-B*65536,y=me+B+65535,B=Math.floor(y/65536),me=y-B*65536,y=Pt+B+65535,B=Math.floor(y/65536),Pt=y-B*65536,y=At+B+65535,B=Math.floor(y/65536),At=y-B*65536,y=Jt+B+65535,B=Math.floor(y/65536),Jt=y-B*65536,y=vt+B+65535,B=Math.floor(y/65536),vt=y-B*65536,y=yt+B+65535,B=Math.floor(y/65536),yt=y-B*65536,y=re+B+65535,B=Math.floor(y/65536),re=y-B*65536,y=gt+B+65535,B=Math.floor(y/65536),gt=y-B*65536,y=wt+B+65535,B=Math.floor(y/65536),wt=y-B*65536,y=Qt+B+65535,B=Math.floor(y/65536),Qt=y-B*65536,W+=B-1+37*(B-1),B=1,y=W+B+65535,B=Math.floor(y/65536),W=y-B*65536,y=st+B+65535,B=Math.floor(y/65536),st=y-B*65536,y=rt+B+65535,B=Math.floor(y/65536),rt=y-B*65536,y=Et+B+65535,B=Math.floor(y/65536),Et=y-B*65536,y=It+B+65535,B=Math.floor(y/65536),It=y-B*65536,y=bt+B+65535,B=Math.floor(y/65536),bt=y-B*65536,y=me+B+65535,B=Math.floor(y/65536),me=y-B*65536,y=Pt+B+65535,B=Math.floor(y/65536),Pt=y-B*65536,y=At+B+65535,B=Math.floor(y/65536),At=y-B*65536,y=Jt+B+65535,B=Math.floor(y/65536),Jt=y-B*65536,y=vt+B+65535,B=Math.floor(y/65536),vt=y-B*65536,y=yt+B+65535,B=Math.floor(y/65536),yt=y-B*65536,y=re+B+65535,B=Math.floor(y/65536),re=y-B*65536,y=gt+B+65535,B=Math.floor(y/65536),gt=y-B*65536,y=wt+B+65535,B=Math.floor(y/65536),wt=y-B*65536,y=Qt+B+65535,B=Math.floor(y/65536),Qt=y-B*65536,W+=B-1+37*(B-1),R[0]=W,R[1]=st,R[2]=rt,R[3]=Et,R[4]=It,R[5]=bt,R[6]=me,R[7]=Pt,R[8]=At,R[9]=Jt,R[10]=vt,R[11]=yt,R[12]=re,R[13]=gt,R[14]=wt,R[15]=Qt}function L(R,T){_(R,T,T)}function ot(R,T){const q=n();let y;for(y=0;y<16;y++)q[y]=T[y];for(y=253;y>=0;y--)L(q,q),y!==2&&y!==4&&_(q,q,T);for(y=0;y<16;y++)R[y]=q[y]}function ct(R,T){const q=n();let y;for(y=0;y<16;y++)q[y]=T[y];for(y=250;y>=0;y--)L(q,q),y!==1&&_(q,q,T);for(y=0;y<16;y++)R[y]=q[y]}function ht(R,T){const q=n(),y=n(),B=n(),W=n(),st=n(),rt=n(),Et=n(),It=n(),bt=n();k(q,R[1],R[0]),k(bt,T[1],T[0]),_(q,q,bt),j(y,R[0],R[1]),j(bt,T[0],T[1]),_(y,y,bt),_(B,R[3],T[3]),_(B,B,g),_(W,R[2],T[2]),j(W,W,W),k(st,y,q),k(rt,W,B),j(Et,W,B),j(It,y,q),_(R[0],st,rt),_(R[1],It,Et),_(R[2],Et,rt),_(R[3],st,It)}function _t(R,T,q){for(let y=0;y<4;y++)V(R[y],T[y],q)}function h(R,T){const q=n(),y=n(),B=n();ot(B,T[2]),_(q,T[0],B),_(y,T[1],B),z(R,y),R[31]^=Y(q)<<7}function u(R,T,q){C(R[0],f),C(R[1],d),C(R[2],d),C(R[3],f);for(let y=255;y>=0;--y){const B=q[y/8|0]>>(y&7)&1;_t(R,T,B),ht(T,R),ht(R,R),_t(R,T,B)}}function p(R,T){const q=[n(),n(),n(),n()];C(q[0],w),C(q[1],S),C(q[2],d),_(q[3],w,S),u(R,q,T)}function b(R){if(R.length!==e.SEED_LENGTH)throw new Error(`ed25519: seed must be ${e.SEED_LENGTH} bytes`);const T=(0,r.hash)(R);T[0]&=248,T[31]&=127,T[31]|=64;const q=new Uint8Array(32),y=[n(),n(),n(),n()];p(y,T),h(q,y);const B=new Uint8Array(64);return B.set(R),B.set(q,32),{publicKey:q,secretKey:B}}e.generateKeyPairFromSeed=b;function M(R){const T=(0,t.randomBytes)(32,R),q=b(T);return(0,i.wipe)(T),q}e.generateKeyPair=M;function D(R){if(R.length!==e.SECRET_KEY_LENGTH)throw new Error(`ed25519: secret key must be ${e.SECRET_KEY_LENGTH} bytes`);return new Uint8Array(R.subarray(32))}e.extractPublicKeyFromSecretKey=D;const O=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function A(R,T){let q,y,B,W;for(y=63;y>=32;--y){for(q=0,B=y-32,W=y-12;B<W;++B)T[B]+=q-16*T[y]*O[B-(y-32)],q=Math.floor((T[B]+128)/256),T[B]-=q*256;T[B]+=q,T[y]=0}for(q=0,B=0;B<32;B++)T[B]+=q-(T[31]>>4)*O[B],q=T[B]>>8,T[B]&=255;for(B=0;B<32;B++)T[B]-=q*O[B];for(y=0;y<32;y++)T[y+1]+=T[y]>>8,R[y]=T[y]&255}function c(R){const T=new Float64Array(64);for(let q=0;q<64;q++)T[q]=R[q];for(let q=0;q<64;q++)R[q]=0;A(R,T)}function I(R,T){const q=new Float64Array(64),y=[n(),n(),n(),n()],B=(0,r.hash)(R.subarray(0,32));B[0]&=248,B[31]&=127,B[31]|=64;const W=new Uint8Array(64);W.set(B.subarray(32),32);const st=new r.SHA512;st.update(W.subarray(32)),st.update(T);const rt=st.digest();st.clean(),c(rt),p(y,rt),h(W,y),st.reset(),st.update(W.subarray(0,32)),st.update(R.subarray(32)),st.update(T);const Et=st.digest();c(Et);for(let It=0;It<32;It++)q[It]=rt[It];for(let It=0;It<32;It++)for(let bt=0;bt<32;bt++)q[It+bt]+=Et[It]*B[bt];return A(W.subarray(32),q),W}e.sign=I;function Z(R,T){const q=n(),y=n(),B=n(),W=n(),st=n(),rt=n(),Et=n();return C(R[2],d),$(R[1],T),L(B,R[1]),_(W,B,v),k(B,B,R[2]),j(W,R[2],W),L(st,W),L(rt,st),_(Et,rt,st),_(q,Et,B),_(q,q,W),ct(q,q),_(q,q,B),_(q,q,W),_(q,q,W),_(R[0],q,W),L(y,R[0]),_(y,y,W),G(y,B)&&_(R[0],R[0],x),L(y,R[0]),_(y,y,W),G(y,B)?-1:(Y(R[0])===T[31]>>7&&k(R[0],f,R[0]),_(R[3],R[0],R[1]),0)}function nt(R,T,q){const y=new Uint8Array(32),B=[n(),n(),n(),n()],W=[n(),n(),n(),n()];if(q.length!==e.SIGNATURE_LENGTH)throw new Error(`ed25519: signature must be ${e.SIGNATURE_LENGTH} bytes`);if(Z(W,R))return!1;const st=new r.SHA512;st.update(q.subarray(0,32)),st.update(R),st.update(T);const rt=st.digest();return c(rt),u(B,W,rt),p(W,q.subarray(32)),ht(B,W),h(y,B),!X(q,y)}e.verify=nt;function m(R){let T=[n(),n(),n(),n()];if(Z(T,R))throw new Error("Ed25519: invalid public key");let q=n(),y=n(),B=T[1];j(q,d,B),k(y,d,B),ot(y,y),_(q,q,y);let W=new Uint8Array(32);return z(W,q),W}e.convertPublicKeyToX25519=m;function H(R){const T=(0,r.hash)(R.subarray(0,32));T[0]&=248,T[31]&=127,T[31]|=64;const q=new Uint8Array(T.subarray(0,32));return(0,i.wipe)(T),q}e.convertSecretKeyToX25519=H})(F0);const r9="EdDSA",i9="JWT",Hv=".",Kv="base64url",n9="utf8",s9="utf8",o9=":",a9="did",h9="key",X1="base58btc",u9="z",c9="K36",f9=32,l9=e=>JSON.stringify(e,(t,r)=>typeof r=="bigint"?r.toString()+"n":r);function d9(e){return typeof e=="string"?e:l9(e)||""}function cc(e){return Qr(li(d9(e),n9),Kv)}function Gv(e){const t=li(c9,X1),r=u9+Qr(Jl([t,e]),X1);return[a9,h9,r].join(o9)}function p9(e){return Qr(e,Kv)}function g9(e){return li([cc(e.header),cc(e.payload)].join(Hv),s9)}function m9(e){return[cc(e.header),cc(e.payload),p9(e.signature)].join(Hv)}function Z1(e=oa.randomBytes(f9)){return F0.generateKeyPairFromSeed(e)}async function v9(e,t,r,i,n=Ht.fromMiliseconds(Date.now())){const o={alg:r9,typ:i9},f=Gv(i.publicKey),d=n+r,v={iss:f,sub:e,aud:t,iat:n,exp:d},g=g9({header:o,payload:v}),w=F0.sign(i.secretKey,g);return m9({header:o,payload:v,signature:w})}var tg=function(e,t,r){if(r||arguments.length===2)for(var i=0,n=t.length,o;i<n;i++)(o||!(i in t))&&(o||(o=Array.prototype.slice.call(t,0,i)),o[i]=t[i]);return e.concat(o||Array.prototype.slice.call(t))},y9=function(){function e(t,r,i){this.name=t,this.version=r,this.os=i,this.type="browser"}return e}(),w9=function(){function e(t){this.version=t,this.type="node",this.name="node",this.os=Fr.platform}return e}(),b9=function(){function e(t,r,i,n){this.name=t,this.version=r,this.os=i,this.bot=n,this.type="bot-device"}return e}(),A9=function(){function e(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return e}(),_9=function(){function e(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return e}(),E9=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,S9=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,eg=3,I9=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",E9]],rg=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function M9(e){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new _9:typeof navigator<"u"?x9(navigator.userAgent):O9()}function D9(e){return e!==""&&I9.reduce(function(t,r){var i=r[0],n=r[1];if(t)return t;var o=n.exec(e);return!!o&&[i,o]},!1)}function x9(e){var t=D9(e);if(!t)return null;var r=t[0],i=t[1];if(r==="searchbot")return new A9;var n=i[1]&&i[1].split(".").join("_").split("_").slice(0,3);n?n.length<eg&&(n=tg(tg([],n,!0),N9(eg-n.length),!0)):n=[];var o=n.join("."),f=C9(e),d=S9.exec(e);return d&&d[1]?new b9(r,o,f,d[1]):new y9(r,o,f)}function C9(e){for(var t=0,r=rg.length;t<r;t++){var i=rg[t],n=i[0],o=i[1],f=o.exec(e);if(f)return n}return null}function O9(){var e=typeof Fr<"u"&&Fr.version;return e?new w9(Fr.version.slice(1)):null}function N9(e){for(var t=[],r=0;r<e;r++)t.push("0");return t}var Ve={};Object.defineProperty(Ve,"__esModule",{value:!0});Ve.getLocalStorage=Ve.getLocalStorageOrThrow=Ve.getCrypto=Ve.getCryptoOrThrow=Vv=Ve.getLocation=Ve.getLocationOrThrow=$0=Ve.getNavigator=Ve.getNavigatorOrThrow=q0=Ve.getDocument=Ve.getDocumentOrThrow=Ve.getFromWindowOrThrow=Ve.getFromWindow=void 0;function yo(e){let t;return typeof window<"u"&&typeof window[e]<"u"&&(t=window[e]),t}Ve.getFromWindow=yo;function ca(e){const t=yo(e);if(!t)throw new Error(`${e} is not defined in Window`);return t}Ve.getFromWindowOrThrow=ca;function P9(){return ca("document")}Ve.getDocumentOrThrow=P9;function R9(){return yo("document")}var q0=Ve.getDocument=R9;function T9(){return ca("navigator")}Ve.getNavigatorOrThrow=T9;function B9(){return yo("navigator")}var $0=Ve.getNavigator=B9;function U9(){return ca("location")}Ve.getLocationOrThrow=U9;function L9(){return yo("location")}var Vv=Ve.getLocation=L9;function F9(){return ca("crypto")}Ve.getCryptoOrThrow=F9;function q9(){return yo("crypto")}Ve.getCrypto=q9;function $9(){return ca("localStorage")}Ve.getLocalStorageOrThrow=$9;function k9(){return yo("localStorage")}Ve.getLocalStorage=k9;var k0={};Object.defineProperty(k0,"__esModule",{value:!0});var Qv=k0.getWindowMetadata=void 0;const ig=Ve;function z9(){let e,t;try{e=ig.getDocumentOrThrow(),t=ig.getLocationOrThrow()}catch{return null}function r(){const S=e.getElementsByTagName("link"),x=[];for(let C=0;C<S.length;C++){const N=S[C],V=N.getAttribute("rel");if(V&&V.toLowerCase().indexOf("icon")>-1){const z=N.getAttribute("href");if(z)if(z.toLowerCase().indexOf("https:")===-1&&z.toLowerCase().indexOf("http:")===-1&&z.indexOf("//")!==0){let X=t.protocol+"//"+t.host;if(z.indexOf("/")===0)X+=z;else{const G=t.pathname.split("/");G.pop();const Y=G.join("/");X+=Y+"/"+z}x.push(X)}else if(z.indexOf("//")===0){const X=t.protocol+z;x.push(X)}else x.push(z)}}return x}function i(...S){const x=e.getElementsByTagName("meta");for(let C=0;C<x.length;C++){const N=x[C],V=["itemprop","property","name"].map(z=>N.getAttribute(z)).filter(z=>z?S.includes(z):!1);if(V.length&&V){const z=N.getAttribute("content");if(z)return z}}return""}function n(){let S=i("name","og:site_name","og:title","twitter:title");return S||(S=e.title),S}function o(){return i("description","og:description","twitter:description","keywords")}const f=n(),d=o(),v=t.origin,g=r();return{description:d,url:v,icons:g,name:f}}Qv=k0.getWindowMetadata=z9;const j9=":";function Yu(e){const[t,r]=e.split(j9);return{namespace:t,reference:r}}function Yv(e,t){return e.includes(":")?[e]:t.chains||[]}var H9=Object.defineProperty,ng=Object.getOwnPropertySymbols,K9=Object.prototype.hasOwnProperty,G9=Object.prototype.propertyIsEnumerable,sg=(e,t,r)=>t in e?H9(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,og=(e,t)=>{for(var r in t||(t={}))K9.call(t,r)&&sg(e,r,t[r]);if(ng)for(var r of ng(t))G9.call(t,r)&&sg(e,r,t[r]);return e};const V9="ReactNative",Ii={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},Q9="js";function ah(){return typeof Fr<"u"&&typeof Fr.versions<"u"&&typeof Fr.versions.node<"u"}function fa(){return!q0()&&!!$0()&&navigator.product===V9}function la(){return!ah()&&!!$0()&&!!q0()}function Ah(){return fa()?Ii.reactNative:ah()?Ii.node:la()?Ii.browser:Ii.unknown}function Y9(){var e;try{return fa()&&typeof Re<"u"&&typeof(Re==null?void 0:Re.Application)<"u"?(e=Re.Application)==null?void 0:e.applicationId:void 0}catch{return}}function J9(e,t){let r=ih.parse(e);return r=og(og({},r),t),e=ih.stringify(r),e}function W9(){return Qv()||{name:"",description:"",url:"",icons:[""]}}function X9(){if(Ah()===Ii.reactNative&&typeof Re<"u"&&typeof(Re==null?void 0:Re.Platform)<"u"){const{OS:r,Version:i}=Re.Platform;return[r,i].join("-")}const e=M9();if(e===null)return"unknown";const t=e.os?e.os.replace(" ","").toLowerCase():"unknown";return e.type==="browser"?[t,e.name,e.version].join("-"):[t,e.version].join("-")}function Z9(){var e;const t=Ah();return t===Ii.browser?[t,((e=Vv())==null?void 0:e.host)||"unknown"].join(":"):t}function tI(e,t,r){const i=X9(),n=Z9();return[[e,t].join("-"),[Q9,r].join("-"),i,n].join("/")}function eI({protocol:e,version:t,relayUrl:r,sdkVersion:i,auth:n,projectId:o,useOnCloseEvent:f,bundleId:d}){const v=r.split("?"),g=tI(e,t,i),w={auth:n,ua:g,projectId:o,useOnCloseEvent:f||void 0,origin:d||void 0},S=J9(v[1]||"",w);return v[0]+"?"+S}function oo(e,t){return e.filter(r=>t.includes(r)).length===e.length}function Jv(e){return Object.fromEntries(e.entries())}function Wv(e){return new Map(Object.entries(e))}function so(e=Ht.FIVE_MINUTES,t){const r=Ht.toMiliseconds(e||Ht.FIVE_MINUTES);let i,n,o;return{resolve:f=>{o&&i&&(clearTimeout(o),i(f))},reject:f=>{o&&n&&(clearTimeout(o),n(f))},done:()=>new Promise((f,d)=>{o=setTimeout(()=>{d(new Error(t))},r),i=f,n=d})}}function Jo(e,t,r){return new Promise(async(i,n)=>{const o=setTimeout(()=>n(new Error(r)),t);try{const f=await e;i(f)}catch(f){n(f)}clearTimeout(o)})}function Xv(e,t){if(typeof t=="string"&&t.startsWith(`${e}:`))return t;if(e.toLowerCase()==="topic"){if(typeof t!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${t}`}else if(e.toLowerCase()==="id"){if(typeof t!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${t}`}throw new Error(`Unknown expirer target type: ${e}`)}function rI(e){return Xv("topic",e)}function iI(e){return Xv("id",e)}function Zv(e){const[t,r]=e.split(":"),i={id:void 0,topic:void 0};if(t==="topic"&&typeof r=="string")i.topic=r;else if(t==="id"&&Number.isInteger(Number(r)))i.id=Number(r);else throw new Error(`Invalid target, expected id:number or topic:string, got ${t}:${r}`);return i}function Cr(e,t){return Ht.fromMiliseconds(Date.now()+Ht.toMiliseconds(e))}function Os(e){return Date.now()>=Ht.toMiliseconds(e)}function Se(e,t){return`${e}${t?`:${t}`:""}`}function Ju(e=[],t=[]){return[...new Set([...e,...t])]}async function nI({id:e,topic:t,wcDeepLink:r}){try{if(!r)return;const i=typeof r=="string"?JSON.parse(r):r;let n=i==null?void 0:i.href;if(typeof n!="string")return;n.endsWith("/")&&(n=n.slice(0,-1));const o=`${n}/wc?requestId=${e}&sessionTopic=${t}`,f=Ah();f===Ii.browser?o.startsWith("https://")||o.startsWith("http://")?window.open(o,"_blank","noreferrer noopener"):window.open(o,"_self","noreferrer noopener"):f===Ii.reactNative&&typeof(Re==null?void 0:Re.Linking)<"u"&&await Re.Linking.openURL(o)}catch(i){console.error(i)}}async function sI(e,t){try{return await e.getItem(t)||(la()?localStorage.getItem(t):void 0)}catch(r){console.error(r)}}var ty=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof Re<"u"?Re:typeof self<"u"?self:{};function oI(e){var t=e.default;if(typeof t=="function"){var r=function(){return t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(i){var n=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(r,i,n.get?n:{enumerable:!0,get:function(){return e[i]}})}),r}var ey={exports:{}};/**
* [js-sha3]{@link https://github.com/emn178/js-sha3}
*
* @version 0.8.0
* @author Chen, Yi-Cyuan [emn178@gmail.com]
* @copyright Chen, Yi-Cyuan 2015-2018
* @license MIT
*/(function(e){(function(){var t="input is invalid type",r="finalize already called",i=typeof window=="object",n=i?window:{};n.JS_SHA3_NO_WINDOW&&(i=!1);var o=!i&&typeof self=="object",f=!n.JS_SHA3_NO_NODE_JS&&typeof Fr=="object"&&Fr.versions&&Fr.versions.node;f?n=ty:o&&(n=self);var d=!n.JS_SHA3_NO_COMMON_JS&&!0&&e.exports,v=!n.JS_SHA3_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",g="0123456789abcdef".split(""),w=[31,7936,2031616,520093696],S=[4,1024,262144,67108864],x=[1,256,65536,16777216],C=[6,1536,393216,100663296],N=[0,8,16,24],V=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],z=[224,256,384,512],X=[128,256],G=["hex","buffer","arrayBuffer","array","digest"],Y={128:168,256:136};(n.JS_SHA3_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(m){return Object.prototype.toString.call(m)==="[object Array]"}),v&&(n.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(m){return typeof m=="object"&&m.buffer&&m.buffer.constructor===ArrayBuffer});for(var $=function(m,H,R){return function(T){return new I(m,H,m).update(T)[R]()}},j=function(m,H,R){return function(T,q){return new I(m,H,q).update(T)[R]()}},k=function(m,H,R){return function(T,q,y,B){return u["cshake"+m].update(T,q,y,B)[R]()}},_=function(m,H,R){return function(T,q,y,B){return u["kmac"+m].update(T,q,y,B)[R]()}},L=function(m,H,R,T){for(var q=0;q<G.length;++q){var y=G[q];m[y]=H(R,T,y)}return m},ot=function(m,H){var R=$(m,H,"hex");return R.create=function(){return new I(m,H,m)},R.update=function(T){return R.create().update(T)},L(R,$,m,H)},ct=function(m,H){var R=j(m,H,"hex");return R.create=function(T){return new I(m,H,T)},R.update=function(T,q){return R.create(q).update(T)},L(R,j,m,H)},ht=function(m,H){var R=Y[m],T=k(m,H,"hex");return T.create=function(q,y,B){return!y&&!B?u["shake"+m].create(q):new I(m,H,q).bytepad([y,B],R)},T.update=function(q,y,B,W){return T.create(y,B,W).update(q)},L(T,k,m,H)},_t=function(m,H){var R=Y[m],T=_(m,H,"hex");return T.create=function(q,y,B){return new Z(m,H,y).bytepad(["KMAC",B],R).bytepad([q],R)},T.update=function(q,y,B,W){return T.create(q,B,W).update(y)},L(T,_,m,H)},h=[{name:"keccak",padding:x,bits:z,createMethod:ot},{name:"sha3",padding:C,bits:z,createMethod:ot},{name:"shake",padding:w,bits:X,createMethod:ct},{name:"cshake",padding:S,bits:X,createMethod:ht},{name:"kmac",padding:S,bits:X,createMethod:_t}],u={},p=[],b=0;b<h.length;++b)for(var M=h[b],D=M.bits,O=0;O<D.length;++O){var A=M.name+"_"+D[O];if(p.push(A),u[A]=M.createMethod(D[O],M.padding),M.name!=="sha3"){var c=M.name+D[O];p.push(c),u[c]=u[A]}}function I(m,H,R){this.blocks=[],this.s=[],this.padding=H,this.outputBits=R,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(m<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=R>>5,this.extraBytes=(R&31)>>3;for(var T=0;T<50;++T)this.s[T]=0}I.prototype.update=function(m){if(this.finalized)throw new Error(r);var H,R=typeof m;if(R!=="string"){if(R==="object"){if(m===null)throw new Error(t);if(v&&m.constructor===ArrayBuffer)m=new Uint8Array(m);else if(!Array.isArray(m)&&(!v||!ArrayBuffer.isView(m)))throw new Error(t)}else throw new Error(t);H=!0}for(var T=this.blocks,q=this.byteCount,y=m.length,B=this.blockCount,W=0,st=this.s,rt,Et;W<y;){if(this.reset)for(this.reset=!1,T[0]=this.block,rt=1;rt<B+1;++rt)T[rt]=0;if(H)for(rt=this.start;W<y&&rt<q;++W)T[rt>>2]|=m[W]<<N[rt++&3];else for(rt=this.start;W<y&&rt<q;++W)Et=m.charCodeAt(W),Et<128?T[rt>>2]|=Et<<N[rt++&3]:Et<2048?(T[rt>>2]|=(192|Et>>6)<<N[rt++&3],T[rt>>2]|=(128|Et&63)<<N[rt++&3]):Et<55296||Et>=57344?(T[rt>>2]|=(224|Et>>12)<<N[rt++&3],T[rt>>2]|=(128|Et>>6&63)<<N[rt++&3],T[rt>>2]|=(128|Et&63)<<N[rt++&3]):(Et=65536+((Et&1023)<<10|m.charCodeAt(++W)&1023),T[rt>>2]|=(240|Et>>18)<<N[rt++&3],T[rt>>2]|=(128|Et>>12&63)<<N[rt++&3],T[rt>>2]|=(128|Et>>6&63)<<N[rt++&3],T[rt>>2]|=(128|Et&63)<<N[rt++&3]);if(this.lastByteIndex=rt,rt>=q){for(this.start=rt-q,this.block=T[B],rt=0;rt<B;++rt)st[rt]^=T[rt];nt(st),this.reset=!0}else this.start=rt}return this},I.prototype.encode=function(m,H){var R=m&255,T=1,q=[R];for(m=m>>8,R=m&255;R>0;)q.unshift(R),m=m>>8,R=m&255,++T;return H?q.push(T):q.unshift(T),this.update(q),q.length},I.prototype.encodeString=function(m){var H,R=typeof m;if(R!=="string"){if(R==="object"){if(m===null)throw new Error(t);if(v&&m.constructor===ArrayBuffer)m=new Uint8Array(m);else if(!Array.isArray(m)&&(!v||!ArrayBuffer.isView(m)))throw new Error(t)}else throw new Error(t);H=!0}var T=0,q=m.length;if(H)T=q;else for(var y=0;y<m.length;++y){var B=m.charCodeAt(y);B<128?T+=1:B<2048?T+=2:B<55296||B>=57344?T+=3:(B=65536+((B&1023)<<10|m.charCodeAt(++y)&1023),T+=4)}return T+=this.encode(T*8),this.update(m),T},I.prototype.bytepad=function(m,H){for(var R=this.encode(H),T=0;T<m.length;++T)R+=this.encodeString(m[T]);var q=H-R%H,y=[];return y.length=q,this.update(y),this},I.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var m=this.blocks,H=this.lastByteIndex,R=this.blockCount,T=this.s;if(m[H>>2]|=this.padding[H&3],this.lastByteIndex===this.byteCount)for(m[0]=m[R],H=1;H<R+1;++H)m[H]=0;for(m[R-1]|=2147483648,H=0;H<R;++H)T[H]^=m[H];nt(T)}},I.prototype.toString=I.prototype.hex=function(){this.finalize();for(var m=this.blockCount,H=this.s,R=this.outputBlocks,T=this.extraBytes,q=0,y=0,B="",W;y<R;){for(q=0;q<m&&y<R;++q,++y)W=H[q],B+=g[W>>4&15]+g[W&15]+g[W>>12&15]+g[W>>8&15]+g[W>>20&15]+g[W>>16&15]+g[W>>28&15]+g[W>>24&15];y%m===0&&(nt(H),q=0)}return T&&(W=H[q],B+=g[W>>4&15]+g[W&15],T>1&&(B+=g[W>>12&15]+g[W>>8&15]),T>2&&(B+=g[W>>20&15]+g[W>>16&15])),B},I.prototype.arrayBuffer=function(){this.finalize();var m=this.blockCount,H=this.s,R=this.outputBlocks,T=this.extraBytes,q=0,y=0,B=this.outputBits>>3,W;T?W=new ArrayBuffer(R+1<<2):W=new ArrayBuffer(B);for(var st=new Uint32Array(W);y<R;){for(q=0;q<m&&y<R;++q,++y)st[y]=H[q];y%m===0&&nt(H)}return T&&(st[q]=H[q],W=W.slice(0,B)),W},I.prototype.buffer=I.prototype.arrayBuffer,I.prototype.digest=I.prototype.array=function(){this.finalize();for(var m=this.blockCount,H=this.s,R=this.outputBlocks,T=this.extraBytes,q=0,y=0,B=[],W,st;y<R;){for(q=0;q<m&&y<R;++q,++y)W=y<<2,st=H[q],B[W]=st&255,B[W+1]=st>>8&255,B[W+2]=st>>16&255,B[W+3]=st>>24&255;y%m===0&&nt(H)}return T&&(W=y<<2,st=H[q],B[W]=st&255,T>1&&(B[W+1]=st>>8&255),T>2&&(B[W+2]=st>>16&255)),B};function Z(m,H,R){I.call(this,m,H,R)}Z.prototype=new I,Z.prototype.finalize=function(){return this.encode(this.outputBits,!0),I.prototype.finalize.call(this)};var nt=function(m){var H,R,T,q,y,B,W,st,rt,Et,It,bt,me,Pt,At,Jt,vt,yt,re,gt,wt,Qt,mt,St,Wt,Mt,Dt,oe,Ct,xt,Te,Vt,Xt,Be,Zt,te,Xe,Ut,Rt,be,Lt,Tt,ve,$t,kt,Ae,zt,Ft,_e,qt,Nt,Ie,jt,ie,pr,ne,Yt,rr,ir,nr,sr,or,ke;for(T=0;T<48;T+=2)q=m[0]^m[10]^m[20]^m[30]^m[40],y=m[1]^m[11]^m[21]^m[31]^m[41],B=m[2]^m[12]^m[22]^m[32]^m[42],W=m[3]^m[13]^m[23]^m[33]^m[43],st=m[4]^m[14]^m[24]^m[34]^m[44],rt=m[5]^m[15]^m[25]^m[35]^m[45],Et=m[6]^m[16]^m[26]^m[36]^m[46],It=m[7]^m[17]^m[27]^m[37]^m[47],bt=m[8]^m[18]^m[28]^m[38]^m[48],me=m[9]^m[19]^m[29]^m[39]^m[49],H=bt^(B<<1|W>>>31),R=me^(W<<1|B>>>31),m[0]^=H,m[1]^=R,m[10]^=H,m[11]^=R,m[20]^=H,m[21]^=R,m[30]^=H,m[31]^=R,m[40]^=H,m[41]^=R,H=q^(st<<1|rt>>>31),R=y^(rt<<1|st>>>31),m[2]^=H,m[3]^=R,m[12]^=H,m[13]^=R,m[22]^=H,m[23]^=R,m[32]^=H,m[33]^=R,m[42]^=H,m[43]^=R,H=B^(Et<<1|It>>>31),R=W^(It<<1|Et>>>31),m[4]^=H,m[5]^=R,m[14]^=H,m[15]^=R,m[24]^=H,m[25]^=R,m[34]^=H,m[35]^=R,m[44]^=H,m[45]^=R,H=st^(bt<<1|me>>>31),R=rt^(me<<1|bt>>>31),m[6]^=H,m[7]^=R,m[16]^=H,m[17]^=R,m[26]^=H,m[27]^=R,m[36]^=H,m[37]^=R,m[46]^=H,m[47]^=R,H=Et^(q<<1|y>>>31),R=It^(y<<1|q>>>31),m[8]^=H,m[9]^=R,m[18]^=H,m[19]^=R,m[28]^=H,m[29]^=R,m[38]^=H,m[39]^=R,m[48]^=H,m[49]^=R,Pt=m[0],At=m[1],Ae=m[11]<<4|m[10]>>>28,zt=m[10]<<4|m[11]>>>28,oe=m[20]<<3|m[21]>>>29,Ct=m[21]<<3|m[20]>>>29,nr=m[31]<<9|m[30]>>>23,sr=m[30]<<9|m[31]>>>23,Tt=m[40]<<18|m[41]>>>14,ve=m[41]<<18|m[40]>>>14,Be=m[2]<<1|m[3]>>>31,Zt=m[3]<<1|m[2]>>>31,Jt=m[13]<<12|m[12]>>>20,vt=m[12]<<12|m[13]>>>20,Ft=m[22]<<10|m[23]>>>22,_e=m[23]<<10|m[22]>>>22,xt=m[33]<<13|m[32]>>>19,Te=m[32]<<13|m[33]>>>19,or=m[42]<<2|m[43]>>>30,ke=m[43]<<2|m[42]>>>30,ie=m[5]<<30|m[4]>>>2,pr=m[4]<<30|m[5]>>>2,te=m[14]<<6|m[15]>>>26,Xe=m[15]<<6|m[14]>>>26,yt=m[25]<<11|m[24]>>>21,re=m[24]<<11|m[25]>>>21,qt=m[34]<<15|m[35]>>>17,Nt=m[35]<<15|m[34]>>>17,Vt=m[45]<<29|m[44]>>>3,Xt=m[44]<<29|m[45]>>>3,St=m[6]<<28|m[7]>>>4,Wt=m[7]<<28|m[6]>>>4,ne=m[17]<<23|m[16]>>>9,Yt=m[16]<<23|m[17]>>>9,Ut=m[26]<<25|m[27]>>>7,Rt=m[27]<<25|m[26]>>>7,gt=m[36]<<21|m[37]>>>11,wt=m[37]<<21|m[36]>>>11,Ie=m[47]<<24|m[46]>>>8,jt=m[46]<<24|m[47]>>>8,$t=m[8]<<27|m[9]>>>5,kt=m[9]<<27|m[8]>>>5,Mt=m[18]<<20|m[19]>>>12,Dt=m[19]<<20|m[18]>>>12,rr=m[29]<<7|m[28]>>>25,ir=m[28]<<7|m[29]>>>25,be=m[38]<<8|m[39]>>>24,Lt=m[39]<<8|m[38]>>>24,Qt=m[48]<<14|m[49]>>>18,mt=m[49]<<14|m[48]>>>18,m[0]=Pt^~Jt&yt,m[1]=At^~vt&re,m[10]=St^~Mt&oe,m[11]=Wt^~Dt&Ct,m[20]=Be^~te&Ut,m[21]=Zt^~Xe&Rt,m[30]=$t^~Ae&Ft,m[31]=kt^~zt&_e,m[40]=ie^~ne&rr,m[41]=pr^~Yt&ir,m[2]=Jt^~yt&gt,m[3]=vt^~re&wt,m[12]=Mt^~oe&xt,m[13]=Dt^~Ct&Te,m[22]=te^~Ut&be,m[23]=Xe^~Rt&Lt,m[32]=Ae^~Ft&qt,m[33]=zt^~_e&Nt,m[42]=ne^~rr&nr,m[43]=Yt^~ir&sr,m[4]=yt^~gt&Qt,m[5]=re^~wt&mt,m[14]=oe^~xt&Vt,m[15]=Ct^~Te&Xt,m[24]=Ut^~be&Tt,m[25]=Rt^~Lt&ve,m[34]=Ft^~qt&Ie,m[35]=_e^~Nt&jt,m[44]=rr^~nr&or,m[45]=ir^~sr&ke,m[6]=gt^~Qt&Pt,m[7]=wt^~mt&At,m[16]=xt^~Vt&St,m[17]=Te^~Xt&Wt,m[26]=be^~Tt&Be,m[27]=Lt^~ve&Zt,m[36]=qt^~Ie&$t,m[37]=Nt^~jt&kt,m[46]=nr^~or&ie,m[47]=sr^~ke&pr,m[8]=Qt^~Pt&Jt,m[9]=mt^~At&vt,m[18]=Vt^~St&Mt,m[19]=Xt^~Wt&Dt,m[28]=Tt^~Be&te,m[29]=ve^~Zt&Xe,m[38]=Ie^~$t&Ae,m[39]=jt^~kt&zt,m[48]=or^~ie&ne,m[49]=ke^~pr&Yt,m[0]^=V[T],m[1]^=V[T+1]};if(d)e.exports=u;else for(b=0;b<p.length;++b)n[p[b]]=u[p[b]]})()})(ey);var aI=ey.exports;const hI="logger/5.7.0";let ag=!1,hg=!1;const Wu={debug:1,default:2,info:2,warning:3,error:4,off:5};let ug=Wu.default,pl=null;function uI(){try{const e=[];if(["NFD","NFC","NFKD","NFKC"].forEach(t=>{try{if("test".normalize(t)!=="test")throw new Error("bad normalize")}catch{e.push(t)}}),e.length)throw new Error("missing "+e.join(", "));if("é".normalize("NFD")!=="é")throw new Error("broken implementation")}catch(e){return e.message}return null}const cg=uI();var o0;(function(e){e.DEBUG="DEBUG",e.INFO="INFO",e.WARNING="WARNING",e.ERROR="ERROR",e.OFF="OFF"})(o0||(o0={}));var vn;(function(e){e.UNKNOWN_ERROR="UNKNOWN_ERROR",e.NOT_IMPLEMENTED="NOT_IMPLEMENTED",e.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",e.NETWORK_ERROR="NETWORK_ERROR",e.SERVER_ERROR="SERVER_ERROR",e.TIMEOUT="TIMEOUT",e.BUFFER_OVERRUN="BUFFER_OVERRUN",e.NUMERIC_FAULT="NUMERIC_FAULT",e.MISSING_NEW="MISSING_NEW",e.INVALID_ARGUMENT="INVALID_ARGUMENT",e.MISSING_ARGUMENT="MISSING_ARGUMENT",e.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",e.CALL_EXCEPTION="CALL_EXCEPTION",e.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",e.NONCE_EXPIRED="NONCE_EXPIRED",e.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",e.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",e.TRANSACTION_REPLACED="TRANSACTION_REPLACED",e.ACTION_REJECTED="ACTION_REJECTED"})(vn||(vn={}));const fg="0123456789abcdef";let Or=class br{constructor(t){Object.defineProperty(this,"version",{enumerable:!0,value:t,writable:!1})}_log(t,r){const i=t.toLowerCase();Wu[i]==null&&this.throwArgumentError("invalid log level name","logLevel",t),!(ug>Wu[i])&&console.log.apply(console,r)}debug(...t){this._log(br.levels.DEBUG,t)}info(...t){this._log(br.levels.INFO,t)}warn(...t){this._log(br.levels.WARNING,t)}makeError(t,r,i){if(hg)return this.makeError("censored error",r,{});r||(r=br.errors.UNKNOWN_ERROR),i||(i={});const n=[];Object.keys(i).forEach(v=>{const g=i[v];try{if(g instanceof Uint8Array){let w="";for(let S=0;S<g.length;S++)w+=fg[g[S]>>4],w+=fg[g[S]&15];n.push(v+"=Uint8Array(0x"+w+")")}else n.push(v+"="+JSON.stringify(g))}catch{n.push(v+"="+JSON.stringify(i[v].toString()))}}),n.push(`code=${r}`),n.push(`version=${this.version}`);const o=t;let f="";switch(r){case vn.NUMERIC_FAULT:{f="NUMERIC_FAULT";const v=t;switch(v){case"overflow":case"underflow":case"division-by-zero":f+="-"+v;break;case"negative-power":case"negative-width":f+="-unsupported";break;case"unbound-bitwise-result":f+="-unbound-result";break}break}case vn.CALL_EXCEPTION:case vn.INSUFFICIENT_FUNDS:case vn.MISSING_NEW:case vn.NONCE_EXPIRED:case vn.REPLACEMENT_UNDERPRICED:case vn.TRANSACTION_REPLACED:case vn.UNPREDICTABLE_GAS_LIMIT:f=r;break}f&&(t+=" [ See: https://links.ethers.org/v5-errors-"+f+" ]"),n.length&&(t+=" ("+n.join(", ")+")");const d=new Error(t);return d.reason=o,d.code=r,Object.keys(i).forEach(function(v){d[v]=i[v]}),d}throwError(t,r,i){throw this.makeError(t,r,i)}throwArgumentError(t,r,i){return this.throwError(t,br.errors.INVALID_ARGUMENT,{argument:r,value:i})}assert(t,r,i,n){t||this.throwError(r,i,n)}assertArgument(t,r,i,n){t||this.throwArgumentError(r,i,n)}checkNormalize(t){cg&&this.throwError("platform missing String.prototype.normalize",br.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:cg})}checkSafeUint53(t,r){typeof t=="number"&&(r==null&&(r="value not safe"),(t<0||t>=9007199254740991)&&this.throwError(r,br.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:t}),t%1&&this.throwError(r,br.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:t}))}checkArgumentCount(t,r,i){i?i=": "+i:i="",t<r&&this.throwError("missing argument"+i,br.errors.MISSING_ARGUMENT,{count:t,expectedCount:r}),t>r&&this.throwError("too many arguments"+i,br.errors.UNEXPECTED_ARGUMENT,{count:t,expectedCount:r})}checkNew(t,r){(t===Object||t==null)&&this.throwError("missing new",br.errors.MISSING_NEW,{name:r.name})}checkAbstract(t,r){t===r?this.throwError("cannot instantiate abstract class "+JSON.stringify(r.name)+" directly; use a sub-class",br.errors.UNSUPPORTED_OPERATION,{name:t.name,operation:"new"}):(t===Object||t==null)&&this.throwError("missing new",br.errors.MISSING_NEW,{name:r.name})}static globalLogger(){return pl||(pl=new br(hI)),pl}static setCensorship(t,r){if(!t&&r&&this.globalLogger().throwError("cannot permanently disable censorship",br.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),ag){if(!t)return;this.globalLogger().throwError("error censorship permanent",br.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}hg=!!t,ag=!!r}static setLogLevel(t){const r=Wu[t.toLowerCase()];if(r==null){br.globalLogger().warn("invalid log level - "+t);return}ug=r}static from(t){return new br(t)}};Or.errors=vn,Or.levels=o0;const cI="bytes/5.7.0",cr=new Or(cI);function ry(e){return!!e.toHexString}function Wo(e){return e.slice||(e.slice=function(){const t=Array.prototype.slice.call(arguments);return Wo(new Uint8Array(Array.prototype.slice.apply(e,t)))}),e}function fI(e){return Mi(e)&&!(e.length%2)||da(e)}function lg(e){return typeof e=="number"&&e==e&&e%1===0}function da(e){if(e==null)return!1;if(e.constructor===Uint8Array)return!0;if(typeof e=="string"||!lg(e.length)||e.length<0)return!1;for(let t=0;t<e.length;t++){const r=e[t];if(!lg(r)||r<0||r>=256)return!1}return!0}function er(e,t){if(t||(t={}),typeof e=="number"){cr.checkSafeUint53(e,"invalid arrayify value");const r=[];for(;e;)r.unshift(e&255),e=parseInt(String(e/256));return r.length===0&&r.push(0),Wo(new Uint8Array(r))}if(t.allowMissingPrefix&&typeof e=="string"&&e.substring(0,2)!=="0x"&&(e="0x"+e),ry(e)&&(e=e.toHexString()),Mi(e)){let r=e.substring(2);r.length%2&&(t.hexPad==="left"?r="0"+r:t.hexPad==="right"?r+="0":cr.throwArgumentError("hex data is odd-length","value",e));const i=[];for(let n=0;n<r.length;n+=2)i.push(parseInt(r.substring(n,n+2),16));return Wo(new Uint8Array(i))}return da(e)?Wo(new Uint8Array(e)):cr.throwArgumentError("invalid arrayify value","value",e)}function lI(e){const t=e.map(n=>er(n)),r=t.reduce((n,o)=>n+o.length,0),i=new Uint8Array(r);return t.reduce((n,o)=>(i.set(o,n),n+o.length),0),Wo(i)}function dI(e,t){e=er(e),e.length>t&&cr.throwArgumentError("value out of range","value",arguments[0]);const r=new Uint8Array(t);return r.set(e,t-e.length),Wo(r)}function Mi(e,t){return!(typeof e!="string"||!e.match(/^0x[0-9A-Fa-f]*$/)||t&&e.length!==2+2*t)}const gl="0123456789abcdef";function ui(e,t){if(t||(t={}),typeof e=="number"){cr.checkSafeUint53(e,"invalid hexlify value");let r="";for(;e;)r=gl[e&15]+r,e=Math.floor(e/16);return r.length?(r.length%2&&(r="0"+r),"0x"+r):"0x00"}if(typeof e=="bigint")return e=e.toString(16),e.length%2?"0x0"+e:"0x"+e;if(t.allowMissingPrefix&&typeof e=="string"&&e.substring(0,2)!=="0x"&&(e="0x"+e),ry(e))return e.toHexString();if(Mi(e))return e.length%2&&(t.hexPad==="left"?e="0x0"+e.substring(2):t.hexPad==="right"?e+="0":cr.throwArgumentError("hex data is odd-length","value",e)),e.toLowerCase();if(da(e)){let r="0x";for(let i=0;i<e.length;i++){let n=e[i];r+=gl[(n&240)>>4]+gl[n&15]}return r}return cr.throwArgumentError("invalid hexlify value","value",e)}function pI(e){if(typeof e!="string")e=ui(e);else if(!Mi(e)||e.length%2)return null;return(e.length-2)/2}function dg(e,t,r){return typeof e!="string"?e=ui(e):(!Mi(e)||e.length%2)&&cr.throwArgumentError("invalid hexData","value",e),t=2+2*t,r!=null?"0x"+e.substring(t,2+2*r):"0x"+e.substring(t)}function jn(e,t){for(typeof e!="string"?e=ui(e):Mi(e)||cr.throwArgumentError("invalid hex string","value",e),e.length>2*t+2&&cr.throwArgumentError("value out of range","value",arguments[1]);e.length<2*t+2;)e="0x0"+e.substring(2);return e}function iy(e){const t={r:"0x",s:"0x",_vs:"0x",recoveryParam:0,v:0,yParityAndS:"0x",compact:"0x"};if(fI(e)){let r=er(e);r.length===64?(t.v=27+(r[32]>>7),r[32]&=127,t.r=ui(r.slice(0,32)),t.s=ui(r.slice(32,64))):r.length===65?(t.r=ui(r.slice(0,32)),t.s=ui(r.slice(32,64)),t.v=r[64]):cr.throwArgumentError("invalid signature string","signature",e),t.v<27&&(t.v===0||t.v===1?t.v+=27:cr.throwArgumentError("signature invalid v byte","signature",e)),t.recoveryParam=1-t.v%2,t.recoveryParam&&(r[32]|=128),t._vs=ui(r.slice(32,64))}else{if(t.r=e.r,t.s=e.s,t.v=e.v,t.recoveryParam=e.recoveryParam,t._vs=e._vs,t._vs!=null){const n=dI(er(t._vs),32);t._vs=ui(n);const o=n[0]>=128?1:0;t.recoveryParam==null?t.recoveryParam=o:t.recoveryParam!==o&&cr.throwArgumentError("signature recoveryParam mismatch _vs","signature",e),n[0]&=127;const f=ui(n);t.s==null?t.s=f:t.s!==f&&cr.throwArgumentError("signature v mismatch _vs","signature",e)}if(t.recoveryParam==null)t.v==null?cr.throwArgumentError("signature missing v and recoveryParam","signature",e):t.v===0||t.v===1?t.recoveryParam=t.v:t.recoveryParam=1-t.v%2;else if(t.v==null)t.v=27+t.recoveryParam;else{const n=t.v===0||t.v===1?t.v:1-t.v%2;t.recoveryParam!==n&&cr.throwArgumentError("signature recoveryParam mismatch v","signature",e)}t.r==null||!Mi(t.r)?cr.throwArgumentError("signature missing or invalid r","signature",e):t.r=jn(t.r,32),t.s==null||!Mi(t.s)?cr.throwArgumentError("signature missing or invalid s","signature",e):t.s=jn(t.s,32);const r=er(t.s);r[0]>=128&&cr.throwArgumentError("signature s out of range","signature",e),t.recoveryParam&&(r[0]|=128);const i=ui(r);t._vs&&(Mi(t._vs)||cr.throwArgumentError("signature invalid _vs","signature",e),t._vs=jn(t._vs,32)),t._vs==null?t._vs=i:t._vs!==i&&cr.throwArgumentError("signature _vs mismatch v and s","signature",e)}return t.yParityAndS=t._vs,t.compact=t.r+t.yParityAndS.substring(2),t}function z0(e){return"0x"+aI.keccak_256(er(e))}var ny={exports:{}},gI={},mI=Object.freeze({__proto__:null,default:gI}),vI=oI(mI);(function(e){(function(t,r){function i(h,u){if(!h)throw new Error(u||"Assertion failed")}function n(h,u){h.super_=u;var p=function(){};p.prototype=u.prototype,h.prototype=new p,h.prototype.constructor=h}function o(h,u,p){if(o.isBN(h))return h;this.negative=0,this.words=null,this.length=0,this.red=null,h!==null&&((u==="le"||u==="be")&&(p=u,u=10),this._init(h||0,u||10,p||"be"))}typeof t=="object"?t.exports=o:r.BN=o,o.BN=o,o.wordSize=26;var f;try{typeof window<"u"&&typeof window.Buffer<"u"?f=window.Buffer:f=vI.Buffer}catch{}o.isBN=function(h){return h instanceof o?!0:h!==null&&typeof h=="object"&&h.constructor.wordSize===o.wordSize&&Array.isArray(h.words)},o.max=function(h,u){return h.cmp(u)>0?h:u},o.min=function(h,u){return h.cmp(u)<0?h:u},o.prototype._init=function(h,u,p){if(typeof h=="number")return this._initNumber(h,u,p);if(typeof h=="object")return this._initArray(h,u,p);u==="hex"&&(u=16),i(u===(u|0)&&u>=2&&u<=36),h=h.toString().replace(/\s+/g,"");var b=0;h[0]==="-"&&(b++,this.negative=1),b<h.length&&(u===16?this._parseHex(h,b,p):(this._parseBase(h,u,b),p==="le"&&this._initArray(this.toArray(),u,p)))},o.prototype._initNumber=function(h,u,p){h<0&&(this.negative=1,h=-h),h<67108864?(this.words=[h&67108863],this.length=1):h<4503599627370496?(this.words=[h&67108863,h/67108864&67108863],this.length=2):(i(h<9007199254740992),this.words=[h&67108863,h/67108864&67108863,1],this.length=3),p==="le"&&this._initArray(this.toArray(),u,p)},o.prototype._initArray=function(h,u,p){if(i(typeof h.length=="number"),h.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(h.length/3),this.words=new Array(this.length);for(var b=0;b<this.length;b++)this.words[b]=0;var M,D,O=0;if(p==="be")for(b=h.length-1,M=0;b>=0;b-=3)D=h[b]|h[b-1]<<8|h[b-2]<<16,this.words[M]|=D<<O&67108863,this.words[M+1]=D>>>26-O&67108863,O+=24,O>=26&&(O-=26,M++);else if(p==="le")for(b=0,M=0;b<h.length;b+=3)D=h[b]|h[b+1]<<8|h[b+2]<<16,this.words[M]|=D<<O&67108863,this.words[M+1]=D>>>26-O&67108863,O+=24,O>=26&&(O-=26,M++);return this._strip()};function d(h,u){var p=h.charCodeAt(u);if(p>=48&&p<=57)return p-48;if(p>=65&&p<=70)return p-55;if(p>=97&&p<=102)return p-87;i(!1,"Invalid character in "+h)}function v(h,u,p){var b=d(h,p);return p-1>=u&&(b|=d(h,p-1)<<4),b}o.prototype._parseHex=function(h,u,p){this.length=Math.ceil((h.length-u)/6),this.words=new Array(this.length);for(var b=0;b<this.length;b++)this.words[b]=0;var M=0,D=0,O;if(p==="be")for(b=h.length-1;b>=u;b-=2)O=v(h,u,b)<<M,this.words[D]|=O&67108863,M>=18?(M-=18,D+=1,this.words[D]|=O>>>26):M+=8;else{var A=h.length-u;for(b=A%2===0?u+1:u;b<h.length;b+=2)O=v(h,u,b)<<M,this.words[D]|=O&67108863,M>=18?(M-=18,D+=1,this.words[D]|=O>>>26):M+=8}this._strip()};function g(h,u,p,b){for(var M=0,D=0,O=Math.min(h.length,p),A=u;A<O;A++){var c=h.charCodeAt(A)-48;M*=b,c>=49?D=c-49+10:c>=17?D=c-17+10:D=c,i(c>=0&&D<b,"Invalid character"),M+=D}return M}o.prototype._parseBase=function(h,u,p){this.words=[0],this.length=1;for(var b=0,M=1;M<=67108863;M*=u)b++;b--,M=M/u|0;for(var D=h.length-p,O=D%b,A=Math.min(D,D-O)+p,c=0,I=p;I<A;I+=b)c=g(h,I,I+b,u),this.imuln(M),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(O!==0){var Z=1;for(c=g(h,I,h.length,u),I=0;I<O;I++)Z*=u;this.imuln(Z),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}this._strip()},o.prototype.copy=function(h){h.words=new Array(this.length);for(var u=0;u<this.length;u++)h.words[u]=this.words[u];h.length=this.length,h.negative=this.negative,h.red=this.red};function w(h,u){h.words=u.words,h.length=u.length,h.negative=u.negative,h.red=u.red}if(o.prototype._move=function(h){w(h,this)},o.prototype.clone=function(){var h=new o(null);return this.copy(h),h},o.prototype._expand=function(h){for(;this.length<h;)this.words[this.length++]=0;return this},o.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},o.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{o.prototype[Symbol.for("nodejs.util.inspect.custom")]=S}catch{o.prototype.inspect=S}else o.prototype.inspect=S;function S(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var x=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],C=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],N=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];o.prototype.toString=function(h,u){h=h||10,u=u|0||1;var p;if(h===16||h==="hex"){p="";for(var b=0,M=0,D=0;D<this.length;D++){var O=this.words[D],A=((O<<b|M)&16777215).toString(16);M=O>>>24-b&16777215,b+=2,b>=26&&(b-=26,D--),M!==0||D!==this.length-1?p=x[6-A.length]+A+p:p=A+p}for(M!==0&&(p=M.toString(16)+p);p.length%u!==0;)p="0"+p;return this.negative!==0&&(p="-"+p),p}if(h===(h|0)&&h>=2&&h<=36){var c=C[h],I=N[h];p="";var Z=this.clone();for(Z.negative=0;!Z.isZero();){var nt=Z.modrn(I).toString(h);Z=Z.idivn(I),Z.isZero()?p=nt+p:p=x[c-nt.length]+nt+p}for(this.isZero()&&(p="0"+p);p.length%u!==0;)p="0"+p;return this.negative!==0&&(p="-"+p),p}i(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var h=this.words[0];return this.length===2?h+=this.words[1]*67108864:this.length===3&&this.words[2]===1?h+=4503599627370496+this.words[1]*67108864:this.length>2&&i(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-h:h},o.prototype.toJSON=function(){return this.toString(16,2)},f&&(o.prototype.toBuffer=function(h,u){return this.toArrayLike(f,h,u)}),o.prototype.toArray=function(h,u){return this.toArrayLike(Array,h,u)};var V=function(h,u){return h.allocUnsafe?h.allocUnsafe(u):new h(u)};o.prototype.toArrayLike=function(h,u,p){this._strip();var b=this.byteLength(),M=p||Math.max(1,b);i(b<=M,"byte array longer than desired length"),i(M>0,"Requested array length <= 0");var D=V(h,M),O=u==="le"?"LE":"BE";return this["_toArrayLike"+O](D,b),D},o.prototype._toArrayLikeLE=function(h,u){for(var p=0,b=0,M=0,D=0;M<this.length;M++){var O=this.words[M]<<D|b;h[p++]=O&255,p<h.length&&(h[p++]=O>>8&255),p<h.length&&(h[p++]=O>>16&255),D===6?(p<h.length&&(h[p++]=O>>24&255),b=0,D=0):(b=O>>>24,D+=2)}if(p<h.length)for(h[p++]=b;p<h.length;)h[p++]=0},o.prototype._toArrayLikeBE=function(h,u){for(var p=h.length-1,b=0,M=0,D=0;M<this.length;M++){var O=this.words[M]<<D|b;h[p--]=O&255,p>=0&&(h[p--]=O>>8&255),p>=0&&(h[p--]=O>>16&255),D===6?(p>=0&&(h[p--]=O>>24&255),b=0,D=0):(b=O>>>24,D+=2)}if(p>=0)for(h[p--]=b;p>=0;)h[p--]=0},Math.clz32?o.prototype._countBits=function(h){return 32-Math.clz32(h)}:o.prototype._countBits=function(h){var u=h,p=0;return u>=4096&&(p+=13,u>>>=13),u>=64&&(p+=7,u>>>=7),u>=8&&(p+=4,u>>>=4),u>=2&&(p+=2,u>>>=2),p+u},o.prototype._zeroBits=function(h){if(h===0)return 26;var u=h,p=0;return u&8191||(p+=13,u>>>=13),u&127||(p+=7,u>>>=7),u&15||(p+=4,u>>>=4),u&3||(p+=2,u>>>=2),u&1||p++,p},o.prototype.bitLength=function(){var h=this.words[this.length-1],u=this._countBits(h);return(this.length-1)*26+u};function z(h){for(var u=new Array(h.bitLength()),p=0;p<u.length;p++){var b=p/26|0,M=p%26;u[p]=h.words[b]>>>M&1}return u}o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var h=0,u=0;u<this.length;u++){var p=this._zeroBits(this.words[u]);if(h+=p,p!==26)break}return h},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(h){return this.negative!==0?this.abs().inotn(h).iaddn(1):this.clone()},o.prototype.fromTwos=function(h){return this.testn(h-1)?this.notn(h).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return this.negative!==0},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(h){for(;this.length<h.length;)this.words[this.length++]=0;for(var u=0;u<h.length;u++)this.words[u]=this.words[u]|h.words[u];return this._strip()},o.prototype.ior=function(h){return i((this.negative|h.negative)===0),this.iuor(h)},o.prototype.or=function(h){return this.length>h.length?this.clone().ior(h):h.clone().ior(this)},o.prototype.uor=function(h){return this.length>h.length?this.clone().iuor(h):h.clone().iuor(this)},o.prototype.iuand=function(h){var u;this.length>h.length?u=h:u=this;for(var p=0;p<u.length;p++)this.words[p]=this.words[p]&h.words[p];return this.length=u.length,this._strip()},o.prototype.iand=function(h){return i((this.negative|h.negative)===0),this.iuand(h)},o.prototype.and=function(h){return this.length>h.length?this.clone().iand(h):h.clone().iand(this)},o.prototype.uand=function(h){return this.length>h.length?this.clone().iuand(h):h.clone().iuand(this)},o.prototype.iuxor=function(h){var u,p;this.length>h.length?(u=this,p=h):(u=h,p=this);for(var b=0;b<p.length;b++)this.words[b]=u.words[b]^p.words[b];if(this!==u)for(;b<u.length;b++)this.words[b]=u.words[b];return this.length=u.length,this._strip()},o.prototype.ixor=function(h){return i((this.negative|h.negative)===0),this.iuxor(h)},o.prototype.xor=function(h){return this.length>h.length?this.clone().ixor(h):h.clone().ixor(this)},o.prototype.uxor=function(h){return this.length>h.length?this.clone().iuxor(h):h.clone().iuxor(this)},o.prototype.inotn=function(h){i(typeof h=="number"&&h>=0);var u=Math.ceil(h/26)|0,p=h%26;this._expand(u),p>0&&u--;for(var b=0;b<u;b++)this.words[b]=~this.words[b]&67108863;return p>0&&(this.words[b]=~this.words[b]&67108863>>26-p),this._strip()},o.prototype.notn=function(h){return this.clone().inotn(h)},o.prototype.setn=function(h,u){i(typeof h=="number"&&h>=0);var p=h/26|0,b=h%26;return this._expand(p+1),u?this.words[p]=this.words[p]|1<<b:this.words[p]=this.words[p]&~(1<<b),this._strip()},o.prototype.iadd=function(h){var u;if(this.negative!==0&&h.negative===0)return this.negative=0,u=this.isub(h),this.negative^=1,this._normSign();if(this.negative===0&&h.negative!==0)return h.negative=0,u=this.isub(h),h.negative=1,u._normSign();var p,b;this.length>h.length?(p=this,b=h):(p=h,b=this);for(var M=0,D=0;D<b.length;D++)u=(p.words[D]|0)+(b.words[D]|0)+M,this.words[D]=u&67108863,M=u>>>26;for(;M!==0&&D<p.length;D++)u=(p.words[D]|0)+M,this.words[D]=u&67108863,M=u>>>26;if(this.length=p.length,M!==0)this.words[this.length]=M,this.length++;else if(p!==this)for(;D<p.length;D++)this.words[D]=p.words[D];return this},o.prototype.add=function(h){var u;return h.negative!==0&&this.negative===0?(h.negative=0,u=this.sub(h),h.negative^=1,u):h.negative===0&&this.negative!==0?(this.negative=0,u=h.sub(this),this.negative=1,u):this.length>h.length?this.clone().iadd(h):h.clone().iadd(this)},o.prototype.isub=function(h){if(h.negative!==0){h.negative=0;var u=this.iadd(h);return h.negative=1,u._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(h),this.negative=1,this._normSign();var p=this.cmp(h);if(p===0)return this.negative=0,this.length=1,this.words[0]=0,this;var b,M;p>0?(b=this,M=h):(b=h,M=this);for(var D=0,O=0;O<M.length;O++)u=(b.words[O]|0)-(M.words[O]|0)+D,D=u>>26,this.words[O]=u&67108863;for(;D!==0&&O<b.length;O++)u=(b.words[O]|0)+D,D=u>>26,this.words[O]=u&67108863;if(D===0&&O<b.length&&b!==this)for(;O<b.length;O++)this.words[O]=b.words[O];return this.length=Math.max(this.length,O),b!==this&&(this.negative=1),this._strip()},o.prototype.sub=function(h){return this.clone().isub(h)};function X(h,u,p){p.negative=u.negative^h.negative;var b=h.length+u.length|0;p.length=b,b=b-1|0;var M=h.words[0]|0,D=u.words[0]|0,O=M*D,A=O&67108863,c=O/67108864|0;p.words[0]=A;for(var I=1;I<b;I++){for(var Z=c>>>26,nt=c&67108863,m=Math.min(I,u.length-1),H=Math.max(0,I-h.length+1);H<=m;H++){var R=I-H|0;M=h.words[R]|0,D=u.words[H]|0,O=M*D+nt,Z+=O/67108864|0,nt=O&67108863}p.words[I]=nt|0,c=Z|0}return c!==0?p.words[I]=c|0:p.length--,p._strip()}var G=function(h,u,p){var b=h.words,M=u.words,D=p.words,O=0,A,c,I,Z=b[0]|0,nt=Z&8191,m=Z>>>13,H=b[1]|0,R=H&8191,T=H>>>13,q=b[2]|0,y=q&8191,B=q>>>13,W=b[3]|0,st=W&8191,rt=W>>>13,Et=b[4]|0,It=Et&8191,bt=Et>>>13,me=b[5]|0,Pt=me&8191,At=me>>>13,Jt=b[6]|0,vt=Jt&8191,yt=Jt>>>13,re=b[7]|0,gt=re&8191,wt=re>>>13,Qt=b[8]|0,mt=Qt&8191,St=Qt>>>13,Wt=b[9]|0,Mt=Wt&8191,Dt=Wt>>>13,oe=M[0]|0,Ct=oe&8191,xt=oe>>>13,Te=M[1]|0,Vt=Te&8191,Xt=Te>>>13,Be=M[2]|0,Zt=Be&8191,te=Be>>>13,Xe=M[3]|0,Ut=Xe&8191,Rt=Xe>>>13,be=M[4]|0,Lt=be&8191,Tt=be>>>13,ve=M[5]|0,$t=ve&8191,kt=ve>>>13,Ae=M[6]|0,zt=Ae&8191,Ft=Ae>>>13,_e=M[7]|0,qt=_e&8191,Nt=_e>>>13,Ie=M[8]|0,jt=Ie&8191,ie=Ie>>>13,pr=M[9]|0,ne=pr&8191,Yt=pr>>>13;p.negative=h.negative^u.negative,p.length=19,A=Math.imul(nt,Ct),c=Math.imul(nt,xt),c=c+Math.imul(m,Ct)|0,I=Math.imul(m,xt);var rr=(O+A|0)+((c&8191)<<13)|0;O=(I+(c>>>13)|0)+(rr>>>26)|0,rr&=67108863,A=Math.imul(R,Ct),c=Math.imul(R,xt),c=c+Math.imul(T,Ct)|0,I=Math.imul(T,xt),A=A+Math.imul(nt,Vt)|0,c=c+Math.imul(nt,Xt)|0,c=c+Math.imul(m,Vt)|0,I=I+Math.imul(m,Xt)|0;var ir=(O+A|0)+((c&8191)<<13)|0;O=(I+(c>>>13)|0)+(ir>>>26)|0,ir&=67108863,A=Math.imul(y,Ct),c=Math.imul(y,xt),c=c+Math.imul(B,Ct)|0,I=Math.imul(B,xt),A=A+Math.imul(R,Vt)|0,c=c+Math.imul(R,Xt)|0,c=c+Math.imul(T,Vt)|0,I=I+Math.imul(T,Xt)|0,A=A+Math.imul(nt,Zt)|0,c=c+Math.imul(nt,te)|0,c=c+Math.imul(m,Zt)|0,I=I+Math.imul(m,te)|0;var nr=(O+A|0)+((c&8191)<<13)|0;O=(I+(c>>>13)|0)+(nr>>>26)|0,nr&=67108863,A=Math.imul(st,Ct),c=Math.imul(st,xt),c=c+Math.imul(rt,Ct)|0,I=Math.imul(rt,xt),A=A+Math.imul(y,Vt)|0,c=c+Math.imul(y,Xt)|0,c=c+Math.imul(B,Vt)|0,I=I+Math.imul(B,Xt)|0,A=A+Math.imul(R,Zt)|0,c=c+Math.imul(R,te)|0,c=c+Math.imul(T,Zt)|0,I=I+Math.imul(T,te)|0,A=A+Math.imul(nt,Ut)|0,c=c+Math.imul(nt,Rt)|0,c=c+Math.imul(m,Ut)|0,I=I+Math.imul(m,Rt)|0;var sr=(O+A|0)+((c&8191)<<13)|0;O=(I+(c>>>13)|0)+(sr>>>26)|0,sr&=67108863,A=Math.imul(It,Ct),c=Math.imul(It,xt),c=c+Math.imul(bt,Ct)|0,I=Math.imul(bt,xt),A=A+Math.imul(st,Vt)|0,c=c+Math.imul(st,Xt)|0,c=c+Math.imul(rt,Vt)|0,I=I+Math.imul(rt,Xt)|0,A=A+Math.imul(y,Zt)|0,c=c+Math.imul(y,te)|0,c=c+Math.imul(B,Zt)|0,I=I+Math.imul(B,te)|0,A=A+Math.imul(R,Ut)|0,c=c+Math.imul(R,Rt)|0,c=c+Math.imul(T,Ut)|0,I=I+Math.imul(T,Rt)|0,A=A+Math.imul(nt,Lt)|0,c=c+Math.imul(nt,Tt)|0,c=c+Math.imul(m,Lt)|0,I=I+Math.imul(m,Tt)|0;var or=(O+A|0)+((c&8191)<<13)|0;O=(I+(c>>>13)|0)+(or>>>26)|0,or&=67108863,A=Math.imul(Pt,Ct),c=Math.imul(Pt,xt),c=c+Math.imul(At,Ct)|0,I=Math.imul(At,xt),A=A+Math.imul(It,Vt)|0,c=c+Math.imul(It,Xt)|0,c=c+Math.imul(bt,Vt)|0,I=I+Math.imul(bt,Xt)|0,A=A+Math.imul(st,Zt)|0,c=c+Math.imul(st,te)|0,c=c+Math.imul(rt,Zt)|0,I=I+Math.imul(rt,te)|0,A=A+Math.imul(y,Ut)|0,c=c+Math.imul(y,Rt)|0,c=c+Math.imul(B,Ut)|0,I=I+Math.imul(B,Rt)|0,A=A+Math.imul(R,Lt)|0,c=c+Math.imul(R,Tt)|0,c=c+Math.imul(T,Lt)|0,I=I+Math.imul(T,Tt)|0,A=A+Math.imul(nt,$t)|0,c=c+Math.imul(nt,kt)|0,c=c+Math.imul(m,$t)|0,I=I+Math.imul(m,kt)|0;var ke=(O+A|0)+((c&8191)<<13)|0;O=(I+(c>>>13)|0)+(ke>>>26)|0,ke&=67108863,A=Math.imul(vt,Ct),c=Math.imul(vt,xt),c=c+Math.imul(yt,Ct)|0,I=Math.imul(yt,xt),A=A+Math.imul(Pt,Vt)|0,c=c+Math.imul(Pt,Xt)|0,c=c+Math.imul(At,Vt)|0,I=I+Math.imul(At,Xt)|0,A=A+Math.imul(It,Zt)|0,c=c+Math.imul(It,te)|0,c=c+Math.imul(bt,Zt)|0,I=I+Math.imul(bt,te)|0,A=A+Math.imul(st,Ut)|0,c=c+Math.imul(st,Rt)|0,c=c+Math.imul(rt,Ut)|0,I=I+Math.imul(rt,Rt)|0,A=A+Math.imul(y,Lt)|0,c=c+Math.imul(y,Tt)|0,c=c+Math.imul(B,Lt)|0,I=I+Math.imul(B,Tt)|0,A=A+Math.imul(R,$t)|0,c=c+Math.imul(R,kt)|0,c=c+Math.imul(T,$t)|0,I=I+Math.imul(T,kt)|0,A=A+Math.imul(nt,zt)|0,c=c+Math.imul(nt,Ft)|0,c=c+Math.imul(m,zt)|0,I=I+Math.imul(m,Ft)|0;var Wr=(O+A|0)+((c&8191)<<13)|0;O=(I+(c>>>13)|0)+(Wr>>>26)|0,Wr&=67108863,A=Math.imul(gt,Ct),c=Math.imul(gt,xt),c=c+Math.imul(wt,Ct)|0,I=Math.imul(wt,xt),A=A+Math.imul(vt,Vt)|0,c=c+Math.imul(vt,Xt)|0,c=c+Math.imul(yt,Vt)|0,I=I+Math.imul(yt,Xt)|0,A=A+Math.imul(Pt,Zt)|0,c=c+Math.imul(Pt,te)|0,c=c+Math.imul(At,Zt)|0,I=I+Math.imul(At,te)|0,A=A+Math.imul(It,Ut)|0,c=c+Math.imul(It,Rt)|0,c=c+Math.imul(bt,Ut)|0,I=I+Math.imul(bt,Rt)|0,A=A+Math.imul(st,Lt)|0,c=c+Math.imul(st,Tt)|0,c=c+Math.imul(rt,Lt)|0,I=I+Math.imul(rt,Tt)|0,A=A+Math.imul(y,$t)|0,c=c+Math.imul(y,kt)|0,c=c+Math.imul(B,$t)|0,I=I+Math.imul(B,kt)|0,A=A+Math.imul(R,zt)|0,c=c+Math.imul(R,Ft)|0,c=c+Math.imul(T,zt)|0,I=I+Math.imul(T,Ft)|0,A=A+Math.imul(nt,qt)|0,c=c+Math.imul(nt,Nt)|0,c=c+Math.imul(m,qt)|0,I=I+Math.imul(m,Nt)|0;var Xi=(O+A|0)+((c&8191)<<13)|0;O=(I+(c>>>13)|0)+(Xi>>>26)|0,Xi&=67108863,A=Math.imul(mt,Ct),c=Math.imul(mt,xt),c=c+Math.imul(St,Ct)|0,I=Math.imul(St,xt),A=A+Math.imul(gt,Vt)|0,c=c+Math.imul(gt,Xt)|0,c=c+Math.imul(wt,Vt)|0,I=I+Math.imul(wt,Xt)|0,A=A+Math.imul(vt,Zt)|0,c=c+Math.imul(vt,te)|0,c=c+Math.imul(yt,Zt)|0,I=I+Math.imul(yt,te)|0,A=A+Math.imul(Pt,Ut)|0,c=c+Math.imul(Pt,Rt)|0,c=c+Math.imul(At,Ut)|0,I=I+Math.imul(At,Rt)|0,A=A+Math.imul(It,Lt)|0,c=c+Math.imul(It,Tt)|0,c=c+Math.imul(bt,Lt)|0,I=I+Math.imul(bt,Tt)|0,A=A+Math.imul(st,$t)|0,c=c+Math.imul(st,kt)|0,c=c+Math.imul(rt,$t)|0,I=I+Math.imul(rt,kt)|0,A=A+Math.imul(y,zt)|0,c=c+Math.imul(y,Ft)|0,c=c+Math.imul(B,zt)|0,I=I+Math.imul(B,Ft)|0,A=A+Math.imul(R,qt)|0,c=c+Math.imul(R,Nt)|0,c=c+Math.imul(T,qt)|0,I=I+Math.imul(T,Nt)|0,A=A+Math.imul(nt,jt)|0,c=c+Math.imul(nt,ie)|0,c=c+Math.imul(m,jt)|0,I=I+Math.imul(m,ie)|0;var Xr=(O+A|0)+((c&8191)<<13)|0;O=(I+(c>>>13)|0)+(Xr>>>26)|0,Xr&=67108863,A=Math.imul(Mt,Ct),c=Math.imul(Mt,xt),c=c+Math.imul(Dt,Ct)|0,I=Math.imul(Dt,xt),A=A+Math.imul(mt,Vt)|0,c=c+Math.imul(mt,Xt)|0,c=c+Math.imul(St,Vt)|0,I=I+Math.imul(St,Xt)|0,A=A+Math.imul(gt,Zt)|0,c=c+Math.imul(gt,te)|0,c=c+Math.imul(wt,Zt)|0,I=I+Math.imul(wt,te)|0,A=A+Math.imul(vt,Ut)|0,c=c+Math.imul(vt,Rt)|0,c=c+Math.imul(yt,Ut)|0,I=I+Math.imul(yt,Rt)|0,A=A+Math.imul(Pt,Lt)|0,c=c+Math.imul(Pt,Tt)|0,c=c+Math.imul(At,Lt)|0,I=I+Math.imul(At,Tt)|0,A=A+Math.imul(It,$t)|0,c=c+Math.imul(It,kt)|0,c=c+Math.imul(bt,$t)|0,I=I+Math.imul(bt,kt)|0,A=A+Math.imul(st,zt)|0,c=c+Math.imul(st,Ft)|0,c=c+Math.imul(rt,zt)|0,I=I+Math.imul(rt,Ft)|0,A=A+Math.imul(y,qt)|0,c=c+Math.imul(y,Nt)|0,c=c+Math.imul(B,qt)|0,I=I+Math.imul(B,Nt)|0,A=A+Math.imul(R,jt)|0,c=c+Math.imul(R,ie)|0,c=c+Math.imul(T,jt)|0,I=I+Math.imul(T,ie)|0,A=A+Math.imul(nt,ne)|0,c=c+Math.imul(nt,Yt)|0,c=c+Math.imul(m,ne)|0,I=I+Math.imul(m,Yt)|0;var Zi=(O+A|0)+((c&8191)<<13)|0;O=(I+(c>>>13)|0)+(Zi>>>26)|0,Zi&=67108863,A=Math.imul(Mt,Vt),c=Math.imul(Mt,Xt),c=c+Math.imul(Dt,Vt)|0,I=Math.imul(Dt,Xt),A=A+Math.imul(mt,Zt)|0,c=c+Math.imul(mt,te)|0,c=c+Math.imul(St,Zt)|0,I=I+Math.imul(St,te)|0,A=A+Math.imul(gt,Ut)|0,c=c+Math.imul(gt,Rt)|0,c=c+Math.imul(wt,Ut)|0,I=I+Math.imul(wt,Rt)|0,A=A+Math.imul(vt,Lt)|0,c=c+Math.imul(vt,Tt)|0,c=c+Math.imul(yt,Lt)|0,I=I+Math.imul(yt,Tt)|0,A=A+Math.imul(Pt,$t)|0,c=c+Math.imul(Pt,kt)|0,c=c+Math.imul(At,$t)|0,I=I+Math.imul(At,kt)|0,A=A+Math.imul(It,zt)|0,c=c+Math.imul(It,Ft)|0,c=c+Math.imul(bt,zt)|0,I=I+Math.imul(bt,Ft)|0,A=A+Math.imul(st,qt)|0,c=c+Math.imul(st,Nt)|0,c=c+Math.imul(rt,qt)|0,I=I+Math.imul(rt,Nt)|0,A=A+Math.imul(y,jt)|0,c=c+Math.imul(y,ie)|0,c=c+Math.imul(B,jt)|0,I=I+Math.imul(B,ie)|0,A=A+Math.imul(R,ne)|0,c=c+Math.imul(R,Yt)|0,c=c+Math.imul(T,ne)|0,I=I+Math.imul(T,Yt)|0;var tn=(O+A|0)+((c&8191)<<13)|0;O=(I+(c>>>13)|0)+(tn>>>26)|0,tn&=67108863,A=Math.imul(Mt,Zt),c=Math.imul(Mt,te),c=c+Math.imul(Dt,Zt)|0,I=Math.imul(Dt,te),A=A+Math.imul(mt,Ut)|0,c=c+Math.imul(mt,Rt)|0,c=c+Math.imul(St,Ut)|0,I=I+Math.imul(St,Rt)|0,A=A+Math.imul(gt,Lt)|0,c=c+Math.imul(gt,Tt)|0,c=c+Math.imul(wt,Lt)|0,I=I+Math.imul(wt,Tt)|0,A=A+Math.imul(vt,$t)|0,c=c+Math.imul(vt,kt)|0,c=c+Math.imul(yt,$t)|0,I=I+Math.imul(yt,kt)|0,A=A+Math.imul(Pt,zt)|0,c=c+Math.imul(Pt,Ft)|0,c=c+Math.imul(At,zt)|0,I=I+Math.imul(At,Ft)|0,A=A+Math.imul(It,qt)|0,c=c+Math.imul(It,Nt)|0,c=c+Math.imul(bt,qt)|0,I=I+Math.imul(bt,Nt)|0,A=A+Math.imul(st,jt)|0,c=c+Math.imul(st,ie)|0,c=c+Math.imul(rt,jt)|0,I=I+Math.imul(rt,ie)|0,A=A+Math.imul(y,ne)|0,c=c+Math.imul(y,Yt)|0,c=c+Math.imul(B,ne)|0,I=I+Math.imul(B,Yt)|0;var Zr=(O+A|0)+((c&8191)<<13)|0;O=(I+(c>>>13)|0)+(Zr>>>26)|0,Zr&=67108863,A=Math.imul(Mt,Ut),c=Math.imul(Mt,Rt),c=c+Math.imul(Dt,Ut)|0,I=Math.imul(Dt,Rt),A=A+Math.imul(mt,Lt)|0,c=c+Math.imul(mt,Tt)|0,c=c+Math.imul(St,Lt)|0,I=I+Math.imul(St,Tt)|0,A=A+Math.imul(gt,$t)|0,c=c+Math.imul(gt,kt)|0,c=c+Math.imul(wt,$t)|0,I=I+Math.imul(wt,kt)|0,A=A+Math.imul(vt,zt)|0,c=c+Math.imul(vt,Ft)|0,c=c+Math.imul(yt,zt)|0,I=I+Math.imul(yt,Ft)|0,A=A+Math.imul(Pt,qt)|0,c=c+Math.imul(Pt,Nt)|0,c=c+Math.imul(At,qt)|0,I=I+Math.imul(At,Nt)|0,A=A+Math.imul(It,jt)|0,c=c+Math.imul(It,ie)|0,c=c+Math.imul(bt,jt)|0,I=I+Math.imul(bt,ie)|0,A=A+Math.imul(st,ne)|0,c=c+Math.imul(st,Yt)|0,c=c+Math.imul(rt,ne)|0,I=I+Math.imul(rt,Yt)|0;var Oi=(O+A|0)+((c&8191)<<13)|0;O=(I+(c>>>13)|0)+(Oi>>>26)|0,Oi&=67108863,A=Math.imul(Mt,Lt),c=Math.imul(Mt,Tt),c=c+Math.imul(Dt,Lt)|0,I=Math.imul(Dt,Tt),A=A+Math.imul(mt,$t)|0,c=c+Math.imul(mt,kt)|0,c=c+Math.imul(St,$t)|0,I=I+Math.imul(St,kt)|0,A=A+Math.imul(gt,zt)|0,c=c+Math.imul(gt,Ft)|0,c=c+Math.imul(wt,zt)|0,I=I+Math.imul(wt,Ft)|0,A=A+Math.imul(vt,qt)|0,c=c+Math.imul(vt,Nt)|0,c=c+Math.imul(yt,qt)|0,I=I+Math.imul(yt,Nt)|0,A=A+Math.imul(Pt,jt)|0,c=c+Math.imul(Pt,ie)|0,c=c+Math.imul(At,jt)|0,I=I+Math.imul(At,ie)|0,A=A+Math.imul(It,ne)|0,c=c+Math.imul(It,Yt)|0,c=c+Math.imul(bt,ne)|0,I=I+Math.imul(bt,Yt)|0;var Ni=(O+A|0)+((c&8191)<<13)|0;O=(I+(c>>>13)|0)+(Ni>>>26)|0,Ni&=67108863,A=Math.imul(Mt,$t),c=Math.imul(Mt,kt),c=c+Math.imul(Dt,$t)|0,I=Math.imul(Dt,kt),A=A+Math.imul(mt,zt)|0,c=c+Math.imul(mt,Ft)|0,c=c+Math.imul(St,zt)|0,I=I+Math.imul(St,Ft)|0,A=A+Math.imul(gt,qt)|0,c=c+Math.imul(gt,Nt)|0,c=c+Math.imul(wt,qt)|0,I=I+Math.imul(wt,Nt)|0,A=A+Math.imul(vt,jt)|0,c=c+Math.imul(vt,ie)|0,c=c+Math.imul(yt,jt)|0,I=I+Math.imul(yt,ie)|0,A=A+Math.imul(Pt,ne)|0,c=c+Math.imul(Pt,Yt)|0,c=c+Math.imul(At,ne)|0,I=I+Math.imul(At,Yt)|0;var gr=(O+A|0)+((c&8191)<<13)|0;O=(I+(c>>>13)|0)+(gr>>>26)|0,gr&=67108863,A=Math.imul(Mt,zt),c=Math.imul(Mt,Ft),c=c+Math.imul(Dt,zt)|0,I=Math.imul(Dt,Ft),A=A+Math.imul(mt,qt)|0,c=c+Math.imul(mt,Nt)|0,c=c+Math.imul(St,qt)|0,I=I+Math.imul(St,Nt)|0,A=A+Math.imul(gt,jt)|0,c=c+Math.imul(gt,ie)|0,c=c+Math.imul(wt,jt)|0,I=I+Math.imul(wt,ie)|0,A=A+Math.imul(vt,ne)|0,c=c+Math.imul(vt,Yt)|0,c=c+Math.imul(yt,ne)|0,I=I+Math.imul(yt,Yt)|0;var en=(O+A|0)+((c&8191)<<13)|0;O=(I+(c>>>13)|0)+(en>>>26)|0,en&=67108863,A=Math.imul(Mt,qt),c=Math.imul(Mt,Nt),c=c+Math.imul(Dt,qt)|0,I=Math.imul(Dt,Nt),A=A+Math.imul(mt,jt)|0,c=c+Math.imul(mt,ie)|0,c=c+Math.imul(St,jt)|0,I=I+Math.imul(St,ie)|0,A=A+Math.imul(gt,ne)|0,c=c+Math.imul(gt,Yt)|0,c=c+Math.imul(wt,ne)|0,I=I+Math.imul(wt,Yt)|0;var rn=(O+A|0)+((c&8191)<<13)|0;O=(I+(c>>>13)|0)+(rn>>>26)|0,rn&=67108863,A=Math.imul(Mt,jt),c=Math.imul(Mt,ie),c=c+Math.imul(Dt,jt)|0,I=Math.imul(Dt,ie),A=A+Math.imul(mt,ne)|0,c=c+Math.imul(mt,Yt)|0,c=c+Math.imul(St,ne)|0,I=I+Math.imul(St,Yt)|0;var nn=(O+A|0)+((c&8191)<<13)|0;O=(I+(c>>>13)|0)+(nn>>>26)|0,nn&=67108863,A=Math.imul(Mt,ne),c=Math.imul(Mt,Yt),c=c+Math.imul(Dt,ne)|0,I=Math.imul(Dt,Yt);var sn=(O+A|0)+((c&8191)<<13)|0;return O=(I+(c>>>13)|0)+(sn>>>26)|0,sn&=67108863,D[0]=rr,D[1]=ir,D[2]=nr,D[3]=sr,D[4]=or,D[5]=ke,D[6]=Wr,D[7]=Xi,D[8]=Xr,D[9]=Zi,D[10]=tn,D[11]=Zr,D[12]=Oi,D[13]=Ni,D[14]=gr,D[15]=en,D[16]=rn,D[17]=nn,D[18]=sn,O!==0&&(D[19]=O,p.length++),p};Math.imul||(G=X);function Y(h,u,p){p.negative=u.negative^h.negative,p.length=h.length+u.length;for(var b=0,M=0,D=0;D<p.length-1;D++){var O=M;M=0;for(var A=b&67108863,c=Math.min(D,u.length-1),I=Math.max(0,D-h.length+1);I<=c;I++){var Z=D-I,nt=h.words[Z]|0,m=u.words[I]|0,H=nt*m,R=H&67108863;O=O+(H/67108864|0)|0,R=R+A|0,A=R&67108863,O=O+(R>>>26)|0,M+=O>>>26,O&=67108863}p.words[D]=A,b=O,O=M}return b!==0?p.words[D]=b:p.length--,p._strip()}function $(h,u,p){return Y(h,u,p)}o.prototype.mulTo=function(h,u){var p,b=this.length+h.length;return this.length===10&&h.length===10?p=G(this,h,u):b<63?p=X(this,h,u):b<1024?p=Y(this,h,u):p=$(this,h,u),p},o.prototype.mul=function(h){var u=new o(null);return u.words=new Array(this.length+h.length),this.mulTo(h,u)},o.prototype.mulf=function(h){var u=new o(null);return u.words=new Array(this.length+h.length),$(this,h,u)},o.prototype.imul=function(h){return this.clone().mulTo(h,this)},o.prototype.imuln=function(h){var u=h<0;u&&(h=-h),i(typeof h=="number"),i(h<67108864);for(var p=0,b=0;b<this.length;b++){var M=(this.words[b]|0)*h,D=(M&67108863)+(p&67108863);p>>=26,p+=M/67108864|0,p+=D>>>26,this.words[b]=D&67108863}return p!==0&&(this.words[b]=p,this.length++),u?this.ineg():this},o.prototype.muln=function(h){return this.clone().imuln(h)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(h){var u=z(h);if(u.length===0)return new o(1);for(var p=this,b=0;b<u.length&&u[b]===0;b++,p=p.sqr());if(++b<u.length)for(var M=p.sqr();b<u.length;b++,M=M.sqr())u[b]!==0&&(p=p.mul(M));return p},o.prototype.iushln=function(h){i(typeof h=="number"&&h>=0);var u=h%26,p=(h-u)/26,b=67108863>>>26-u<<26-u,M;if(u!==0){var D=0;for(M=0;M<this.length;M++){var O=this.words[M]&b,A=(this.words[M]|0)-O<<u;this.words[M]=A|D,D=O>>>26-u}D&&(this.words[M]=D,this.length++)}if(p!==0){for(M=this.length-1;M>=0;M--)this.words[M+p]=this.words[M];for(M=0;M<p;M++)this.words[M]=0;this.length+=p}return this._strip()},o.prototype.ishln=function(h){return i(this.negative===0),this.iushln(h)},o.prototype.iushrn=function(h,u,p){i(typeof h=="number"&&h>=0);var b;u?b=(u-u%26)/26:b=0;var M=h%26,D=Math.min((h-M)/26,this.length),O=67108863^67108863>>>M<<M,A=p;if(b-=D,b=Math.max(0,b),A){for(var c=0;c<D;c++)A.words[c]=this.words[c];A.length=D}if(D!==0)if(this.length>D)for(this.length-=D,c=0;c<this.length;c++)this.words[c]=this.words[c+D];else this.words[0]=0,this.length=1;var I=0;for(c=this.length-1;c>=0&&(I!==0||c>=b);c--){var Z=this.words[c]|0;this.words[c]=I<<26-M|Z>>>M,I=Z&O}return A&&I!==0&&(A.words[A.length++]=I),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},o.prototype.ishrn=function(h,u,p){return i(this.negative===0),this.iushrn(h,u,p)},o.prototype.shln=function(h){return this.clone().ishln(h)},o.prototype.ushln=function(h){return this.clone().iushln(h)},o.prototype.shrn=function(h){return this.clone().ishrn(h)},o.prototype.ushrn=function(h){return this.clone().iushrn(h)},o.prototype.testn=function(h){i(typeof h=="number"&&h>=0);var u=h%26,p=(h-u)/26,b=1<<u;if(this.length<=p)return!1;var M=this.words[p];return!!(M&b)},o.prototype.imaskn=function(h){i(typeof h=="number"&&h>=0);var u=h%26,p=(h-u)/26;if(i(this.negative===0,"imaskn works only with positive numbers"),this.length<=p)return this;if(u!==0&&p++,this.length=Math.min(p,this.length),u!==0){var b=67108863^67108863>>>u<<u;this.words[this.length-1]&=b}return this._strip()},o.prototype.maskn=function(h){return this.clone().imaskn(h)},o.prototype.iaddn=function(h){return i(typeof h=="number"),i(h<67108864),h<0?this.isubn(-h):this.negative!==0?this.length===1&&(this.words[0]|0)<=h?(this.words[0]=h-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(h),this.negative=1,this):this._iaddn(h)},o.prototype._iaddn=function(h){this.words[0]+=h;for(var u=0;u<this.length&&this.words[u]>=67108864;u++)this.words[u]-=67108864,u===this.length-1?this.words[u+1]=1:this.words[u+1]++;return this.length=Math.max(this.length,u+1),this},o.prototype.isubn=function(h){if(i(typeof h=="number"),i(h<67108864),h<0)return this.iaddn(-h);if(this.negative!==0)return this.negative=0,this.iaddn(h),this.negative=1,this;if(this.words[0]-=h,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var u=0;u<this.length&&this.words[u]<0;u++)this.words[u]+=67108864,this.words[u+1]-=1;return this._strip()},o.prototype.addn=function(h){return this.clone().iaddn(h)},o.prototype.subn=function(h){return this.clone().isubn(h)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(h,u,p){var b=h.length+p,M;this._expand(b);var D,O=0;for(M=0;M<h.length;M++){D=(this.words[M+p]|0)+O;var A=(h.words[M]|0)*u;D-=A&67108863,O=(D>>26)-(A/67108864|0),this.words[M+p]=D&67108863}for(;M<this.length-p;M++)D=(this.words[M+p]|0)+O,O=D>>26,this.words[M+p]=D&67108863;if(O===0)return this._strip();for(i(O===-1),O=0,M=0;M<this.length;M++)D=-(this.words[M]|0)+O,O=D>>26,this.words[M]=D&67108863;return this.negative=1,this._strip()},o.prototype._wordDiv=function(h,u){var p=this.length-h.length,b=this.clone(),M=h,D=M.words[M.length-1]|0,O=this._countBits(D);p=26-O,p!==0&&(M=M.ushln(p),b.iushln(p),D=M.words[M.length-1]|0);var A=b.length-M.length,c;if(u!=="mod"){c=new o(null),c.length=A+1,c.words=new Array(c.length);for(var I=0;I<c.length;I++)c.words[I]=0}var Z=b.clone()._ishlnsubmul(M,1,A);Z.negative===0&&(b=Z,c&&(c.words[A]=1));for(var nt=A-1;nt>=0;nt--){var m=(b.words[M.length+nt]|0)*67108864+(b.words[M.length+nt-1]|0);for(m=Math.min(m/D|0,67108863),b._ishlnsubmul(M,m,nt);b.negative!==0;)m--,b.negative=0,b._ishlnsubmul(M,1,nt),b.isZero()||(b.negative^=1);c&&(c.words[nt]=m)}return c&&c._strip(),b._strip(),u!=="div"&&p!==0&&b.iushrn(p),{div:c||null,mod:b}},o.prototype.divmod=function(h,u,p){if(i(!h.isZero()),this.isZero())return{div:new o(0),mod:new o(0)};var b,M,D;return this.negative!==0&&h.negative===0?(D=this.neg().divmod(h,u),u!=="mod"&&(b=D.div.neg()),u!=="div"&&(M=D.mod.neg(),p&&M.negative!==0&&M.iadd(h)),{div:b,mod:M}):this.negative===0&&h.negative!==0?(D=this.divmod(h.neg(),u),u!=="mod"&&(b=D.div.neg()),{div:b,mod:D.mod}):this.negative&h.negative?(D=this.neg().divmod(h.neg(),u),u!=="div"&&(M=D.mod.neg(),p&&M.negative!==0&&M.isub(h)),{div:D.div,mod:M}):h.length>this.length||this.cmp(h)<0?{div:new o(0),mod:this}:h.length===1?u==="div"?{div:this.divn(h.words[0]),mod:null}:u==="mod"?{div:null,mod:new o(this.modrn(h.words[0]))}:{div:this.divn(h.words[0]),mod:new o(this.modrn(h.words[0]))}:this._wordDiv(h,u)},o.prototype.div=function(h){return this.divmod(h,"div",!1).div},o.prototype.mod=function(h){return this.divmod(h,"mod",!1).mod},o.prototype.umod=function(h){return this.divmod(h,"mod",!0).mod},o.prototype.divRound=function(h){var u=this.divmod(h);if(u.mod.isZero())return u.div;var p=u.div.negative!==0?u.mod.isub(h):u.mod,b=h.ushrn(1),M=h.andln(1),D=p.cmp(b);return D<0||M===1&&D===0?u.div:u.div.negative!==0?u.div.isubn(1):u.div.iaddn(1)},o.prototype.modrn=function(h){var u=h<0;u&&(h=-h),i(h<=67108863);for(var p=(1<<26)%h,b=0,M=this.length-1;M>=0;M--)b=(p*b+(this.words[M]|0))%h;return u?-b:b},o.prototype.modn=function(h){return this.modrn(h)},o.prototype.idivn=function(h){var u=h<0;u&&(h=-h),i(h<=67108863);for(var p=0,b=this.length-1;b>=0;b--){var M=(this.words[b]|0)+p*67108864;this.words[b]=M/h|0,p=M%h}return this._strip(),u?this.ineg():this},o.prototype.divn=function(h){return this.clone().idivn(h)},o.prototype.egcd=function(h){i(h.negative===0),i(!h.isZero());var u=this,p=h.clone();u.negative!==0?u=u.umod(h):u=u.clone();for(var b=new o(1),M=new o(0),D=new o(0),O=new o(1),A=0;u.isEven()&&p.isEven();)u.iushrn(1),p.iushrn(1),++A;for(var c=p.clone(),I=u.clone();!u.isZero();){for(var Z=0,nt=1;!(u.words[0]&nt)&&Z<26;++Z,nt<<=1);if(Z>0)for(u.iushrn(Z);Z-- >0;)(b.isOdd()||M.isOdd())&&(b.iadd(c),M.isub(I)),b.iushrn(1),M.iushrn(1);for(var m=0,H=1;!(p.words[0]&H)&&m<26;++m,H<<=1);if(m>0)for(p.iushrn(m);m-- >0;)(D.isOdd()||O.isOdd())&&(D.iadd(c),O.isub(I)),D.iushrn(1),O.iushrn(1);u.cmp(p)>=0?(u.isub(p),b.isub(D),M.isub(O)):(p.isub(u),D.isub(b),O.isub(M))}return{a:D,b:O,gcd:p.iushln(A)}},o.prototype._invmp=function(h){i(h.negative===0),i(!h.isZero());var u=this,p=h.clone();u.negative!==0?u=u.umod(h):u=u.clone();for(var b=new o(1),M=new o(0),D=p.clone();u.cmpn(1)>0&&p.cmpn(1)>0;){for(var O=0,A=1;!(u.words[0]&A)&&O<26;++O,A<<=1);if(O>0)for(u.iushrn(O);O-- >0;)b.isOdd()&&b.iadd(D),b.iushrn(1);for(var c=0,I=1;!(p.words[0]&I)&&c<26;++c,I<<=1);if(c>0)for(p.iushrn(c);c-- >0;)M.isOdd()&&M.iadd(D),M.iushrn(1);u.cmp(p)>=0?(u.isub(p),b.isub(M)):(p.isub(u),M.isub(b))}var Z;return u.cmpn(1)===0?Z=b:Z=M,Z.cmpn(0)<0&&Z.iadd(h),Z},o.prototype.gcd=function(h){if(this.isZero())return h.abs();if(h.isZero())return this.abs();var u=this.clone(),p=h.clone();u.negative=0,p.negative=0;for(var b=0;u.isEven()&&p.isEven();b++)u.iushrn(1),p.iushrn(1);do{for(;u.isEven();)u.iushrn(1);for(;p.isEven();)p.iushrn(1);var M=u.cmp(p);if(M<0){var D=u;u=p,p=D}else if(M===0||p.cmpn(1)===0)break;u.isub(p)}while(!0);return p.iushln(b)},o.prototype.invm=function(h){return this.egcd(h).a.umod(h)},o.prototype.isEven=function(){return(this.words[0]&1)===0},o.prototype.isOdd=function(){return(this.words[0]&1)===1},o.prototype.andln=function(h){return this.words[0]&h},o.prototype.bincn=function(h){i(typeof h=="number");var u=h%26,p=(h-u)/26,b=1<<u;if(this.length<=p)return this._expand(p+1),this.words[p]|=b,this;for(var M=b,D=p;M!==0&&D<this.length;D++){var O=this.words[D]|0;O+=M,M=O>>>26,O&=67108863,this.words[D]=O}return M!==0&&(this.words[D]=M,this.length++),this},o.prototype.isZero=function(){return this.length===1&&this.words[0]===0},o.prototype.cmpn=function(h){var u=h<0;if(this.negative!==0&&!u)return-1;if(this.negative===0&&u)return 1;this._strip();var p;if(this.length>1)p=1;else{u&&(h=-h),i(h<=67108863,"Number is too big");var b=this.words[0]|0;p=b===h?0:b<h?-1:1}return this.negative!==0?-p|0:p},o.prototype.cmp=function(h){if(this.negative!==0&&h.negative===0)return-1;if(this.negative===0&&h.negative!==0)return 1;var u=this.ucmp(h);return this.negative!==0?-u|0:u},o.prototype.ucmp=function(h){if(this.length>h.length)return 1;if(this.length<h.length)return-1;for(var u=0,p=this.length-1;p>=0;p--){var b=this.words[p]|0,M=h.words[p]|0;if(b!==M){b<M?u=-1:b>M&&(u=1);break}}return u},o.prototype.gtn=function(h){return this.cmpn(h)===1},o.prototype.gt=function(h){return this.cmp(h)===1},o.prototype.gten=function(h){return this.cmpn(h)>=0},o.prototype.gte=function(h){return this.cmp(h)>=0},o.prototype.ltn=function(h){return this.cmpn(h)===-1},o.prototype.lt=function(h){return this.cmp(h)===-1},o.prototype.lten=function(h){return this.cmpn(h)<=0},o.prototype.lte=function(h){return this.cmp(h)<=0},o.prototype.eqn=function(h){return this.cmpn(h)===0},o.prototype.eq=function(h){return this.cmp(h)===0},o.red=function(h){return new ht(h)},o.prototype.toRed=function(h){return i(!this.red,"Already a number in reduction context"),i(this.negative===0,"red works only with positives"),h.convertTo(this)._forceRed(h)},o.prototype.fromRed=function(){return i(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(h){return this.red=h,this},o.prototype.forceRed=function(h){return i(!this.red,"Already a number in reduction context"),this._forceRed(h)},o.prototype.redAdd=function(h){return i(this.red,"redAdd works only with red numbers"),this.red.add(this,h)},o.prototype.redIAdd=function(h){return i(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,h)},o.prototype.redSub=function(h){return i(this.red,"redSub works only with red numbers"),this.red.sub(this,h)},o.prototype.redISub=function(h){return i(this.red,"redISub works only with red numbers"),this.red.isub(this,h)},o.prototype.redShl=function(h){return i(this.red,"redShl works only with red numbers"),this.red.shl(this,h)},o.prototype.redMul=function(h){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,h),this.red.mul(this,h)},o.prototype.redIMul=function(h){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,h),this.red.imul(this,h)},o.prototype.redSqr=function(){return i(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return i(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return i(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return i(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return i(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(h){return i(this.red&&!h.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,h)};var j={k256:null,p224:null,p192:null,p25519:null};function k(h,u){this.name=h,this.p=new o(u,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}k.prototype._tmp=function(){var h=new o(null);return h.words=new Array(Math.ceil(this.n/13)),h},k.prototype.ireduce=function(h){var u=h,p;do this.split(u,this.tmp),u=this.imulK(u),u=u.iadd(this.tmp),p=u.bitLength();while(p>this.n);var b=p<this.n?-1:u.ucmp(this.p);return b===0?(u.words[0]=0,u.length=1):b>0?u.isub(this.p):u.strip!==void 0?u.strip():u._strip(),u},k.prototype.split=function(h,u){h.iushrn(this.n,0,u)},k.prototype.imulK=function(h){return h.imul(this.k)};function _(){k.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}n(_,k),_.prototype.split=function(h,u){for(var p=4194303,b=Math.min(h.length,9),M=0;M<b;M++)u.words[M]=h.words[M];if(u.length=b,h.length<=9){h.words[0]=0,h.length=1;return}var D=h.words[9];for(u.words[u.length++]=D&p,M=10;M<h.length;M++){var O=h.words[M]|0;h.words[M-10]=(O&p)<<4|D>>>22,D=O}D>>>=22,h.words[M-10]=D,D===0&&h.length>10?h.length-=10:h.length-=9},_.prototype.imulK=function(h){h.words[h.length]=0,h.words[h.length+1]=0,h.length+=2;for(var u=0,p=0;p<h.length;p++){var b=h.words[p]|0;u+=b*977,h.words[p]=u&67108863,u=b*64+(u/67108864|0)}return h.words[h.length-1]===0&&(h.length--,h.words[h.length-1]===0&&h.length--),h};function L(){k.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}n(L,k);function ot(){k.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}n(ot,k);function ct(){k.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}n(ct,k),ct.prototype.imulK=function(h){for(var u=0,p=0;p<h.length;p++){var b=(h.words[p]|0)*19+u,M=b&67108863;b>>>=26,h.words[p]=M,u=b}return u!==0&&(h.words[h.length++]=u),h},o._prime=function(h){if(j[h])return j[h];var u;if(h==="k256")u=new _;else if(h==="p224")u=new L;else if(h==="p192")u=new ot;else if(h==="p25519")u=new ct;else throw new Error("Unknown prime "+h);return j[h]=u,u};function ht(h){if(typeof h=="string"){var u=o._prime(h);this.m=u.p,this.prime=u}else i(h.gtn(1),"modulus must be greater than 1"),this.m=h,this.prime=null}ht.prototype._verify1=function(h){i(h.negative===0,"red works only with positives"),i(h.red,"red works only with red numbers")},ht.prototype._verify2=function(h,u){i((h.negative|u.negative)===0,"red works only with positives"),i(h.red&&h.red===u.red,"red works only with red numbers")},ht.prototype.imod=function(h){return this.prime?this.prime.ireduce(h)._forceRed(this):(w(h,h.umod(this.m)._forceRed(this)),h)},ht.prototype.neg=function(h){return h.isZero()?h.clone():this.m.sub(h)._forceRed(this)},ht.prototype.add=function(h,u){this._verify2(h,u);var p=h.add(u);return p.cmp(this.m)>=0&&p.isub(this.m),p._forceRed(this)},ht.prototype.iadd=function(h,u){this._verify2(h,u);var p=h.iadd(u);return p.cmp(this.m)>=0&&p.isub(this.m),p},ht.prototype.sub=function(h,u){this._verify2(h,u);var p=h.sub(u);return p.cmpn(0)<0&&p.iadd(this.m),p._forceRed(this)},ht.prototype.isub=function(h,u){this._verify2(h,u);var p=h.isub(u);return p.cmpn(0)<0&&p.iadd(this.m),p},ht.prototype.shl=function(h,u){return this._verify1(h),this.imod(h.ushln(u))},ht.prototype.imul=function(h,u){return this._verify2(h,u),this.imod(h.imul(u))},ht.prototype.mul=function(h,u){return this._verify2(h,u),this.imod(h.mul(u))},ht.prototype.isqr=function(h){return this.imul(h,h.clone())},ht.prototype.sqr=function(h){return this.mul(h,h)},ht.prototype.sqrt=function(h){if(h.isZero())return h.clone();var u=this.m.andln(3);if(i(u%2===1),u===3){var p=this.m.add(new o(1)).iushrn(2);return this.pow(h,p)}for(var b=this.m.subn(1),M=0;!b.isZero()&&b.andln(1)===0;)M++,b.iushrn(1);i(!b.isZero());var D=new o(1).toRed(this),O=D.redNeg(),A=this.m.subn(1).iushrn(1),c=this.m.bitLength();for(c=new o(2*c*c).toRed(this);this.pow(c,A).cmp(O)!==0;)c.redIAdd(O);for(var I=this.pow(c,b),Z=this.pow(h,b.addn(1).iushrn(1)),nt=this.pow(h,b),m=M;nt.cmp(D)!==0;){for(var H=nt,R=0;H.cmp(D)!==0;R++)H=H.redSqr();i(R<m);var T=this.pow(I,new o(1).iushln(m-R-1));Z=Z.redMul(T),I=T.redSqr(),nt=nt.redMul(I),m=R}return Z},ht.prototype.invm=function(h){var u=h._invmp(this.m);return u.negative!==0?(u.negative=0,this.imod(u).redNeg()):this.imod(u)},ht.prototype.pow=function(h,u){if(u.isZero())return new o(1).toRed(this);if(u.cmpn(1)===0)return h.clone();var p=4,b=new Array(1<<p);b[0]=new o(1).toRed(this),b[1]=h;for(var M=2;M<b.length;M++)b[M]=this.mul(b[M-1],h);var D=b[0],O=0,A=0,c=u.bitLength()%26;for(c===0&&(c=26),M=u.length-1;M>=0;M--){for(var I=u.words[M],Z=c-1;Z>=0;Z--){var nt=I>>Z&1;if(D!==b[0]&&(D=this.sqr(D)),nt===0&&O===0){A=0;continue}O<<=1,O|=nt,A++,!(A!==p&&(M!==0||Z!==0))&&(D=this.mul(D,b[O]),A=0,O=0)}c=26}return D},ht.prototype.convertTo=function(h){var u=h.umod(this.m);return u===h?u.clone():u},ht.prototype.convertFrom=function(h){var u=h.clone();return u.red=null,u},o.mont=function(h){return new _t(h)};function _t(h){ht.call(this,h),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}n(_t,ht),_t.prototype.convertTo=function(h){return this.imod(h.ushln(this.shift))},_t.prototype.convertFrom=function(h){var u=this.imod(h.mul(this.rinv));return u.red=null,u},_t.prototype.imul=function(h,u){if(h.isZero()||u.isZero())return h.words[0]=0,h.length=1,h;var p=h.imul(u),b=p.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),M=p.isub(b).iushrn(this.shift),D=M;return M.cmp(this.m)>=0?D=M.isub(this.m):M.cmpn(0)<0&&(D=M.iadd(this.m)),D._forceRed(this)},_t.prototype.mul=function(h,u){if(h.isZero()||u.isZero())return new o(0)._forceRed(this);var p=h.mul(u),b=p.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),M=p.isub(b).iushrn(this.shift),D=M;return M.cmp(this.m)>=0?D=M.isub(this.m):M.cmpn(0)<0&&(D=M.iadd(this.m)),D._forceRed(this)},_t.prototype.invm=function(h){var u=this.imod(h._invmp(this.m).mul(this.r2));return u._forceRed(this)}})(e,ty)})(ny);var de=ny.exports;const sy="bignumber/5.7.0";var fc=de.BN;const fs=new Or(sy),ml={},pg=9007199254740991;function yI(e){return e!=null&&(Jr.isBigNumber(e)||typeof e=="number"&&e%1===0||typeof e=="string"&&!!e.match(/^-?[0-9]+$/)||Mi(e)||typeof e=="bigint"||da(e))}let gg=!1,Jr=class gn{constructor(t,r){t!==ml&&fs.throwError("cannot call constructor directly; use BigNumber.from",Or.errors.UNSUPPORTED_OPERATION,{operation:"new (BigNumber)"}),this._hex=r,this._isBigNumber=!0,Object.freeze(this)}fromTwos(t){return oi(xe(this).fromTwos(t))}toTwos(t){return oi(xe(this).toTwos(t))}abs(){return this._hex[0]==="-"?gn.from(this._hex.substring(1)):this}add(t){return oi(xe(this).add(xe(t)))}sub(t){return oi(xe(this).sub(xe(t)))}div(t){return gn.from(t).isZero()&&zi("division-by-zero","div"),oi(xe(this).div(xe(t)))}mul(t){return oi(xe(this).mul(xe(t)))}mod(t){const r=xe(t);return r.isNeg()&&zi("division-by-zero","mod"),oi(xe(this).umod(r))}pow(t){const r=xe(t);return r.isNeg()&&zi("negative-power","pow"),oi(xe(this).pow(r))}and(t){const r=xe(t);return(this.isNegative()||r.isNeg())&&zi("unbound-bitwise-result","and"),oi(xe(this).and(r))}or(t){const r=xe(t);return(this.isNegative()||r.isNeg())&&zi("unbound-bitwise-result","or"),oi(xe(this).or(r))}xor(t){const r=xe(t);return(this.isNegative()||r.isNeg())&&zi("unbound-bitwise-result","xor"),oi(xe(this).xor(r))}mask(t){return(this.isNegative()||t<0)&&zi("negative-width","mask"),oi(xe(this).maskn(t))}shl(t){return(this.isNegative()||t<0)&&zi("negative-width","shl"),oi(xe(this).shln(t))}shr(t){return(this.isNegative()||t<0)&&zi("negative-width","shr"),oi(xe(this).shrn(t))}eq(t){return xe(this).eq(xe(t))}lt(t){return xe(this).lt(xe(t))}lte(t){return xe(this).lte(xe(t))}gt(t){return xe(this).gt(xe(t))}gte(t){return xe(this).gte(xe(t))}isNegative(){return this._hex[0]==="-"}isZero(){return xe(this).isZero()}toNumber(){try{return xe(this).toNumber()}catch{zi("overflow","toNumber",this.toString())}return null}toBigInt(){try{return BigInt(this.toString())}catch{}return fs.throwError("this platform does not support BigInt",Or.errors.UNSUPPORTED_OPERATION,{value:this.toString()})}toString(){return arguments.length>0&&(arguments[0]===10?gg||(gg=!0,fs.warn("BigNumber.toString does not accept any parameters; base-10 is assumed")):arguments[0]===16?fs.throwError("BigNumber.toString does not accept any parameters; use bigNumber.toHexString()",Or.errors.UNEXPECTED_ARGUMENT,{}):fs.throwError("BigNumber.toString does not accept parameters",Or.errors.UNEXPECTED_ARGUMENT,{})),xe(this).toString(10)}toHexString(){return this._hex}toJSON(t){return{type:"BigNumber",hex:this.toHexString()}}static from(t){if(t instanceof gn)return t;if(typeof t=="string")return t.match(/^-?0x[0-9a-f]+$/i)?new gn(ml,hh(t)):t.match(/^-?[0-9]+$/)?new gn(ml,hh(new fc(t))):fs.throwArgumentError("invalid BigNumber string","value",t);if(typeof t=="number")return t%1&&zi("underflow","BigNumber.from",t),(t>=pg||t<=-pg)&&zi("overflow","BigNumber.from",t),gn.from(String(t));const r=t;if(typeof r=="bigint")return gn.from(r.toString());if(da(r))return gn.from(ui(r));if(r)if(r.toHexString){const i=r.toHexString();if(typeof i=="string")return gn.from(i)}else{let i=r._hex;if(i==null&&r.type==="BigNumber"&&(i=r.hex),typeof i=="string"&&(Mi(i)||i[0]==="-"&&Mi(i.substring(1))))return gn.from(i)}return fs.throwArgumentError("invalid BigNumber value","value",t)}static isBigNumber(t){return!!(t&&t._isBigNumber)}};function hh(e){if(typeof e!="string")return hh(e.toString(16));if(e[0]==="-")return e=e.substring(1),e[0]==="-"&&fs.throwArgumentError("invalid hex","value",e),e=hh(e),e==="0x00"?e:"-"+e;if(e.substring(0,2)!=="0x"&&(e="0x"+e),e==="0x")return"0x00";for(e.length%2&&(e="0x0"+e.substring(2));e.length>4&&e.substring(0,4)==="0x00";)e="0x"+e.substring(4);return e}function oi(e){return Jr.from(hh(e))}function xe(e){const t=Jr.from(e).toHexString();return t[0]==="-"?new fc("-"+t.substring(3),16):new fc(t.substring(2),16)}function zi(e,t,r){const i={fault:e,operation:t};return r!=null&&(i.value=r),fs.throwError(e,Or.errors.NUMERIC_FAULT,i)}function wI(e){return new fc(e,36).toString(16)}const Gr=new Or(sy),Za={},oy=Jr.from(0),ay=Jr.from(-1);function hy(e,t,r,i){const n={fault:t,operation:r};return i!==void 0&&(n.value=i),Gr.throwError(e,Or.errors.NUMERIC_FAULT,n)}let th="0";for(;th.length<256;)th+=th;function j0(e){if(typeof e!="number")try{e=Jr.from(e).toNumber()}catch{}return typeof e=="number"&&e>=0&&e<=256&&!(e%1)?"1"+th.substring(0,e):Gr.throwArgumentError("invalid decimal size","decimals",e)}function vl(e,t){t==null&&(t=0);const r=j0(t);e=Jr.from(e);const i=e.lt(oy);i&&(e=e.mul(ay));let n=e.mod(r).toString();for(;n.length<r.length-1;)n="0"+n;n=n.match(/^([0-9]*[1-9]|0)(0*)/)[1];const o=e.div(r).toString();return r.length===1?e=o:e=o+"."+n,i&&(e="-"+e),e}function os(e,t){t==null&&(t=0);const r=j0(t);(typeof e!="string"||!e.match(/^-?[0-9.]+$/))&&Gr.throwArgumentError("invalid decimal value","value",e);const i=e.substring(0,1)==="-";i&&(e=e.substring(1)),e==="."&&Gr.throwArgumentError("missing value","value",e);const n=e.split(".");n.length>2&&Gr.throwArgumentError("too many decimal points","value",e);let o=n[0],f=n[1];for(o||(o="0"),f||(f="0");f[f.length-1]==="0";)f=f.substring(0,f.length-1);for(f.length>r.length-1&&hy("fractional component exceeds decimals","underflow","parseFixed"),f===""&&(f="0");f.length<r.length-1;)f+="0";const d=Jr.from(o),v=Jr.from(f);let g=d.mul(r).add(v);return i&&(g=g.mul(ay)),g}let yl=class a0{constructor(t,r,i,n){t!==Za&&Gr.throwError("cannot use FixedFormat constructor; use FixedFormat.from",Or.errors.UNSUPPORTED_OPERATION,{operation:"new FixedFormat"}),this.signed=r,this.width=i,this.decimals=n,this.name=(r?"":"u")+"fixed"+String(i)+"x"+String(n),this._multiplier=j0(n),Object.freeze(this)}static from(t){if(t instanceof a0)return t;typeof t=="number"&&(t=`fixed128x${t}`);let r=!0,i=128,n=18;if(typeof t=="string"){if(t!=="fixed")if(t==="ufixed")r=!1;else{const o=t.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);o||Gr.throwArgumentError("invalid fixed format","format",t),r=o[1]!=="u",i=parseInt(o[2]),n=parseInt(o[3])}}else if(t){const o=(f,d,v)=>t[f]==null?v:(typeof t[f]!==d&&Gr.throwArgumentError("invalid fixed format ("+f+" not "+d+")","format."+f,t[f]),t[f]);r=o("signed","boolean",r),i=o("width","number",i),n=o("decimals","number",n)}return i%8&&Gr.throwArgumentError("invalid fixed format width (not byte aligned)","format.width",i),n>80&&Gr.throwArgumentError("invalid fixed format (decimals too large)","format.decimals",n),new a0(Za,r,i,n)}},uy=class Hr{constructor(t,r,i,n){t!==Za&&Gr.throwError("cannot use FixedNumber constructor; use FixedNumber.from",Or.errors.UNSUPPORTED_OPERATION,{operation:"new FixedFormat"}),this.format=n,this._hex=r,this._value=i,this._isFixedNumber=!0,Object.freeze(this)}_checkFormat(t){this.format.name!==t.format.name&&Gr.throwArgumentError("incompatible format; use fixedNumber.toFormat","other",t)}addUnsafe(t){this._checkFormat(t);const r=os(this._value,this.format.decimals),i=os(t._value,t.format.decimals);return Hr.fromValue(r.add(i),this.format.decimals,this.format)}subUnsafe(t){this._checkFormat(t);const r=os(this._value,this.format.decimals),i=os(t._value,t.format.decimals);return Hr.fromValue(r.sub(i),this.format.decimals,this.format)}mulUnsafe(t){this._checkFormat(t);const r=os(this._value,this.format.decimals),i=os(t._value,t.format.decimals);return Hr.fromValue(r.mul(i).div(this.format._multiplier),this.format.decimals,this.format)}divUnsafe(t){this._checkFormat(t);const r=os(this._value,this.format.decimals),i=os(t._value,t.format.decimals);return Hr.fromValue(r.mul(this.format._multiplier).div(i),this.format.decimals,this.format)}floor(){const t=this.toString().split(".");t.length===1&&t.push("0");let r=Hr.from(t[0],this.format);const i=!t[1].match(/^(0*)$/);return this.isNegative()&&i&&(r=r.subUnsafe(mg.toFormat(r.format))),r}ceiling(){const t=this.toString().split(".");t.length===1&&t.push("0");let r=Hr.from(t[0],this.format);const i=!t[1].match(/^(0*)$/);return!this.isNegative()&&i&&(r=r.addUnsafe(mg.toFormat(r.format))),r}round(t){t==null&&(t=0);const r=this.toString().split(".");if(r.length===1&&r.push("0"),(t<0||t>80||t%1)&&Gr.throwArgumentError("invalid decimal count","decimals",t),r[1].length<=t)return this;const i=Hr.from("1"+th.substring(0,t),this.format),n=bI.toFormat(this.format);return this.mulUnsafe(i).addUnsafe(n).floor().divUnsafe(i)}isZero(){return this._value==="0.0"||this._value==="0"}isNegative(){return this._value[0]==="-"}toString(){return this._value}toHexString(t){if(t==null)return this._hex;t%8&&Gr.throwArgumentError("invalid byte width","width",t);const r=Jr.from(this._hex).fromTwos(this.format.width).toTwos(t).toHexString();return jn(r,t/8)}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(t){return Hr.fromString(this._value,t)}static fromValue(t,r,i){return i==null&&r!=null&&!yI(r)&&(i=r,r=null),r==null&&(r=0),i==null&&(i="fixed"),Hr.fromString(vl(t,r),yl.from(i))}static fromString(t,r){r==null&&(r="fixed");const i=yl.from(r),n=os(t,i.decimals);!i.signed&&n.lt(oy)&&hy("unsigned value cannot be negative","overflow","value",t);let o=null;i.signed?o=n.toTwos(i.width).toHexString():(o=n.toHexString(),o=jn(o,i.width/8));const f=vl(n,i.decimals);return new Hr(Za,o,f,i)}static fromBytes(t,r){r==null&&(r="fixed");const i=yl.from(r);if(er(t).length>i.width/8)throw new Error("overflow");let n=Jr.from(t);i.signed&&(n=n.fromTwos(i.width));const o=n.toTwos((i.signed?0:1)+i.width).toHexString(),f=vl(n,i.decimals);return new Hr(Za,o,f,i)}static from(t,r){if(typeof t=="string")return Hr.fromString(t,r);if(da(t))return Hr.fromBytes(t,r);try{return Hr.fromValue(t,0,r)}catch(i){if(i.code!==Or.errors.INVALID_ARGUMENT)throw i}return Gr.throwArgumentError("invalid FixedNumber value","value",t)}static isFixedNumber(t){return!!(t&&t._isFixedNumber)}};const mg=uy.from(1),bI=uy.from("0.5"),AI="strings/5.7.0",_I=new Or(AI);var lc;(function(e){e.current="",e.NFC="NFC",e.NFD="NFD",e.NFKC="NFKC",e.NFKD="NFKD"})(lc||(lc={}));var vg;(function(e){e.UNEXPECTED_CONTINUE="unexpected continuation byte",e.BAD_PREFIX="bad codepoint prefix",e.OVERRUN="string overrun",e.MISSING_CONTINUE="missing continuation byte",e.OUT_OF_RANGE="out of UTF-8 range",e.UTF16_SURROGATE="UTF-16 surrogate",e.OVERLONG="overlong representation"})(vg||(vg={}));function wl(e,t=lc.current){t!=lc.current&&(_I.checkNormalize(),e=e.normalize(t));let r=[];for(let i=0;i<e.length;i++){const n=e.charCodeAt(i);if(n<128)r.push(n);else if(n<2048)r.push(n>>6|192),r.push(n&63|128);else if((n&64512)==55296){i++;const o=e.charCodeAt(i);if(i>=e.length||(o&64512)!==56320)throw new Error("invalid utf-8 string");const f=65536+((n&1023)<<10)+(o&1023);r.push(f>>18|240),r.push(f>>12&63|128),r.push(f>>6&63|128),r.push(f&63|128)}else r.push(n>>12|224),r.push(n>>6&63|128),r.push(n&63|128)}return er(r)}function EI(e){if(e.length%4!==0)throw new Error("bad data");let t=[];for(let r=0;r<e.length;r+=4)t.push(parseInt(e.substring(r,r+4),16));return t}function bl(e,t){t||(t=function(n){return[parseInt(n,16)]});let r=0,i={};return e.split(",").forEach(n=>{let o=n.split(":");r+=parseInt(o[0],16),i[r]=t(o[1])}),i}function yg(e){let t=0;return e.split(",").map(r=>{let i=r.split("-");i.length===1?i[1]="0":i[1]===""&&(i[1]="1");let n=t+parseInt(i[0],16);return t=parseInt(i[1],16),{l:n,h:t}})}yg("221,13-1b,5f-,40-10,51-f,11-3,3-3,2-2,2-4,8,2,15,2d,28-8,88,48,27-,3-5,11-20,27-,8,28,3-5,12,18,b-a,1c-4,6-16,2-d,2-2,2,1b-4,17-9,8f-,10,f,1f-2,1c-34,33-14e,4,36-,13-,6-2,1a-f,4,9-,3-,17,8,2-2,5-,2,8-,3-,4-8,2-3,3,6-,16-6,2-,7-3,3-,17,8,3,3,3-,2,6-3,3-,4-a,5,2-6,10-b,4,8,2,4,17,8,3,6-,b,4,4-,2-e,2-4,b-10,4,9-,3-,17,8,3-,5-,9-2,3-,4-7,3-3,3,4-3,c-10,3,7-2,4,5-2,3,2,3-2,3-2,4-2,9,4-3,6-2,4,5-8,2-e,d-d,4,9,4,18,b,6-3,8,4,5-6,3-8,3-3,b-11,3,9,4,18,b,6-3,8,4,5-6,3-6,2,3-3,b-11,3,9,4,18,11-3,7-,4,5-8,2-7,3-3,b-11,3,13-2,19,a,2-,8-2,2-3,7,2,9-11,4-b,3b-3,1e-24,3,2-,3,2-,2-5,5,8,4,2,2-,3,e,4-,6,2,7-,b-,3-21,49,23-5,1c-3,9,25,10-,2-2f,23,6,3,8-2,5-5,1b-45,27-9,2a-,2-3,5b-4,45-4,53-5,8,40,2,5-,8,2,5-,28,2,5-,20,2,5-,8,2,5-,8,8,18,20,2,5-,8,28,14-5,1d-22,56-b,277-8,1e-2,52-e,e,8-a,18-8,15-b,e,4,3-b,5e-2,b-15,10,b-5,59-7,2b-555,9d-3,5b-5,17-,7-,27-,7-,9,2,2,2,20-,36,10,f-,7,14-,4,a,54-3,2-6,6-5,9-,1c-10,13-1d,1c-14,3c-,10-6,32-b,240-30,28-18,c-14,a0,115-,3,66-,b-76,5,5-,1d,24,2,5-2,2,8-,35-2,19,f-10,1d-3,311-37f,1b,5a-b,d7-19,d-3,41,57-,68-4,29-3,5f,29-37,2e-2,25-c,2c-2,4e-3,30,78-3,64-,20,19b7-49,51a7-59,48e-2,38-738,2ba5-5b,222f-,3c-94,8-b,6-4,1b,6,2,3,3,6d-20,16e-f,41-,37-7,2e-2,11-f,5-b,18-,b,14,5-3,6,88-,2,bf-2,7-,7-,7-,4-2,8,8-9,8-2ff,20,5-b,1c-b4,27-,27-cbb1,f7-9,28-2,b5-221,56,48,3-,2-,3-,5,d,2,5,3,42,5-,9,8,1d,5,6,2-2,8,153-3,123-3,33-27fd,a6da-5128,21f-5df,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3,2-1d,61-ff7d"),"ad,34f,1806,180b,180c,180d,200b,200c,200d,2060,feff".split(",").map(e=>parseInt(e,16)),bl("b5:3bc,c3:ff,7:73,2:253,5:254,3:256,1:257,5:259,1:25b,3:260,1:263,2:269,1:268,5:26f,1:272,2:275,7:280,3:283,5:288,3:28a,1:28b,5:292,3f:195,1:1bf,29:19e,125:3b9,8b:3b2,1:3b8,1:3c5,3:3c6,1:3c0,1a:3ba,1:3c1,1:3c3,2:3b8,1:3b5,1bc9:3b9,1c:1f76,1:1f77,f:1f7a,1:1f7b,d:1f78,1:1f79,1:1f7c,1:1f7d,107:63,5:25b,4:68,1:68,1:68,3:69,1:69,1:6c,3:6e,4:70,1:71,1:72,1:72,1:72,7:7a,2:3c9,2:7a,2:6b,1:e5,1:62,1:63,3:65,1:66,2:6d,b:3b3,1:3c0,6:64,1b574:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3"),bl("179:1,2:1,2:1,5:1,2:1,a:4f,a:1,8:1,2:1,2:1,3:1,5:1,3:1,4:1,2:1,3:1,4:1,8:2,1:1,2:2,1:1,2:2,27:2,195:26,2:25,1:25,1:25,2:40,2:3f,1:3f,33:1,11:-6,1:-9,1ac7:-3a,6d:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,b:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,c:-8,2:-8,2:-8,2:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,49:-8,1:-8,1:-4a,1:-4a,d:-56,1:-56,1:-56,1:-56,d:-8,1:-8,f:-8,1:-8,3:-7"),bl("df:00730073,51:00690307,19:02BC006E,a7:006A030C,18a:002003B9,16:03B903080301,20:03C503080301,1d7:05650582,190f:00680331,1:00740308,1:0077030A,1:0079030A,1:006102BE,b6:03C50313,2:03C503130300,2:03C503130301,2:03C503130342,2a:1F0003B9,1:1F0103B9,1:1F0203B9,1:1F0303B9,1:1F0403B9,1:1F0503B9,1:1F0603B9,1:1F0703B9,1:1F0003B9,1:1F0103B9,1:1F0203B9,1:1F0303B9,1:1F0403B9,1:1F0503B9,1:1F0603B9,1:1F0703B9,1:1F2003B9,1:1F2103B9,1:1F2203B9,1:1F2303B9,1:1F2403B9,1:1F2503B9,1:1F2603B9,1:1F2703B9,1:1F2003B9,1:1F2103B9,1:1F2203B9,1:1F2303B9,1:1F2403B9,1:1F2503B9,1:1F2603B9,1:1F2703B9,1:1F6003B9,1:1F6103B9,1:1F6203B9,1:1F6303B9,1:1F6403B9,1:1F6503B9,1:1F6603B9,1:1F6703B9,1:1F6003B9,1:1F6103B9,1:1F6203B9,1:1F6303B9,1:1F6403B9,1:1F6503B9,1:1F6603B9,1:1F6703B9,3:1F7003B9,1:03B103B9,1:03AC03B9,2:03B10342,1:03B1034203B9,5:03B103B9,6:1F7403B9,1:03B703B9,1:03AE03B9,2:03B70342,1:03B7034203B9,5:03B703B9,6:03B903080300,1:03B903080301,3:03B90342,1:03B903080342,b:03C503080300,1:03C503080301,1:03C10313,2:03C50342,1:03C503080342,b:1F7C03B9,1:03C903B9,1:03CE03B9,2:03C90342,1:03C9034203B9,5:03C903B9,ac:00720073,5b:00B00063,6:00B00066,d:006E006F,a:0073006D,1:00740065006C,1:0074006D,124f:006800700061,2:00610075,2:006F0076,b:00700061,1:006E0061,1:03BC0061,1:006D0061,1:006B0061,1:006B0062,1:006D0062,1:00670062,3:00700066,1:006E0066,1:03BC0066,4:0068007A,1:006B0068007A,1:006D0068007A,1:00670068007A,1:00740068007A,15:00700061,1:006B00700061,1:006D00700061,1:006700700061,8:00700076,1:006E0076,1:03BC0076,1:006D0076,1:006B0076,1:006D0076,1:00700077,1:006E0077,1:03BC0077,1:006D0077,1:006B0077,1:006D0077,1:006B03C9,1:006D03C9,2:00620071,3:00632215006B0067,1:0063006F002E,1:00640062,1:00670079,2:00680070,2:006B006B,1:006B006D,9:00700068,2:00700070006D,1:00700072,2:00730076,1:00770062,c723:00660066,1:00660069,1:0066006C,1:006600660069,1:00660066006C,1:00730074,1:00730074,d:05740576,1:05740565,1:0574056B,1:057E0576,1:0574056D",EI),yg("80-20,2a0-,39c,32,f71,18e,7f2-f,19-7,30-4,7-5,f81-b,5,a800-20ff,4d1-1f,110,fa-6,d174-7,2e84-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,2,1f-5f,ff7f-20001");function SI(e){e=atob(e);const t=[];for(let r=0;r<e.length;r++)t.push(e.charCodeAt(r));return er(t)}function cy(e,t){t==null&&(t=1);const r=[],i=r.forEach,n=function(o,f){i.call(o,function(d){f>0&&Array.isArray(d)?n(d,f-1):r.push(d)})};return n(e,t),r}function II(e){const t={};for(let r=0;r<e.length;r++){const i=e[r];t[i[0]]=i[1]}return t}function MI(e){let t=0;function r(){return e[t++]<<8|e[t++]}let i=r(),n=1,o=[0,1];for(let j=1;j<i;j++)o.push(n+=r());let f=r(),d=t;t+=f;let v=0,g=0;function w(){return v==0&&(g=g<<8|e[t++],v=8),g>>--v&1}const S=31,x=Math.pow(2,S),C=x>>>1,N=C>>1,V=x-1;let z=0;for(let j=0;j<S;j++)z=z<<1|w();let X=[],G=0,Y=x;for(;;){let j=Math.floor(((z-G+1)*n-1)/Y),k=0,_=i;for(;_-k>1;){let ct=k+_>>>1;j<o[ct]?_=ct:k=ct}if(k==0)break;X.push(k);let L=G+Math.floor(Y*o[k]/n),ot=G+Math.floor(Y*o[k+1]/n)-1;for(;!((L^ot)&C);)z=z<<1&V|w(),L=L<<1&V,ot=ot<<1&V|1;for(;L&~ot&N;)z=z&C|z<<1&V>>>1|w(),L=L<<1^C,ot=(ot^C)<<1|C|1;G=L,Y=1+ot-L}let $=i-4;return X.map(j=>{switch(j-$){case 3:return $+65792+(e[d++]<<16|e[d++]<<8|e[d++]);case 2:return $+256+(e[d++]<<8|e[d++]);case 1:return $+e[d++];default:return j-1}})}function DI(e){let t=0;return()=>e[t++]}function xI(e){return DI(MI(e))}function CI(e){return e&1?~e>>1:e>>1}function OI(e,t){let r=Array(e);for(let i=0;i<e;i++)r[i]=1+t();return r}function wg(e,t){let r=Array(e);for(let i=0,n=-1;i<e;i++)r[i]=n+=1+t();return r}function NI(e,t){let r=Array(e);for(let i=0,n=0;i<e;i++)r[i]=n+=CI(t());return r}function dc(e,t){let r=wg(e(),e),i=e(),n=wg(i,e),o=OI(i,e);for(let f=0;f<i;f++)for(let d=0;d<o[f];d++)r.push(n[f]+d);return t?r.map(f=>t[f]):r}function PI(e){let t=[];for(;;){let r=e();if(r==0)break;t.push(TI(r,e))}for(;;){let r=e()-1;if(r<0)break;t.push(BI(r,e))}return II(cy(t))}function RI(e){let t=[];for(;;){let r=e();if(r==0)break;t.push(r)}return t}function fy(e,t,r){let i=Array(e).fill(void 0).map(()=>[]);for(let n=0;n<t;n++)NI(e,r).forEach((o,f)=>i[f].push(o));return i}function TI(e,t){let r=1+t(),i=t(),n=RI(t),o=fy(n.length,1+e,t);return cy(o.map((f,d)=>{const v=f[0],g=f.slice(1);return Array(n[d]).fill(void 0).map((w,S)=>{let x=S*i;return[v+S*r,g.map(C=>C+x)]})}))}function BI(e,t){let r=1+t();return fy(r,1+e,t).map(i=>[i[0],i.slice(1)])}function UI(e){let t=dc(e).sort((i,n)=>i-n);return r();function r(){let i=[];for(;;){let g=dc(e,t);if(g.length==0)break;i.push({set:new Set(g),node:r()})}i.sort((g,w)=>w.set.size-g.set.size);let n=e(),o=n%3;n=n/3|0;let f=!!(n&1);n>>=1;let d=n==1,v=n==2;return{branches:i,valid:o,fe0f:f,save:d,check:v}}}function LI(){return xI(SI("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"))}const Bu=LI();new Set(dc(Bu)),new Set(dc(Bu)),PI(Bu),UI(Bu);const FI=new Uint8Array(32);FI.fill(0);const qI=`Ethereum Signed Message:
`;function ly(e){return typeof e=="string"&&(e=wl(e)),z0(lI([wl(qI),wl(String(e.length)),e]))}const $I="address/5.7.0",Qa=new Or($I);function bg(e){Mi(e,20)||Qa.throwArgumentError("invalid address","address",e),e=e.toLowerCase();const t=e.substring(2).split(""),r=new Uint8Array(40);for(let n=0;n<40;n++)r[n]=t[n].charCodeAt(0);const i=er(z0(r));for(let n=0;n<40;n+=2)i[n>>1]>>4>=8&&(t[n]=t[n].toUpperCase()),(i[n>>1]&15)>=8&&(t[n+1]=t[n+1].toUpperCase());return"0x"+t.join("")}const kI=9007199254740991;function zI(e){return Math.log10?Math.log10(e):Math.log(e)/Math.LN10}const H0={};for(let e=0;e<10;e++)H0[String(e)]=String(e);for(let e=0;e<26;e++)H0[String.fromCharCode(65+e)]=String(10+e);const Ag=Math.floor(zI(kI));function jI(e){e=e.toUpperCase(),e=e.substring(4)+e.substring(0,2)+"00";let t=e.split("").map(i=>H0[i]).join("");for(;t.length>=Ag;){let i=t.substring(0,Ag);t=parseInt(i,10)%97+t.substring(i.length)}let r=String(98-parseInt(t,10)%97);for(;r.length<2;)r="0"+r;return r}function HI(e){let t=null;if(typeof e!="string"&&Qa.throwArgumentError("invalid address","address",e),e.match(/^(0x)?[0-9a-fA-F]{40}$/))e.substring(0,2)!=="0x"&&(e="0x"+e),t=bg(e),e.match(/([A-F].*[a-f])|([a-f].*[A-F])/)&&t!==e&&Qa.throwArgumentError("bad address checksum","address",e);else if(e.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){for(e.substring(2,4)!==jI(e)&&Qa.throwArgumentError("bad icap checksum","address",e),t=wI(e.substring(4));t.length<40;)t="0"+t;t=bg("0x"+t)}else Qa.throwArgumentError("invalid address","address",e);return t}function ka(e,t,r){Object.defineProperty(e,t,{enumerable:!0,value:r,writable:!1})}const KI=new Uint8Array(32);KI.fill(0),Jr.from(-1);const GI=Jr.from(0),VI=Jr.from(1);Jr.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),jn(VI.toHexString(),32),jn(GI.toHexString(),32);var Nn={},Oe={},_h=dy;function dy(e,t){if(!e)throw new Error(t||"Assertion failed")}dy.equal=function(e,t,r){if(e!=t)throw new Error(r||"Assertion failed: "+e+" != "+t)};var h0={exports:{}};typeof Object.create=="function"?h0.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:h0.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}};var QI=_h,YI=h0.exports;Oe.inherits=YI;function JI(e,t){return(e.charCodeAt(t)&64512)!==55296||t<0||t+1>=e.length?!1:(e.charCodeAt(t+1)&64512)===56320}function WI(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var r=[];if(typeof e=="string")if(t){if(t==="hex")for(e=e.replace(/[^a-z0-9]+/ig,""),e.length%2!==0&&(e="0"+e),n=0;n<e.length;n+=2)r.push(parseInt(e[n]+e[n+1],16))}else for(var i=0,n=0;n<e.length;n++){var o=e.charCodeAt(n);o<128?r[i++]=o:o<2048?(r[i++]=o>>6|192,r[i++]=o&63|128):JI(e,n)?(o=65536+((o&1023)<<10)+(e.charCodeAt(++n)&1023),r[i++]=o>>18|240,r[i++]=o>>12&63|128,r[i++]=o>>6&63|128,r[i++]=o&63|128):(r[i++]=o>>12|224,r[i++]=o>>6&63|128,r[i++]=o&63|128)}else for(n=0;n<e.length;n++)r[n]=e[n]|0;return r}Oe.toArray=WI;function XI(e){for(var t="",r=0;r<e.length;r++)t+=gy(e[r].toString(16));return t}Oe.toHex=XI;function py(e){var t=e>>>24|e>>>8&65280|e<<8&16711680|(e&255)<<24;return t>>>0}Oe.htonl=py;function ZI(e,t){for(var r="",i=0;i<e.length;i++){var n=e[i];t==="little"&&(n=py(n)),r+=my(n.toString(16))}return r}Oe.toHex32=ZI;function gy(e){return e.length===1?"0"+e:e}Oe.zero2=gy;function my(e){return e.length===7?"0"+e:e.length===6?"00"+e:e.length===5?"000"+e:e.length===4?"0000"+e:e.length===3?"00000"+e:e.length===2?"000000"+e:e.length===1?"0000000"+e:e}Oe.zero8=my;function tM(e,t,r,i){var n=r-t;QI(n%4===0);for(var o=new Array(n/4),f=0,d=t;f<o.length;f++,d+=4){var v;i==="big"?v=e[d]<<24|e[d+1]<<16|e[d+2]<<8|e[d+3]:v=e[d+3]<<24|e[d+2]<<16|e[d+1]<<8|e[d],o[f]=v>>>0}return o}Oe.join32=tM;function eM(e,t){for(var r=new Array(e.length*4),i=0,n=0;i<e.length;i++,n+=4){var o=e[i];t==="big"?(r[n]=o>>>24,r[n+1]=o>>>16&255,r[n+2]=o>>>8&255,r[n+3]=o&255):(r[n+3]=o>>>24,r[n+2]=o>>>16&255,r[n+1]=o>>>8&255,r[n]=o&255)}return r}Oe.split32=eM;function rM(e,t){return e>>>t|e<<32-t}Oe.rotr32=rM;function iM(e,t){return e<<t|e>>>32-t}Oe.rotl32=iM;function nM(e,t){return e+t>>>0}Oe.sum32=nM;function sM(e,t,r){return e+t+r>>>0}Oe.sum32_3=sM;function oM(e,t,r,i){return e+t+r+i>>>0}Oe.sum32_4=oM;function aM(e,t,r,i,n){return e+t+r+i+n>>>0}Oe.sum32_5=aM;function hM(e,t,r,i){var n=e[t],o=e[t+1],f=i+o>>>0,d=(f<i?1:0)+r+n;e[t]=d>>>0,e[t+1]=f}Oe.sum64=hM;function uM(e,t,r,i){var n=t+i>>>0,o=(n<t?1:0)+e+r;return o>>>0}Oe.sum64_hi=uM;function cM(e,t,r,i){var n=t+i;return n>>>0}Oe.sum64_lo=cM;function fM(e,t,r,i,n,o,f,d){var v=0,g=t;g=g+i>>>0,v+=g<t?1:0,g=g+o>>>0,v+=g<o?1:0,g=g+d>>>0,v+=g<d?1:0;var w=e+r+n+f+v;return w>>>0}Oe.sum64_4_hi=fM;function lM(e,t,r,i,n,o,f,d){var v=t+i+o+d;return v>>>0}Oe.sum64_4_lo=lM;function dM(e,t,r,i,n,o,f,d,v,g){var w=0,S=t;S=S+i>>>0,w+=S<t?1:0,S=S+o>>>0,w+=S<o?1:0,S=S+d>>>0,w+=S<d?1:0,S=S+g>>>0,w+=S<g?1:0;var x=e+r+n+f+v+w;return x>>>0}Oe.sum64_5_hi=dM;function pM(e,t,r,i,n,o,f,d,v,g){var w=t+i+o+d+g;return w>>>0}Oe.sum64_5_lo=pM;function gM(e,t,r){var i=t<<32-r|e>>>r;return i>>>0}Oe.rotr64_hi=gM;function mM(e,t,r){var i=e<<32-r|t>>>r;return i>>>0}Oe.rotr64_lo=mM;function vM(e,t,r){return e>>>r}Oe.shr64_hi=vM;function yM(e,t,r){var i=e<<32-r|t>>>r;return i>>>0}Oe.shr64_lo=yM;var pa={},_g=Oe,wM=_h;function Uu(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}pa.BlockHash=Uu,Uu.prototype.update=function(e,t){if(e=_g.toArray(e,t),this.pending?this.pending=this.pending.concat(e):this.pending=e,this.pendingTotal+=e.length,this.pending.length>=this._delta8){e=this.pending;var r=e.length%this._delta8;this.pending=e.slice(e.length-r,e.length),this.pending.length===0&&(this.pending=null),e=_g.join32(e,0,e.length-r,this.endian);for(var i=0;i<e.length;i+=this._delta32)this._update(e,i,i+this._delta32)}return this},Uu.prototype.digest=function(e){return this.update(this._pad()),wM(this.pending===null),this._digest(e)},Uu.prototype._pad=function(){var e=this.pendingTotal,t=this._delta8,r=t-(e+this.padLength)%t,i=new Array(r+this.padLength);i[0]=128;for(var n=1;n<r;n++)i[n]=0;if(e<<=3,this.endian==="big"){for(var o=8;o<this.padLength;o++)i[n++]=0;i[n++]=0,i[n++]=0,i[n++]=0,i[n++]=0,i[n++]=e>>>24&255,i[n++]=e>>>16&255,i[n++]=e>>>8&255,i[n++]=e&255}else for(i[n++]=e&255,i[n++]=e>>>8&255,i[n++]=e>>>16&255,i[n++]=e>>>24&255,i[n++]=0,i[n++]=0,i[n++]=0,i[n++]=0,o=8;o<this.padLength;o++)i[n++]=0;return i};var Ko={},Qn={},bM=Oe,Hn=bM.rotr32;function AM(e,t,r,i){if(e===0)return vy(t,r,i);if(e===1||e===3)return wy(t,r,i);if(e===2)return yy(t,r,i)}Qn.ft_1=AM;function vy(e,t,r){return e&t^~e&r}Qn.ch32=vy;function yy(e,t,r){return e&t^e&r^t&r}Qn.maj32=yy;function wy(e,t,r){return e^t^r}Qn.p32=wy;function _M(e){return Hn(e,2)^Hn(e,13)^Hn(e,22)}Qn.s0_256=_M;function EM(e){return Hn(e,6)^Hn(e,11)^Hn(e,25)}Qn.s1_256=EM;function SM(e){return Hn(e,7)^Hn(e,18)^e>>>3}Qn.g0_256=SM;function IM(e){return Hn(e,17)^Hn(e,19)^e>>>10}Qn.g1_256=IM;var ia=Oe,MM=pa,DM=Qn,Al=ia.rotl32,za=ia.sum32,xM=ia.sum32_5,CM=DM.ft_1,by=MM.BlockHash,OM=[1518500249,1859775393,2400959708,3395469782];function Ln(){if(!(this instanceof Ln))return new Ln;by.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}ia.inherits(Ln,by);var NM=Ln;Ln.blockSize=512,Ln.outSize=160,Ln.hmacStrength=80,Ln.padLength=64,Ln.prototype._update=function(e,t){for(var r=this.W,i=0;i<16;i++)r[i]=e[t+i];for(;i<r.length;i++)r[i]=Al(r[i-3]^r[i-8]^r[i-14]^r[i-16],1);var n=this.h[0],o=this.h[1],f=this.h[2],d=this.h[3],v=this.h[4];for(i=0;i<r.length;i++){var g=~~(i/20),w=xM(Al(n,5),CM(g,o,f,d),v,r[i],OM[g]);v=d,d=f,f=Al(o,30),o=n,n=w}this.h[0]=za(this.h[0],n),this.h[1]=za(this.h[1],o),this.h[2]=za(this.h[2],f),this.h[3]=za(this.h[3],d),this.h[4]=za(this.h[4],v)},Ln.prototype._digest=function(e){return e==="hex"?ia.toHex32(this.h,"big"):ia.split32(this.h,"big")};var na=Oe,PM=pa,ga=Qn,RM=_h,ln=na.sum32,TM=na.sum32_4,BM=na.sum32_5,UM=ga.ch32,LM=ga.maj32,FM=ga.s0_256,qM=ga.s1_256,$M=ga.g0_256,kM=ga.g1_256,Ay=PM.BlockHash,zM=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function Fn(){if(!(this instanceof Fn))return new Fn;Ay.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=zM,this.W=new Array(64)}na.inherits(Fn,Ay);var _y=Fn;Fn.blockSize=512,Fn.outSize=256,Fn.hmacStrength=192,Fn.padLength=64,Fn.prototype._update=function(e,t){for(var r=this.W,i=0;i<16;i++)r[i]=e[t+i];for(;i<r.length;i++)r[i]=TM(kM(r[i-2]),r[i-7],$M(r[i-15]),r[i-16]);var n=this.h[0],o=this.h[1],f=this.h[2],d=this.h[3],v=this.h[4],g=this.h[5],w=this.h[6],S=this.h[7];for(RM(this.k.length===r.length),i=0;i<r.length;i++){var x=BM(S,qM(v),UM(v,g,w),this.k[i],r[i]),C=ln(FM(n),LM(n,o,f));S=w,w=g,g=v,v=ln(d,x),d=f,f=o,o=n,n=ln(x,C)}this.h[0]=ln(this.h[0],n),this.h[1]=ln(this.h[1],o),this.h[2]=ln(this.h[2],f),this.h[3]=ln(this.h[3],d),this.h[4]=ln(this.h[4],v),this.h[5]=ln(this.h[5],g),this.h[6]=ln(this.h[6],w),this.h[7]=ln(this.h[7],S)},Fn.prototype._digest=function(e){return e==="hex"?na.toHex32(this.h,"big"):na.split32(this.h,"big")};var u0=Oe,Ey=_y;function ps(){if(!(this instanceof ps))return new ps;Ey.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}u0.inherits(ps,Ey);var jM=ps;ps.blockSize=512,ps.outSize=224,ps.hmacStrength=192,ps.padLength=64,ps.prototype._digest=function(e){return e==="hex"?u0.toHex32(this.h.slice(0,7),"big"):u0.split32(this.h.slice(0,7),"big")};var gi=Oe,HM=pa,KM=_h,Kn=gi.rotr64_hi,Gn=gi.rotr64_lo,Sy=gi.shr64_hi,Iy=gi.shr64_lo,Cs=gi.sum64,_l=gi.sum64_hi,El=gi.sum64_lo,GM=gi.sum64_4_hi,VM=gi.sum64_4_lo,QM=gi.sum64_5_hi,YM=gi.sum64_5_lo,My=HM.BlockHash,JM=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function wn(){if(!(this instanceof wn))return new wn;My.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=JM,this.W=new Array(160)}gi.inherits(wn,My);var Dy=wn;wn.blockSize=1024,wn.outSize=512,wn.hmacStrength=192,wn.padLength=128,wn.prototype._prepareBlock=function(e,t){for(var r=this.W,i=0;i<32;i++)r[i]=e[t+i];for(;i<r.length;i+=2){var n=aD(r[i-4],r[i-3]),o=hD(r[i-4],r[i-3]),f=r[i-14],d=r[i-13],v=sD(r[i-30],r[i-29]),g=oD(r[i-30],r[i-29]),w=r[i-32],S=r[i-31];r[i]=GM(n,o,f,d,v,g,w,S),r[i+1]=VM(n,o,f,d,v,g,w,S)}},wn.prototype._update=function(e,t){this._prepareBlock(e,t);var r=this.W,i=this.h[0],n=this.h[1],o=this.h[2],f=this.h[3],d=this.h[4],v=this.h[5],g=this.h[6],w=this.h[7],S=this.h[8],x=this.h[9],C=this.h[10],N=this.h[11],V=this.h[12],z=this.h[13],X=this.h[14],G=this.h[15];KM(this.k.length===r.length);for(var Y=0;Y<r.length;Y+=2){var $=X,j=G,k=iD(S,x),_=nD(S,x),L=WM(S,x,C,N,V),ot=XM(S,x,C,N,V,z),ct=this.k[Y],ht=this.k[Y+1],_t=r[Y],h=r[Y+1],u=QM($,j,k,_,L,ot,ct,ht,_t,h),p=YM($,j,k,_,L,ot,ct,ht,_t,h);$=eD(i,n),j=rD(i,n),k=ZM(i,n,o,f,d),_=tD(i,n,o,f,d,v);var b=_l($,j,k,_),M=El($,j,k,_);X=V,G=z,V=C,z=N,C=S,N=x,S=_l(g,w,u,p),x=El(w,w,u,p),g=d,w=v,d=o,v=f,o=i,f=n,i=_l(u,p,b,M),n=El(u,p,b,M)}Cs(this.h,0,i,n),Cs(this.h,2,o,f),Cs(this.h,4,d,v),Cs(this.h,6,g,w),Cs(this.h,8,S,x),Cs(this.h,10,C,N),Cs(this.h,12,V,z),Cs(this.h,14,X,G)},wn.prototype._digest=function(e){return e==="hex"?gi.toHex32(this.h,"big"):gi.split32(this.h,"big")};function WM(e,t,r,i,n){var o=e&r^~e&n;return o<0&&(o+=4294967296),o}function XM(e,t,r,i,n,o){var f=t&i^~t&o;return f<0&&(f+=4294967296),f}function ZM(e,t,r,i,n){var o=e&r^e&n^r&n;return o<0&&(o+=4294967296),o}function tD(e,t,r,i,n,o){var f=t&i^t&o^i&o;return f<0&&(f+=4294967296),f}function eD(e,t){var r=Kn(e,t,28),i=Kn(t,e,2),n=Kn(t,e,7),o=r^i^n;return o<0&&(o+=4294967296),o}function rD(e,t){var r=Gn(e,t,28),i=Gn(t,e,2),n=Gn(t,e,7),o=r^i^n;return o<0&&(o+=4294967296),o}function iD(e,t){var r=Kn(e,t,14),i=Kn(e,t,18),n=Kn(t,e,9),o=r^i^n;return o<0&&(o+=4294967296),o}function nD(e,t){var r=Gn(e,t,14),i=Gn(e,t,18),n=Gn(t,e,9),o=r^i^n;return o<0&&(o+=4294967296),o}function sD(e,t){var r=Kn(e,t,1),i=Kn(e,t,8),n=Sy(e,t,7),o=r^i^n;return o<0&&(o+=4294967296),o}function oD(e,t){var r=Gn(e,t,1),i=Gn(e,t,8),n=Iy(e,t,7),o=r^i^n;return o<0&&(o+=4294967296),o}function aD(e,t){var r=Kn(e,t,19),i=Kn(t,e,29),n=Sy(e,t,6),o=r^i^n;return o<0&&(o+=4294967296),o}function hD(e,t){var r=Gn(e,t,19),i=Gn(t,e,29),n=Iy(e,t,6),o=r^i^n;return o<0&&(o+=4294967296),o}var c0=Oe,xy=Dy;function gs(){if(!(this instanceof gs))return new gs;xy.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}c0.inherits(gs,xy);var uD=gs;gs.blockSize=1024,gs.outSize=384,gs.hmacStrength=192,gs.padLength=128,gs.prototype._digest=function(e){return e==="hex"?c0.toHex32(this.h.slice(0,12),"big"):c0.split32(this.h.slice(0,12),"big")},Ko.sha1=NM,Ko.sha224=jM,Ko.sha256=_y,Ko.sha384=uD,Ko.sha512=Dy;var Cy={},co=Oe,cD=pa,Lu=co.rotl32,Eg=co.sum32,ja=co.sum32_3,Sg=co.sum32_4,Oy=cD.BlockHash;function Pn(){if(!(this instanceof Pn))return new Pn;Oy.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}co.inherits(Pn,Oy),Cy.ripemd160=Pn,Pn.blockSize=512,Pn.outSize=160,Pn.hmacStrength=192,Pn.padLength=64,Pn.prototype._update=function(e,t){for(var r=this.h[0],i=this.h[1],n=this.h[2],o=this.h[3],f=this.h[4],d=r,v=i,g=n,w=o,S=f,x=0;x<80;x++){var C=Eg(Lu(Sg(r,Ig(x,i,n,o),e[dD[x]+t],fD(x)),gD[x]),f);r=f,f=o,o=Lu(n,10),n=i,i=C,C=Eg(Lu(Sg(d,Ig(79-x,v,g,w),e[pD[x]+t],lD(x)),mD[x]),S),d=S,S=w,w=Lu(g,10),g=v,v=C}C=ja(this.h[1],n,w),this.h[1]=ja(this.h[2],o,S),this.h[2]=ja(this.h[3],f,d),this.h[3]=ja(this.h[4],r,v),this.h[4]=ja(this.h[0],i,g),this.h[0]=C},Pn.prototype._digest=function(e){return e==="hex"?co.toHex32(this.h,"little"):co.split32(this.h,"little")};function Ig(e,t,r,i){return e<=15?t^r^i:e<=31?t&r|~t&i:e<=47?(t|~r)^i:e<=63?t&i|r&~i:t^(r|~i)}function fD(e){return e<=15?0:e<=31?1518500249:e<=47?1859775393:e<=63?2400959708:2840853838}function lD(e){return e<=15?1352829926:e<=31?1548603684:e<=47?1836072691:e<=63?2053994217:0}var dD=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],pD=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],gD=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],mD=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],vD=Oe,yD=_h;function Xo(e,t,r){if(!(this instanceof Xo))return new Xo(e,t,r);this.Hash=e,this.blockSize=e.blockSize/8,this.outSize=e.outSize/8,this.inner=null,this.outer=null,this._init(vD.toArray(t,r))}var wD=Xo;Xo.prototype._init=function(e){e.length>this.blockSize&&(e=new this.Hash().update(e).digest()),yD(e.length<=this.blockSize);for(var t=e.length;t<this.blockSize;t++)e.push(0);for(t=0;t<e.length;t++)e[t]^=54;for(this.inner=new this.Hash().update(e),t=0;t<e.length;t++)e[t]^=106;this.outer=new this.Hash().update(e)},Xo.prototype.update=function(e,t){return this.inner.update(e,t),this},Xo.prototype.digest=function(e){return this.outer.update(this.inner.digest()),this.outer.digest(e)},function(e){var t=e;t.utils=Oe,t.common=pa,t.sha=Ko,t.ripemd=Cy,t.hmac=wD,t.sha1=t.sha.sha1,t.sha256=t.sha.sha256,t.sha224=t.sha.sha224,t.sha384=t.sha.sha384,t.sha512=t.sha.sha512,t.ripemd160=t.ripemd.ripemd160}(Nn);function ma(e,t,r){return r={path:t,exports:{},require:function(i,n){return bD(i,n??r.path)}},e(r,r.exports),r.exports}function bD(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var K0=Ny;function Ny(e,t){if(!e)throw new Error(t||"Assertion failed")}Ny.equal=function(e,t,r){if(e!=t)throw new Error(r||"Assertion failed: "+e+" != "+t)};var _n=ma(function(e,t){var r=t;function i(f,d){if(Array.isArray(f))return f.slice();if(!f)return[];var v=[];if(typeof f!="string"){for(var g=0;g<f.length;g++)v[g]=f[g]|0;return v}if(d==="hex"){f=f.replace(/[^a-z0-9]+/ig,""),f.length%2!==0&&(f="0"+f);for(var g=0;g<f.length;g+=2)v.push(parseInt(f[g]+f[g+1],16))}else for(var g=0;g<f.length;g++){var w=f.charCodeAt(g),S=w>>8,x=w&255;S?v.push(S,x):v.push(x)}return v}r.toArray=i;function n(f){return f.length===1?"0"+f:f}r.zero2=n;function o(f){for(var d="",v=0;v<f.length;v++)d+=n(f[v].toString(16));return d}r.toHex=o,r.encode=function(f,d){return d==="hex"?o(f):f}}),xi=ma(function(e,t){var r=t;r.assert=K0,r.toArray=_n.toArray,r.zero2=_n.zero2,r.toHex=_n.toHex,r.encode=_n.encode;function i(v,g,w){var S=new Array(Math.max(v.bitLength(),w)+1);S.fill(0);for(var x=1<<g+1,C=v.clone(),N=0;N<S.length;N++){var V,z=C.andln(x-1);C.isOdd()?(z>(x>>1)-1?V=(x>>1)-z:V=z,C.isubn(V)):V=0,S[N]=V,C.iushrn(1)}return S}r.getNAF=i;function n(v,g){var w=[[],[]];v=v.clone(),g=g.clone();for(var S=0,x=0,C;v.cmpn(-S)>0||g.cmpn(-x)>0;){var N=v.andln(3)+S&3,V=g.andln(3)+x&3;N===3&&(N=-1),V===3&&(V=-1);var z;N&1?(C=v.andln(7)+S&7,(C===3||C===5)&&V===2?z=-N:z=N):z=0,w[0].push(z);var X;V&1?(C=g.andln(7)+x&7,(C===3||C===5)&&N===2?X=-V:X=V):X=0,w[1].push(X),2*S===z+1&&(S=1-S),2*x===X+1&&(x=1-x),v.iushrn(1),g.iushrn(1)}return w}r.getJSF=n;function o(v,g,w){var S="_"+g;v.prototype[g]=function(){return this[S]!==void 0?this[S]:this[S]=w.call(this)}}r.cachedProperty=o;function f(v){return typeof v=="string"?r.toArray(v,"hex"):v}r.parseBytes=f;function d(v){return new de(v,"hex","le")}r.intFromLE=d}),Fu=xi.getNAF,AD=xi.getJSF,pc=xi.assert;function Bs(e,t){this.type=e,this.p=new de(t.p,16),this.red=t.prime?de.red(t.prime):de.mont(this.p),this.zero=new de(0).toRed(this.red),this.one=new de(1).toRed(this.red),this.two=new de(2).toRed(this.red),this.n=t.n&&new de(t.n,16),this.g=t.g&&this.pointFromJSON(t.g,t.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var r=this.n&&this.p.div(this.n);!r||r.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var wo=Bs;Bs.prototype.point=function(){throw new Error("Not implemented")},Bs.prototype.validate=function(){throw new Error("Not implemented")},Bs.prototype._fixedNafMul=function(e,t){pc(e.precomputed);var r=e._getDoubles(),i=Fu(t,1,this._bitLength),n=(1<<r.step+1)-(r.step%2===0?2:1);n/=3;var o=[],f,d;for(f=0;f<i.length;f+=r.step){d=0;for(var v=f+r.step-1;v>=f;v--)d=(d<<1)+i[v];o.push(d)}for(var g=this.jpoint(null,null,null),w=this.jpoint(null,null,null),S=n;S>0;S--){for(f=0;f<o.length;f++)d=o[f],d===S?w=w.mixedAdd(r.points[f]):d===-S&&(w=w.mixedAdd(r.points[f].neg()));g=g.add(w)}return g.toP()},Bs.prototype._wnafMul=function(e,t){var r=4,i=e._getNAFPoints(r);r=i.wnd;for(var n=i.points,o=Fu(t,r,this._bitLength),f=this.jpoint(null,null,null),d=o.length-1;d>=0;d--){for(var v=0;d>=0&&o[d]===0;d--)v++;if(d>=0&&v++,f=f.dblp(v),d<0)break;var g=o[d];pc(g!==0),e.type==="affine"?g>0?f=f.mixedAdd(n[g-1>>1]):f=f.mixedAdd(n[-g-1>>1].neg()):g>0?f=f.add(n[g-1>>1]):f=f.add(n[-g-1>>1].neg())}return e.type==="affine"?f.toP():f},Bs.prototype._wnafMulAdd=function(e,t,r,i,n){var o=this._wnafT1,f=this._wnafT2,d=this._wnafT3,v=0,g,w,S;for(g=0;g<i;g++){S=t[g];var x=S._getNAFPoints(e);o[g]=x.wnd,f[g]=x.points}for(g=i-1;g>=1;g-=2){var C=g-1,N=g;if(o[C]!==1||o[N]!==1){d[C]=Fu(r[C],o[C],this._bitLength),d[N]=Fu(r[N],o[N],this._bitLength),v=Math.max(d[C].length,v),v=Math.max(d[N].length,v);continue}var V=[t[C],null,null,t[N]];t[C].y.cmp(t[N].y)===0?(V[1]=t[C].add(t[N]),V[2]=t[C].toJ().mixedAdd(t[N].neg())):t[C].y.cmp(t[N].y.redNeg())===0?(V[1]=t[C].toJ().mixedAdd(t[N]),V[2]=t[C].add(t[N].neg())):(V[1]=t[C].toJ().mixedAdd(t[N]),V[2]=t[C].toJ().mixedAdd(t[N].neg()));var z=[-3,-1,-5,-7,0,7,5,1,3],X=AD(r[C],r[N]);for(v=Math.max(X[0].length,v),d[C]=new Array(v),d[N]=new Array(v),w=0;w<v;w++){var G=X[0][w]|0,Y=X[1][w]|0;d[C][w]=z[(G+1)*3+(Y+1)],d[N][w]=0,f[C]=V}}var $=this.jpoint(null,null,null),j=this._wnafT4;for(g=v;g>=0;g--){for(var k=0;g>=0;){var _=!0;for(w=0;w<i;w++)j[w]=d[w][g]|0,j[w]!==0&&(_=!1);if(!_)break;k++,g--}if(g>=0&&k++,$=$.dblp(k),g<0)break;for(w=0;w<i;w++){var L=j[w];L!==0&&(L>0?S=f[w][L-1>>1]:L<0&&(S=f[w][-L-1>>1].neg()),S.type==="affine"?$=$.mixedAdd(S):$=$.add(S))}}for(g=0;g<i;g++)f[g]=null;return n?$:$.toP()};function ji(e,t){this.curve=e,this.type=t,this.precomputed=null}Bs.BasePoint=ji,ji.prototype.eq=function(){throw new Error("Not implemented")},ji.prototype.validate=function(){return this.curve.validate(this)},Bs.prototype.decodePoint=function(e,t){e=xi.toArray(e,t);var r=this.p.byteLength();if((e[0]===4||e[0]===6||e[0]===7)&&e.length-1===2*r){e[0]===6?pc(e[e.length-1]%2===0):e[0]===7&&pc(e[e.length-1]%2===1);var i=this.point(e.slice(1,1+r),e.slice(1+r,1+2*r));return i}else if((e[0]===2||e[0]===3)&&e.length-1===r)return this.pointFromX(e.slice(1,1+r),e[0]===3);throw new Error("Unknown point format")},ji.prototype.encodeCompressed=function(e){return this.encode(e,!0)},ji.prototype._encode=function(e){var t=this.curve.p.byteLength(),r=this.getX().toArray("be",t);return e?[this.getY().isEven()?2:3].concat(r):[4].concat(r,this.getY().toArray("be",t))},ji.prototype.encode=function(e,t){return xi.encode(this._encode(t),e)},ji.prototype.precompute=function(e){if(this.precomputed)return this;var t={doubles:null,naf:null,beta:null};return t.naf=this._getNAFPoints(8),t.doubles=this._getDoubles(4,e),t.beta=this._getBeta(),this.precomputed=t,this},ji.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var t=this.precomputed.doubles;return t?t.points.length>=Math.ceil((e.bitLength()+1)/t.step):!1},ji.prototype._getDoubles=function(e,t){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var r=[this],i=this,n=0;n<t;n+=e){for(var o=0;o<e;o++)i=i.dbl();r.push(i)}return{step:e,points:r}},ji.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var t=[this],r=(1<<e)-1,i=r===1?null:this.dbl(),n=1;n<r;n++)t[n]=t[n-1].add(i);return{wnd:e,points:t}},ji.prototype._getBeta=function(){return null},ji.prototype.dblp=function(e){for(var t=this,r=0;r<e;r++)t=t.dbl();return t};var G0=ma(function(e){typeof Object.create=="function"?e.exports=function(t,r){r&&(t.super_=r,t.prototype=Object.create(r.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(t,r){if(r){t.super_=r;var i=function(){};i.prototype=r.prototype,t.prototype=new i,t.prototype.constructor=t}}}),_D=xi.assert;function Ji(e){wo.call(this,"short",e),this.a=new de(e.a,16).toRed(this.red),this.b=new de(e.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(e),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}G0(Ji,wo);var ED=Ji;Ji.prototype._getEndomorphism=function(e){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var t,r;if(e.beta)t=new de(e.beta,16).toRed(this.red);else{var i=this._getEndoRoots(this.p);t=i[0].cmp(i[1])<0?i[0]:i[1],t=t.toRed(this.red)}if(e.lambda)r=new de(e.lambda,16);else{var n=this._getEndoRoots(this.n);this.g.mul(n[0]).x.cmp(this.g.x.redMul(t))===0?r=n[0]:(r=n[1],_D(this.g.mul(r).x.cmp(this.g.x.redMul(t))===0))}var o;return e.basis?o=e.basis.map(function(f){return{a:new de(f.a,16),b:new de(f.b,16)}}):o=this._getEndoBasis(r),{beta:t,lambda:r,basis:o}}},Ji.prototype._getEndoRoots=function(e){var t=e===this.p?this.red:de.mont(e),r=new de(2).toRed(t).redInvm(),i=r.redNeg(),n=new de(3).toRed(t).redNeg().redSqrt().redMul(r),o=i.redAdd(n).fromRed(),f=i.redSub(n).fromRed();return[o,f]},Ji.prototype._getEndoBasis=function(e){for(var t=this.n.ushrn(Math.floor(this.n.bitLength()/2)),r=e,i=this.n.clone(),n=new de(1),o=new de(0),f=new de(0),d=new de(1),v,g,w,S,x,C,N,V=0,z,X;r.cmpn(0)!==0;){var G=i.div(r);z=i.sub(G.mul(r)),X=f.sub(G.mul(n));var Y=d.sub(G.mul(o));if(!w&&z.cmp(t)<0)v=N.neg(),g=n,w=z.neg(),S=X;else if(w&&++V===2)break;N=z,i=r,r=z,f=n,n=X,d=o,o=Y}x=z.neg(),C=X;var $=w.sqr().add(S.sqr()),j=x.sqr().add(C.sqr());return j.cmp($)>=0&&(x=v,C=g),w.negative&&(w=w.neg(),S=S.neg()),x.negative&&(x=x.neg(),C=C.neg()),[{a:w,b:S},{a:x,b:C}]},Ji.prototype._endoSplit=function(e){var t=this.endo.basis,r=t[0],i=t[1],n=i.b.mul(e).divRound(this.n),o=r.b.neg().mul(e).divRound(this.n),f=n.mul(r.a),d=o.mul(i.a),v=n.mul(r.b),g=o.mul(i.b),w=e.sub(f).sub(d),S=v.add(g).neg();return{k1:w,k2:S}},Ji.prototype.pointFromX=function(e,t){e=new de(e,16),e.red||(e=e.toRed(this.red));var r=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),i=r.redSqrt();if(i.redSqr().redSub(r).cmp(this.zero)!==0)throw new Error("invalid point");var n=i.fromRed().isOdd();return(t&&!n||!t&&n)&&(i=i.redNeg()),this.point(e,i)},Ji.prototype.validate=function(e){if(e.inf)return!0;var t=e.x,r=e.y,i=this.a.redMul(t),n=t.redSqr().redMul(t).redIAdd(i).redIAdd(this.b);return r.redSqr().redISub(n).cmpn(0)===0},Ji.prototype._endoWnafMulAdd=function(e,t,r){for(var i=this._endoWnafT1,n=this._endoWnafT2,o=0;o<e.length;o++){var f=this._endoSplit(t[o]),d=e[o],v=d._getBeta();f.k1.negative&&(f.k1.ineg(),d=d.neg(!0)),f.k2.negative&&(f.k2.ineg(),v=v.neg(!0)),i[o*2]=d,i[o*2+1]=v,n[o*2]=f.k1,n[o*2+1]=f.k2}for(var g=this._wnafMulAdd(1,i,n,o*2,r),w=0;w<o*2;w++)i[w]=null,n[w]=null;return g};function Sr(e,t,r,i){wo.BasePoint.call(this,e,"affine"),t===null&&r===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new de(t,16),this.y=new de(r,16),i&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}G0(Sr,wo.BasePoint),Ji.prototype.point=function(e,t,r){return new Sr(this,e,t,r)},Ji.prototype.pointFromJSON=function(e,t){return Sr.fromJSON(this,e,t)},Sr.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var t=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var r=this.curve,i=function(n){return r.point(n.x.redMul(r.endo.beta),n.y)};e.beta=t,t.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(i)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(i)}}}return t}},Sr.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},Sr.fromJSON=function(e,t,r){typeof t=="string"&&(t=JSON.parse(t));var i=e.point(t[0],t[1],r);if(!t[2])return i;function n(f){return e.point(f[0],f[1],r)}var o=t[2];return i.precomputed={beta:null,doubles:o.doubles&&{step:o.doubles.step,points:[i].concat(o.doubles.points.map(n))},naf:o.naf&&{wnd:o.naf.wnd,points:[i].concat(o.naf.points.map(n))}},i},Sr.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},Sr.prototype.isInfinity=function(){return this.inf},Sr.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(this.x.cmp(e.x)===0)return this.curve.point(null,null);var t=this.y.redSub(e.y);t.cmpn(0)!==0&&(t=t.redMul(this.x.redSub(e.x).redInvm()));var r=t.redSqr().redISub(this.x).redISub(e.x),i=t.redMul(this.x.redSub(r)).redISub(this.y);return this.curve.point(r,i)},Sr.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(e.cmpn(0)===0)return this.curve.point(null,null);var t=this.curve.a,r=this.x.redSqr(),i=e.redInvm(),n=r.redAdd(r).redIAdd(r).redIAdd(t).redMul(i),o=n.redSqr().redISub(this.x.redAdd(this.x)),f=n.redMul(this.x.redSub(o)).redISub(this.y);return this.curve.point(o,f)},Sr.prototype.getX=function(){return this.x.fromRed()},Sr.prototype.getY=function(){return this.y.fromRed()},Sr.prototype.mul=function(e){return e=new de(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)},Sr.prototype.mulAdd=function(e,t,r){var i=[this,t],n=[e,r];return this.curve.endo?this.curve._endoWnafMulAdd(i,n):this.curve._wnafMulAdd(1,i,n,2)},Sr.prototype.jmulAdd=function(e,t,r){var i=[this,t],n=[e,r];return this.curve.endo?this.curve._endoWnafMulAdd(i,n,!0):this.curve._wnafMulAdd(1,i,n,2,!0)},Sr.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||this.x.cmp(e.x)===0&&this.y.cmp(e.y)===0)},Sr.prototype.neg=function(e){if(this.inf)return this;var t=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var r=this.precomputed,i=function(n){return n.neg()};t.precomputed={naf:r.naf&&{wnd:r.naf.wnd,points:r.naf.points.map(i)},doubles:r.doubles&&{step:r.doubles.step,points:r.doubles.points.map(i)}}}return t},Sr.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var e=this.curve.jpoint(this.x,this.y,this.curve.one);return e};function xr(e,t,r,i){wo.BasePoint.call(this,e,"jacobian"),t===null&&r===null&&i===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new de(0)):(this.x=new de(t,16),this.y=new de(r,16),this.z=new de(i,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}G0(xr,wo.BasePoint),Ji.prototype.jpoint=function(e,t,r){return new xr(this,e,t,r)},xr.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),t=e.redSqr(),r=this.x.redMul(t),i=this.y.redMul(t).redMul(e);return this.curve.point(r,i)},xr.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},xr.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.z.redSqr(),r=this.z.redSqr(),i=this.x.redMul(t),n=e.x.redMul(r),o=this.y.redMul(t.redMul(e.z)),f=e.y.redMul(r.redMul(this.z)),d=i.redSub(n),v=o.redSub(f);if(d.cmpn(0)===0)return v.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var g=d.redSqr(),w=g.redMul(d),S=i.redMul(g),x=v.redSqr().redIAdd(w).redISub(S).redISub(S),C=v.redMul(S.redISub(x)).redISub(o.redMul(w)),N=this.z.redMul(e.z).redMul(d);return this.curve.jpoint(x,C,N)},xr.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var t=this.z.redSqr(),r=this.x,i=e.x.redMul(t),n=this.y,o=e.y.redMul(t).redMul(this.z),f=r.redSub(i),d=n.redSub(o);if(f.cmpn(0)===0)return d.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var v=f.redSqr(),g=v.redMul(f),w=r.redMul(v),S=d.redSqr().redIAdd(g).redISub(w).redISub(w),x=d.redMul(w.redISub(S)).redISub(n.redMul(g)),C=this.z.redMul(f);return this.curve.jpoint(S,x,C)},xr.prototype.dblp=function(e){if(e===0)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var t;if(this.curve.zeroA||this.curve.threeA){var r=this;for(t=0;t<e;t++)r=r.dbl();return r}var i=this.curve.a,n=this.curve.tinv,o=this.x,f=this.y,d=this.z,v=d.redSqr().redSqr(),g=f.redAdd(f);for(t=0;t<e;t++){var w=o.redSqr(),S=g.redSqr(),x=S.redSqr(),C=w.redAdd(w).redIAdd(w).redIAdd(i.redMul(v)),N=o.redMul(S),V=C.redSqr().redISub(N.redAdd(N)),z=N.redISub(V),X=C.redMul(z);X=X.redIAdd(X).redISub(x);var G=g.redMul(d);t+1<e&&(v=v.redMul(x)),o=V,d=G,g=X}return this.curve.jpoint(o,g.redMul(n),d)},xr.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},xr.prototype._zeroDbl=function(){var e,t,r;if(this.zOne){var i=this.x.redSqr(),n=this.y.redSqr(),o=n.redSqr(),f=this.x.redAdd(n).redSqr().redISub(i).redISub(o);f=f.redIAdd(f);var d=i.redAdd(i).redIAdd(i),v=d.redSqr().redISub(f).redISub(f),g=o.redIAdd(o);g=g.redIAdd(g),g=g.redIAdd(g),e=v,t=d.redMul(f.redISub(v)).redISub(g),r=this.y.redAdd(this.y)}else{var w=this.x.redSqr(),S=this.y.redSqr(),x=S.redSqr(),C=this.x.redAdd(S).redSqr().redISub(w).redISub(x);C=C.redIAdd(C);var N=w.redAdd(w).redIAdd(w),V=N.redSqr(),z=x.redIAdd(x);z=z.redIAdd(z),z=z.redIAdd(z),e=V.redISub(C).redISub(C),t=N.redMul(C.redISub(e)).redISub(z),r=this.y.redMul(this.z),r=r.redIAdd(r)}return this.curve.jpoint(e,t,r)},xr.prototype._threeDbl=function(){var e,t,r;if(this.zOne){var i=this.x.redSqr(),n=this.y.redSqr(),o=n.redSqr(),f=this.x.redAdd(n).redSqr().redISub(i).redISub(o);f=f.redIAdd(f);var d=i.redAdd(i).redIAdd(i).redIAdd(this.curve.a),v=d.redSqr().redISub(f).redISub(f);e=v;var g=o.redIAdd(o);g=g.redIAdd(g),g=g.redIAdd(g),t=d.redMul(f.redISub(v)).redISub(g),r=this.y.redAdd(this.y)}else{var w=this.z.redSqr(),S=this.y.redSqr(),x=this.x.redMul(S),C=this.x.redSub(w).redMul(this.x.redAdd(w));C=C.redAdd(C).redIAdd(C);var N=x.redIAdd(x);N=N.redIAdd(N);var V=N.redAdd(N);e=C.redSqr().redISub(V),r=this.y.redAdd(this.z).redSqr().redISub(S).redISub(w);var z=S.redSqr();z=z.redIAdd(z),z=z.redIAdd(z),z=z.redIAdd(z),t=C.redMul(N.redISub(e)).redISub(z)}return this.curve.jpoint(e,t,r)},xr.prototype._dbl=function(){var e=this.curve.a,t=this.x,r=this.y,i=this.z,n=i.redSqr().redSqr(),o=t.redSqr(),f=r.redSqr(),d=o.redAdd(o).redIAdd(o).redIAdd(e.redMul(n)),v=t.redAdd(t);v=v.redIAdd(v);var g=v.redMul(f),w=d.redSqr().redISub(g.redAdd(g)),S=g.redISub(w),x=f.redSqr();x=x.redIAdd(x),x=x.redIAdd(x),x=x.redIAdd(x);var C=d.redMul(S).redISub(x),N=r.redAdd(r).redMul(i);return this.curve.jpoint(w,C,N)},xr.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),t=this.y.redSqr(),r=this.z.redSqr(),i=t.redSqr(),n=e.redAdd(e).redIAdd(e),o=n.redSqr(),f=this.x.redAdd(t).redSqr().redISub(e).redISub(i);f=f.redIAdd(f),f=f.redAdd(f).redIAdd(f),f=f.redISub(o);var d=f.redSqr(),v=i.redIAdd(i);v=v.redIAdd(v),v=v.redIAdd(v),v=v.redIAdd(v);var g=n.redIAdd(f).redSqr().redISub(o).redISub(d).redISub(v),w=t.redMul(g);w=w.redIAdd(w),w=w.redIAdd(w);var S=this.x.redMul(d).redISub(w);S=S.redIAdd(S),S=S.redIAdd(S);var x=this.y.redMul(g.redMul(v.redISub(g)).redISub(f.redMul(d)));x=x.redIAdd(x),x=x.redIAdd(x),x=x.redIAdd(x);var C=this.z.redAdd(f).redSqr().redISub(r).redISub(d);return this.curve.jpoint(S,x,C)},xr.prototype.mul=function(e,t){return e=new de(e,t),this.curve._wnafMul(this,e)},xr.prototype.eq=function(e){if(e.type==="affine")return this.eq(e.toJ());if(this===e)return!0;var t=this.z.redSqr(),r=e.z.redSqr();if(this.x.redMul(r).redISub(e.x.redMul(t)).cmpn(0)!==0)return!1;var i=t.redMul(this.z),n=r.redMul(e.z);return this.y.redMul(n).redISub(e.y.redMul(i)).cmpn(0)===0},xr.prototype.eqXToP=function(e){var t=this.z.redSqr(),r=e.toRed(this.curve.red).redMul(t);if(this.x.cmp(r)===0)return!0;for(var i=e.clone(),n=this.curve.redN.redMul(t);;){if(i.iadd(this.curve.n),i.cmp(this.curve.p)>=0)return!1;if(r.redIAdd(n),this.x.cmp(r)===0)return!0}},xr.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},xr.prototype.isInfinity=function(){return this.z.cmpn(0)===0};var Xu=ma(function(e,t){var r=t;r.base=wo,r.short=ED,r.mont=null,r.edwards=null}),Zu=ma(function(e,t){var r=t,i=xi.assert;function n(d){d.type==="short"?this.curve=new Xu.short(d):d.type==="edwards"?this.curve=new Xu.edwards(d):this.curve=new Xu.mont(d),this.g=this.curve.g,this.n=this.curve.n,this.hash=d.hash,i(this.g.validate(),"Invalid curve"),i(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}r.PresetCurve=n;function o(d,v){Object.defineProperty(r,d,{configurable:!0,enumerable:!0,get:function(){var g=new n(v);return Object.defineProperty(r,d,{configurable:!0,enumerable:!0,value:g}),g}})}o("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:Nn.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),o("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:Nn.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),o("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:Nn.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),o("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:Nn.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),o("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:Nn.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),o("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:Nn.sha256,gRed:!1,g:["9"]}),o("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:Nn.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var f;try{f=null.crash()}catch{f=void 0}o("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:Nn.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",f]})});function Us(e){if(!(this instanceof Us))return new Us(e);this.hash=e.hash,this.predResist=!!e.predResist,this.outLen=this.hash.outSize,this.minEntropy=e.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var t=_n.toArray(e.entropy,e.entropyEnc||"hex"),r=_n.toArray(e.nonce,e.nonceEnc||"hex"),i=_n.toArray(e.pers,e.persEnc||"hex");K0(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(t,r,i)}var Mg=Us;Us.prototype._init=function(e,t,r){var i=e.concat(t).concat(r);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var n=0;n<this.V.length;n++)this.K[n]=0,this.V[n]=1;this._update(i),this._reseed=1,this.reseedInterval=281474976710656},Us.prototype._hmac=function(){return new Nn.hmac(this.hash,this.K)},Us.prototype._update=function(e){var t=this._hmac().update(this.V).update([0]);e&&(t=t.update(e)),this.K=t.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())},Us.prototype.reseed=function(e,t,r,i){typeof t!="string"&&(i=r,r=t,t=null),e=_n.toArray(e,t),r=_n.toArray(r,i),K0(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(r||[])),this._reseed=1},Us.prototype.generate=function(e,t,r,i){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof t!="string"&&(i=r,r=t,t=null),r&&(r=_n.toArray(r,i||"hex"),this._update(r));for(var n=[];n.length<e;)this.V=this._hmac().update(this.V).digest(),n=n.concat(this.V);var o=n.slice(0,e);return this._update(r),this._reseed++,_n.encode(o,t)};var Sl=xi.assert;function Lr(e,t){this.ec=e,this.priv=null,this.pub=null,t.priv&&this._importPrivate(t.priv,t.privEnc),t.pub&&this._importPublic(t.pub,t.pubEnc)}var Il=Lr;Lr.fromPublic=function(e,t,r){return t instanceof Lr?t:new Lr(e,{pub:t,pubEnc:r})},Lr.fromPrivate=function(e,t,r){return t instanceof Lr?t:new Lr(e,{priv:t,privEnc:r})},Lr.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},Lr.prototype.getPublic=function(e,t){return typeof e=="string"&&(t=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),t?this.pub.encode(t,e):this.pub},Lr.prototype.getPrivate=function(e){return e==="hex"?this.priv.toString(16,2):this.priv},Lr.prototype._importPrivate=function(e,t){this.priv=new de(e,t||16),this.priv=this.priv.umod(this.ec.curve.n)},Lr.prototype._importPublic=function(e,t){if(e.x||e.y){this.ec.curve.type==="mont"?Sl(e.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&Sl(e.x&&e.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(e.x,e.y);return}this.pub=this.ec.curve.decodePoint(e,t)},Lr.prototype.derive=function(e){return e.validate()||Sl(e.validate(),"public point not validated"),e.mul(this.priv).getX()},Lr.prototype.sign=function(e,t,r){return this.ec.sign(e,this,t,r)},Lr.prototype.verify=function(e,t){return this.ec.verify(e,t,this)},Lr.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var SD=xi.assert;function Nc(e,t){if(e instanceof Nc)return e;this._importDER(e,t)||(SD(e.r&&e.s,"Signature without r or s"),this.r=new de(e.r,16),this.s=new de(e.s,16),e.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=e.recoveryParam)}var qu=Nc;function ID(){this.place=0}function Ml(e,t){var r=e[t.place++];if(!(r&128))return r;var i=r&15;if(i===0||i>4)return!1;for(var n=0,o=0,f=t.place;o<i;o++,f++)n<<=8,n|=e[f],n>>>=0;return n<=127?!1:(t.place=f,n)}function Dg(e){for(var t=0,r=e.length-1;!e[t]&&!(e[t+1]&128)&&t<r;)t++;return t===0?e:e.slice(t)}Nc.prototype._importDER=function(e,t){e=xi.toArray(e,t);var r=new ID;if(e[r.place++]!==48)return!1;var i=Ml(e,r);if(i===!1||i+r.place!==e.length||e[r.place++]!==2)return!1;var n=Ml(e,r);if(n===!1)return!1;var o=e.slice(r.place,n+r.place);if(r.place+=n,e[r.place++]!==2)return!1;var f=Ml(e,r);if(f===!1||e.length!==f+r.place)return!1;var d=e.slice(r.place,f+r.place);if(o[0]===0)if(o[1]&128)o=o.slice(1);else return!1;if(d[0]===0)if(d[1]&128)d=d.slice(1);else return!1;return this.r=new de(o),this.s=new de(d),this.recoveryParam=null,!0};function Dl(e,t){if(t<128){e.push(t);return}var r=1+(Math.log(t)/Math.LN2>>>3);for(e.push(r|128);--r;)e.push(t>>>(r<<3)&255);e.push(t)}Nc.prototype.toDER=function(e){var t=this.r.toArray(),r=this.s.toArray();for(t[0]&128&&(t=[0].concat(t)),r[0]&128&&(r=[0].concat(r)),t=Dg(t),r=Dg(r);!r[0]&&!(r[1]&128);)r=r.slice(1);var i=[2];Dl(i,t.length),i=i.concat(t),i.push(2),Dl(i,r.length);var n=i.concat(r),o=[48];return Dl(o,n.length),o=o.concat(n),xi.encode(o,e)};var MD=function(){throw new Error("unsupported")},Py=xi.assert;function Vi(e){if(!(this instanceof Vi))return new Vi(e);typeof e=="string"&&(Py(Object.prototype.hasOwnProperty.call(Zu,e),"Unknown curve "+e),e=Zu[e]),e instanceof Zu.PresetCurve&&(e={curve:e}),this.curve=e.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=e.curve.g,this.g.precompute(e.curve.n.bitLength()+1),this.hash=e.hash||e.curve.hash}var DD=Vi;Vi.prototype.keyPair=function(e){return new Il(this,e)},Vi.prototype.keyFromPrivate=function(e,t){return Il.fromPrivate(this,e,t)},Vi.prototype.keyFromPublic=function(e,t){return Il.fromPublic(this,e,t)},Vi.prototype.genKeyPair=function(e){e||(e={});for(var t=new Mg({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||MD(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),r=this.n.byteLength(),i=this.n.sub(new de(2));;){var n=new de(t.generate(r));if(!(n.cmp(i)>0))return n.iaddn(1),this.keyFromPrivate(n)}},Vi.prototype._truncateToN=function(e,t){var r=e.byteLength()*8-this.n.bitLength();return r>0&&(e=e.ushrn(r)),!t&&e.cmp(this.n)>=0?e.sub(this.n):e},Vi.prototype.sign=function(e,t,r,i){typeof r=="object"&&(i=r,r=null),i||(i={}),t=this.keyFromPrivate(t,r),e=this._truncateToN(new de(e,16));for(var n=this.n.byteLength(),o=t.getPrivate().toArray("be",n),f=e.toArray("be",n),d=new Mg({hash:this.hash,entropy:o,nonce:f,pers:i.pers,persEnc:i.persEnc||"utf8"}),v=this.n.sub(new de(1)),g=0;;g++){var w=i.k?i.k(g):new de(d.generate(this.n.byteLength()));if(w=this._truncateToN(w,!0),!(w.cmpn(1)<=0||w.cmp(v)>=0)){var S=this.g.mul(w);if(!S.isInfinity()){var x=S.getX(),C=x.umod(this.n);if(C.cmpn(0)!==0){var N=w.invm(this.n).mul(C.mul(t.getPrivate()).iadd(e));if(N=N.umod(this.n),N.cmpn(0)!==0){var V=(S.getY().isOdd()?1:0)|(x.cmp(C)!==0?2:0);return i.canonical&&N.cmp(this.nh)>0&&(N=this.n.sub(N),V^=1),new qu({r:C,s:N,recoveryParam:V})}}}}}},Vi.prototype.verify=function(e,t,r,i){e=this._truncateToN(new de(e,16)),r=this.keyFromPublic(r,i),t=new qu(t,"hex");var n=t.r,o=t.s;if(n.cmpn(1)<0||n.cmp(this.n)>=0||o.cmpn(1)<0||o.cmp(this.n)>=0)return!1;var f=o.invm(this.n),d=f.mul(e).umod(this.n),v=f.mul(n).umod(this.n),g;return this.curve._maxwellTrick?(g=this.g.jmulAdd(d,r.getPublic(),v),g.isInfinity()?!1:g.eqXToP(n)):(g=this.g.mulAdd(d,r.getPublic(),v),g.isInfinity()?!1:g.getX().umod(this.n).cmp(n)===0)},Vi.prototype.recoverPubKey=function(e,t,r,i){Py((3&r)===r,"The recovery param is more than two bits"),t=new qu(t,i);var n=this.n,o=new de(e),f=t.r,d=t.s,v=r&1,g=r>>1;if(f.cmp(this.curve.p.umod(this.curve.n))>=0&&g)throw new Error("Unable to find sencond key candinate");g?f=this.curve.pointFromX(f.add(this.curve.n),v):f=this.curve.pointFromX(f,v);var w=t.r.invm(n),S=n.sub(o).mul(w).umod(n),x=d.mul(w).umod(n);return this.g.mulAdd(S,f,x)},Vi.prototype.getKeyRecoveryParam=function(e,t,r,i){if(t=new qu(t,i),t.recoveryParam!==null)return t.recoveryParam;for(var n=0;n<4;n++){var o;try{o=this.recoverPubKey(e,t,n)}catch{continue}if(o.eq(r))return n}throw new Error("Unable to find valid recovery factor")};var xD=ma(function(e,t){var r=t;r.version="6.5.4",r.utils=xi,r.rand=function(){throw new Error("unsupported")},r.curve=Xu,r.curves=Zu,r.ec=DD,r.eddsa=null}),CD=xD.ec;const OD="signing-key/5.7.0",f0=new Or(OD);let xl=null;function Ns(){return xl||(xl=new CD("secp256k1")),xl}class ND{constructor(t){ka(this,"curve","secp256k1"),ka(this,"privateKey",ui(t)),pI(this.privateKey)!==32&&f0.throwArgumentError("invalid private key","privateKey","[[ REDACTED ]]");const r=Ns().keyFromPrivate(er(this.privateKey));ka(this,"publicKey","0x"+r.getPublic(!1,"hex")),ka(this,"compressedPublicKey","0x"+r.getPublic(!0,"hex")),ka(this,"_isSigningKey",!0)}_addPoint(t){const r=Ns().keyFromPublic(er(this.publicKey)),i=Ns().keyFromPublic(er(t));return"0x"+r.pub.add(i.pub).encodeCompressed("hex")}signDigest(t){const r=Ns().keyFromPrivate(er(this.privateKey)),i=er(t);i.length!==32&&f0.throwArgumentError("bad digest length","digest",t);const n=r.sign(i,{canonical:!0});return iy({recoveryParam:n.recoveryParam,r:jn("0x"+n.r.toString(16),32),s:jn("0x"+n.s.toString(16),32)})}computeSharedSecret(t){const r=Ns().keyFromPrivate(er(this.privateKey)),i=Ns().keyFromPublic(er(Ry(t)));return jn("0x"+r.derive(i.getPublic()).toString(16),32)}static isSigningKey(t){return!!(t&&t._isSigningKey)}}function PD(e,t){const r=iy(t),i={r:er(r.r),s:er(r.s)};return"0x"+Ns().recoverPubKey(er(e),i,r.recoveryParam).encode("hex",!1)}function Ry(e,t){const r=er(e);return r.length===32?new ND(r).publicKey:r.length===33?"0x"+Ns().keyFromPublic(r).getPublic(!1,"hex"):r.length===65?ui(r):f0.throwArgumentError("invalid public or private key","key","[REDACTED]")}var xg;(function(e){e[e.legacy=0]="legacy",e[e.eip2930=1]="eip2930",e[e.eip1559=2]="eip1559"})(xg||(xg={}));function RD(e){const t=Ry(e);return HI(dg(z0(dg(t,1)),12))}function TD(e,t){return RD(PD(er(e),t))}const BD="https://rpc.walletconnect.com/v1";async function UD(e,t,r,i,n,o){switch(r.t){case"eip191":return LD(e,t,r.s);case"eip1271":return await FD(e,t,r.s,i,n,o);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${r.t}`)}}function LD(e,t,r){return TD(ly(t),r).toLowerCase()===e.toLowerCase()}async function FD(e,t,r,i,n,o){try{const f="0x1626ba7e",d="0000000000000000000000000000000000000000000000000000000000000040",v="0000000000000000000000000000000000000000000000000000000000000041",g=r.substring(2),w=ly(t).substring(2),S=f+w+d+v+g,x=await fetch(`${o||BD}/?chainId=${i}&projectId=${n}`,{method:"POST",body:JSON.stringify({id:qD(),jsonrpc:"2.0",method:"eth_call",params:[{to:e,data:S},"latest"]})}),{result:C}=await x.json();return C?C.slice(0,f.length).toLowerCase()===f.toLowerCase():!1}catch(f){return console.error("isValidEip1271Signature: ",f),!1}}function qD(){return Date.now()+Math.floor(Math.random()*1e3)}var $D=Object.defineProperty,kD=Object.defineProperties,zD=Object.getOwnPropertyDescriptors,Cg=Object.getOwnPropertySymbols,jD=Object.prototype.hasOwnProperty,HD=Object.prototype.propertyIsEnumerable,Og=(e,t,r)=>t in e?$D(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,KD=(e,t)=>{for(var r in t||(t={}))jD.call(t,r)&&Og(e,r,t[r]);if(Cg)for(var r of Cg(t))HD.call(t,r)&&Og(e,r,t[r]);return e},GD=(e,t)=>kD(e,zD(t));const VD="did:pkh:",V0=e=>e==null?void 0:e.split(":"),Ty=e=>{const t=e&&V0(e);if(t)return e.includes(VD)?t[3]:t[1]},Ng=e=>{const t=e&&V0(e);if(t)return t[2]+":"+t[3]},gc=e=>{const t=e&&V0(e);if(t)return t.pop()};async function Pg(e){const{cacao:t,projectId:r}=e,{s:i,p:n}=t,o=By(n,n.iss),f=gc(n.iss);return await UD(f,o,i,Ty(n.iss),r)}const By=(e,t)=>{const r=`${e.domain} wants you to sign in with your Ethereum account:`,i=gc(t);if(!e.aud&&!e.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let n=e.statement||void 0;const o=`URI: ${e.aud||e.uri}`,f=`Version: ${e.version}`,d=`Chain ID: ${Ty(t)}`,v=`Nonce: ${e.nonce}`,g=`Issued At: ${e.iat}`,w=e.resources?`Resources:${e.resources.map(x=>`
- ${x}`).join("")}`:void 0,S=tc(e.resources);if(S){const x=uh(S);n=rx(n,x)}return[r,i,"",n,"",o,f,d,v,g,w].filter(x=>x!=null).join(`
`)};function QD(e){return lh.from(JSON.stringify(e)).toString("base64")}function YD(e){return JSON.parse(lh.from(e,"base64").toString("utf-8"))}function fo(e){if(!e)throw new Error("No recap provided, value is undefined");if(!e.att)throw new Error("No `att` property found");const t=Object.keys(e.att);if(!(t!=null&&t.length))throw new Error("No resources found in `att` property");t.forEach(r=>{const i=e.att[r];if(Array.isArray(i))throw new Error(`Resource must be an object: ${r}`);if(typeof i!="object")throw new Error(`Resource must be an object: ${r}`);if(!Object.keys(i).length)throw new Error(`Resource object is empty: ${r}`);Object.keys(i).forEach(n=>{const o=i[n];if(!Array.isArray(o))throw new Error(`Ability limits ${n} must be an array of objects, found: ${o}`);if(!o.length)throw new Error(`Value of ${n} is empty array, must be an array with objects`);o.forEach(f=>{if(typeof f!="object")throw new Error(`Ability limits (${n}) must be an array of objects, found: ${f}`)})})})}function JD(e,t,r,i={}){return r==null||r.sort((n,o)=>n.localeCompare(o)),{att:{[e]:WD(t,r,i)}}}function WD(e,t,r={}){t=t==null?void 0:t.sort((n,o)=>n.localeCompare(o));const i=t.map(n=>({[`${e}/${n}`]:[r]}));return Object.assign({},...i)}function Uy(e){return fo(e),`urn:recap:${QD(e).replace(/=/g,"")}`}function uh(e){const t=YD(e.replace("urn:recap:",""));return fo(t),t}function XD(e,t,r){const i=JD(e,t,r);return Uy(i)}function ZD(e){return e&&e.includes("urn:recap:")}function tx(e,t){const r=uh(e),i=uh(t),n=ex(r,i);return Uy(n)}function ex(e,t){fo(e),fo(t);const r=Object.keys(e.att).concat(Object.keys(t.att)).sort((n,o)=>n.localeCompare(o)),i={att:{}};return r.forEach(n=>{var o,f;Object.keys(((o=e.att)==null?void 0:o[n])||{}).concat(Object.keys(((f=t.att)==null?void 0:f[n])||{})).sort((d,v)=>d.localeCompare(v)).forEach(d=>{var v,g;i.att[n]=GD(KD({},i.att[n]),{[d]:((v=e.att[n])==null?void 0:v[d])||((g=t.att[n])==null?void 0:g[d])})})}),i}function rx(e="",t){fo(t);const r="I further authorize the stated URI to perform the following actions on my behalf: ";if(e.includes(r))return e;const i=[];let n=0;Object.keys(t.att).forEach(d=>{const v=Object.keys(t.att[d]).map(S=>({ability:S.split("/")[0],action:S.split("/")[1]}));v.sort((S,x)=>S.action.localeCompare(x.action));const g={};v.forEach(S=>{g[S.ability]||(g[S.ability]=[]),g[S.ability].push(S.action)});const w=Object.keys(g).map(S=>(n++,`(${n}) '${S}': '${g[S].join("', '")}' for '${d}'.`));i.push(w.join(", ").replace(".,","."))});const o=i.join(" "),f=`${r}${o}`;return`${e?e+" ":""}${f}`}function Rg(e){var t;const r=uh(e);fo(r);const i=(t=r.att)==null?void 0:t.eip155;return i?Object.keys(i).map(n=>n.split("/")[1]):[]}function Tg(e){const t=uh(e);fo(t);const r=[];return Object.values(t.att).forEach(i=>{Object.values(i).forEach(n=>{var o;(o=n==null?void 0:n[0])!=null&&o.chains&&r.push(n[0].chains)})}),[...new Set(r.flat())]}function tc(e){if(!e)return;const t=e==null?void 0:e[e.length-1];return ZD(t)?t:void 0}const Ly="base10",Vr="base16",l0="base64pad",Q0="utf8",Fy=0,Fs=1,ix=0,Bg=1,d0=12,Y0=32;function nx(){const e=N0.generateKeyPair();return{privateKey:Qr(e.secretKey,Vr),publicKey:Qr(e.publicKey,Vr)}}function p0(){const e=oa.randomBytes(Y0);return Qr(e,Vr)}function sx(e,t){const r=N0.sharedKey(li(e,Vr),li(t,Vr),!0),i=new w_(Mc.SHA256,r).expand(Y0);return Qr(i,Vr)}function ec(e){const t=Mc.hash(li(e,Vr));return Qr(t,Vr)}function ao(e){const t=Mc.hash(li(e,Q0));return Qr(t,Vr)}function ox(e){return li(`${e}`,Ly)}function Eh(e){return Number(Qr(e,Ly))}function ax(e){const t=ox(typeof e.type<"u"?e.type:Fy);if(Eh(t)===Fs&&typeof e.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const r=typeof e.senderPublicKey<"u"?li(e.senderPublicKey,Vr):void 0,i=typeof e.iv<"u"?li(e.iv,Vr):oa.randomBytes(d0),n=new C0.ChaCha20Poly1305(li(e.symKey,Vr)).seal(i,li(e.message,Q0));return ux({type:t,sealed:n,iv:i,senderPublicKey:r})}function hx(e){const t=new C0.ChaCha20Poly1305(li(e.symKey,Vr)),{sealed:r,iv:i}=mc(e.encoded),n=t.open(i,r);if(n===null)throw new Error("Failed to decrypt");return Qr(n,Q0)}function ux(e){if(Eh(e.type)===Fs){if(typeof e.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return Qr(Jl([e.type,e.senderPublicKey,e.iv,e.sealed]),l0)}return Qr(Jl([e.type,e.iv,e.sealed]),l0)}function mc(e){const t=li(e,l0),r=t.slice(ix,Bg),i=Bg;if(Eh(r)===Fs){const d=i+Y0,v=d+d0,g=t.slice(i,d),w=t.slice(d,v),S=t.slice(v);return{type:r,sealed:S,iv:w,senderPublicKey:g}}const n=i+d0,o=t.slice(i,n),f=t.slice(n);return{type:r,sealed:f,iv:o}}function cx(e,t){const r=mc(e);return qy({type:Eh(r.type),senderPublicKey:typeof r.senderPublicKey<"u"?Qr(r.senderPublicKey,Vr):void 0,receiverPublicKey:t==null?void 0:t.receiverPublicKey})}function qy(e){const t=(e==null?void 0:e.type)||Fy;if(t===Fs){if(typeof(e==null?void 0:e.senderPublicKey)>"u")throw new Error("missing sender public key");if(typeof(e==null?void 0:e.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:t,senderPublicKey:e==null?void 0:e.senderPublicKey,receiverPublicKey:e==null?void 0:e.receiverPublicKey}}function Ug(e){return e.type===Fs&&typeof e.senderPublicKey=="string"&&typeof e.receiverPublicKey=="string"}const fx="irn";function g0(e){return(e==null?void 0:e.relay)||{protocol:fx}}function Ya(e){const t=_4[e];if(typeof t>"u")throw new Error(`Relay Protocol not supported: ${e}`);return t}var lx=Object.defineProperty,dx=Object.defineProperties,px=Object.getOwnPropertyDescriptors,Lg=Object.getOwnPropertySymbols,gx=Object.prototype.hasOwnProperty,mx=Object.prototype.propertyIsEnumerable,Fg=(e,t,r)=>t in e?lx(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,qg=(e,t)=>{for(var r in t||(t={}))gx.call(t,r)&&Fg(e,r,t[r]);if(Lg)for(var r of Lg(t))mx.call(t,r)&&Fg(e,r,t[r]);return e},vx=(e,t)=>dx(e,px(t));function yx(e,t="-"){const r={},i="relay"+t;return Object.keys(e).forEach(n=>{if(n.startsWith(i)){const o=n.replace(i,""),f=e[n];r[o]=f}}),r}function $g(e){e=e.includes("wc://")?e.replace("wc://",""):e,e=e.includes("wc:")?e.replace("wc:",""):e;const t=e.indexOf(":"),r=e.indexOf("?")!==-1?e.indexOf("?"):void 0,i=e.substring(0,t),n=e.substring(t+1,r).split("@"),o=typeof r<"u"?e.substring(r):"",f=ih.parse(o),d=typeof f.methods=="string"?f.methods.split(","):void 0;return{protocol:i,topic:wx(n[0]),version:parseInt(n[1],10),symKey:f.symKey,relay:yx(f),methods:d,expiryTimestamp:f.expiryTimestamp?parseInt(f.expiryTimestamp,10):void 0}}function wx(e){return e.startsWith("//")?e.substring(2):e}function bx(e,t="-"){const r="relay",i={};return Object.keys(e).forEach(n=>{const o=r+t+n;e[n]&&(i[o]=e[n])}),i}function Ax(e){return`${e.protocol}:${e.topic}@${e.version}?`+ih.stringify(qg(vx(qg({symKey:e.symKey},bx(e.relay)),{expiryTimestamp:e.expiryTimestamp}),e.methods?{methods:e.methods.join(",")}:{}))}function va(e){const t=[];return e.forEach(r=>{const[i,n]=r.split(":");t.push(`${i}:${n}`)}),t}function _x(e){const t=[];return Object.values(e).forEach(r=>{t.push(...va(r.accounts))}),t}function Ex(e,t){const r=[];return Object.values(e).forEach(i=>{va(i.accounts).includes(t)&&r.push(...i.methods)}),r}function Sx(e,t){const r=[];return Object.values(e).forEach(i=>{va(i.accounts).includes(t)&&r.push(...i.events)}),r}function J0(e){return e.includes(":")}function Ja(e){return J0(e)?e.split(":")[0]:e}function Ix(e){const t={};return e==null||e.forEach(r=>{const[i,n]=r.split(":");t[i]||(t[i]={accounts:[],chains:[],events:[]}),t[i].accounts.push(r),t[i].chains.push(`${i}:${n}`)}),t}function kg(e,t){t=t.map(i=>i.replace("did:pkh:",""));const r=Ix(t);for(const[i,n]of Object.entries(r))n.methods?n.methods=Ju(n.methods,e):n.methods=e,n.events=["chainChanged","accountsChanged"];return r}const Mx={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},Dx={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function Ot(e,t){const{message:r,code:i}=Dx[e];return{message:t?`${r} ${t}`:r,code:i}}function $e(e,t){const{message:r,code:i}=Mx[e];return{message:t?`${r} ${t}`:r,code:i}}function lo(e,t){return!!Array.isArray(e)}function ch(e){return Object.getPrototypeOf(e)===Object.prototype&&Object.keys(e).length}function ci(e){return typeof e>"u"}function fr(e,t){return t&&ci(e)?!0:typeof e=="string"&&!!e.trim().length}function W0(e,t){return typeof e=="number"&&!isNaN(e)}function xx(e,t){const{requiredNamespaces:r}=t,i=Object.keys(e.namespaces),n=Object.keys(r);let o=!0;return oo(n,i)?(i.forEach(f=>{const{accounts:d,methods:v,events:g}=e.namespaces[f],w=va(d),S=r[f];(!oo(Yv(f,S),w)||!oo(S.methods,v)||!oo(S.events,g))&&(o=!1)}),o):!1}function vc(e){return fr(e,!1)&&e.includes(":")?e.split(":").length===2:!1}function Cx(e){if(fr(e,!1)&&e.includes(":")){const t=e.split(":");if(t.length===3){const r=t[0]+":"+t[1];return!!t[2]&&vc(r)}}return!1}function Ox(e){if(fr(e,!1))try{return typeof new URL(e)<"u"}catch{return!1}return!1}function Nx(e){var t;return(t=e==null?void 0:e.proposer)==null?void 0:t.publicKey}function Px(e){return e==null?void 0:e.topic}function Rx(e,t){let r=null;return fr(e==null?void 0:e.publicKey,!1)||(r=Ot("MISSING_OR_INVALID",`${t} controller public key should be a string`)),r}function zg(e){let t=!0;return lo(e)?e.length&&(t=e.every(r=>fr(r,!1))):t=!1,t}function Tx(e,t,r){let i=null;return lo(t)&&t.length?t.forEach(n=>{i||vc(n)||(i=$e("UNSUPPORTED_CHAINS",`${r}, chain ${n} should be a string and conform to "namespace:chainId" format`))}):vc(e)||(i=$e("UNSUPPORTED_CHAINS",`${r}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),i}function Bx(e,t,r){let i=null;return Object.entries(e).forEach(([n,o])=>{if(i)return;const f=Tx(n,Yv(n,o),`${t} ${r}`);f&&(i=f)}),i}function Ux(e,t){let r=null;return lo(e)?e.forEach(i=>{r||Cx(i)||(r=$e("UNSUPPORTED_ACCOUNTS",`${t}, account ${i} should be a string and conform to "namespace:chainId:address" format`))}):r=$e("UNSUPPORTED_ACCOUNTS",`${t}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),r}function Lx(e,t){let r=null;return Object.values(e).forEach(i=>{if(r)return;const n=Ux(i==null?void 0:i.accounts,`${t} namespace`);n&&(r=n)}),r}function Fx(e,t){let r=null;return zg(e==null?void 0:e.methods)?zg(e==null?void 0:e.events)||(r=$e("UNSUPPORTED_EVENTS",`${t}, events should be an array of strings or empty array for no events`)):r=$e("UNSUPPORTED_METHODS",`${t}, methods should be an array of strings or empty array for no methods`),r}function $y(e,t){let r=null;return Object.values(e).forEach(i=>{if(r)return;const n=Fx(i,`${t}, namespace`);n&&(r=n)}),r}function qx(e,t,r){let i=null;if(e&&ch(e)){const n=$y(e,t);n&&(i=n);const o=Bx(e,t,r);o&&(i=o)}else i=Ot("MISSING_OR_INVALID",`${t}, ${r} should be an object with data`);return i}function Cl(e,t){let r=null;if(e&&ch(e)){const i=$y(e,t);i&&(r=i);const n=Lx(e,t);n&&(r=n)}else r=Ot("MISSING_OR_INVALID",`${t}, namespaces should be an object with data`);return r}function ky(e){return fr(e.protocol,!0)}function $x(e,t){let r=!1;return e?e&&lo(e)&&e.length&&e.forEach(i=>{r=ky(i)}):r=!0,r}function kx(e){return typeof e=="number"}function hi(e){return typeof e<"u"&&typeof e!==null}function zx(e){return!(!e||typeof e!="object"||!e.code||!W0(e.code)||!e.message||!fr(e.message,!1))}function jx(e){return!(ci(e)||!fr(e.method,!1))}function Hx(e){return!(ci(e)||ci(e.result)&&ci(e.error)||!W0(e.id)||!fr(e.jsonrpc,!1))}function Kx(e){return!(ci(e)||!fr(e.name,!1))}function jg(e,t){return!(!vc(t)||!_x(e).includes(t))}function Gx(e,t,r){return fr(r,!1)?Ex(e,t).includes(r):!1}function Vx(e,t,r){return fr(r,!1)?Sx(e,t).includes(r):!1}function Hg(e,t,r){let i=null;const n=Qx(e),o=Yx(t),f=Object.keys(n),d=Object.keys(o),v=Kg(Object.keys(e)),g=Kg(Object.keys(t)),w=v.filter(S=>!g.includes(S));return w.length&&(i=Ot("NON_CONFORMING_NAMESPACES",`${r} namespaces keys don't satisfy requiredNamespaces.
      Required: ${w.toString()}
      Received: ${Object.keys(t).toString()}`)),oo(f,d)||(i=Ot("NON_CONFORMING_NAMESPACES",`${r} namespaces chains don't satisfy required namespaces.
      Required: ${f.toString()}
      Approved: ${d.toString()}`)),Object.keys(t).forEach(S=>{if(!S.includes(":")||i)return;const x=va(t[S].accounts);x.includes(S)||(i=Ot("NON_CONFORMING_NAMESPACES",`${r} namespaces accounts don't satisfy namespace accounts for ${S}
        Required: ${S}
        Approved: ${x.toString()}`))}),f.forEach(S=>{i||(oo(n[S].methods,o[S].methods)?oo(n[S].events,o[S].events)||(i=Ot("NON_CONFORMING_NAMESPACES",`${r} namespaces events don't satisfy namespace events for ${S}`)):i=Ot("NON_CONFORMING_NAMESPACES",`${r} namespaces methods don't satisfy namespace methods for ${S}`))}),i}function Qx(e){const t={};return Object.keys(e).forEach(r=>{var i;r.includes(":")?t[r]=e[r]:(i=e[r].chains)==null||i.forEach(n=>{t[n]={methods:e[r].methods,events:e[r].events}})}),t}function Kg(e){return[...new Set(e.map(t=>t.includes(":")?t.split(":")[0]:t))]}function Yx(e){const t={};return Object.keys(e).forEach(r=>{if(r.includes(":"))t[r]=e[r];else{const i=va(e[r].accounts);i==null||i.forEach(n=>{t[n]={accounts:e[r].accounts.filter(o=>o.includes(`${n}:`)),methods:e[r].methods,events:e[r].events}})}}),t}function Jx(e,t){return W0(e)&&e<=t.max&&e>=t.min}function Gg(){const e=Ah();return new Promise(t=>{switch(e){case Ii.browser:t(Wx());break;case Ii.reactNative:t(Xx());break;case Ii.node:t(Zx());break;default:t(!0)}})}function Wx(){return la()&&(navigator==null?void 0:navigator.onLine)}async function Xx(){if(fa()&&typeof Re<"u"&&Re!=null&&Re.NetInfo){const e=await(Re==null?void 0:Re.NetInfo.fetch());return e==null?void 0:e.isConnected}return!0}function Zx(){return!0}function tC(e){switch(Ah()){case Ii.browser:eC(e);break;case Ii.reactNative:rC(e);break}}function eC(e){!fa()&&la()&&(window.addEventListener("online",()=>e(!0)),window.addEventListener("offline",()=>e(!1)))}function rC(e){var t;fa()&&typeof Re<"u"&&Re!=null&&Re.NetInfo&&((t=Re)==null||t.NetInfo.addEventListener(r=>e(r==null?void 0:r.isConnected)))}const Ol={};class Ha{static get(t){return Ol[t]}static set(t,r){Ol[t]=r}static delete(t){delete Ol[t]}}const iC="PARSE_ERROR",nC="INVALID_REQUEST",sC="METHOD_NOT_FOUND",oC="INVALID_PARAMS",zy="INTERNAL_ERROR",X0="SERVER_ERROR",aC=[-32700,-32600,-32601,-32602,-32603],eh={[iC]:{code:-32700,message:"Parse error"},[nC]:{code:-32600,message:"Invalid Request"},[sC]:{code:-32601,message:"Method not found"},[oC]:{code:-32602,message:"Invalid params"},[zy]:{code:-32603,message:"Internal error"},[X0]:{code:-32e3,message:"Server error"}},jy=X0;function hC(e){return aC.includes(e)}function Vg(e){return Object.keys(eh).includes(e)?eh[e]:eh[jy]}function uC(e){const t=Object.values(eh).find(r=>r.code===e);return t||eh[jy]}function Hy(e,t,r){return e.message.includes("getaddrinfo ENOTFOUND")||e.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${r} RPC url at ${t}`):e}var Ky={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var m0=function(e,t){return m0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var n in i)i.hasOwnProperty(n)&&(r[n]=i[n])},m0(e,t)};function cC(e,t){m0(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var v0=function(){return v0=Object.assign||function(t){for(var r,i=1,n=arguments.length;i<n;i++){r=arguments[i];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},v0.apply(this,arguments)};function fC(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(r[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,i=Object.getOwnPropertySymbols(e);n<i.length;n++)t.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(e,i[n])&&(r[i[n]]=e[i[n]]);return r}function lC(e,t,r,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,r):i,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(e,t,r,i);else for(var d=e.length-1;d>=0;d--)(f=e[d])&&(o=(n<3?f(o):n>3?f(t,r,o):f(t,r))||o);return n>3&&o&&Object.defineProperty(t,r,o),o}function dC(e,t){return function(r,i){t(r,i,e)}}function pC(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function gC(e,t,r,i){function n(o){return o instanceof r?o:new r(function(f){f(o)})}return new(r||(r=Promise))(function(o,f){function d(w){try{g(i.next(w))}catch(S){f(S)}}function v(w){try{g(i.throw(w))}catch(S){f(S)}}function g(w){w.done?o(w.value):n(w.value).then(d,v)}g((i=i.apply(e,t||[])).next())})}function mC(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},i,n,o,f;return f={next:d(0),throw:d(1),return:d(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function d(g){return function(w){return v([g,w])}}function v(g){if(i)throw new TypeError("Generator is already executing.");for(;r;)try{if(i=1,n&&(o=g[0]&2?n.return:g[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,g[1])).done)return o;switch(n=0,o&&(g=[g[0]&2,o.value]),g[0]){case 0:case 1:o=g;break;case 4:return r.label++,{value:g[1],done:!1};case 5:r.label++,n=g[1],g=[0];continue;case 7:g=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(g[0]===6||g[0]===2)){r=0;continue}if(g[0]===3&&(!o||g[1]>o[0]&&g[1]<o[3])){r.label=g[1];break}if(g[0]===6&&r.label<o[1]){r.label=o[1],o=g;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(g);break}o[2]&&r.ops.pop(),r.trys.pop();continue}g=t.call(e,r)}catch(w){g=[6,w],n=0}finally{i=o=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}}function vC(e,t,r,i){i===void 0&&(i=r),e[i]=t[r]}function yC(e,t){for(var r in e)r!=="default"&&!t.hasOwnProperty(r)&&(t[r]=e[r])}function y0(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],i=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Gy(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var i=r.call(e),n,o=[],f;try{for(;(t===void 0||t-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(d){f={error:d}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(f)throw f.error}}return o}function wC(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Gy(arguments[t]));return e}function bC(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var i=Array(e),n=0,t=0;t<r;t++)for(var o=arguments[t],f=0,d=o.length;f<d;f++,n++)i[n]=o[f];return i}function fh(e){return this instanceof fh?(this.v=e,this):new fh(e)}function AC(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=r.apply(e,t||[]),n,o=[];return n={},f("next"),f("throw"),f("return"),n[Symbol.asyncIterator]=function(){return this},n;function f(x){i[x]&&(n[x]=function(C){return new Promise(function(N,V){o.push([x,C,N,V])>1||d(x,C)})})}function d(x,C){try{v(i[x](C))}catch(N){S(o[0][3],N)}}function v(x){x.value instanceof fh?Promise.resolve(x.value.v).then(g,w):S(o[0][2],x)}function g(x){d("next",x)}function w(x){d("throw",x)}function S(x,C){x(C),o.shift(),o.length&&d(o[0][0],o[0][1])}}function _C(e){var t,r;return t={},i("next"),i("throw",function(n){throw n}),i("return"),t[Symbol.iterator]=function(){return this},t;function i(n,o){t[n]=e[n]?function(f){return(r=!r)?{value:fh(e[n](f)),done:n==="return"}:o?o(f):f}:o}}function EC(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof y0=="function"?y0(e):e[Symbol.iterator](),r={},i("next"),i("throw"),i("return"),r[Symbol.asyncIterator]=function(){return this},r);function i(o){r[o]=e[o]&&function(f){return new Promise(function(d,v){f=e[o](f),n(d,v,f.done,f.value)})}}function n(o,f,d,v){Promise.resolve(v).then(function(g){o({value:g,done:d})},f)}}function SC(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function IC(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function MC(e){return e&&e.__esModule?e:{default:e}}function DC(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function xC(e,t,r){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,r),r}const CC=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return v0},__asyncDelegator:_C,__asyncGenerator:AC,__asyncValues:EC,__await:fh,__awaiter:gC,__classPrivateFieldGet:DC,__classPrivateFieldSet:xC,__createBinding:vC,__decorate:lC,__exportStar:yC,__extends:cC,__generator:mC,__importDefault:MC,__importStar:IC,__makeTemplateObject:SC,__metadata:pC,__param:dC,__read:Gy,__rest:fC,__spread:wC,__spreadArrays:bC,__values:y0},Symbol.toStringTag,{value:"Module"})),OC=M0(CC);var as={},Qg;function NC(){if(Qg)return as;Qg=1,Object.defineProperty(as,"__esModule",{value:!0}),as.isBrowserCryptoAvailable=as.getSubtleCrypto=as.getBrowerCrypto=void 0;function e(){return(bn===null||bn===void 0?void 0:bn.crypto)||(bn===null||bn===void 0?void 0:bn.msCrypto)||{}}as.getBrowerCrypto=e;function t(){const i=e();return i.subtle||i.webkitSubtle}as.getSubtleCrypto=t;function r(){return!!e()&&!!t()}return as.isBrowserCryptoAvailable=r,as}var hs={},Yg;function PC(){if(Yg)return hs;Yg=1,Object.defineProperty(hs,"__esModule",{value:!0}),hs.isBrowser=hs.isNode=hs.isReactNative=void 0;function e(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}hs.isReactNative=e;function t(){return typeof Fr<"u"&&typeof Fr.versions<"u"&&typeof Fr.versions.node<"u"}hs.isNode=t;function r(){return!e()&&!t()}return hs.isBrowser=r,hs}(function(e){Object.defineProperty(e,"__esModule",{value:!0});const t=OC;t.__exportStar(NC(),e),t.__exportStar(PC(),e)})(Ky);function Ps(e=3){const t=Date.now()*Math.pow(10,e),r=Math.floor(Math.random()*Math.pow(10,e));return t+r}function ho(e=6){return BigInt(Ps(e))}function Zo(e,t,r){return{id:r||Ps(),jsonrpc:"2.0",method:e,params:t}}function Pc(e,t){return{id:e,jsonrpc:"2.0",result:t}}function Rc(e,t,r){return{id:e,jsonrpc:"2.0",error:RC(t)}}function RC(e,t){return typeof e>"u"?Vg(zy):(typeof e=="string"&&(e=Object.assign(Object.assign({},Vg(X0)),{message:e})),hC(e.code)&&(e=uC(e.code)),e)}class TC{}class BC extends TC{constructor(){super()}}class UC extends BC{constructor(t){super()}}const LC="^https?:",FC="^wss?:";function qC(e){const t=e.match(new RegExp(/^\w+:/,"gi"));if(!(!t||!t.length))return t[0]}function Vy(e,t){const r=qC(e);return typeof r>"u"?!1:new RegExp(t).test(r)}function Jg(e){return Vy(e,LC)}function Wg(e){return Vy(e,FC)}function $C(e){return new RegExp("wss?://localhost(:d{2,5})?").test(e)}function Qy(e){return typeof e=="object"&&"id"in e&&"jsonrpc"in e&&e.jsonrpc==="2.0"}function Z0(e){return Qy(e)&&"method"in e}function Tc(e){return Qy(e)&&(Rn(e)||Qi(e))}function Rn(e){return"result"in e}function Qi(e){return"error"in e}let ms=class extends UC{constructor(t){super(t),this.events=new Wi.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(t),this.connection.connected&&this.registerEventListeners()}async connect(t=this.connection){await this.open(t)}async disconnect(){await this.close()}on(t,r){this.events.on(t,r)}once(t,r){this.events.once(t,r)}off(t,r){this.events.off(t,r)}removeListener(t,r){this.events.removeListener(t,r)}async request(t,r){return this.requestStrict(Zo(t.method,t.params||[],t.id||ho().toString()),r)}async requestStrict(t,r){return new Promise(async(i,n)=>{if(!this.connection.connected)try{await this.open()}catch(o){n(o)}this.events.on(`${t.id}`,o=>{Qi(o)?n(o.error):i(o.result)});try{await this.connection.send(t,r)}catch(o){n(o)}})}setConnection(t=this.connection){return t}onPayload(t){this.events.emit("payload",t),Tc(t)?this.events.emit(`${t.id}`,t):this.events.emit("message",{type:t.method,data:t.params})}onClose(t){t&&t.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${t.code} ${t.reason?`(${t.reason})`:""}`)),this.events.emit("disconnect")}async open(t=this.connection){this.connection===t&&this.connection.connected||(this.connection.connected&&this.close(),typeof t=="string"&&(await this.connection.open(t),t=this.connection),this.connection=this.setConnection(t),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",t=>this.onPayload(t)),this.connection.on("close",t=>this.onClose(t)),this.connection.on("error",t=>this.events.emit("error",t)),this.connection.on("register_error",t=>this.onClose()),this.hasRegisteredEventListeners=!0)}};const kC=e=>JSON.stringify(e,(t,r)=>typeof r=="bigint"?r.toString()+"n":r),zC=e=>{const t=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,r=e.replace(t,'$1"$2n"$3');return JSON.parse(r,(i,n)=>typeof n=="string"&&n.match(/^\d+n$/)?BigInt(n.substring(0,n.length-1)):n)};function jC(e){if(typeof e!="string")throw new Error(`Cannot safe json parse value of type ${typeof e}`);try{return zC(e)}catch{return e}}function HC(e){return typeof e=="string"?e:kC(e)||""}const KC=()=>typeof WebSocket<"u"?WebSocket:typeof Re<"u"&&typeof Re.WebSocket<"u"?Re.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),GC=()=>typeof WebSocket<"u"||typeof Re<"u"&&typeof Re.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",Xg=e=>e.split("?")[0],Zg=10,VC=KC();let QC=class{constructor(t){if(this.url=t,this.events=new Wi.EventEmitter,this.registering=!1,!Wg(t))throw new Error(`Provided URL is not compatible with WebSocket connection: ${t}`);this.url=t}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(t,r){this.events.on(t,r)}once(t,r){this.events.once(t,r)}off(t,r){this.events.off(t,r)}removeListener(t,r){this.events.removeListener(t,r)}async open(t=this.url){await this.register(t)}async close(){return new Promise((t,r)=>{if(typeof this.socket>"u"){r(new Error("Connection already closed"));return}this.socket.onclose=i=>{this.onClose(i),t()},this.socket.close()})}async send(t){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(HC(t))}catch(r){this.onError(t.id,r)}}register(t=this.url){if(!Wg(t))throw new Error(`Provided URL is not compatible with WebSocket connection: ${t}`);if(this.registering){const r=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=r||this.events.listenerCount("open")>=r)&&this.events.setMaxListeners(r+1),new Promise((i,n)=>{this.events.once("register_error",o=>{this.resetMaxListeners(),n(o)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return n(new Error("WebSocket connection is missing or invalid"));i(this.socket)})})}return this.url=t,this.registering=!0,new Promise((r,i)=>{const n=new URLSearchParams(t).get("origin"),o=Ky.isReactNative()?{headers:{origin:n}}:{rejectUnauthorized:!$C(t)},f=new VC(t,[],o);GC()?f.onerror=d=>{const v=d;i(this.emitError(v.error))}:f.on("error",d=>{i(this.emitError(d))}),f.onopen=()=>{this.onOpen(f),r(f)}})}onOpen(t){t.onmessage=r=>this.onPayload(r),t.onclose=r=>this.onClose(r),this.socket=t,this.registering=!1,this.events.emit("open")}onClose(t){this.socket=void 0,this.registering=!1,this.events.emit("close",t)}onPayload(t){if(typeof t.data>"u")return;const r=typeof t.data=="string"?jC(t.data):t.data;this.events.emit("payload",r)}onError(t,r){const i=this.parseError(r),n=i.message||i.toString(),o=Rc(t,n);this.events.emit("payload",o)}parseError(t,r=this.url){return Hy(t,Xg(r),"WS")}resetMaxListeners(){this.events.getMaxListeners()>Zg&&this.events.setMaxListeners(Zg)}emitError(t){const r=this.parseError(new Error((t==null?void 0:t.message)||`WebSocket connection failed for host: ${Xg(this.url)}`));return this.events.emit("register_error",r),r}};var yc={exports:{}};yc.exports;(function(e,t){var r=200,i="__lodash_hash_undefined__",n=1,o=2,f=9007199254740991,d="[object Arguments]",v="[object Array]",g="[object AsyncFunction]",w="[object Boolean]",S="[object Date]",x="[object Error]",C="[object Function]",N="[object GeneratorFunction]",V="[object Map]",z="[object Number]",X="[object Null]",G="[object Object]",Y="[object Promise]",$="[object Proxy]",j="[object RegExp]",k="[object Set]",_="[object String]",L="[object Symbol]",ot="[object Undefined]",ct="[object WeakMap]",ht="[object ArrayBuffer]",_t="[object DataView]",h="[object Float32Array]",u="[object Float64Array]",p="[object Int8Array]",b="[object Int16Array]",M="[object Int32Array]",D="[object Uint8Array]",O="[object Uint8ClampedArray]",A="[object Uint16Array]",c="[object Uint32Array]",I=/[\\^$.*+?()[\]{}|]/g,Z=/^\[object .+?Constructor\]$/,nt=/^(?:0|[1-9]\d*)$/,m={};m[h]=m[u]=m[p]=m[b]=m[M]=m[D]=m[O]=m[A]=m[c]=!0,m[d]=m[v]=m[ht]=m[w]=m[_t]=m[S]=m[x]=m[C]=m[V]=m[z]=m[G]=m[j]=m[k]=m[_]=m[ct]=!1;var H=typeof bn=="object"&&bn&&bn.Object===Object&&bn,R=typeof self=="object"&&self&&self.Object===Object&&self,T=H||R||Function("return this")(),q=t&&!t.nodeType&&t,y=q&&!0&&e&&!e.nodeType&&e,B=y&&y.exports===q,W=B&&H.process,st=function(){try{return W&&W.binding&&W.binding("util")}catch{}}(),rt=st&&st.isTypedArray;function Et(K,tt){for(var dt=-1,Kt=K==null?0:K.length,je=0,ce=[];++dt<Kt;){var Qe=K[dt];tt(Qe,dt,K)&&(ce[je++]=Qe)}return ce}function It(K,tt){for(var dt=-1,Kt=tt.length,je=K.length;++dt<Kt;)K[je+dt]=tt[dt];return K}function bt(K,tt){for(var dt=-1,Kt=K==null?0:K.length;++dt<Kt;)if(tt(K[dt],dt,K))return!0;return!1}function me(K,tt){for(var dt=-1,Kt=Array(K);++dt<K;)Kt[dt]=tt(dt);return Kt}function Pt(K){return function(tt){return K(tt)}}function At(K,tt){return K.has(tt)}function Jt(K,tt){return K==null?void 0:K[tt]}function vt(K){var tt=-1,dt=Array(K.size);return K.forEach(function(Kt,je){dt[++tt]=[je,Kt]}),dt}function yt(K,tt){return function(dt){return K(tt(dt))}}function re(K){var tt=-1,dt=Array(K.size);return K.forEach(function(Kt){dt[++tt]=Kt}),dt}var gt=Array.prototype,wt=Function.prototype,Qt=Object.prototype,mt=T["__core-js_shared__"],St=wt.toString,Wt=Qt.hasOwnProperty,Mt=function(){var K=/[^.]+$/.exec(mt&&mt.keys&&mt.keys.IE_PROTO||"");return K?"Symbol(src)_1."+K:""}(),Dt=Qt.toString,oe=RegExp("^"+St.call(Wt).replace(I,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ct=B?T.Buffer:void 0,xt=T.Symbol,Te=T.Uint8Array,Vt=Qt.propertyIsEnumerable,Xt=gt.splice,Be=xt?xt.toStringTag:void 0,Zt=Object.getOwnPropertySymbols,te=Ct?Ct.isBuffer:void 0,Xe=yt(Object.keys,Object),Ut=yi(T,"DataView"),Rt=yi(T,"Map"),be=yi(T,"Promise"),Lt=yi(T,"Set"),Tt=yi(T,"WeakMap"),ve=yi(Object,"create"),$t=Yn(Ut),kt=Yn(Rt),Ae=Yn(be),zt=Yn(Lt),Ft=Yn(Tt),_e=xt?xt.prototype:void 0,qt=_e?_e.valueOf:void 0;function Nt(K){var tt=-1,dt=K==null?0:K.length;for(this.clear();++tt<dt;){var Kt=K[tt];this.set(Kt[0],Kt[1])}}function Ie(){this.__data__=ve?ve(null):{},this.size=0}function jt(K){var tt=this.has(K)&&delete this.__data__[K];return this.size-=tt?1:0,tt}function ie(K){var tt=this.__data__;if(ve){var dt=tt[K];return dt===i?void 0:dt}return Wt.call(tt,K)?tt[K]:void 0}function pr(K){var tt=this.__data__;return ve?tt[K]!==void 0:Wt.call(tt,K)}function ne(K,tt){var dt=this.__data__;return this.size+=this.has(K)?0:1,dt[K]=ve&&tt===void 0?i:tt,this}Nt.prototype.clear=Ie,Nt.prototype.delete=jt,Nt.prototype.get=ie,Nt.prototype.has=pr,Nt.prototype.set=ne;function Yt(K){var tt=-1,dt=K==null?0:K.length;for(this.clear();++tt<dt;){var Kt=K[tt];this.set(Kt[0],Kt[1])}}function rr(){this.__data__=[],this.size=0}function ir(K){var tt=this.__data__,dt=js(tt,K);if(dt<0)return!1;var Kt=tt.length-1;return dt==Kt?tt.pop():Xt.call(tt,dt,1),--this.size,!0}function nr(K){var tt=this.__data__,dt=js(tt,K);return dt<0?void 0:tt[dt][1]}function sr(K){return js(this.__data__,K)>-1}function or(K,tt){var dt=this.__data__,Kt=js(dt,K);return Kt<0?(++this.size,dt.push([K,tt])):dt[Kt][1]=tt,this}Yt.prototype.clear=rr,Yt.prototype.delete=ir,Yt.prototype.get=nr,Yt.prototype.has=sr,Yt.prototype.set=or;function ke(K){var tt=-1,dt=K==null?0:K.length;for(this.clear();++tt<dt;){var Kt=K[tt];this.set(Kt[0],Kt[1])}}function Wr(){this.size=0,this.__data__={hash:new Nt,map:new(Rt||Yt),string:new Nt}}function Xi(K){var tt=ys(this,K).delete(K);return this.size-=tt?1:0,tt}function Xr(K){return ys(this,K).get(K)}function Zi(K){return ys(this,K).has(K)}function tn(K,tt){var dt=ys(this,K),Kt=dt.size;return dt.set(K,tt),this.size+=dt.size==Kt?0:1,this}ke.prototype.clear=Wr,ke.prototype.delete=Xi,ke.prototype.get=Xr,ke.prototype.has=Zi,ke.prototype.set=tn;function Zr(K){var tt=-1,dt=K==null?0:K.length;for(this.__data__=new ke;++tt<dt;)this.add(K[tt])}function Oi(K){return this.__data__.set(K,i),this}function Ni(K){return this.__data__.has(K)}Zr.prototype.add=Zr.prototype.push=Oi,Zr.prototype.has=Ni;function gr(K){var tt=this.__data__=new Yt(K);this.size=tt.size}function en(){this.__data__=new Yt,this.size=0}function rn(K){var tt=this.__data__,dt=tt.delete(K);return this.size=tt.size,dt}function nn(K){return this.__data__.get(K)}function sn(K){return this.__data__.has(K)}function Ih(K,tt){var dt=this.__data__;if(dt instanceof Yt){var Kt=dt.__data__;if(!Rt||Kt.length<r-1)return Kt.push([K,tt]),this.size=++dt.size,this;dt=this.__data__=new ke(Kt)}return dt.set(K,tt),this.size=dt.size,this}gr.prototype.clear=en,gr.prototype.delete=rn,gr.prototype.get=nn,gr.prototype.has=sn,gr.prototype.set=Ih;function Mh(K,tt){var dt=So(K),Kt=!dt&&Fh(K),je=!dt&&!Kt&&ba(K),ce=!dt&&!Kt&&!je&&kh(K),Qe=dt||Kt||je||ce,lr=Qe?me(K.length,String):[],Ne=lr.length;for(var He in K)Wt.call(K,He)&&!(Qe&&(He=="length"||je&&(He=="offset"||He=="parent")||ce&&(He=="buffer"||He=="byteLength"||He=="byteOffset")||Rh(He,Ne)))&&lr.push(He);return lr}function js(K,tt){for(var dt=K.length;dt--;)if(Lh(K[dt][0],tt))return dt;return-1}function ya(K,tt,dt){var Kt=tt(K);return So(K)?Kt:It(Kt,dt(K))}function Hs(K){return K==null?K===void 0?ot:X:Be&&Be in Object(K)?Nh(K):qc(K)}function wa(K){return Gs(K)&&Hs(K)==d}function Ks(K,tt,dt,Kt,je){return K===tt?!0:K==null||tt==null||!Gs(K)&&!Gs(tt)?K!==K&&tt!==tt:Dh(K,tt,dt,Kt,Ks,je)}function Dh(K,tt,dt,Kt,je,ce){var Qe=So(K),lr=So(tt),Ne=Qe?v:En(K),He=lr?v:En(tt);Ne=Ne==d?G:Ne,He=He==d?G:He;var ar=Ne==G,ti=He==G,dr=Ne==He;if(dr&&ba(K)){if(!ba(tt))return!1;Qe=!0,ar=!1}if(dr&&!ar)return ce||(ce=new gr),Qe||kh(K)?_o(K,tt,dt,Kt,je,ce):Fc(K,tt,Ne,dt,Kt,je,ce);if(!(dt&n)){var Ye=ar&&Wt.call(K,"__wrapped__"),qr=ti&&Wt.call(tt,"__wrapped__");if(Ye||qr){var on=Ye?K.value():K,Pi=qr?tt.value():tt;return ce||(ce=new gr),je(on,Pi,dt,Kt,ce)}}return dr?(ce||(ce=new gr),Oh(K,tt,dt,Kt,je,ce)):!1}function Lc(K){if(!$h(K)||Bh(K))return!1;var tt=Io(K)?oe:Z;return tt.test(Yn(K))}function xh(K){return Gs(K)&&qh(K.length)&&!!m[Hs(K)]}function Ch(K){if(!Uh(K))return Xe(K);var tt=[];for(var dt in Object(K))Wt.call(K,dt)&&dt!="constructor"&&tt.push(dt);return tt}function _o(K,tt,dt,Kt,je,ce){var Qe=dt&n,lr=K.length,Ne=tt.length;if(lr!=Ne&&!(Qe&&Ne>lr))return!1;var He=ce.get(K);if(He&&ce.get(tt))return He==tt;var ar=-1,ti=!0,dr=dt&o?new Zr:void 0;for(ce.set(K,tt),ce.set(tt,K);++ar<lr;){var Ye=K[ar],qr=tt[ar];if(Kt)var on=Qe?Kt(qr,Ye,ar,tt,K,ce):Kt(Ye,qr,ar,K,tt,ce);if(on!==void 0){if(on)continue;ti=!1;break}if(dr){if(!bt(tt,function(Pi,Sn){if(!At(dr,Sn)&&(Ye===Pi||je(Ye,Pi,dt,Kt,ce)))return dr.push(Sn)})){ti=!1;break}}else if(!(Ye===qr||je(Ye,qr,dt,Kt,ce))){ti=!1;break}}return ce.delete(K),ce.delete(tt),ti}function Fc(K,tt,dt,Kt,je,ce,Qe){switch(dt){case _t:if(K.byteLength!=tt.byteLength||K.byteOffset!=tt.byteOffset)return!1;K=K.buffer,tt=tt.buffer;case ht:return!(K.byteLength!=tt.byteLength||!ce(new Te(K),new Te(tt)));case w:case S:case z:return Lh(+K,+tt);case x:return K.name==tt.name&&K.message==tt.message;case j:case _:return K==tt+"";case V:var lr=vt;case k:var Ne=Kt&n;if(lr||(lr=re),K.size!=tt.size&&!Ne)return!1;var He=Qe.get(K);if(He)return He==tt;Kt|=o,Qe.set(K,tt);var ar=_o(lr(K),lr(tt),Kt,je,ce,Qe);return Qe.delete(K),ar;case L:if(qt)return qt.call(K)==qt.call(tt)}return!1}function Oh(K,tt,dt,Kt,je,ce){var Qe=dt&n,lr=Eo(K),Ne=lr.length,He=Eo(tt),ar=He.length;if(Ne!=ar&&!Qe)return!1;for(var ti=Ne;ti--;){var dr=lr[ti];if(!(Qe?dr in tt:Wt.call(tt,dr)))return!1}var Ye=ce.get(K);if(Ye&&ce.get(tt))return Ye==tt;var qr=!0;ce.set(K,tt),ce.set(tt,K);for(var on=Qe;++ti<Ne;){dr=lr[ti];var Pi=K[dr],Sn=tt[dr];if(Kt)var Aa=Qe?Kt(Sn,Pi,dr,tt,K,ce):Kt(Pi,Sn,dr,K,tt,ce);if(!(Aa===void 0?Pi===Sn||je(Pi,Sn,dt,Kt,ce):Aa)){qr=!1;break}on||(on=dr=="constructor")}if(qr&&!on){var Vs=K.constructor,Ar=tt.constructor;Vs!=Ar&&"constructor"in K&&"constructor"in tt&&!(typeof Vs=="function"&&Vs instanceof Vs&&typeof Ar=="function"&&Ar instanceof Ar)&&(qr=!1)}return ce.delete(K),ce.delete(tt),qr}function Eo(K){return ya(K,zc,Ph)}function ys(K,tt){var dt=K.__data__;return Th(tt)?dt[typeof tt=="string"?"string":"hash"]:dt.map}function yi(K,tt){var dt=Jt(K,tt);return Lc(dt)?dt:void 0}function Nh(K){var tt=Wt.call(K,Be),dt=K[Be];try{K[Be]=void 0;var Kt=!0}catch{}var je=Dt.call(K);return Kt&&(tt?K[Be]=dt:delete K[Be]),je}var Ph=Zt?function(K){return K==null?[]:(K=Object(K),Et(Zt(K),function(tt){return Vt.call(K,tt)}))}:ze,En=Hs;(Ut&&En(new Ut(new ArrayBuffer(1)))!=_t||Rt&&En(new Rt)!=V||be&&En(be.resolve())!=Y||Lt&&En(new Lt)!=k||Tt&&En(new Tt)!=ct)&&(En=function(K){var tt=Hs(K),dt=tt==G?K.constructor:void 0,Kt=dt?Yn(dt):"";if(Kt)switch(Kt){case $t:return _t;case kt:return V;case Ae:return Y;case zt:return k;case Ft:return ct}return tt});function Rh(K,tt){return tt=tt??f,!!tt&&(typeof K=="number"||nt.test(K))&&K>-1&&K%1==0&&K<tt}function Th(K){var tt=typeof K;return tt=="string"||tt=="number"||tt=="symbol"||tt=="boolean"?K!=="__proto__":K===null}function Bh(K){return!!Mt&&Mt in K}function Uh(K){var tt=K&&K.constructor,dt=typeof tt=="function"&&tt.prototype||Qt;return K===dt}function qc(K){return Dt.call(K)}function Yn(K){if(K!=null){try{return St.call(K)}catch{}try{return K+""}catch{}}return""}function Lh(K,tt){return K===tt||K!==K&&tt!==tt}var Fh=wa(function(){return arguments}())?wa:function(K){return Gs(K)&&Wt.call(K,"callee")&&!Vt.call(K,"callee")},So=Array.isArray;function $c(K){return K!=null&&qh(K.length)&&!Io(K)}var ba=te||qe;function kc(K,tt){return Ks(K,tt)}function Io(K){if(!$h(K))return!1;var tt=Hs(K);return tt==C||tt==N||tt==g||tt==$}function qh(K){return typeof K=="number"&&K>-1&&K%1==0&&K<=f}function $h(K){var tt=typeof K;return K!=null&&(tt=="object"||tt=="function")}function Gs(K){return K!=null&&typeof K=="object"}var kh=rt?Pt(rt):xh;function zc(K){return $c(K)?Mh(K):Ch(K)}function ze(){return[]}function qe(){return!1}e.exports=kc})(yc,yc.exports);var YC=yc.exports;const JC=bc(YC);function WC(e,t){return t=t||{},new Promise(function(r,i){var n=new XMLHttpRequest,o=[],f=[],d={},v=function(){return{ok:(n.status/100|0)==2,statusText:n.statusText,status:n.status,url:n.responseURL,text:function(){return Promise.resolve(n.responseText)},json:function(){return Promise.resolve(n.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([n.response]))},clone:v,headers:{keys:function(){return o},entries:function(){return f},get:function(w){return d[w.toLowerCase()]},has:function(w){return w.toLowerCase()in d}}}};for(var g in n.open(t.method||"get",e,!0),n.onload=function(){n.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,function(w,S,x){o.push(S=S.toLowerCase()),f.push([S,x]),d[S]=d[S]?d[S]+","+x:x}),r(v())},n.onerror=i,n.withCredentials=t.credentials=="include",t.headers)n.setRequestHeader(g,t.headers[g]);n.send(t.body||null)})}const XC=Object.freeze(Object.defineProperty({__proto__:null,default:WC},Symbol.toStringTag,{value:"Module"})),tm=M0(XC);var ZC=self.fetch||(self.fetch=tm.default||tm);const tO=bc(ZC);var eO={};function rO(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),i=0;i<r.length;i++)r[i]=255;for(var n=0;n<e.length;n++){var o=e.charAt(n),f=o.charCodeAt(0);if(r[f]!==255)throw new TypeError(o+" is ambiguous");r[f]=n}var d=e.length,v=e.charAt(0),g=Math.log(d)/Math.log(256),w=Math.log(256)/Math.log(d);function S(N){if(N instanceof Uint8Array||(ArrayBuffer.isView(N)?N=new Uint8Array(N.buffer,N.byteOffset,N.byteLength):Array.isArray(N)&&(N=Uint8Array.from(N))),!(N instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(N.length===0)return"";for(var V=0,z=0,X=0,G=N.length;X!==G&&N[X]===0;)X++,V++;for(var Y=(G-X)*w+1>>>0,$=new Uint8Array(Y);X!==G;){for(var j=N[X],k=0,_=Y-1;(j!==0||k<z)&&_!==-1;_--,k++)j+=256*$[_]>>>0,$[_]=j%d>>>0,j=j/d>>>0;if(j!==0)throw new Error("Non-zero carry");z=k,X++}for(var L=Y-z;L!==Y&&$[L]===0;)L++;for(var ot=v.repeat(V);L<Y;++L)ot+=e.charAt($[L]);return ot}function x(N){if(typeof N!="string")throw new TypeError("Expected String");if(N.length===0)return new Uint8Array;var V=0;if(N[V]!==" "){for(var z=0,X=0;N[V]===v;)z++,V++;for(var G=(N.length-V)*g+1>>>0,Y=new Uint8Array(G);N[V];){var $=r[N.charCodeAt(V)];if($===255)return;for(var j=0,k=G-1;($!==0||j<X)&&k!==-1;k--,j++)$+=d*Y[k]>>>0,Y[k]=$%256>>>0,$=$/256>>>0;if($!==0)throw new Error("Non-zero carry");X=j,V++}if(N[V]!==" "){for(var _=G-X;_!==G&&Y[_]===0;)_++;for(var L=new Uint8Array(z+(G-_)),ot=z;_!==G;)L[ot++]=Y[_++];return L}}}function C(N){var V=x(N);if(V)return V;throw new Error(`Non-${t} character`)}return{encode:S,decodeUnsafe:x,decode:C}}var iO=rO,nO=iO;const Yy=e=>{if(e instanceof Uint8Array&&e.constructor.name==="Uint8Array")return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")},sO=e=>new TextEncoder().encode(e),oO=e=>new TextDecoder().decode(e);class aO{constructor(t,r,i){this.name=t,this.prefix=r,this.baseEncode=i}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}}let hO=class{constructor(t,r,i){if(this.name=t,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=i}decode(t){if(typeof t=="string"){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(t){return Jy(this,t)}},uO=class{constructor(t){this.decoders=t}or(t){return Jy(this,t)}decode(t){const r=t[0],i=this.decoders[r];if(i)return i.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const Jy=(e,t)=>new uO({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});let cO=class{constructor(t,r,i,n){this.name=t,this.prefix=r,this.baseEncode=i,this.baseDecode=n,this.encoder=new aO(t,r,i),this.decoder=new hO(t,r,n)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}};const Bc=({name:e,prefix:t,encode:r,decode:i})=>new cO(e,t,r,i),Sh=({prefix:e,name:t,alphabet:r})=>{const{encode:i,decode:n}=nO(r,t);return Bc({prefix:e,name:t,encode:i,decode:o=>Yy(n(o))})},fO=(e,t,r,i)=>{const n={};for(let w=0;w<t.length;++w)n[t[w]]=w;let o=e.length;for(;e[o-1]==="=";)--o;const f=new Uint8Array(o*r/8|0);let d=0,v=0,g=0;for(let w=0;w<o;++w){const S=n[e[w]];if(S===void 0)throw new SyntaxError(`Non-${i} character`);v=v<<r|S,d+=r,d>=8&&(d-=8,f[g++]=255&v>>d)}if(d>=r||255&v<<8-d)throw new SyntaxError("Unexpected end of data");return f},lO=(e,t,r)=>{const i=t[t.length-1]==="=",n=(1<<r)-1;let o="",f=0,d=0;for(let v=0;v<e.length;++v)for(d=d<<8|e[v],f+=8;f>r;)f-=r,o+=t[n&d>>f];if(f&&(o+=t[n&d<<r-f]),i)for(;o.length*r&7;)o+="=";return o},Pr=({name:e,prefix:t,bitsPerChar:r,alphabet:i})=>Bc({prefix:t,name:e,encode(n){return lO(n,i,r)},decode(n){return fO(n,i,r,e)}}),dO=Bc({prefix:"\0",name:"identity",encode:e=>oO(e),decode:e=>sO(e)});var pO=Object.freeze({__proto__:null,identity:dO});const gO=Pr({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var mO=Object.freeze({__proto__:null,base2:gO});const vO=Pr({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var yO=Object.freeze({__proto__:null,base8:vO});const wO=Sh({prefix:"9",name:"base10",alphabet:"0123456789"});var bO=Object.freeze({__proto__:null,base10:wO});const AO=Pr({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),_O=Pr({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var EO=Object.freeze({__proto__:null,base16:AO,base16upper:_O});const SO=Pr({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),IO=Pr({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),MO=Pr({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),DO=Pr({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),xO=Pr({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),CO=Pr({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),OO=Pr({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),NO=Pr({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),PO=Pr({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var RO=Object.freeze({__proto__:null,base32:SO,base32upper:IO,base32pad:MO,base32padupper:DO,base32hex:xO,base32hexupper:CO,base32hexpad:OO,base32hexpadupper:NO,base32z:PO});const TO=Sh({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),BO=Sh({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var UO=Object.freeze({__proto__:null,base36:TO,base36upper:BO});const LO=Sh({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),FO=Sh({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var qO=Object.freeze({__proto__:null,base58btc:LO,base58flickr:FO});const $O=Pr({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),kO=Pr({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),zO=Pr({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),jO=Pr({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var HO=Object.freeze({__proto__:null,base64:$O,base64pad:kO,base64url:zO,base64urlpad:jO});const Wy=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),KO=Wy.reduce((e,t,r)=>(e[r]=t,e),[]),GO=Wy.reduce((e,t,r)=>(e[t.codePointAt(0)]=r,e),[]);function VO(e){return e.reduce((t,r)=>(t+=KO[r],t),"")}function QO(e){const t=[];for(const r of e){const i=GO[r.codePointAt(0)];if(i===void 0)throw new Error(`Non-base256emoji character: ${r}`);t.push(i)}return new Uint8Array(t)}const YO=Bc({prefix:"🚀",name:"base256emoji",encode:VO,decode:QO});var JO=Object.freeze({__proto__:null,base256emoji:YO}),WO=Xy,em=128,XO=127,ZO=~XO,tN=Math.pow(2,31);function Xy(e,t,r){t=t||[],r=r||0;for(var i=r;e>=tN;)t[r++]=e&255|em,e/=128;for(;e&ZO;)t[r++]=e&255|em,e>>>=7;return t[r]=e|0,Xy.bytes=r-i+1,t}var eN=w0,rN=128,rm=127;function w0(e,i){var r=0,i=i||0,n=0,o=i,f,d=e.length;do{if(o>=d)throw w0.bytes=0,new RangeError("Could not decode varint");f=e[o++],r+=n<28?(f&rm)<<n:(f&rm)*Math.pow(2,n),n+=7}while(f>=rN);return w0.bytes=o-i,r}var iN=Math.pow(2,7),nN=Math.pow(2,14),sN=Math.pow(2,21),oN=Math.pow(2,28),aN=Math.pow(2,35),hN=Math.pow(2,42),uN=Math.pow(2,49),cN=Math.pow(2,56),fN=Math.pow(2,63),lN=function(e){return e<iN?1:e<nN?2:e<sN?3:e<oN?4:e<aN?5:e<hN?6:e<uN?7:e<cN?8:e<fN?9:10},dN={encode:WO,decode:eN,encodingLength:lN},Zy=dN;const im=(e,t,r=0)=>(Zy.encode(e,t,r),t),nm=e=>Zy.encodingLength(e),b0=(e,t)=>{const r=t.byteLength,i=nm(e),n=i+nm(r),o=new Uint8Array(n+r);return im(e,o,0),im(r,o,i),o.set(t,n),new pN(e,r,t,o)};class pN{constructor(t,r,i,n){this.code=t,this.size=r,this.digest=i,this.bytes=n}}const t2=({name:e,code:t,encode:r})=>new gN(e,t,r);class gN{constructor(t,r,i){this.name=t,this.code=r,this.encode=i}digest(t){if(t instanceof Uint8Array){const r=this.encode(t);return r instanceof Uint8Array?b0(this.code,r):r.then(i=>b0(this.code,i))}else throw Error("Unknown type, must be binary type")}}const e2=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),mN=t2({name:"sha2-256",code:18,encode:e2("SHA-256")}),vN=t2({name:"sha2-512",code:19,encode:e2("SHA-512")});var yN=Object.freeze({__proto__:null,sha256:mN,sha512:vN});const r2=0,wN="identity",i2=Yy,bN=e=>b0(r2,i2(e)),AN={code:r2,name:wN,encode:i2,digest:bN};var _N=Object.freeze({__proto__:null,identity:AN});new TextEncoder,new TextDecoder;const sm={...pO,...mO,...yO,...bO,...EO,...RO,...UO,...qO,...HO,...JO};({...yN,..._N});function EN(e=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(e):new Uint8Array(e)}function n2(e,t,r,i){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:i}}}const om=n2("utf8","u",e=>"u"+new TextDecoder("utf8").decode(e),e=>new TextEncoder().encode(e.substring(1))),Nl=n2("ascii","a",e=>{let t="a";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t},e=>{e=e.substring(1);const t=EN(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}),SN={utf8:om,"utf-8":om,hex:sm.base16,latin1:Nl,ascii:Nl,binary:Nl,...sm};function IN(e,t="utf8"){const r=SN[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(e,"utf8"):r.decoder.decode(`${r.prefix}${e}`)}const s2="wc",MN=2,td="core",qs=`${s2}@2:${td}:`,DN={name:td,logger:"error"},xN={database:":memory:"},CN="crypto",am="client_ed25519_seed",ON=Ht.ONE_DAY,NN="keychain",PN="0.3",RN="messages",TN="0.3",BN=Ht.SIX_HOURS,UN="publisher",o2="irn",LN="error",a2="wss://relay.walletconnect.com",hm="wss://relay.walletconnect.org",FN="relayer",fi={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},qN="_subscription",Hi={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},$N=Ht.ONE_SECOND,kN="2.13.0",zN=1e4,jN="0.3",HN="WALLETCONNECT_CLIENT_ID",Tn={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},KN="subscription",GN="0.3",VN=Ht.FIVE_SECONDS*1e3,QN="pairing",YN="0.3",Ka={wc_pairingDelete:{req:{ttl:Ht.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:Ht.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:Ht.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:Ht.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:Ht.ONE_DAY,prompt:!1,tag:0},res:{ttl:Ht.ONE_DAY,prompt:!1,tag:0}}},Vo={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},dn={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},JN="history",WN="0.3",XN="expirer",Ki={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},ZN="0.3",Pl="verify-api",Qo="https://verify.walletconnect.com",A0="https://verify.walletconnect.org",tP=[Qo,A0],eP="echo",rP="https://echo.walletconnect.com";class iP{constructor(t,r){this.core=t,this.logger=r,this.keychain=new Map,this.name=NN,this.version=PN,this.initialized=!1,this.storagePrefix=qs,this.init=async()=>{if(!this.initialized){const i=await this.getKeyChain();typeof i<"u"&&(this.keychain=i),this.initialized=!0}},this.has=i=>(this.isInitialized(),this.keychain.has(i)),this.set=async(i,n)=>{this.isInitialized(),this.keychain.set(i,n),await this.persist()},this.get=i=>{this.isInitialized();const n=this.keychain.get(i);if(typeof n>"u"){const{message:o}=Ot("NO_MATCHING_KEY",`${this.name}: ${i}`);throw new Error(o)}return n},this.del=async i=>{this.isInitialized(),this.keychain.delete(i),await this.persist()},this.core=t,this.logger=vi(r,this.name)}get context(){return mi(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(t){await this.core.storage.setItem(this.storageKey,Jv(t))}async getKeyChain(){const t=await this.core.storage.getItem(this.storageKey);return typeof t<"u"?Wv(t):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:t}=Ot("NOT_INITIALIZED",this.name);throw new Error(t)}}}class nP{constructor(t,r,i){this.core=t,this.logger=r,this.name=CN,this.initialized=!1,this.init=async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)},this.hasKeys=n=>(this.isInitialized(),this.keychain.has(n)),this.getClientId=async()=>{this.isInitialized();const n=await this.getClientSeed(),o=Z1(n);return Gv(o.publicKey)},this.generateKeyPair=()=>{this.isInitialized();const n=nx();return this.setPrivateKey(n.publicKey,n.privateKey)},this.signJWT=async n=>{this.isInitialized();const o=await this.getClientSeed(),f=Z1(o),d=p0();return await v9(d,n,ON,f)},this.generateSharedKey=(n,o,f)=>{this.isInitialized();const d=this.getPrivateKey(n),v=sx(d,o);return this.setSymKey(v,f)},this.setSymKey=async(n,o)=>{this.isInitialized();const f=o||ec(n);return await this.keychain.set(f,n),f},this.deleteKeyPair=async n=>{this.isInitialized(),await this.keychain.del(n)},this.deleteSymKey=async n=>{this.isInitialized(),await this.keychain.del(n)},this.encode=async(n,o,f)=>{this.isInitialized();const d=qy(f),v=U0(o);if(Ug(d)){const x=d.senderPublicKey,C=d.receiverPublicKey;n=await this.generateSharedKey(x,C)}const g=this.getSymKey(n),{type:w,senderPublicKey:S}=d;return ax({type:w,symKey:g,message:v,senderPublicKey:S})},this.decode=async(n,o,f)=>{this.isInitialized();const d=cx(o,f);if(Ug(d)){const v=d.receiverPublicKey,g=d.senderPublicKey;n=await this.generateSharedKey(v,g)}try{const v=this.getSymKey(n),g=hx({symKey:v,encoded:o});return B0(g)}catch(v){this.logger.error(`Failed to decode message from topic: '${n}', clientId: '${await this.getClientId()}'`),this.logger.error(v)}},this.getPayloadType=n=>{const o=mc(n);return Eh(o.type)},this.getPayloadSenderPublicKey=n=>{const o=mc(n);return o.senderPublicKey?Qr(o.senderPublicKey,Vr):void 0},this.core=t,this.logger=vi(r,this.name),this.keychain=i||new iP(this.core,this.logger)}get context(){return mi(this.logger)}async setPrivateKey(t,r){return await this.keychain.set(t,r),t}getPrivateKey(t){return this.keychain.get(t)}async getClientSeed(){let t="";try{t=this.keychain.get(am)}catch{t=p0(),await this.keychain.set(am,t)}return IN(t,"base16")}getSymKey(t){return this.keychain.get(t)}isInitialized(){if(!this.initialized){const{message:t}=Ot("NOT_INITIALIZED",this.name);throw new Error(t)}}}class sP extends GS{constructor(t,r){super(t,r),this.logger=t,this.core=r,this.messages=new Map,this.name=RN,this.version=TN,this.initialized=!1,this.storagePrefix=qs,this.init=async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const i=await this.getRelayerMessages();typeof i<"u"&&(this.messages=i),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(i){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(i)}finally{this.initialized=!0}}},this.set=async(i,n)=>{this.isInitialized();const o=ao(n);let f=this.messages.get(i);return typeof f>"u"&&(f={}),typeof f[o]<"u"||(f[o]=n,this.messages.set(i,f),await this.persist()),o},this.get=i=>{this.isInitialized();let n=this.messages.get(i);return typeof n>"u"&&(n={}),n},this.has=(i,n)=>{this.isInitialized();const o=this.get(i),f=ao(n);return typeof o[f]<"u"},this.del=async i=>{this.isInitialized(),this.messages.delete(i),await this.persist()},this.logger=vi(t,this.name),this.core=r}get context(){return mi(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setRelayerMessages(t){await this.core.storage.setItem(this.storageKey,Jv(t))}async getRelayerMessages(){const t=await this.core.storage.getItem(this.storageKey);return typeof t<"u"?Wv(t):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){const{message:t}=Ot("NOT_INITIALIZED",this.name);throw new Error(t)}}}class oP extends VS{constructor(t,r){super(t,r),this.relayer=t,this.logger=r,this.events=new Wi.EventEmitter,this.name=UN,this.queue=new Map,this.publishTimeout=Ht.toMiliseconds(Ht.ONE_MINUTE),this.failedPublishTimeout=Ht.toMiliseconds(Ht.ONE_SECOND),this.needsTransportRestart=!1,this.publish=async(i,n,o)=>{var f;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:i,message:n,opts:o}});const d=(o==null?void 0:o.ttl)||BN,v=g0(o),g=(o==null?void 0:o.prompt)||!1,w=(o==null?void 0:o.tag)||0,S=(o==null?void 0:o.id)||ho().toString(),x={topic:i,message:n,opts:{ttl:d,relay:v,prompt:g,tag:w,id:S}},C=`Failed to publish payload, please try again. id:${S} tag:${w}`,N=Date.now();let V,z=1;try{for(;V===void 0;){if(Date.now()-N>this.publishTimeout)throw new Error(C);this.logger.trace({id:S,attempts:z},`publisher.publish - attempt ${z}`),V=await await Jo(this.rpcPublish(i,n,d,v,g,w,S).catch(X=>this.logger.warn(X)),this.publishTimeout,C),z++,V||await new Promise(X=>setTimeout(X,this.failedPublishTimeout))}this.relayer.events.emit(fi.publish,x),this.logger.debug("Successfully Published Payload"),this.logger.trace({type:"method",method:"publish",params:{id:S,topic:i,message:n,opts:o}})}catch(X){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(X),(f=o==null?void 0:o.internal)!=null&&f.throwOnFailedPublish)throw X;this.queue.set(S,x)}},this.on=(i,n)=>{this.events.on(i,n)},this.once=(i,n)=>{this.events.once(i,n)},this.off=(i,n)=>{this.events.off(i,n)},this.removeListener=(i,n)=>{this.events.removeListener(i,n)},this.relayer=t,this.logger=vi(r,this.name),this.registerEventListeners()}get context(){return mi(this.logger)}rpcPublish(t,r,i,n,o,f,d){var v,g,w,S;const x={method:Ya(n.protocol).publish,params:{topic:t,message:r,ttl:i,prompt:o,tag:f},id:d};return ci((v=x.params)==null?void 0:v.prompt)&&((g=x.params)==null||delete g.prompt),ci((w=x.params)==null?void 0:w.tag)&&((S=x.params)==null||delete S.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:x}),this.relayer.request(x)}removeRequestFromQueue(t){this.queue.delete(t)}checkQueue(){this.queue.forEach(async t=>{const{topic:r,message:i,opts:n}=t;await this.publish(r,i,n)})}registerEventListeners(){this.relayer.core.heartbeat.on(yh.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(fi.connection_stalled);return}this.checkQueue()}),this.relayer.on(fi.message_ack,t=>{this.removeRequestFromQueue(t.id.toString())})}}class aP{constructor(){this.map=new Map,this.set=(t,r)=>{const i=this.get(t);this.exists(t,r)||this.map.set(t,[...i,r])},this.get=t=>this.map.get(t)||[],this.exists=(t,r)=>this.get(t).includes(r),this.delete=(t,r)=>{if(typeof r>"u"){this.map.delete(t);return}if(!this.map.has(t))return;const i=this.get(t);if(!this.exists(t,r))return;const n=i.filter(o=>o!==r);if(!n.length){this.map.delete(t);return}this.map.set(t,n)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}}var hP=Object.defineProperty,uP=Object.defineProperties,cP=Object.getOwnPropertyDescriptors,um=Object.getOwnPropertySymbols,fP=Object.prototype.hasOwnProperty,lP=Object.prototype.propertyIsEnumerable,cm=(e,t,r)=>t in e?hP(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Ga=(e,t)=>{for(var r in t||(t={}))fP.call(t,r)&&cm(e,r,t[r]);if(um)for(var r of um(t))lP.call(t,r)&&cm(e,r,t[r]);return e},Rl=(e,t)=>uP(e,cP(t));class dP extends JS{constructor(t,r){super(t,r),this.relayer=t,this.logger=r,this.subscriptions=new Map,this.topicMap=new aP,this.events=new Wi.EventEmitter,this.name=KN,this.version=GN,this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=qs,this.subscribeTimeout=Ht.toMiliseconds(Ht.ONE_MINUTE),this.restartInProgress=!1,this.batchSubscribeTopicsLimit=500,this.pendingBatchMessages=[],this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),this.clientId=await this.relayer.core.crypto.getClientId())},this.subscribe=async(i,n)=>{await this.restartToComplete(),this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:i,opts:n}});try{const o=g0(n),f={topic:i,relay:o};this.pending.set(i,f);const d=await this.rpcSubscribe(i,o);return typeof d=="string"&&(this.onSubscribe(d,f),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:i,opts:n}})),d}catch(o){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(o),o}},this.unsubscribe=async(i,n)=>{await this.restartToComplete(),this.isInitialized(),typeof(n==null?void 0:n.id)<"u"?await this.unsubscribeById(i,n.id,n):await this.unsubscribeByTopic(i,n)},this.isSubscribed=async i=>{if(this.topics.includes(i))return!0;const n=`${this.pendingSubscriptionWatchLabel}_${i}`;return await new Promise((o,f)=>{const d=new Ht.Watch;d.start(n);const v=setInterval(()=>{!this.pending.has(i)&&this.topics.includes(i)&&(clearInterval(v),d.stop(n),o(!0)),d.elapsed(n)>=VN&&(clearInterval(v),d.stop(n),f(new Error("Subscription resolution timeout")))},this.pollingInterval)}).catch(()=>!1)},this.on=(i,n)=>{this.events.on(i,n)},this.once=(i,n)=>{this.events.once(i,n)},this.off=(i,n)=>{this.events.off(i,n)},this.removeListener=(i,n)=>{this.events.removeListener(i,n)},this.start=async()=>{await this.onConnect()},this.stop=async()=>{await this.onDisconnect()},this.restart=async()=>{this.restartInProgress=!0,await this.restore(),await this.reset(),this.restartInProgress=!1},this.relayer=t,this.logger=vi(r,this.name),this.clientId=""}get context(){return mi(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(t,r){let i=!1;try{i=this.getSubscription(t).topic===r}catch{}return i}onEnable(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(t,r){const i=this.topicMap.get(t);await Promise.all(i.map(async n=>await this.unsubscribeById(t,n,r)))}async unsubscribeById(t,r,i){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:t,id:r,opts:i}});try{const n=g0(i);await this.rpcUnsubscribe(t,r,n);const o=$e("USER_DISCONNECTED",`${this.name}, ${t}`);await this.onUnsubscribe(t,r,o),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:t,id:r,opts:i}})}catch(n){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(n),n}}async rpcSubscribe(t,r){const i={method:Ya(r.protocol).subscribe,params:{topic:t}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i});try{return await await Jo(this.relayer.request(i).catch(n=>this.logger.warn(n)),this.subscribeTimeout)?ao(t+this.clientId):null}catch{this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(fi.connection_stalled)}return null}async rpcBatchSubscribe(t){if(!t.length)return;const r=t[0].relay,i={method:Ya(r.protocol).batchSubscribe,params:{topics:t.map(n=>n.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i});try{return await await Jo(this.relayer.request(i).catch(n=>this.logger.warn(n)),this.subscribeTimeout)}catch{this.relayer.events.emit(fi.connection_stalled)}}async rpcBatchFetchMessages(t){if(!t.length)return;const r=t[0].relay,i={method:Ya(r.protocol).batchFetchMessages,params:{topics:t.map(o=>o.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i});let n;try{n=await await Jo(this.relayer.request(i).catch(o=>this.logger.warn(o)),this.subscribeTimeout)}catch{this.relayer.events.emit(fi.connection_stalled)}return n}rpcUnsubscribe(t,r,i){const n={method:Ya(i.protocol).unsubscribe,params:{topic:t,id:r}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n}),this.relayer.request(n)}onSubscribe(t,r){this.setSubscription(t,Rl(Ga({},r),{id:t})),this.pending.delete(r.topic)}onBatchSubscribe(t){t.length&&t.forEach(r=>{this.setSubscription(r.id,Ga({},r)),this.pending.delete(r.topic)})}async onUnsubscribe(t,r,i){this.events.removeAllListeners(r),this.hasSubscription(r,t)&&this.deleteSubscription(r,i),await this.relayer.messages.del(t)}async setRelayerSubscriptions(t){await this.relayer.core.storage.setItem(this.storageKey,t)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(t,r){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:t,subscription:r}),this.addSubscription(t,r)}addSubscription(t,r){this.subscriptions.set(t,Ga({},r)),this.topicMap.set(r.topic,t),this.events.emit(Tn.created,r)}getSubscription(t){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:t});const r=this.subscriptions.get(t);if(!r){const{message:i}=Ot("NO_MATCHING_KEY",`${this.name}: ${t}`);throw new Error(i)}return r}deleteSubscription(t,r){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:t,reason:r});const i=this.getSubscription(t);this.subscriptions.delete(t),this.topicMap.delete(i.topic,t),this.events.emit(Tn.deleted,Rl(Ga({},i),{reason:r}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(Tn.sync)}async reset(){if(this.cached.length){const t=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<t;r++){const i=this.cached.splice(0,this.batchSubscribeTopicsLimit);await this.batchFetchMessages(i),await this.batchSubscribe(i)}}this.events.emit(Tn.resubscribed)}async restore(){try{const t=await this.getRelayerSubscriptions();if(typeof t>"u"||!t.length)return;if(this.subscriptions.size){const{message:r}=Ot("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(r)}this.cached=t,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(t){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(t)}}async batchSubscribe(t){if(!t.length)return;const r=await this.rpcBatchSubscribe(t);lo(r)&&this.onBatchSubscribe(r.map((i,n)=>Rl(Ga({},t[n]),{id:i})))}async batchFetchMessages(t){if(!t.length)return;this.logger.trace(`Fetching batch messages for ${t.length} subscriptions`);const r=await this.rpcBatchFetchMessages(t);r&&r.messages&&(this.pendingBatchMessages=this.pendingBatchMessages.concat(r.messages))}async onConnect(){await this.restart(),this.onEnable()}onDisconnect(){this.onDisable()}async checkPending(){if(!this.initialized||!this.relayer.connected)return;const t=[];this.pending.forEach(r=>{t.push(r)}),await this.batchSubscribe(t),this.pendingBatchMessages.length&&(await this.relayer.handleBatchMessageEvents(this.pendingBatchMessages),this.pendingBatchMessages=[])}registerEventListeners(){this.relayer.core.heartbeat.on(yh.pulse,async()=>{await this.checkPending()}),this.events.on(Tn.created,async t=>{const r=Tn.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:t}),await this.persist()}),this.events.on(Tn.deleted,async t=>{const r=Tn.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:t}),await this.persist()})}isInitialized(){if(!this.initialized){const{message:t}=Ot("NOT_INITIALIZED",this.name);throw new Error(t)}}async restartToComplete(){this.restartInProgress&&await new Promise(t=>{const r=setInterval(()=>{this.restartInProgress||(clearInterval(r),t())},this.pollingInterval)})}}var pP=Object.defineProperty,fm=Object.getOwnPropertySymbols,gP=Object.prototype.hasOwnProperty,mP=Object.prototype.propertyIsEnumerable,lm=(e,t,r)=>t in e?pP(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,vP=(e,t)=>{for(var r in t||(t={}))gP.call(t,r)&&lm(e,r,t[r]);if(fm)for(var r of fm(t))mP.call(t,r)&&lm(e,r,t[r]);return e};class yP extends QS{constructor(t){super(t),this.protocol="wc",this.version=2,this.events=new Wi.EventEmitter,this.name=FN,this.transportExplicitlyClosed=!1,this.initialized=!1,this.connectionAttemptInProgress=!1,this.connectionStatusPollingInterval=20,this.staleConnectionErrors=["socket hang up","stalled","interrupted"],this.hasExperiencedNetworkDisruption=!1,this.requestsInFlight=new Map,this.heartBeatTimeout=Ht.toMiliseconds(Ht.THIRTY_SECONDS+Ht.ONE_SECOND),this.request=async r=>{var i,n;this.logger.debug("Publishing Request Payload");const o=r.id||ho().toString();await this.toEstablishConnection();try{const f=this.provider.request(r);this.requestsInFlight.set(o,{promise:f,request:r}),this.logger.trace({id:o,method:r.method,topic:(i=r.params)==null?void 0:i.topic},"relayer.request - attempt to publish...");const d=await new Promise(async(v,g)=>{const w=()=>{g(new Error(`relayer.request - publish interrupted, id: ${o}`))};this.provider.on(Hi.disconnect,w);const S=await f;this.provider.off(Hi.disconnect,w),v(S)});return this.logger.trace({id:o,method:r.method,topic:(n=r.params)==null?void 0:n.topic},"relayer.request - published"),d}catch(f){throw this.logger.debug(`Failed to Publish Request: ${o}`),f}finally{this.requestsInFlight.delete(o)}},this.resetPingTimeout=()=>{if(ah())try{clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout(()=>{var r,i,n;(n=(i=(r=this.provider)==null?void 0:r.connection)==null?void 0:i.socket)==null||n.terminate()},this.heartBeatTimeout)}catch(r){this.logger.warn(r)}},this.onPayloadHandler=r=>{this.onProviderPayload(r),this.resetPingTimeout()},this.onConnectHandler=()=>{this.startPingTimeout(),this.events.emit(fi.connect)},this.onDisconnectHandler=()=>{this.onProviderDisconnect()},this.onProviderErrorHandler=r=>{this.logger.error(r),this.events.emit(fi.error,r),this.logger.info("Fatal socket error received, closing transport"),this.transportClose()},this.registerProviderListeners=()=>{this.provider.on(Hi.payload,this.onPayloadHandler),this.provider.on(Hi.connect,this.onConnectHandler),this.provider.on(Hi.disconnect,this.onDisconnectHandler),this.provider.on(Hi.error,this.onProviderErrorHandler)},this.core=t.core,this.logger=typeof t.logger<"u"&&typeof t.logger!="string"?vi(t.logger,this.name):wh(Oc({level:t.logger||LN})),this.messages=new sP(this.logger,t.core),this.subscriber=new dP(this,this.logger),this.publisher=new oP(this,this.logger),this.relayUrl=(t==null?void 0:t.relayUrl)||a2,this.projectId=t.projectId,this.bundleId=Y9(),this.provider={}}async init(){this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]);try{await this.transportOpen()}catch{this.logger.warn(`Connection via ${this.relayUrl} failed, attempting to connect via failover domain ${hm}...`),await this.restartTransport(hm)}this.initialized=!0,setTimeout(async()=>{this.subscriber.topics.length===0&&this.subscriber.pending.size===0&&(this.logger.info("No topics subscribed to after init, closing transport"),await this.transportClose(),this.transportExplicitlyClosed=!1)},zN)}get context(){return mi(this.logger)}get connected(){var t,r,i;return((i=(r=(t=this.provider)==null?void 0:t.connection)==null?void 0:r.socket)==null?void 0:i.readyState)===1}get connecting(){var t,r,i;return((i=(r=(t=this.provider)==null?void 0:t.connection)==null?void 0:r.socket)==null?void 0:i.readyState)===0}async publish(t,r,i){this.isInitialized(),await this.publisher.publish(t,r,i),await this.recordMessageEvent({topic:t,message:r,publishedAt:Date.now()})}async subscribe(t,r){var i;this.isInitialized();let n=((i=this.subscriber.topicMap.get(t))==null?void 0:i[0])||"",o;const f=d=>{d.topic===t&&(this.subscriber.off(Tn.created,f),o())};return await Promise.all([new Promise(d=>{o=d,this.subscriber.on(Tn.created,f)}),new Promise(async d=>{n=await this.subscriber.subscribe(t,r)||n,d()})]),n}async unsubscribe(t,r){this.isInitialized(),await this.subscriber.unsubscribe(t,r)}on(t,r){this.events.on(t,r)}once(t,r){this.events.once(t,r)}off(t,r){this.events.off(t,r)}removeListener(t,r){this.events.removeListener(t,r)}async transportDisconnect(){if(!this.hasExperiencedNetworkDisruption&&this.connected&&this.requestsInFlight.size>0)try{await Promise.all(Array.from(this.requestsInFlight.values()).map(t=>t.promise))}catch(t){this.logger.warn(t)}this.hasExperiencedNetworkDisruption||this.connected?await Jo(this.provider.disconnect(),2e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(t){await this.confirmOnlineStateOrThrow(),t&&t!==this.relayUrl&&(this.relayUrl=t,await this.transportDisconnect()),await this.createProvider(),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;try{await new Promise(async(r,i)=>{const n=()=>{this.provider.off(Hi.disconnect,n),i(new Error("Connection interrupted while trying to subscribe"))};this.provider.on(Hi.disconnect,n),await Jo(this.provider.connect(),Ht.toMiliseconds(Ht.ONE_MINUTE),`Socket stalled when trying to connect to ${this.relayUrl}`).catch(o=>{i(o)}),await this.subscriber.start(),this.hasExperiencedNetworkDisruption=!1,r()})}catch(r){this.logger.error(r);const i=r;if(this.hasExperiencedNetworkDisruption=!0,!this.isConnectionStalled(i.message))throw r}finally{this.connectionAttemptInProgress=!1}}async restartTransport(t){this.connectionAttemptInProgress||(this.relayUrl=t||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await Gg())throw new Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(t){if((t==null?void 0:t.length)===0){this.logger.trace("Batch message events is empty. Ignoring...");return}const r=t.sort((i,n)=>i.publishedAt-n.publishedAt);this.logger.trace(`Batch of ${r.length} message events sorted`);for(const i of r)try{await this.onMessageEvent(i)}catch(n){this.logger.warn(n)}this.logger.trace(`Batch of ${r.length} message events processed`)}startPingTimeout(){var t,r,i,n,o;if(ah())try{(r=(t=this.provider)==null?void 0:t.connection)!=null&&r.socket&&((o=(n=(i=this.provider)==null?void 0:i.connection)==null?void 0:n.socket)==null||o.once("ping",()=>{this.resetPingTimeout()})),this.resetPingTimeout()}catch(f){this.logger.warn(f)}}isConnectionStalled(t){return this.staleConnectionErrors.some(r=>t.includes(r))}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const t=await this.core.crypto.signJWT(this.relayUrl);this.provider=new ms(new QC(eI({sdkVersion:kN,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:t,useOnCloseEvent:!0,bundleId:this.bundleId}))),this.registerProviderListeners()}async recordMessageEvent(t){const{topic:r,message:i}=t;await this.messages.set(r,i)}async shouldIgnoreMessageEvent(t){const{topic:r,message:i}=t;if(!i||i.length===0)return this.logger.debug(`Ignoring invalid/empty message: ${i}`),!0;if(!await this.subscriber.isSubscribed(r))return this.logger.debug(`Ignoring message for non-subscribed topic ${r}`),!0;const n=this.messages.has(r,i);return n&&this.logger.debug(`Ignoring duplicate message: ${i}`),n}async onProviderPayload(t){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:t}),Z0(t)){if(!t.method.endsWith(qN))return;const r=t.params,{topic:i,message:n,publishedAt:o}=r.data,f={topic:i,message:n,publishedAt:o};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(vP({type:"event",event:r.id},f)),this.events.emit(r.id,f),await this.acknowledgePayload(t),await this.onMessageEvent(f)}else Tc(t)&&this.events.emit(fi.message_ack,t)}async onMessageEvent(t){await this.shouldIgnoreMessageEvent(t)||(this.events.emit(fi.message,t),await this.recordMessageEvent(t))}async acknowledgePayload(t){const r=Pc(t.id,!0);await this.provider.connection.send(r)}unregisterProviderListeners(){this.provider.off(Hi.payload,this.onPayloadHandler),this.provider.off(Hi.connect,this.onConnectHandler),this.provider.off(Hi.disconnect,this.onDisconnectHandler),this.provider.off(Hi.error,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let t=await Gg();tC(async r=>{t!==r&&(t=r,r?await this.restartTransport().catch(i=>this.logger.error(i)):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))})}async onProviderDisconnect(){await this.subscriber.stop(),this.requestsInFlight.clear(),clearTimeout(this.pingTimeout),this.events.emit(fi.disconnect),this.connectionAttemptInProgress=!1,!this.transportExplicitlyClosed&&setTimeout(async()=>{await this.transportOpen().catch(t=>this.logger.error(t))},Ht.toMiliseconds($N))}isInitialized(){if(!this.initialized){const{message:t}=Ot("NOT_INITIALIZED",this.name);throw new Error(t)}}async toEstablishConnection(){await this.confirmOnlineStateOrThrow(),!this.connected&&(this.connectionAttemptInProgress&&await new Promise(t=>{const r=setInterval(()=>{this.connected&&(clearInterval(r),t())},this.connectionStatusPollingInterval)}),await this.transportOpen())}}var wP=Object.defineProperty,dm=Object.getOwnPropertySymbols,bP=Object.prototype.hasOwnProperty,AP=Object.prototype.propertyIsEnumerable,pm=(e,t,r)=>t in e?wP(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,gm=(e,t)=>{for(var r in t||(t={}))bP.call(t,r)&&pm(e,r,t[r]);if(dm)for(var r of dm(t))AP.call(t,r)&&pm(e,r,t[r]);return e};class bo extends YS{constructor(t,r,i,n=qs,o=void 0){super(t,r,i,n),this.core=t,this.logger=r,this.name=i,this.map=new Map,this.version=jN,this.cached=[],this.initialized=!1,this.storagePrefix=qs,this.recentlyDeleted=[],this.recentlyDeletedLimit=200,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(f=>{this.getKey&&f!==null&&!ci(f)?this.map.set(this.getKey(f),f):Nx(f)?this.map.set(f.id,f):Px(f)&&this.map.set(f.topic,f)}),this.cached=[],this.initialized=!0)},this.set=async(f,d)=>{this.isInitialized(),this.map.has(f)?await this.update(f,d):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:f,value:d}),this.map.set(f,d),await this.persist())},this.get=f=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:f}),this.getData(f)),this.getAll=f=>(this.isInitialized(),f?this.values.filter(d=>Object.keys(f).every(v=>JC(d[v],f[v]))):this.values),this.update=async(f,d)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:f,update:d});const v=gm(gm({},this.getData(f)),d);this.map.set(f,v),await this.persist()},this.delete=async(f,d)=>{this.isInitialized(),this.map.has(f)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:f,reason:d}),this.map.delete(f),this.addToRecentlyDeleted(f),await this.persist())},this.logger=vi(r,this.name),this.storagePrefix=n,this.getKey=o}get context(){return mi(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(t){this.recentlyDeleted.push(t),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(t){await this.core.storage.setItem(this.storageKey,t)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(t){const r=this.map.get(t);if(!r){if(this.recentlyDeleted.includes(t)){const{message:n}=Ot("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${t}`);throw this.logger.error(n),new Error(n)}const{message:i}=Ot("NO_MATCHING_KEY",`${this.name}: ${t}`);throw this.logger.error(i),new Error(i)}return r}async persist(){await this.setDataStore(this.values)}async restore(){try{const t=await this.getDataStore();if(typeof t>"u"||!t.length)return;if(this.map.size){const{message:r}=Ot("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=t,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(t){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(t)}}isInitialized(){if(!this.initialized){const{message:t}=Ot("NOT_INITIALIZED",this.name);throw new Error(t)}}}class _P{constructor(t,r){this.core=t,this.logger=r,this.name=QN,this.version=YN,this.events=new D0,this.initialized=!1,this.storagePrefix=qs,this.ignoredPayloadTypes=[Fs],this.registeredMethods=[],this.init=async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))},this.register=({methods:i})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...i])]},this.create=async i=>{this.isInitialized();const n=p0(),o=await this.core.crypto.setSymKey(n),f=Cr(Ht.FIVE_MINUTES),d={protocol:o2},v={topic:o,expiry:f,relay:d,active:!1},g=Ax({protocol:this.core.protocol,version:this.core.version,topic:o,symKey:n,relay:d,expiryTimestamp:f,methods:i==null?void 0:i.methods});return this.core.expirer.set(o,f),await this.pairings.set(o,v),await this.core.relayer.subscribe(o),{topic:o,uri:g}},this.pair=async i=>{this.isInitialized(),this.isValidPair(i);const{topic:n,symKey:o,relay:f,expiryTimestamp:d,methods:v}=$g(i.uri);let g;if(this.pairings.keys.includes(n)&&(g=this.pairings.get(n),g.active))throw new Error(`Pairing already exists: ${n}. Please try again with a new connection URI.`);const w=d||Cr(Ht.FIVE_MINUTES),S={topic:n,relay:f,expiry:w,active:!1,methods:v};return this.core.expirer.set(n,w),await this.pairings.set(n,S),i.activatePairing&&await this.activate({topic:n}),this.events.emit(Vo.create,S),this.core.crypto.keychain.has(n)||await this.core.crypto.setSymKey(o,n),await this.core.relayer.subscribe(n,{relay:f}),S},this.activate=async({topic:i})=>{this.isInitialized();const n=Cr(Ht.THIRTY_DAYS);this.core.expirer.set(i,n),await this.pairings.update(i,{active:!0,expiry:n})},this.ping=async i=>{this.isInitialized(),await this.isValidPing(i);const{topic:n}=i;if(this.pairings.keys.includes(n)){const o=await this.sendRequest(n,"wc_pairingPing",{}),{done:f,resolve:d,reject:v}=so();this.events.once(Se("pairing_ping",o),({error:g})=>{g?v(g):d()}),await f()}},this.updateExpiry=async({topic:i,expiry:n})=>{this.isInitialized(),await this.pairings.update(i,{expiry:n})},this.updateMetadata=async({topic:i,metadata:n})=>{this.isInitialized(),await this.pairings.update(i,{peerMetadata:n})},this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=async i=>{this.isInitialized(),await this.isValidDisconnect(i);const{topic:n}=i;this.pairings.keys.includes(n)&&(await this.sendRequest(n,"wc_pairingDelete",$e("USER_DISCONNECTED")),await this.deletePairing(n))},this.sendRequest=async(i,n,o)=>{const f=Zo(n,o),d=await this.core.crypto.encode(i,f),v=Ka[n].req;return this.core.history.set(i,f),this.core.relayer.publish(i,d,v),f.id},this.sendResult=async(i,n,o)=>{const f=Pc(i,o),d=await this.core.crypto.encode(n,f),v=await this.core.history.get(n,i),g=Ka[v.request.method].res;await this.core.relayer.publish(n,d,g),await this.core.history.resolve(f)},this.sendError=async(i,n,o)=>{const f=Rc(i,o),d=await this.core.crypto.encode(n,f),v=await this.core.history.get(n,i),g=Ka[v.request.method]?Ka[v.request.method].res:Ka.unregistered_method.res;await this.core.relayer.publish(n,d,g),await this.core.history.resolve(f)},this.deletePairing=async(i,n)=>{await this.core.relayer.unsubscribe(i),await Promise.all([this.pairings.delete(i,$e("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(i),n?Promise.resolve():this.core.expirer.del(i)])},this.cleanup=async()=>{const i=this.pairings.getAll().filter(n=>Os(n.expiry));await Promise.all(i.map(n=>this.deletePairing(n.topic)))},this.onRelayEventRequest=i=>{const{topic:n,payload:o}=i;switch(o.method){case"wc_pairingPing":return this.onPairingPingRequest(n,o);case"wc_pairingDelete":return this.onPairingDeleteRequest(n,o);default:return this.onUnknownRpcMethodRequest(n,o)}},this.onRelayEventResponse=async i=>{const{topic:n,payload:o}=i,f=(await this.core.history.get(n,o.id)).request.method;switch(f){case"wc_pairingPing":return this.onPairingPingResponse(n,o);default:return this.onUnknownRpcMethodResponse(f)}},this.onPairingPingRequest=async(i,n)=>{const{id:o}=n;try{this.isValidPing({topic:i}),await this.sendResult(o,i,!0),this.events.emit(Vo.ping,{id:o,topic:i})}catch(f){await this.sendError(o,i,f),this.logger.error(f)}},this.onPairingPingResponse=(i,n)=>{const{id:o}=n;setTimeout(()=>{Rn(n)?this.events.emit(Se("pairing_ping",o),{}):Qi(n)&&this.events.emit(Se("pairing_ping",o),{error:n.error})},500)},this.onPairingDeleteRequest=async(i,n)=>{const{id:o}=n;try{this.isValidDisconnect({topic:i}),await this.deletePairing(i),this.events.emit(Vo.delete,{id:o,topic:i})}catch(f){await this.sendError(o,i,f),this.logger.error(f)}},this.onUnknownRpcMethodRequest=async(i,n)=>{const{id:o,method:f}=n;try{if(this.registeredMethods.includes(f))return;const d=$e("WC_METHOD_UNSUPPORTED",f);await this.sendError(o,i,d),this.logger.error(d)}catch(d){await this.sendError(o,i,d),this.logger.error(d)}},this.onUnknownRpcMethodResponse=i=>{this.registeredMethods.includes(i)||this.logger.error($e("WC_METHOD_UNSUPPORTED",i))},this.isValidPair=i=>{var n;if(!hi(i)){const{message:f}=Ot("MISSING_OR_INVALID",`pair() params: ${i}`);throw new Error(f)}if(!Ox(i.uri)){const{message:f}=Ot("MISSING_OR_INVALID",`pair() uri: ${i.uri}`);throw new Error(f)}const o=$g(i.uri);if(!((n=o==null?void 0:o.relay)!=null&&n.protocol)){const{message:f}=Ot("MISSING_OR_INVALID","pair() uri#relay-protocol");throw new Error(f)}if(!(o!=null&&o.symKey)){const{message:f}=Ot("MISSING_OR_INVALID","pair() uri#symKey");throw new Error(f)}if(o!=null&&o.expiryTimestamp&&Ht.toMiliseconds(o==null?void 0:o.expiryTimestamp)<Date.now()){const{message:f}=Ot("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(f)}},this.isValidPing=async i=>{if(!hi(i)){const{message:o}=Ot("MISSING_OR_INVALID",`ping() params: ${i}`);throw new Error(o)}const{topic:n}=i;await this.isValidPairingTopic(n)},this.isValidDisconnect=async i=>{if(!hi(i)){const{message:o}=Ot("MISSING_OR_INVALID",`disconnect() params: ${i}`);throw new Error(o)}const{topic:n}=i;await this.isValidPairingTopic(n)},this.isValidPairingTopic=async i=>{if(!fr(i,!1)){const{message:n}=Ot("MISSING_OR_INVALID",`pairing topic should be a string: ${i}`);throw new Error(n)}if(!this.pairings.keys.includes(i)){const{message:n}=Ot("NO_MATCHING_KEY",`pairing topic doesn't exist: ${i}`);throw new Error(n)}if(Os(this.pairings.get(i).expiry)){await this.deletePairing(i);const{message:n}=Ot("EXPIRED",`pairing topic: ${i}`);throw new Error(n)}},this.core=t,this.logger=vi(r,this.name),this.pairings=new bo(this.core,this.logger,this.name,this.storagePrefix)}get context(){return mi(this.logger)}isInitialized(){if(!this.initialized){const{message:t}=Ot("NOT_INITIALIZED",this.name);throw new Error(t)}}registerRelayerEvents(){this.core.relayer.on(fi.message,async t=>{const{topic:r,message:i}=t;if(!this.pairings.keys.includes(r)||this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(i)))return;const n=await this.core.crypto.decode(r,i);try{Z0(n)?(this.core.history.set(r,n),this.onRelayEventRequest({topic:r,payload:n})):Tc(n)&&(await this.core.history.resolve(n),await this.onRelayEventResponse({topic:r,payload:n}),this.core.history.delete(r,n.id))}catch(o){this.logger.error(o)}})}registerExpirerEvents(){this.core.expirer.on(Ki.expired,async t=>{const{topic:r}=Zv(t.target);r&&this.pairings.keys.includes(r)&&(await this.deletePairing(r,!0),this.events.emit(Vo.expire,{topic:r}))})}}class EP extends KS{constructor(t,r){super(t,r),this.core=t,this.logger=r,this.records=new Map,this.events=new Wi.EventEmitter,this.name=JN,this.version=WN,this.cached=[],this.initialized=!1,this.storagePrefix=qs,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(i=>this.records.set(i.id,i)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.set=(i,n,o)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:i,request:n,chainId:o}),this.records.has(n.id))return;const f={id:n.id,topic:i,request:{method:n.method,params:n.params||null},chainId:o,expiry:Cr(Ht.THIRTY_DAYS)};this.records.set(f.id,f),this.persist(),this.events.emit(dn.created,f)},this.resolve=async i=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:i}),!this.records.has(i.id))return;const n=await this.getRecord(i.id);typeof n.response>"u"&&(n.response=Qi(i)?{error:i.error}:{result:i.result},this.records.set(n.id,n),this.persist(),this.events.emit(dn.updated,n))},this.get=async(i,n)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:i,id:n}),await this.getRecord(n)),this.delete=(i,n)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:n}),this.values.forEach(o=>{if(o.topic===i){if(typeof n<"u"&&o.id!==n)return;this.records.delete(o.id),this.events.emit(dn.deleted,o)}}),this.persist()},this.exists=async(i,n)=>(this.isInitialized(),this.records.has(n)?(await this.getRecord(n)).topic===i:!1),this.on=(i,n)=>{this.events.on(i,n)},this.once=(i,n)=>{this.events.once(i,n)},this.off=(i,n)=>{this.events.off(i,n)},this.removeListener=(i,n)=>{this.events.removeListener(i,n)},this.logger=vi(r,this.name)}get context(){return mi(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const t=[];return this.values.forEach(r=>{if(typeof r.response<"u")return;const i={topic:r.topic,request:Zo(r.request.method,r.request.params,r.id),chainId:r.chainId};return t.push(i)}),t}async setJsonRpcRecords(t){await this.core.storage.setItem(this.storageKey,t)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(t){this.isInitialized();const r=this.records.get(t);if(!r){const{message:i}=Ot("NO_MATCHING_KEY",`${this.name}: ${t}`);throw new Error(i)}return r}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(dn.sync)}async restore(){try{const t=await this.getJsonRpcRecords();if(typeof t>"u"||!t.length)return;if(this.records.size){const{message:r}=Ot("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=t,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(t){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(t)}}registerEventListeners(){this.events.on(dn.created,t=>{const r=dn.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:t})}),this.events.on(dn.updated,t=>{const r=dn.updated;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:t})}),this.events.on(dn.deleted,t=>{const r=dn.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:t})}),this.core.heartbeat.on(yh.pulse,()=>{this.cleanup()})}cleanup(){try{this.isInitialized();let t=!1;this.records.forEach(r=>{Ht.toMiliseconds(r.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${r.id}`),this.records.delete(r.id),this.events.emit(dn.deleted,r,!1),t=!0)}),t&&this.persist()}catch(t){this.logger.warn(t)}}isInitialized(){if(!this.initialized){const{message:t}=Ot("NOT_INITIALIZED",this.name);throw new Error(t)}}}class SP extends WS{constructor(t,r){super(t,r),this.core=t,this.logger=r,this.expirations=new Map,this.events=new Wi.EventEmitter,this.name=XN,this.version=ZN,this.cached=[],this.initialized=!1,this.storagePrefix=qs,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(i=>this.expirations.set(i.target,i)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.has=i=>{try{const n=this.formatTarget(i);return typeof this.getExpiration(n)<"u"}catch{return!1}},this.set=(i,n)=>{this.isInitialized();const o=this.formatTarget(i),f={target:o,expiry:n};this.expirations.set(o,f),this.checkExpiry(o,f),this.events.emit(Ki.created,{target:o,expiration:f})},this.get=i=>{this.isInitialized();const n=this.formatTarget(i);return this.getExpiration(n)},this.del=i=>{if(this.isInitialized(),this.has(i)){const n=this.formatTarget(i),o=this.getExpiration(n);this.expirations.delete(n),this.events.emit(Ki.deleted,{target:n,expiration:o})}},this.on=(i,n)=>{this.events.on(i,n)},this.once=(i,n)=>{this.events.once(i,n)},this.off=(i,n)=>{this.events.off(i,n)},this.removeListener=(i,n)=>{this.events.removeListener(i,n)},this.logger=vi(r,this.name)}get context(){return mi(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(t){if(typeof t=="string")return rI(t);if(typeof t=="number")return iI(t);const{message:r}=Ot("UNKNOWN_TYPE",`Target type: ${typeof t}`);throw new Error(r)}async setExpirations(t){await this.core.storage.setItem(this.storageKey,t)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(Ki.sync)}async restore(){try{const t=await this.getExpirations();if(typeof t>"u"||!t.length)return;if(this.expirations.size){const{message:r}=Ot("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=t,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(t){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(t)}}getExpiration(t){const r=this.expirations.get(t);if(!r){const{message:i}=Ot("NO_MATCHING_KEY",`${this.name}: ${t}`);throw this.logger.warn(i),new Error(i)}return r}checkExpiry(t,r){const{expiry:i}=r;Ht.toMiliseconds(i)-Date.now()<=0&&this.expire(t,r)}expire(t,r){this.expirations.delete(t),this.events.emit(Ki.expired,{target:t,expiration:r})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((t,r)=>this.checkExpiry(r,t))}registerEventListeners(){this.core.heartbeat.on(yh.pulse,()=>this.checkExpirations()),this.events.on(Ki.created,t=>{const r=Ki.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:t}),this.persist()}),this.events.on(Ki.expired,t=>{const r=Ki.expired;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:t}),this.persist()}),this.events.on(Ki.deleted,t=>{const r=Ki.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:t}),this.persist()})}isInitialized(){if(!this.initialized){const{message:t}=Ot("NOT_INITIALIZED",this.name);throw new Error(t)}}}class IP extends XS{constructor(t,r){super(t,r),this.projectId=t,this.logger=r,this.name=Pl,this.initialized=!1,this.queue=[],this.verifyDisabled=!1,this.init=async i=>{if(this.verifyDisabled||fa()||!la())return;const n=this.getVerifyUrl(i==null?void 0:i.verifyUrl);this.verifyUrl!==n&&this.removeIframe(),this.verifyUrl=n;try{await this.createIframe()}catch(o){this.logger.info(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.info(o)}if(!this.initialized){this.removeIframe(),this.verifyUrl=A0;try{await this.createIframe()}catch(o){this.logger.info(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.info(o),this.verifyDisabled=!0}}},this.register=async i=>{this.initialized?this.sendPost(i.attestationId):(this.addToQueue(i.attestationId),await this.init())},this.resolve=async i=>{if(this.isDevEnv)return"";const n=this.getVerifyUrl(i==null?void 0:i.verifyUrl);let o;try{o=await this.fetchAttestation(i.attestationId,n)}catch(f){this.logger.info(`failed to resolve attestation: ${i.attestationId} from url: ${n}`),this.logger.info(f),o=await this.fetchAttestation(i.attestationId,A0)}return o},this.fetchAttestation=async(i,n)=>{this.logger.info(`resolving attestation: ${i} from url: ${n}`);const o=this.startAbortTimer(Ht.ONE_SECOND*2),f=await fetch(`${n}/attestation/${i}`,{signal:this.abortController.signal});return clearTimeout(o),f.status===200?await f.json():void 0},this.addToQueue=i=>{this.queue.push(i)},this.processQueue=()=>{this.queue.length!==0&&(this.queue.forEach(i=>this.sendPost(i)),this.queue=[])},this.sendPost=i=>{var n;try{if(!this.iframe)return;(n=this.iframe.contentWindow)==null||n.postMessage(i,"*"),this.logger.info(`postMessage sent: ${i} ${this.verifyUrl}`)}catch{}},this.createIframe=async()=>{let i;const n=o=>{o.data==="verify_ready"&&(this.onInit(),window.removeEventListener("message",n),i())};await Promise.race([new Promise(o=>{const f=document.getElementById(Pl);if(f)return this.iframe=f,this.onInit(),o();window.addEventListener("message",n);const d=document.createElement("iframe");d.id=Pl,d.src=`${this.verifyUrl}/${this.projectId}`,d.style.display="none",document.body.append(d),this.iframe=d,i=o}),new Promise((o,f)=>setTimeout(()=>{window.removeEventListener("message",n),f("verify iframe load timeout")},Ht.toMiliseconds(Ht.FIVE_SECONDS)))])},this.onInit=()=>{this.initialized=!0,this.processQueue()},this.removeIframe=()=>{this.iframe&&(this.iframe.remove(),this.iframe=void 0,this.initialized=!1)},this.getVerifyUrl=i=>{let n=i||Qo;return tP.includes(n)||(this.logger.info(`verify url: ${n}, not included in trusted list, assigning default: ${Qo}`),n=Qo),n},this.logger=vi(r,this.name),this.verifyUrl=Qo,this.abortController=new AbortController,this.isDevEnv=ah()&&eO.IS_VITEST}get context(){return mi(this.logger)}startAbortTimer(t){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),Ht.toMiliseconds(t))}}let MP=class extends ZS{constructor(t,r){super(t,r),this.projectId=t,this.logger=r,this.context=eP,this.registerDeviceToken=async i=>{const{clientId:n,token:o,notificationType:f,enableEncrypted:d=!1}=i,v=`${rP}/${this.projectId}/clients`;await tO(v,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:n,type:f,token:o,always_raw:d})})},this.logger=vi(r,this.context)}};var DP=Object.defineProperty,mm=Object.getOwnPropertySymbols,xP=Object.prototype.hasOwnProperty,CP=Object.prototype.propertyIsEnumerable,vm=(e,t,r)=>t in e?DP(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ym=(e,t)=>{for(var r in t||(t={}))xP.call(t,r)&&vm(e,r,t[r]);if(mm)for(var r of mm(t))CP.call(t,r)&&vm(e,r,t[r]);return e};let OP=class h2 extends HS{constructor(t){var r;super(t),this.protocol=s2,this.version=MN,this.name=td,this.events=new Wi.EventEmitter,this.initialized=!1,this.on=(f,d)=>this.events.on(f,d),this.once=(f,d)=>this.events.once(f,d),this.off=(f,d)=>this.events.off(f,d),this.removeListener=(f,d)=>this.events.removeListener(f,d),this.projectId=t==null?void 0:t.projectId,this.relayUrl=(t==null?void 0:t.relayUrl)||a2,this.customStoragePrefix=t!=null&&t.customStoragePrefix?`:${t.customStoragePrefix}`:"";const i=Oc({level:typeof(t==null?void 0:t.logger)=="string"&&t.logger?t.logger:DN.logger}),{logger:n,chunkLoggerController:o}=jS({opts:i,maxSizeInBytes:t==null?void 0:t.maxLogBlobSizeInBytes,loggerOverride:t==null?void 0:t.logger});this.logChunkController=o,(r=this.logChunkController)!=null&&r.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var f,d;(f=this.logChunkController)!=null&&f.downloadLogsBlobInBrowser&&((d=this.logChunkController)==null||d.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=vi(n,this.name),this.heartbeat=new pS,this.crypto=new nP(this,this.logger,t==null?void 0:t.keychain),this.history=new EP(this,this.logger),this.expirer=new SP(this,this.logger),this.storage=t!=null&&t.storage?t.storage:new lS(ym(ym({},xN),t==null?void 0:t.storageOptions)),this.relayer=new yP({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new _P(this,this.logger),this.verify=new IP(this.projectId||"",this.logger),this.echoClient=new MP(this.projectId||"",this.logger)}static async init(t){const r=new h2(t);await r.initialize();const i=await r.crypto.getClientId();return await r.storage.setItem(HN,i),r}get context(){return mi(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var t;return(t=this.logChunkController)==null?void 0:t.logsToBlob({clientId:await this.crypto.getClientId()})}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.initialized=!0,this.logger.info("Core Initialization Success")}catch(t){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,t),this.logger.error(t.message),t}}};const NP=OP,u2="wc",c2=2,f2="client",ed=`${u2}@${c2}:${f2}:`,Tl={name:f2,logger:"error",controller:!1,relayUrl:"wss://relay.walletconnect.com"},wm="WALLETCONNECT_DEEPLINK_CHOICE",PP="proposal",l2="Proposal expired",RP="session",zo=Ht.SEVEN_DAYS,TP="engine",Si={wc_sessionPropose:{req:{ttl:Ht.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:Ht.FIVE_MINUTES,prompt:!1,tag:1101}},wc_sessionSettle:{req:{ttl:Ht.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:Ht.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:Ht.ONE_DAY,prompt:!1,tag:1104},res:{ttl:Ht.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:Ht.ONE_DAY,prompt:!1,tag:1106},res:{ttl:Ht.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:Ht.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:Ht.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:Ht.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:Ht.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:Ht.ONE_DAY,prompt:!1,tag:1112},res:{ttl:Ht.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:Ht.ONE_DAY,prompt:!1,tag:1114},res:{ttl:Ht.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:Ht.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:Ht.ONE_HOUR,prompt:!1,tag:1117}}},Bl={min:Ht.FIVE_MINUTES,max:Ht.SEVEN_DAYS},us={idle:"IDLE",active:"ACTIVE"},BP="request",UP=["wc_sessionPropose","wc_sessionRequest","wc_authRequest"],LP="wc",FP="auth",qP="authKeys",$P="pairingTopics",kP="requests",Uc=`${LP}@${1.5}:${FP}:`,rc=`${Uc}:PUB_KEY`;var zP=Object.defineProperty,jP=Object.defineProperties,HP=Object.getOwnPropertyDescriptors,bm=Object.getOwnPropertySymbols,KP=Object.prototype.hasOwnProperty,GP=Object.prototype.propertyIsEnumerable,Am=(e,t,r)=>t in e?zP(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,yr=(e,t)=>{for(var r in t||(t={}))KP.call(t,r)&&Am(e,r,t[r]);if(bm)for(var r of bm(t))GP.call(t,r)&&Am(e,r,t[r]);return e},no=(e,t)=>jP(e,HP(t));class VP extends e9{constructor(t){super(t),this.name=TP,this.events=new D0,this.initialized=!1,this.requestQueue={state:us.idle,queue:[]},this.sessionRequestQueue={state:us.idle,queue:[]},this.requestQueueDelay=Ht.ONE_SECOND,this.expectedPairingMethodMap=new Map,this.recentlyDeletedMap=new Map,this.recentlyDeletedLimit=200,this.init=async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),this.client.core.pairing.register({methods:Object.keys(Si)}),this.initialized=!0,setTimeout(()=>{this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},Ht.toMiliseconds(this.requestQueueDelay)))},this.connect=async r=>{await this.isInitialized();const i=no(yr({},r),{requiredNamespaces:r.requiredNamespaces||{},optionalNamespaces:r.optionalNamespaces||{}});await this.isValidConnect(i);const{pairingTopic:n,requiredNamespaces:o,optionalNamespaces:f,sessionProperties:d,relays:v}=i;let g=n,w,S=!1;try{g&&(S=this.client.core.pairing.pairings.get(g).active)}catch($){throw this.client.logger.error(`connect() -> pairing.get(${g}) failed`),$}if(!g||!S){const{topic:$,uri:j}=await this.client.core.pairing.create();g=$,w=j}if(!g){const{message:$}=Ot("NO_MATCHING_KEY",`connect() pairing topic: ${g}`);throw new Error($)}const x=await this.client.core.crypto.generateKeyPair(),C=Si.wc_sessionPropose.req.ttl||Ht.FIVE_MINUTES,N=Cr(C),V=yr({requiredNamespaces:o,optionalNamespaces:f,relays:v??[{protocol:o2}],proposer:{publicKey:x,metadata:this.client.metadata},expiryTimestamp:N},d&&{sessionProperties:d}),{reject:z,resolve:X,done:G}=so(C,l2);this.events.once(Se("session_connect"),async({error:$,session:j})=>{if($)z($);else if(j){j.self.publicKey=x;const k=no(yr({},j),{requiredNamespaces:V.requiredNamespaces,optionalNamespaces:V.optionalNamespaces});await this.client.session.set(j.topic,k),await this.setExpiry(j.topic,j.expiry),g&&await this.client.core.pairing.updateMetadata({topic:g,metadata:j.peer.metadata}),X(k)}});const Y=await this.sendRequest({topic:g,method:"wc_sessionPropose",params:V,throwOnFailedPublish:!0});return await this.setProposal(Y,yr({id:Y},V)),{uri:w,approval:G}},this.pair=async r=>{await this.isInitialized();try{return await this.client.core.pairing.pair(r)}catch(i){throw this.client.logger.error("pair() failed"),i}},this.approve=async r=>{await this.isInitialized();try{await this.isValidApprove(r)}catch(G){throw this.client.logger.error("approve() -> isValidApprove() failed"),G}const{id:i,relayProtocol:n,namespaces:o,sessionProperties:f,sessionConfig:d}=r;let v;try{v=this.client.proposal.get(i)}catch(G){throw this.client.logger.error(`approve() -> proposal.get(${i}) failed`),G}let{pairingTopic:g,proposer:w,requiredNamespaces:S,optionalNamespaces:x}=v;g=g||"";const C=await this.client.core.crypto.generateKeyPair(),N=w.publicKey,V=await this.client.core.crypto.generateSharedKey(C,N),z=yr(yr({relay:{protocol:n??"irn"},namespaces:o,pairingTopic:g,controller:{publicKey:C,metadata:this.client.metadata},expiry:Cr(zo)},f&&{sessionProperties:f}),d&&{sessionConfig:d});await this.client.core.relayer.subscribe(V);const X=no(yr({},z),{topic:V,requiredNamespaces:S,optionalNamespaces:x,pairingTopic:g,acknowledged:!1,self:z.controller,peer:{publicKey:w.publicKey,metadata:w.metadata},controller:C});await this.client.session.set(V,X);try{await this.sendResult({id:i,topic:g,result:{relay:{protocol:n??"irn"},responderPublicKey:C},throwOnFailedPublish:!0}),await this.sendRequest({topic:V,method:"wc_sessionSettle",params:z,throwOnFailedPublish:!0})}catch(G){throw this.client.logger.error(G),this.client.session.delete(V,$e("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(V),G}return await this.client.core.pairing.updateMetadata({topic:g,metadata:w.metadata}),await this.client.proposal.delete(i,$e("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:g}),await this.setExpiry(V,Cr(zo)),{topic:V,acknowledged:()=>new Promise(G=>setTimeout(()=>G(this.client.session.get(V)),500))}},this.reject=async r=>{await this.isInitialized();try{await this.isValidReject(r)}catch(f){throw this.client.logger.error("reject() -> isValidReject() failed"),f}const{id:i,reason:n}=r;let o;try{o=this.client.proposal.get(i).pairingTopic}catch(f){throw this.client.logger.error(`reject() -> proposal.get(${i}) failed`),f}o&&(await this.sendError({id:i,topic:o,error:n}),await this.client.proposal.delete(i,$e("USER_DISCONNECTED")))},this.update=async r=>{await this.isInitialized();try{await this.isValidUpdate(r)}catch(S){throw this.client.logger.error("update() -> isValidUpdate() failed"),S}const{topic:i,namespaces:n}=r,{done:o,resolve:f,reject:d}=so(),v=Ps(),g=ho().toString(),w=this.client.session.get(i).namespaces;return this.events.once(Se("session_update",v),({error:S})=>{S?d(S):f()}),await this.client.session.update(i,{namespaces:n}),await this.sendRequest({topic:i,method:"wc_sessionUpdate",params:{namespaces:n},throwOnFailedPublish:!0,clientRpcId:v,relayRpcId:g}).catch(S=>{this.client.logger.error(S),this.client.session.update(i,{namespaces:w}),d(S)}),{acknowledged:o}},this.extend=async r=>{await this.isInitialized();try{await this.isValidExtend(r)}catch(v){throw this.client.logger.error("extend() -> isValidExtend() failed"),v}const{topic:i}=r,n=Ps(),{done:o,resolve:f,reject:d}=so();return this.events.once(Se("session_extend",n),({error:v})=>{v?d(v):f()}),await this.setExpiry(i,Cr(zo)),this.sendRequest({topic:i,method:"wc_sessionExtend",params:{},clientRpcId:n,throwOnFailedPublish:!0}).catch(v=>{d(v)}),{acknowledged:o}},this.request=async r=>{await this.isInitialized();try{await this.isValidRequest(r)}catch(C){throw this.client.logger.error("request() -> isValidRequest() failed"),C}const{chainId:i,request:n,topic:o,expiry:f=Si.wc_sessionRequest.req.ttl}=r,d=this.client.session.get(o),v=Ps(),g=ho().toString(),{done:w,resolve:S,reject:x}=so(f,"Request expired. Please try again.");return this.events.once(Se("session_request",v),({error:C,result:N})=>{C?x(C):S(N)}),await Promise.all([new Promise(async C=>{await this.sendRequest({clientRpcId:v,relayRpcId:g,topic:o,method:"wc_sessionRequest",params:{request:no(yr({},n),{expiryTimestamp:Cr(f)}),chainId:i},expiry:f,throwOnFailedPublish:!0}).catch(N=>x(N)),this.client.events.emit("session_request_sent",{topic:o,request:n,chainId:i,id:v}),C()}),new Promise(async C=>{var N;if(!((N=d.sessionConfig)!=null&&N.disableDeepLink)){const V=await sI(this.client.core.storage,wm);nI({id:v,topic:o,wcDeepLink:V})}C()}),w()]).then(C=>C[2])},this.respond=async r=>{await this.isInitialized(),await this.isValidRespond(r);const{topic:i,response:n}=r,{id:o}=n;Rn(n)?await this.sendResult({id:o,topic:i,result:n.result,throwOnFailedPublish:!0}):Qi(n)&&await this.sendError({id:o,topic:i,error:n.error}),this.cleanupAfterResponse(r)},this.ping=async r=>{await this.isInitialized();try{await this.isValidPing(r)}catch(n){throw this.client.logger.error("ping() -> isValidPing() failed"),n}const{topic:i}=r;if(this.client.session.keys.includes(i)){const n=Ps(),o=ho().toString(),{done:f,resolve:d,reject:v}=so();this.events.once(Se("session_ping",n),({error:g})=>{g?v(g):d()}),await Promise.all([this.sendRequest({topic:i,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:n,relayRpcId:o}),f()])}else this.client.core.pairing.pairings.keys.includes(i)&&await this.client.core.pairing.ping({topic:i})},this.emit=async r=>{await this.isInitialized(),await this.isValidEmit(r);const{topic:i,event:n,chainId:o}=r,f=ho().toString();await this.sendRequest({topic:i,method:"wc_sessionEvent",params:{event:n,chainId:o},throwOnFailedPublish:!0,relayRpcId:f})},this.disconnect=async r=>{await this.isInitialized(),await this.isValidDisconnect(r);const{topic:i}=r;if(this.client.session.keys.includes(i))await this.sendRequest({topic:i,method:"wc_sessionDelete",params:$e("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:i,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(i))await this.client.core.pairing.disconnect({topic:i});else{const{message:n}=Ot("MISMATCHED_TOPIC",`Session or pairing topic not found: ${i}`);throw new Error(n)}},this.find=r=>(this.isInitialized(),this.client.session.getAll().filter(i=>xx(i,r))),this.getPendingSessionRequests=()=>this.client.pendingRequest.getAll(),this.authenticate=async r=>{this.isInitialized(),this.isValidAuthenticate(r);const{chains:i,statement:n="",uri:o,domain:f,nonce:d,type:v,exp:g,nbf:w,methods:S=[],expiry:x}=r,C=[...r.resources||[]],{topic:N,uri:V}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"]});this.client.logger.info({message:"Generated new pairing",pairing:{topic:N,uri:V}});const z=await this.client.core.crypto.generateKeyPair(),X=ec(z);if(await Promise.all([this.client.auth.authKeys.set(rc,{responseTopic:X,publicKey:z}),this.client.auth.pairingTopics.set(X,{topic:X,pairingTopic:N})]),await this.client.core.relayer.subscribe(X),this.client.logger.info(`sending request to new pairing topic: ${N}`),S.length>0){const{namespace:h}=Yu(i[0]);let u=XD(h,"request",S);tc(C)&&(u=tx(u,C.pop())),C.push(u)}const G=x&&x>Si.wc_sessionAuthenticate.req.ttl?x:Si.wc_sessionAuthenticate.req.ttl,Y={authPayload:{type:v??"caip122",chains:i,statement:n,aud:o,domain:f,version:"1",nonce:d,iat:new Date().toISOString(),exp:g,nbf:w,resources:C},requester:{publicKey:z,metadata:this.client.metadata},expiryTimestamp:Cr(G)},$={eip155:{chains:i,methods:[...new Set(["personal_sign",...S])],events:["chainChanged","accountsChanged"]}},j={requiredNamespaces:{},optionalNamespaces:$,relays:[{protocol:"irn"}],proposer:{publicKey:z,metadata:this.client.metadata},expiryTimestamp:Cr(Si.wc_sessionPropose.req.ttl)},{done:k,resolve:_,reject:L}=so(G,"Request expired"),ot=async({error:h,session:u})=>{if(this.events.off(Se("session_request",ht),ct),h)L(h);else if(u){u.self.publicKey=z,await this.client.session.set(u.topic,u),await this.setExpiry(u.topic,u.expiry),N&&await this.client.core.pairing.updateMetadata({topic:N,metadata:u.peer.metadata});const p=this.client.session.get(u.topic);await this.deleteProposal(_t),_({session:p})}},ct=async h=>{if(await this.deletePendingAuthRequest(ht,{message:"fulfilled",code:0}),h.error){const A=$e("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return h.error.code===A.code?void 0:(this.events.off(Se("session_connect"),ot),L(h.error.message))}await this.deleteProposal(_t),this.events.off(Se("session_connect"),ot);const{cacaos:u,responder:p}=h.result,b=[],M=[];for(const A of u){await Pg({cacao:A,projectId:this.client.core.projectId})||(this.client.logger.error(A,"Signature verification failed"),L($e("SESSION_SETTLEMENT_FAILED","Signature verification failed")));const{p:c}=A,I=tc(c.resources),Z=[Ng(c.iss)],nt=gc(c.iss);if(I){const m=Rg(I),H=Tg(I);b.push(...m),Z.push(...H)}for(const m of Z)M.push(`${m}:${nt}`)}const D=await this.client.core.crypto.generateSharedKey(z,p.publicKey);let O;b.length>0&&(O={topic:D,acknowledged:!0,self:{publicKey:z,metadata:this.client.metadata},peer:p,controller:p.publicKey,expiry:Cr(zo),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:N,namespaces:kg([...new Set(b)],[...new Set(M)])},await this.client.core.relayer.subscribe(D),await this.client.session.set(D,O),O=this.client.session.get(D)),_({auths:u,session:O})},ht=Ps(),_t=Ps();this.events.once(Se("session_connect"),ot),this.events.once(Se("session_request",ht),ct);try{await Promise.all([this.sendRequest({topic:N,method:"wc_sessionAuthenticate",params:Y,expiry:r.expiry,throwOnFailedPublish:!0,clientRpcId:ht}),this.sendRequest({topic:N,method:"wc_sessionPropose",params:j,expiry:Si.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:_t})])}catch(h){throw this.events.off(Se("session_connect"),ot),this.events.off(Se("session_request",ht),ct),h}return await this.setProposal(_t,yr({id:_t},j)),await this.setAuthRequest(ht,{request:no(yr({},Y),{verifyContext:{}}),pairingTopic:N}),{uri:V,response:k}},this.approveSessionAuthenticate=async r=>{this.isInitialized();const{id:i,auths:n}=r,o=this.getPendingAuthRequest(i);if(!o)throw new Error(`Could not find pending auth request with id ${i}`);const f=o.requester.publicKey,d=await this.client.core.crypto.generateKeyPair(),v=ec(f),g={type:Fs,receiverPublicKey:f,senderPublicKey:d},w=[],S=[];for(const N of n){if(!await Pg({cacao:N,projectId:this.client.core.projectId})){const Y=$e("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:i,topic:v,error:Y,encodeOpts:g}),new Error(Y.message)}const{p:V}=N,z=tc(V.resources),X=[Ng(V.iss)],G=gc(V.iss);if(z){const Y=Rg(z),$=Tg(z);w.push(...Y),X.push(...$)}for(const Y of X)S.push(`${Y}:${G}`)}const x=await this.client.core.crypto.generateSharedKey(d,f);let C;return(w==null?void 0:w.length)>0&&(C={topic:x,acknowledged:!0,self:{publicKey:d,metadata:this.client.metadata},peer:{publicKey:f,metadata:o.requester.metadata},controller:f,expiry:Cr(zo),authentication:n,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:"",namespaces:kg([...new Set(w)],[...new Set(S)])},await this.client.core.relayer.subscribe(x),await this.client.session.set(x,C)),await this.sendResult({topic:v,id:i,result:{cacaos:n,responder:{publicKey:d,metadata:this.client.metadata}},encodeOpts:g,throwOnFailedPublish:!0}),await this.client.auth.requests.delete(i,{message:"fullfilled",code:0}),await this.client.core.pairing.activate({topic:o.pairingTopic}),{session:C}},this.rejectSessionAuthenticate=async r=>{await this.isInitialized();const{id:i,reason:n}=r,o=this.getPendingAuthRequest(i);if(!o)throw new Error(`Could not find pending auth request with id ${i}`);const f=o.requester.publicKey,d=await this.client.core.crypto.generateKeyPair(),v=ec(f),g={type:Fs,receiverPublicKey:f,senderPublicKey:d};await this.sendError({id:i,topic:v,error:n,encodeOpts:g}),await this.client.auth.requests.delete(i,{message:"rejected",code:0}),await this.client.proposal.delete(i,$e("USER_DISCONNECTED"))},this.formatAuthMessage=r=>{this.isInitialized();const{request:i,iss:n}=r;return By(i,n)},this.cleanupDuplicatePairings=async r=>{if(r.pairingTopic)try{const i=this.client.core.pairing.pairings.get(r.pairingTopic),n=this.client.core.pairing.pairings.getAll().filter(o=>{var f,d;return((f=o.peerMetadata)==null?void 0:f.url)&&((d=o.peerMetadata)==null?void 0:d.url)===r.peer.metadata.url&&o.topic&&o.topic!==i.topic});if(n.length===0)return;this.client.logger.info(`Cleaning up ${n.length} duplicate pairing(s)`),await Promise.all(n.map(o=>this.client.core.pairing.disconnect({topic:o.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(i){this.client.logger.error(i)}},this.deleteSession=async r=>{const{topic:i,expirerHasDeleted:n=!1,emitEvent:o=!0,id:f=0}=r,{self:d}=this.client.session.get(i);await this.client.core.relayer.unsubscribe(i),await this.client.session.delete(i,$e("USER_DISCONNECTED")),this.addToRecentlyDeleted(i,"session"),this.client.core.crypto.keychain.has(d.publicKey)&&await this.client.core.crypto.deleteKeyPair(d.publicKey),this.client.core.crypto.keychain.has(i)&&await this.client.core.crypto.deleteSymKey(i),n||this.client.core.expirer.del(i),this.client.core.storage.removeItem(wm).catch(v=>this.client.logger.warn(v)),this.getPendingSessionRequests().forEach(v=>{v.topic===i&&this.deletePendingSessionRequest(v.id,$e("USER_DISCONNECTED"))}),o&&this.client.events.emit("session_delete",{id:f,topic:i})},this.deleteProposal=async(r,i)=>{await Promise.all([this.client.proposal.delete(r,$e("USER_DISCONNECTED")),i?Promise.resolve():this.client.core.expirer.del(r)]),this.addToRecentlyDeleted(r,"proposal")},this.deletePendingSessionRequest=async(r,i,n=!1)=>{await Promise.all([this.client.pendingRequest.delete(r,i),n?Promise.resolve():this.client.core.expirer.del(r)]),this.addToRecentlyDeleted(r,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(o=>o.id!==r),n&&(this.sessionRequestQueue.state=us.idle,this.client.events.emit("session_request_expire",{id:r}))},this.deletePendingAuthRequest=async(r,i,n=!1)=>{await Promise.all([this.client.auth.requests.delete(r,i),n?Promise.resolve():this.client.core.expirer.del(r)])},this.setExpiry=async(r,i)=>{this.client.session.keys.includes(r)&&(this.client.core.expirer.set(r,i),await this.client.session.update(r,{expiry:i}))},this.setProposal=async(r,i)=>{this.client.core.expirer.set(r,Cr(Si.wc_sessionPropose.req.ttl)),await this.client.proposal.set(r,i)},this.setAuthRequest=async(r,i)=>{const{request:n,pairingTopic:o}=i;this.client.core.expirer.set(r,n.expiryTimestamp),await this.client.auth.requests.set(r,{authPayload:n.authPayload,requester:n.requester,expiryTimestamp:n.expiryTimestamp,id:r,pairingTopic:o,verifyContext:n.verifyContext})},this.setPendingSessionRequest=async r=>{const{id:i,topic:n,params:o,verifyContext:f}=r,d=o.request.expiryTimestamp||Cr(Si.wc_sessionRequest.req.ttl);this.client.core.expirer.set(i,d),await this.client.pendingRequest.set(i,{id:i,topic:n,params:o,verifyContext:f})},this.sendRequest=async r=>{const{topic:i,method:n,params:o,expiry:f,relayRpcId:d,clientRpcId:v,throwOnFailedPublish:g}=r,w=Zo(n,o,v);if(la()&&UP.includes(n)){const C=ao(JSON.stringify(w));this.client.core.verify.register({attestationId:C})}let S;try{S=await this.client.core.crypto.encode(i,w)}catch(C){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${i} failed`),C}const x=Si[n].req;return f&&(x.ttl=f),d&&(x.id=d),this.client.core.history.set(i,w),g?(x.internal=no(yr({},x.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(i,S,x)):this.client.core.relayer.publish(i,S,x).catch(C=>this.client.logger.error(C)),w.id},this.sendResult=async r=>{const{id:i,topic:n,result:o,throwOnFailedPublish:f,encodeOpts:d}=r,v=Pc(i,o);let g;try{g=await this.client.core.crypto.encode(n,v,d)}catch(x){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${n} failed`),x}let w;try{w=await this.client.core.history.get(n,i)}catch(x){throw this.client.logger.error(`sendResult() -> history.get(${n}, ${i}) failed`),x}const S=Si[w.request.method].res;f?(S.internal=no(yr({},S.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(n,g,S)):this.client.core.relayer.publish(n,g,S).catch(x=>this.client.logger.error(x)),await this.client.core.history.resolve(v)},this.sendError=async r=>{const{id:i,topic:n,error:o,encodeOpts:f}=r,d=Rc(i,o);let v;try{v=await this.client.core.crypto.encode(n,d,f)}catch(S){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${n} failed`),S}let g;try{g=await this.client.core.history.get(n,i)}catch(S){throw this.client.logger.error(`sendError() -> history.get(${n}, ${i}) failed`),S}const w=Si[g.request.method].res;this.client.core.relayer.publish(n,v,w),await this.client.core.history.resolve(d)},this.cleanup=async()=>{const r=[],i=[];this.client.session.getAll().forEach(n=>{let o=!1;Os(n.expiry)&&(o=!0),this.client.core.crypto.keychain.has(n.topic)||(o=!0),o&&r.push(n.topic)}),this.client.proposal.getAll().forEach(n=>{Os(n.expiryTimestamp)&&i.push(n.id)}),await Promise.all([...r.map(n=>this.deleteSession({topic:n})),...i.map(n=>this.deleteProposal(n))])},this.onRelayEventRequest=async r=>{this.requestQueue.queue.push(r),await this.processRequestsQueue()},this.processRequestsQueue=async()=>{if(this.requestQueue.state===us.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=us.active;const r=this.requestQueue.queue.shift();if(r)try{this.processRequest(r),await new Promise(i=>setTimeout(i,300))}catch(i){this.client.logger.warn(i)}}this.requestQueue.state=us.idle},this.processRequest=r=>{const{topic:i,payload:n}=r,o=n.method;if(!this.shouldIgnorePairingRequest({topic:i,requestMethod:o}))switch(o){case"wc_sessionPropose":return this.onSessionProposeRequest(i,n);case"wc_sessionSettle":return this.onSessionSettleRequest(i,n);case"wc_sessionUpdate":return this.onSessionUpdateRequest(i,n);case"wc_sessionExtend":return this.onSessionExtendRequest(i,n);case"wc_sessionPing":return this.onSessionPingRequest(i,n);case"wc_sessionDelete":return this.onSessionDeleteRequest(i,n);case"wc_sessionRequest":return this.onSessionRequest(i,n);case"wc_sessionEvent":return this.onSessionEventRequest(i,n);case"wc_sessionAuthenticate":return this.onSessionAuthenticateRequest(i,n);default:return this.client.logger.info(`Unsupported request method ${o}`)}},this.onRelayEventResponse=async r=>{const{topic:i,payload:n}=r,o=(await this.client.core.history.get(i,n.id)).request.method;switch(o){case"wc_sessionPropose":return this.onSessionProposeResponse(i,n);case"wc_sessionSettle":return this.onSessionSettleResponse(i,n);case"wc_sessionUpdate":return this.onSessionUpdateResponse(i,n);case"wc_sessionExtend":return this.onSessionExtendResponse(i,n);case"wc_sessionPing":return this.onSessionPingResponse(i,n);case"wc_sessionRequest":return this.onSessionRequestResponse(i,n);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(i,n);default:return this.client.logger.info(`Unsupported response method ${o}`)}},this.onRelayEventUnknownPayload=r=>{const{topic:i}=r,{message:n}=Ot("MISSING_OR_INVALID",`Decoded payload on topic ${i} is not identifiable as a JSON-RPC request or a response.`);throw new Error(n)},this.shouldIgnorePairingRequest=r=>{const{topic:i,requestMethod:n}=r,o=this.expectedPairingMethodMap.get(i);return!o||o.includes(n)?!1:!!(o.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0)},this.onSessionProposeRequest=async(r,i)=>{const{params:n,id:o}=i;try{this.isValidConnect(yr({},i.params));const f=n.expiryTimestamp||Cr(Si.wc_sessionPropose.req.ttl),d=yr({id:o,pairingTopic:r,expiryTimestamp:f},n);await this.setProposal(o,d);const v=ao(JSON.stringify(i)),g=await this.getVerifyContext(v,d.proposer.metadata);this.client.events.emit("session_proposal",{id:o,params:d,verifyContext:g})}catch(f){await this.sendError({id:o,topic:r,error:f}),this.client.logger.error(f)}},this.onSessionProposeResponse=async(r,i)=>{const{id:n}=i;if(Rn(i)){const{result:o}=i;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:o});const f=this.client.proposal.get(n);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:f});const d=f.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:d});const v=o.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:v});const g=await this.client.core.crypto.generateSharedKey(d,v);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:g});const w=await this.client.core.relayer.subscribe(g);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:w}),await this.client.core.pairing.activate({topic:r})}else if(Qi(i)){await this.client.proposal.delete(n,$e("USER_DISCONNECTED"));const o=Se("session_connect");if(this.events.listenerCount(o)===0)throw new Error(`emitting ${o} without any listeners, 954`);this.events.emit(Se("session_connect"),{error:i.error})}},this.onSessionSettleRequest=async(r,i)=>{const{id:n,params:o}=i;try{this.isValidSessionSettleRequest(o);const{relay:f,controller:d,expiry:v,namespaces:g,sessionProperties:w,pairingTopic:S,sessionConfig:x}=i.params,C=yr(yr({topic:r,relay:f,expiry:v,namespaces:g,acknowledged:!0,pairingTopic:S,requiredNamespaces:{},optionalNamespaces:{},controller:d.publicKey,self:{publicKey:"",metadata:this.client.metadata},peer:{publicKey:d.publicKey,metadata:d.metadata}},w&&{sessionProperties:w}),x&&{sessionConfig:x});await this.sendResult({id:i.id,topic:r,result:!0,throwOnFailedPublish:!0});const N=Se("session_connect");if(this.events.listenerCount(N)===0)throw new Error(`emitting ${N} without any listeners 997`);this.events.emit(Se("session_connect"),{session:C}),this.cleanupDuplicatePairings(C)}catch(f){await this.sendError({id:n,topic:r,error:f}),this.client.logger.error(f)}},this.onSessionSettleResponse=async(r,i)=>{const{id:n}=i;Rn(i)?(await this.client.session.update(r,{acknowledged:!0}),this.events.emit(Se("session_approve",n),{})):Qi(i)&&(await this.client.session.delete(r,$e("USER_DISCONNECTED")),this.events.emit(Se("session_approve",n),{error:i.error}))},this.onSessionUpdateRequest=async(r,i)=>{const{params:n,id:o}=i;try{const f=`${r}_session_update`,d=Ha.get(f);if(d&&this.isRequestOutOfSync(d,o)){this.client.logger.info(`Discarding out of sync request - ${o}`),this.sendError({id:o,topic:r,error:$e("INVALID_UPDATE_REQUEST")});return}this.isValidUpdate(yr({topic:r},n));try{Ha.set(f,o),await this.client.session.update(r,{namespaces:n.namespaces}),await this.sendResult({id:o,topic:r,result:!0,throwOnFailedPublish:!0})}catch(v){throw Ha.delete(f),v}this.client.events.emit("session_update",{id:o,topic:r,params:n})}catch(f){await this.sendError({id:o,topic:r,error:f}),this.client.logger.error(f)}},this.isRequestOutOfSync=(r,i)=>parseInt(i.toString().slice(0,-3))<=parseInt(r.toString().slice(0,-3)),this.onSessionUpdateResponse=(r,i)=>{const{id:n}=i,o=Se("session_update",n);if(this.events.listenerCount(o)===0)throw new Error(`emitting ${o} without any listeners`);Rn(i)?this.events.emit(Se("session_update",n),{}):Qi(i)&&this.events.emit(Se("session_update",n),{error:i.error})},this.onSessionExtendRequest=async(r,i)=>{const{id:n}=i;try{this.isValidExtend({topic:r}),await this.setExpiry(r,Cr(zo)),await this.sendResult({id:n,topic:r,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_extend",{id:n,topic:r})}catch(o){await this.sendError({id:n,topic:r,error:o}),this.client.logger.error(o)}},this.onSessionExtendResponse=(r,i)=>{const{id:n}=i,o=Se("session_extend",n);if(this.events.listenerCount(o)===0)throw new Error(`emitting ${o} without any listeners`);Rn(i)?this.events.emit(Se("session_extend",n),{}):Qi(i)&&this.events.emit(Se("session_extend",n),{error:i.error})},this.onSessionPingRequest=async(r,i)=>{const{id:n}=i;try{this.isValidPing({topic:r}),await this.sendResult({id:n,topic:r,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:n,topic:r})}catch(o){await this.sendError({id:n,topic:r,error:o}),this.client.logger.error(o)}},this.onSessionPingResponse=(r,i)=>{const{id:n}=i,o=Se("session_ping",n);if(this.events.listenerCount(o)===0)throw new Error(`emitting ${o} without any listeners`);setTimeout(()=>{Rn(i)?this.events.emit(Se("session_ping",n),{}):Qi(i)&&this.events.emit(Se("session_ping",n),{error:i.error})},500)},this.onSessionDeleteRequest=async(r,i)=>{const{id:n}=i;try{this.isValidDisconnect({topic:r,reason:i.params}),await Promise.all([new Promise(o=>{this.client.core.relayer.once(fi.publish,async()=>{o(await this.deleteSession({topic:r,id:n}))})}),this.sendResult({id:n,topic:r,result:!0,throwOnFailedPublish:!0}),this.cleanupPendingSentRequestsForTopic({topic:r,error:$e("USER_DISCONNECTED")})])}catch(o){this.client.logger.error(o)}},this.onSessionRequest=async(r,i)=>{var n;const{id:o,params:f}=i;try{await this.isValidRequest(yr({topic:r},f));const d=ao(JSON.stringify(Zo("wc_sessionRequest",f,o))),v=this.client.session.get(r),g=await this.getVerifyContext(d,v.peer.metadata),w={id:o,topic:r,params:f,verifyContext:g};await this.setPendingSessionRequest(w),(n=this.client.signConfig)!=null&&n.disableRequestQueue?this.emitSessionRequest(w):(this.addSessionRequestToSessionRequestQueue(w),this.processSessionRequestQueue())}catch(d){await this.sendError({id:o,topic:r,error:d}),this.client.logger.error(d)}},this.onSessionRequestResponse=(r,i)=>{const{id:n}=i,o=Se("session_request",n);if(this.events.listenerCount(o)===0)throw new Error(`emitting ${o} without any listeners`);Rn(i)?this.events.emit(Se("session_request",n),{result:i.result}):Qi(i)&&this.events.emit(Se("session_request",n),{error:i.error})},this.onSessionEventRequest=async(r,i)=>{const{id:n,params:o}=i;try{const f=`${r}_session_event_${o.event.name}`,d=Ha.get(f);if(d&&this.isRequestOutOfSync(d,n)){this.client.logger.info(`Discarding out of sync request - ${n}`);return}this.isValidEmit(yr({topic:r},o)),this.client.events.emit("session_event",{id:n,topic:r,params:o}),Ha.set(f,n)}catch(f){await this.sendError({id:n,topic:r,error:f}),this.client.logger.error(f)}},this.onSessionAuthenticateResponse=(r,i)=>{const{id:n}=i;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:r,payload:i}),Rn(i)?this.events.emit(Se("session_request",n),{result:i.result}):Qi(i)&&this.events.emit(Se("session_request",n),{error:i.error})},this.onSessionAuthenticateRequest=async(r,i)=>{const{requester:n,authPayload:o,expiryTimestamp:f}=i.params,d=ao(JSON.stringify(i)),v=await this.getVerifyContext(d,this.client.metadata),g={requester:n,pairingTopic:r,id:i.id,authPayload:o,verifyContext:v,expiryTimestamp:f};await this.setAuthRequest(i.id,{request:g,pairingTopic:r}),this.client.events.emit("session_authenticate",{topic:r,params:i.params,id:i.id})},this.addSessionRequestToSessionRequestQueue=r=>{this.sessionRequestQueue.queue.push(r)},this.cleanupAfterResponse=r=>{this.deletePendingSessionRequest(r.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=us.idle,this.processSessionRequestQueue()},Ht.toMiliseconds(this.requestQueueDelay))},this.cleanupPendingSentRequestsForTopic=({topic:r,error:i})=>{const n=this.client.core.history.pending;n.length>0&&n.filter(o=>o.topic===r&&o.request.method==="wc_sessionRequest").forEach(o=>{const f=o.request.id,d=Se("session_request",f);if(this.events.listenerCount(d)===0)throw new Error(`emitting ${d} without any listeners`);this.events.emit(Se("session_request",o.request.id),{error:i})})},this.processSessionRequestQueue=()=>{if(this.sessionRequestQueue.state===us.active){this.client.logger.info("session request queue is already active.");return}const r=this.sessionRequestQueue.queue[0];if(!r){this.client.logger.info("session request queue is empty.");return}try{this.sessionRequestQueue.state=us.active,this.emitSessionRequest(r)}catch(i){this.client.logger.error(i)}},this.emitSessionRequest=r=>{this.client.events.emit("session_request",r)},this.onPairingCreated=r=>{if(r.methods&&this.expectedPairingMethodMap.set(r.topic,r.methods),r.active)return;const i=this.client.proposal.getAll().find(n=>n.pairingTopic===r.topic);i&&this.onSessionProposeRequest(r.topic,Zo("wc_sessionPropose",{requiredNamespaces:i.requiredNamespaces,optionalNamespaces:i.optionalNamespaces,relays:i.relays,proposer:i.proposer,sessionProperties:i.sessionProperties},i.id))},this.isValidConnect=async r=>{if(!hi(r)){const{message:v}=Ot("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(r)}`);throw new Error(v)}const{pairingTopic:i,requiredNamespaces:n,optionalNamespaces:o,sessionProperties:f,relays:d}=r;if(ci(i)||await this.isValidPairingTopic(i),!$x(d)){const{message:v}=Ot("MISSING_OR_INVALID",`connect() relays: ${d}`);throw new Error(v)}!ci(n)&&ch(n)!==0&&this.validateNamespaces(n,"requiredNamespaces"),!ci(o)&&ch(o)!==0&&this.validateNamespaces(o,"optionalNamespaces"),ci(f)||this.validateSessionProps(f,"sessionProperties")},this.validateNamespaces=(r,i)=>{const n=qx(r,"connect()",i);if(n)throw new Error(n.message)},this.isValidApprove=async r=>{if(!hi(r))throw new Error(Ot("MISSING_OR_INVALID",`approve() params: ${r}`).message);const{id:i,namespaces:n,relayProtocol:o,sessionProperties:f}=r;this.checkRecentlyDeleted(i),await this.isValidProposalId(i);const d=this.client.proposal.get(i),v=Cl(n,"approve()");if(v)throw new Error(v.message);const g=Hg(d.requiredNamespaces,n,"approve()");if(g)throw new Error(g.message);if(!fr(o,!0)){const{message:w}=Ot("MISSING_OR_INVALID",`approve() relayProtocol: ${o}`);throw new Error(w)}ci(f)||this.validateSessionProps(f,"sessionProperties")},this.isValidReject=async r=>{if(!hi(r)){const{message:o}=Ot("MISSING_OR_INVALID",`reject() params: ${r}`);throw new Error(o)}const{id:i,reason:n}=r;if(this.checkRecentlyDeleted(i),await this.isValidProposalId(i),!zx(n)){const{message:o}=Ot("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(n)}`);throw new Error(o)}},this.isValidSessionSettleRequest=r=>{if(!hi(r)){const{message:g}=Ot("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${r}`);throw new Error(g)}const{relay:i,controller:n,namespaces:o,expiry:f}=r;if(!ky(i)){const{message:g}=Ot("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(g)}const d=Rx(n,"onSessionSettleRequest()");if(d)throw new Error(d.message);const v=Cl(o,"onSessionSettleRequest()");if(v)throw new Error(v.message);if(Os(f)){const{message:g}=Ot("EXPIRED","onSessionSettleRequest()");throw new Error(g)}},this.isValidUpdate=async r=>{if(!hi(r)){const{message:v}=Ot("MISSING_OR_INVALID",`update() params: ${r}`);throw new Error(v)}const{topic:i,namespaces:n}=r;this.checkRecentlyDeleted(i),await this.isValidSessionTopic(i);const o=this.client.session.get(i),f=Cl(n,"update()");if(f)throw new Error(f.message);const d=Hg(o.requiredNamespaces,n,"update()");if(d)throw new Error(d.message)},this.isValidExtend=async r=>{if(!hi(r)){const{message:n}=Ot("MISSING_OR_INVALID",`extend() params: ${r}`);throw new Error(n)}const{topic:i}=r;this.checkRecentlyDeleted(i),await this.isValidSessionTopic(i)},this.isValidRequest=async r=>{if(!hi(r)){const{message:v}=Ot("MISSING_OR_INVALID",`request() params: ${r}`);throw new Error(v)}const{topic:i,request:n,chainId:o,expiry:f}=r;this.checkRecentlyDeleted(i),await this.isValidSessionTopic(i);const{namespaces:d}=this.client.session.get(i);if(!jg(d,o)){const{message:v}=Ot("MISSING_OR_INVALID",`request() chainId: ${o}`);throw new Error(v)}if(!jx(n)){const{message:v}=Ot("MISSING_OR_INVALID",`request() ${JSON.stringify(n)}`);throw new Error(v)}if(!Gx(d,o,n.method)){const{message:v}=Ot("MISSING_OR_INVALID",`request() method: ${n.method}`);throw new Error(v)}if(f&&!Jx(f,Bl)){const{message:v}=Ot("MISSING_OR_INVALID",`request() expiry: ${f}. Expiry must be a number (in seconds) between ${Bl.min} and ${Bl.max}`);throw new Error(v)}},this.isValidRespond=async r=>{var i;if(!hi(r)){const{message:f}=Ot("MISSING_OR_INVALID",`respond() params: ${r}`);throw new Error(f)}const{topic:n,response:o}=r;try{await this.isValidSessionTopic(n)}catch(f){throw(i=r==null?void 0:r.response)!=null&&i.id&&this.cleanupAfterResponse(r),f}if(!Hx(o)){const{message:f}=Ot("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(o)}`);throw new Error(f)}},this.isValidPing=async r=>{if(!hi(r)){const{message:n}=Ot("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(n)}const{topic:i}=r;await this.isValidSessionOrPairingTopic(i)},this.isValidEmit=async r=>{if(!hi(r)){const{message:d}=Ot("MISSING_OR_INVALID",`emit() params: ${r}`);throw new Error(d)}const{topic:i,event:n,chainId:o}=r;await this.isValidSessionTopic(i);const{namespaces:f}=this.client.session.get(i);if(!jg(f,o)){const{message:d}=Ot("MISSING_OR_INVALID",`emit() chainId: ${o}`);throw new Error(d)}if(!Kx(n)){const{message:d}=Ot("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(n)}`);throw new Error(d)}if(!Vx(f,o,n.name)){const{message:d}=Ot("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(n)}`);throw new Error(d)}},this.isValidDisconnect=async r=>{if(!hi(r)){const{message:n}=Ot("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(n)}const{topic:i}=r;await this.isValidSessionOrPairingTopic(i)},this.isValidAuthenticate=r=>{const{chains:i,uri:n,domain:o,nonce:f}=r;if(!Array.isArray(i)||i.length===0)throw new Error("chains is required and must be a non-empty array");if(!fr(n,!1))throw new Error("uri is required parameter");if(!fr(o,!1))throw new Error("domain is required parameter");if(!fr(f,!1))throw new Error("nonce is required parameter");if([...new Set(i.map(v=>Yu(v).namespace))].length>1)throw new Error("Multi-namespace requests are not supported. Please request single namespace only.");const{namespace:d}=Yu(i[0]);if(d!=="eip155")throw new Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")},this.getVerifyContext=async(r,i)=>{const n={verified:{verifyUrl:i.verifyUrl||Qo,validation:"UNKNOWN",origin:i.url||""}};try{const o=await this.client.core.verify.resolve({attestationId:r,verifyUrl:i.verifyUrl});o&&(n.verified.origin=o.origin,n.verified.isScam=o.isScam,n.verified.validation=o.origin===new URL(i.url).origin?"VALID":"INVALID")}catch(o){this.client.logger.info(o)}return this.client.logger.info(`Verify context: ${JSON.stringify(n)}`),n},this.validateSessionProps=(r,i)=>{Object.values(r).forEach(n=>{if(!fr(n,!1)){const{message:o}=Ot("MISSING_OR_INVALID",`${i} must be in Record<string, string> format. Received: ${JSON.stringify(n)}`);throw new Error(o)}})},this.getPendingAuthRequest=r=>{const i=this.client.auth.requests.get(r);return typeof i=="object"?i:void 0},this.addToRecentlyDeleted=(r,i)=>{if(this.recentlyDeletedMap.set(r,i),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let n=0;const o=this.recentlyDeletedLimit/2;for(const f of this.recentlyDeletedMap.keys()){if(n++>=o)break;this.recentlyDeletedMap.delete(f)}}},this.checkRecentlyDeleted=r=>{const i=this.recentlyDeletedMap.get(r);if(i){const{message:n}=Ot("MISSING_OR_INVALID",`Record was recently deleted - ${i}: ${r}`);throw new Error(n)}}}async isInitialized(){if(!this.initialized){const{message:t}=Ot("NOT_INITIALIZED",this.name);throw new Error(t)}await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(fi.message,async t=>{const{topic:r,message:i}=t,{publicKey:n}=this.client.auth.authKeys.keys.includes(rc)?this.client.auth.authKeys.get(rc):{responseTopic:void 0,publicKey:void 0},o=await this.client.core.crypto.decode(r,i,{receiverPublicKey:n});try{Z0(o)?(this.client.core.history.set(r,o),this.onRelayEventRequest({topic:r,payload:o})):Tc(o)?(await this.client.core.history.resolve(o),await this.onRelayEventResponse({topic:r,payload:o}),this.client.core.history.delete(r,o.id)):this.onRelayEventUnknownPayload({topic:r,payload:o})}catch(f){this.client.logger.error(f)}})}registerExpirerEvents(){this.client.core.expirer.on(Ki.expired,async t=>{const{topic:r,id:i}=Zv(t.target);if(i&&this.client.pendingRequest.keys.includes(i))return await this.deletePendingSessionRequest(i,Ot("EXPIRED"),!0);if(i&&this.client.auth.requests.keys.includes(i))return await this.deletePendingAuthRequest(i,Ot("EXPIRED"),!0);r?this.client.session.keys.includes(r)&&(await this.deleteSession({topic:r,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:r})):i&&(await this.deleteProposal(i,!0),this.client.events.emit("proposal_expire",{id:i}))})}registerPairingEvents(){this.client.core.pairing.events.on(Vo.create,t=>this.onPairingCreated(t)),this.client.core.pairing.events.on(Vo.delete,t=>{this.addToRecentlyDeleted(t.topic,"pairing")})}isValidPairingTopic(t){if(!fr(t,!1)){const{message:r}=Ot("MISSING_OR_INVALID",`pairing topic should be a string: ${t}`);throw new Error(r)}if(!this.client.core.pairing.pairings.keys.includes(t)){const{message:r}=Ot("NO_MATCHING_KEY",`pairing topic doesn't exist: ${t}`);throw new Error(r)}if(Os(this.client.core.pairing.pairings.get(t).expiry)){const{message:r}=Ot("EXPIRED",`pairing topic: ${t}`);throw new Error(r)}}async isValidSessionTopic(t){if(!fr(t,!1)){const{message:r}=Ot("MISSING_OR_INVALID",`session topic should be a string: ${t}`);throw new Error(r)}if(this.checkRecentlyDeleted(t),!this.client.session.keys.includes(t)){const{message:r}=Ot("NO_MATCHING_KEY",`session topic doesn't exist: ${t}`);throw new Error(r)}if(Os(this.client.session.get(t).expiry)){await this.deleteSession({topic:t});const{message:r}=Ot("EXPIRED",`session topic: ${t}`);throw new Error(r)}if(!this.client.core.crypto.keychain.has(t)){const{message:r}=Ot("MISSING_OR_INVALID",`session topic does not exist in keychain: ${t}`);throw await this.deleteSession({topic:t}),new Error(r)}}async isValidSessionOrPairingTopic(t){if(this.checkRecentlyDeleted(t),this.client.session.keys.includes(t))await this.isValidSessionTopic(t);else if(this.client.core.pairing.pairings.keys.includes(t))this.isValidPairingTopic(t);else if(fr(t,!1)){const{message:r}=Ot("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${t}`);throw new Error(r)}else{const{message:r}=Ot("MISSING_OR_INVALID",`session or pairing topic should be a string: ${t}`);throw new Error(r)}}async isValidProposalId(t){if(!kx(t)){const{message:r}=Ot("MISSING_OR_INVALID",`proposal id should be a number: ${t}`);throw new Error(r)}if(!this.client.proposal.keys.includes(t)){const{message:r}=Ot("NO_MATCHING_KEY",`proposal id doesn't exist: ${t}`);throw new Error(r)}if(Os(this.client.proposal.get(t).expiryTimestamp)){await this.deleteProposal(t);const{message:r}=Ot("EXPIRED",`proposal id: ${t}`);throw new Error(r)}}}class QP extends bo{constructor(t,r){super(t,r,PP,ed),this.core=t,this.logger=r}}class YP extends bo{constructor(t,r){super(t,r,RP,ed),this.core=t,this.logger=r}}class JP extends bo{constructor(t,r){super(t,r,BP,ed,i=>i.id),this.core=t,this.logger=r}}class WP extends bo{constructor(t,r){super(t,r,qP,Uc,()=>rc),this.core=t,this.logger=r}}class XP extends bo{constructor(t,r){super(t,r,$P,Uc),this.core=t,this.logger=r}}class ZP extends bo{constructor(t,r){super(t,r,kP,Uc,i=>i.id),this.core=t,this.logger=r}}class tR{constructor(t,r){this.core=t,this.logger=r,this.authKeys=new WP(this.core,this.logger),this.pairingTopics=new XP(this.core,this.logger),this.requests=new ZP(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}}class rd extends t9{constructor(t){super(t),this.protocol=u2,this.version=c2,this.name=Tl.name,this.events=new Wi.EventEmitter,this.on=(i,n)=>this.events.on(i,n),this.once=(i,n)=>this.events.once(i,n),this.off=(i,n)=>this.events.off(i,n),this.removeListener=(i,n)=>this.events.removeListener(i,n),this.removeAllListeners=i=>this.events.removeAllListeners(i),this.connect=async i=>{try{return await this.engine.connect(i)}catch(n){throw this.logger.error(n.message),n}},this.pair=async i=>{try{return await this.engine.pair(i)}catch(n){throw this.logger.error(n.message),n}},this.approve=async i=>{try{return await this.engine.approve(i)}catch(n){throw this.logger.error(n.message),n}},this.reject=async i=>{try{return await this.engine.reject(i)}catch(n){throw this.logger.error(n.message),n}},this.update=async i=>{try{return await this.engine.update(i)}catch(n){throw this.logger.error(n.message),n}},this.extend=async i=>{try{return await this.engine.extend(i)}catch(n){throw this.logger.error(n.message),n}},this.request=async i=>{try{return await this.engine.request(i)}catch(n){throw this.logger.error(n.message),n}},this.respond=async i=>{try{return await this.engine.respond(i)}catch(n){throw this.logger.error(n.message),n}},this.ping=async i=>{try{return await this.engine.ping(i)}catch(n){throw this.logger.error(n.message),n}},this.emit=async i=>{try{return await this.engine.emit(i)}catch(n){throw this.logger.error(n.message),n}},this.disconnect=async i=>{try{return await this.engine.disconnect(i)}catch(n){throw this.logger.error(n.message),n}},this.find=i=>{try{return this.engine.find(i)}catch(n){throw this.logger.error(n.message),n}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(i){throw this.logger.error(i.message),i}},this.authenticate=async i=>{try{return await this.engine.authenticate(i)}catch(n){throw this.logger.error(n.message),n}},this.formatAuthMessage=i=>{try{return this.engine.formatAuthMessage(i)}catch(n){throw this.logger.error(n.message),n}},this.approveSessionAuthenticate=async i=>{try{return await this.engine.approveSessionAuthenticate(i)}catch(n){throw this.logger.error(n.message),n}},this.rejectSessionAuthenticate=async i=>{try{return await this.engine.rejectSessionAuthenticate(i)}catch(n){throw this.logger.error(n.message),n}},this.name=(t==null?void 0:t.name)||Tl.name,this.metadata=(t==null?void 0:t.metadata)||W9(),this.signConfig=t==null?void 0:t.signConfig;const r=typeof(t==null?void 0:t.logger)<"u"&&typeof(t==null?void 0:t.logger)!="string"?t.logger:wh(Oc({level:(t==null?void 0:t.logger)||Tl.logger}));this.core=(t==null?void 0:t.core)||new NP(t),this.logger=vi(r,this.name),this.session=new YP(this.core,this.logger),this.proposal=new QP(this.core,this.logger),this.pendingRequest=new JP(this.core,this.logger),this.engine=new VP(this),this.auth=new tR(this.core,this.logger)}static async init(t){const r=new rd(t);return await r.initialize(),r}get context(){return mi(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.engine.init(),await this.auth.init(),this.core.verify.init({verifyUrl:this.metadata.verifyUrl}),this.logger.info("SignClient Initialization Success")}catch(t){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(t.message),t}}}var _0={exports:{}};(function(e,t){var r=typeof self<"u"?self:bn,i=function(){function o(){this.fetch=!1,this.DOMException=r.DOMException}return o.prototype=r,new o}();(function(o){(function(f){var d={searchParams:"URLSearchParams"in o,iterable:"Symbol"in o&&"iterator"in Symbol,blob:"FileReader"in o&&"Blob"in o&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in o,arrayBuffer:"ArrayBuffer"in o};function v(u){return u&&DataView.prototype.isPrototypeOf(u)}if(d.arrayBuffer)var g=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],w=ArrayBuffer.isView||function(u){return u&&g.indexOf(Object.prototype.toString.call(u))>-1};function S(u){if(typeof u!="string"&&(u=String(u)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(u))throw new TypeError("Invalid character in header field name");return u.toLowerCase()}function x(u){return typeof u!="string"&&(u=String(u)),u}function C(u){var p={next:function(){var b=u.shift();return{done:b===void 0,value:b}}};return d.iterable&&(p[Symbol.iterator]=function(){return p}),p}function N(u){this.map={},u instanceof N?u.forEach(function(p,b){this.append(b,p)},this):Array.isArray(u)?u.forEach(function(p){this.append(p[0],p[1])},this):u&&Object.getOwnPropertyNames(u).forEach(function(p){this.append(p,u[p])},this)}N.prototype.append=function(u,p){u=S(u),p=x(p);var b=this.map[u];this.map[u]=b?b+", "+p:p},N.prototype.delete=function(u){delete this.map[S(u)]},N.prototype.get=function(u){return u=S(u),this.has(u)?this.map[u]:null},N.prototype.has=function(u){return this.map.hasOwnProperty(S(u))},N.prototype.set=function(u,p){this.map[S(u)]=x(p)},N.prototype.forEach=function(u,p){for(var b in this.map)this.map.hasOwnProperty(b)&&u.call(p,this.map[b],b,this)},N.prototype.keys=function(){var u=[];return this.forEach(function(p,b){u.push(b)}),C(u)},N.prototype.values=function(){var u=[];return this.forEach(function(p){u.push(p)}),C(u)},N.prototype.entries=function(){var u=[];return this.forEach(function(p,b){u.push([b,p])}),C(u)},d.iterable&&(N.prototype[Symbol.iterator]=N.prototype.entries);function V(u){if(u.bodyUsed)return Promise.reject(new TypeError("Already read"));u.bodyUsed=!0}function z(u){return new Promise(function(p,b){u.onload=function(){p(u.result)},u.onerror=function(){b(u.error)}})}function X(u){var p=new FileReader,b=z(p);return p.readAsArrayBuffer(u),b}function G(u){var p=new FileReader,b=z(p);return p.readAsText(u),b}function Y(u){for(var p=new Uint8Array(u),b=new Array(p.length),M=0;M<p.length;M++)b[M]=String.fromCharCode(p[M]);return b.join("")}function $(u){if(u.slice)return u.slice(0);var p=new Uint8Array(u.byteLength);return p.set(new Uint8Array(u)),p.buffer}function j(){return this.bodyUsed=!1,this._initBody=function(u){this._bodyInit=u,u?typeof u=="string"?this._bodyText=u:d.blob&&Blob.prototype.isPrototypeOf(u)?this._bodyBlob=u:d.formData&&FormData.prototype.isPrototypeOf(u)?this._bodyFormData=u:d.searchParams&&URLSearchParams.prototype.isPrototypeOf(u)?this._bodyText=u.toString():d.arrayBuffer&&d.blob&&v(u)?(this._bodyArrayBuffer=$(u.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):d.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(u)||w(u))?this._bodyArrayBuffer=$(u):this._bodyText=u=Object.prototype.toString.call(u):this._bodyText="",this.headers.get("content-type")||(typeof u=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):d.searchParams&&URLSearchParams.prototype.isPrototypeOf(u)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},d.blob&&(this.blob=function(){var u=V(this);if(u)return u;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?V(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(X)}),this.text=function(){var u=V(this);if(u)return u;if(this._bodyBlob)return G(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(Y(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},d.formData&&(this.formData=function(){return this.text().then(ot)}),this.json=function(){return this.text().then(JSON.parse)},this}var k=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function _(u){var p=u.toUpperCase();return k.indexOf(p)>-1?p:u}function L(u,p){p=p||{};var b=p.body;if(u instanceof L){if(u.bodyUsed)throw new TypeError("Already read");this.url=u.url,this.credentials=u.credentials,p.headers||(this.headers=new N(u.headers)),this.method=u.method,this.mode=u.mode,this.signal=u.signal,!b&&u._bodyInit!=null&&(b=u._bodyInit,u.bodyUsed=!0)}else this.url=String(u);if(this.credentials=p.credentials||this.credentials||"same-origin",(p.headers||!this.headers)&&(this.headers=new N(p.headers)),this.method=_(p.method||this.method||"GET"),this.mode=p.mode||this.mode||null,this.signal=p.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&b)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(b)}L.prototype.clone=function(){return new L(this,{body:this._bodyInit})};function ot(u){var p=new FormData;return u.trim().split("&").forEach(function(b){if(b){var M=b.split("="),D=M.shift().replace(/\+/g," "),O=M.join("=").replace(/\+/g," ");p.append(decodeURIComponent(D),decodeURIComponent(O))}}),p}function ct(u){var p=new N,b=u.replace(/\r?\n[\t ]+/g," ");return b.split(/\r?\n/).forEach(function(M){var D=M.split(":"),O=D.shift().trim();if(O){var A=D.join(":").trim();p.append(O,A)}}),p}j.call(L.prototype);function ht(u,p){p||(p={}),this.type="default",this.status=p.status===void 0?200:p.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in p?p.statusText:"OK",this.headers=new N(p.headers),this.url=p.url||"",this._initBody(u)}j.call(ht.prototype),ht.prototype.clone=function(){return new ht(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new N(this.headers),url:this.url})},ht.error=function(){var u=new ht(null,{status:0,statusText:""});return u.type="error",u};var _t=[301,302,303,307,308];ht.redirect=function(u,p){if(_t.indexOf(p)===-1)throw new RangeError("Invalid status code");return new ht(null,{status:p,headers:{location:u}})},f.DOMException=o.DOMException;try{new f.DOMException}catch{f.DOMException=function(p,b){this.message=p,this.name=b;var M=Error(p);this.stack=M.stack},f.DOMException.prototype=Object.create(Error.prototype),f.DOMException.prototype.constructor=f.DOMException}function h(u,p){return new Promise(function(b,M){var D=new L(u,p);if(D.signal&&D.signal.aborted)return M(new f.DOMException("Aborted","AbortError"));var O=new XMLHttpRequest;function A(){O.abort()}O.onload=function(){var c={status:O.status,statusText:O.statusText,headers:ct(O.getAllResponseHeaders()||"")};c.url="responseURL"in O?O.responseURL:c.headers.get("X-Request-URL");var I="response"in O?O.response:O.responseText;b(new ht(I,c))},O.onerror=function(){M(new TypeError("Network request failed"))},O.ontimeout=function(){M(new TypeError("Network request failed"))},O.onabort=function(){M(new f.DOMException("Aborted","AbortError"))},O.open(D.method,D.url,!0),D.credentials==="include"?O.withCredentials=!0:D.credentials==="omit"&&(O.withCredentials=!1),"responseType"in O&&d.blob&&(O.responseType="blob"),D.headers.forEach(function(c,I){O.setRequestHeader(I,c)}),D.signal&&(D.signal.addEventListener("abort",A),O.onreadystatechange=function(){O.readyState===4&&D.signal.removeEventListener("abort",A)}),O.send(typeof D._bodyInit>"u"?null:D._bodyInit)})}return h.polyfill=!0,o.fetch||(o.fetch=h,o.Headers=N,o.Request=L,o.Response=ht),f.Headers=N,f.Request=L,f.Response=ht,f.fetch=h,Object.defineProperty(f,"__esModule",{value:!0}),f})({})})(i),i.fetch.ponyfill=!0,delete i.fetch.polyfill;var n=i;t=n.fetch,t.default=n.fetch,t.fetch=n.fetch,t.Headers=n.Headers,t.Request=n.Request,t.Response=n.Response,e.exports=t})(_0,_0.exports);var eR=_0.exports;const _m=bc(eR),rR=e=>JSON.stringify(e,(t,r)=>typeof r=="bigint"?r.toString()+"n":r),iR=e=>{const t=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,r=e.replace(t,'$1"$2n"$3');return JSON.parse(r,(i,n)=>typeof n=="string"&&n.match(/^\d+n$/)?BigInt(n.substring(0,n.length-1)):n)};function nR(e){if(typeof e!="string")throw new Error(`Cannot safe json parse value of type ${typeof e}`);try{return iR(e)}catch{return e}}function Em(e){return typeof e=="string"?e:rR(e)||""}var sR=Object.defineProperty,oR=Object.defineProperties,aR=Object.getOwnPropertyDescriptors,Sm=Object.getOwnPropertySymbols,hR=Object.prototype.hasOwnProperty,uR=Object.prototype.propertyIsEnumerable,Im=(e,t,r)=>t in e?sR(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Mm=(e,t)=>{for(var r in t||(t={}))hR.call(t,r)&&Im(e,r,t[r]);if(Sm)for(var r of Sm(t))uR.call(t,r)&&Im(e,r,t[r]);return e},Dm=(e,t)=>oR(e,aR(t));const cR={Accept:"application/json","Content-Type":"application/json"},fR="POST",xm={headers:cR,method:fR},Cm=10;class zs{constructor(t,r=!1){if(this.url=t,this.disableProviderPing=r,this.events=new Wi.EventEmitter,this.isAvailable=!1,this.registering=!1,!Jg(t))throw new Error(`Provided URL is not compatible with HTTP connection: ${t}`);this.url=t,this.disableProviderPing=r}get connected(){return this.isAvailable}get connecting(){return this.registering}on(t,r){this.events.on(t,r)}once(t,r){this.events.once(t,r)}off(t,r){this.events.off(t,r)}removeListener(t,r){this.events.removeListener(t,r)}async open(t=this.url){await this.register(t)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(t){this.isAvailable||await this.register();try{const r=Em(t),i=await(await _m(this.url,Dm(Mm({},xm),{body:r}))).json();this.onPayload({data:i})}catch(r){this.onError(t.id,r)}}async register(t=this.url){if(!Jg(t))throw new Error(`Provided URL is not compatible with HTTP connection: ${t}`);if(this.registering){const r=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=r||this.events.listenerCount("open")>=r)&&this.events.setMaxListeners(r+1),new Promise((i,n)=>{this.events.once("register_error",o=>{this.resetMaxListeners(),n(o)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return n(new Error("HTTP connection is missing or invalid"));i()})})}this.url=t,this.registering=!0;try{if(!this.disableProviderPing){const r=Em({id:1,jsonrpc:"2.0",method:"test",params:[]});await _m(t,Dm(Mm({},xm),{body:r}))}this.onOpen()}catch(r){const i=this.parseError(r);throw this.events.emit("register_error",i),this.onClose(),i}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(t){if(typeof t.data>"u")return;const r=typeof t.data=="string"?nR(t.data):t.data;this.events.emit("payload",r)}onError(t,r){const i=this.parseError(r),n=i.message||i.toString(),o=Rc(t,n);this.events.emit("payload",o)}parseError(t,r=this.url){return Hy(t,r,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>Cm&&this.events.setMaxListeners(Cm)}}const Om="error",lR="wss://relay.walletconnect.com",dR="wc",pR="universal_provider",Nm=`${dR}@2:${pR}:`,gR="https://rpc.walletconnect.com/v1/",vs={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};var Va=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof Re<"u"?Re:typeof self<"u"?self:{},E0={exports:{}};/**
* @license
* Lodash <https://lodash.com/>
* Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
* Released under MIT license <https://lodash.com/license>
* Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
* Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
*/(function(e,t){(function(){var r,i="4.17.21",n=200,o="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",f="Expected a function",d="Invalid `variable` option passed into `_.template`",v="__lodash_hash_undefined__",g=500,w="__lodash_placeholder__",S=1,x=2,C=4,N=1,V=2,z=1,X=2,G=4,Y=8,$=16,j=32,k=64,_=128,L=256,ot=512,ct=30,ht="...",_t=800,h=16,u=1,p=2,b=3,M=1/0,D=9007199254740991,O=17976931348623157e292,A=NaN,c=4294967295,I=c-1,Z=c>>>1,nt=[["ary",_],["bind",z],["bindKey",X],["curry",Y],["curryRight",$],["flip",ot],["partial",j],["partialRight",k],["rearg",L]],m="[object Arguments]",H="[object Array]",R="[object AsyncFunction]",T="[object Boolean]",q="[object Date]",y="[object DOMException]",B="[object Error]",W="[object Function]",st="[object GeneratorFunction]",rt="[object Map]",Et="[object Number]",It="[object Null]",bt="[object Object]",me="[object Promise]",Pt="[object Proxy]",At="[object RegExp]",Jt="[object Set]",vt="[object String]",yt="[object Symbol]",re="[object Undefined]",gt="[object WeakMap]",wt="[object WeakSet]",Qt="[object ArrayBuffer]",mt="[object DataView]",St="[object Float32Array]",Wt="[object Float64Array]",Mt="[object Int8Array]",Dt="[object Int16Array]",oe="[object Int32Array]",Ct="[object Uint8Array]",xt="[object Uint8ClampedArray]",Te="[object Uint16Array]",Vt="[object Uint32Array]",Xt=/\b__p \+= '';/g,Be=/\b(__p \+=) '' \+/g,Zt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,te=/&(?:amp|lt|gt|quot|#39);/g,Xe=/[&<>"']/g,Ut=RegExp(te.source),Rt=RegExp(Xe.source),be=/<%-([\s\S]+?)%>/g,Lt=/<%([\s\S]+?)%>/g,Tt=/<%=([\s\S]+?)%>/g,ve=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,$t=/^\w*$/,kt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ae=/[\\^$.*+?()[\]{}|]/g,zt=RegExp(Ae.source),Ft=/^\s+/,_e=/\s/,qt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Nt=/\{\n\/\* \[wrapped with (.+)\] \*/,Ie=/,? & /,jt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ie=/[()=,{}\[\]\/\s]/,pr=/\\(\\)?/g,ne=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Yt=/\w*$/,rr=/^[-+]0x[0-9a-f]+$/i,ir=/^0b[01]+$/i,nr=/^\[object .+?Constructor\]$/,sr=/^0o[0-7]+$/i,or=/^(?:0|[1-9]\d*)$/,ke=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Wr=/($^)/,Xi=/['\n\r\u2028\u2029\\]/g,Xr="\\ud800-\\udfff",Zi="\\u0300-\\u036f",tn="\\ufe20-\\ufe2f",Zr="\\u20d0-\\u20ff",Oi=Zi+tn+Zr,Ni="\\u2700-\\u27bf",gr="a-z\\xdf-\\xf6\\xf8-\\xff",en="\\xac\\xb1\\xd7\\xf7",rn="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",nn="\\u2000-\\u206f",sn=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ih="A-Z\\xc0-\\xd6\\xd8-\\xde",Mh="\\ufe0e\\ufe0f",js=en+rn+nn+sn,ya="['’]",Hs="["+Xr+"]",wa="["+js+"]",Ks="["+Oi+"]",Dh="\\d+",Lc="["+Ni+"]",xh="["+gr+"]",Ch="[^"+Xr+js+Dh+Ni+gr+Ih+"]",_o="\\ud83c[\\udffb-\\udfff]",Fc="(?:"+Ks+"|"+_o+")",Oh="[^"+Xr+"]",Eo="(?:\\ud83c[\\udde6-\\uddff]){2}",ys="[\\ud800-\\udbff][\\udc00-\\udfff]",yi="["+Ih+"]",Nh="\\u200d",Ph="(?:"+xh+"|"+Ch+")",En="(?:"+yi+"|"+Ch+")",Rh="(?:"+ya+"(?:d|ll|m|re|s|t|ve))?",Th="(?:"+ya+"(?:D|LL|M|RE|S|T|VE))?",Bh=Fc+"?",Uh="["+Mh+"]?",qc="(?:"+Nh+"(?:"+[Oh,Eo,ys].join("|")+")"+Uh+Bh+")*",Yn="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Lh="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Fh=Uh+Bh+qc,So="(?:"+[Lc,Eo,ys].join("|")+")"+Fh,$c="(?:"+[Oh+Ks+"?",Ks,Eo,ys,Hs].join("|")+")",ba=RegExp(ya,"g"),kc=RegExp(Ks,"g"),Io=RegExp(_o+"(?="+_o+")|"+$c+Fh,"g"),qh=RegExp([yi+"?"+xh+"+"+Rh+"(?="+[wa,yi,"$"].join("|")+")",En+"+"+Th+"(?="+[wa,yi+Ph,"$"].join("|")+")",yi+"?"+Ph+"+"+Rh,yi+"+"+Th,Lh,Yn,Dh,So].join("|"),"g"),$h=RegExp("["+Nh+Xr+Oi+Mh+"]"),Gs=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,kh=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],zc=-1,ze={};ze[St]=ze[Wt]=ze[Mt]=ze[Dt]=ze[oe]=ze[Ct]=ze[xt]=ze[Te]=ze[Vt]=!0,ze[m]=ze[H]=ze[Qt]=ze[T]=ze[mt]=ze[q]=ze[B]=ze[W]=ze[rt]=ze[Et]=ze[bt]=ze[At]=ze[Jt]=ze[vt]=ze[gt]=!1;var qe={};qe[m]=qe[H]=qe[Qt]=qe[mt]=qe[T]=qe[q]=qe[St]=qe[Wt]=qe[Mt]=qe[Dt]=qe[oe]=qe[rt]=qe[Et]=qe[bt]=qe[At]=qe[Jt]=qe[vt]=qe[yt]=qe[Ct]=qe[xt]=qe[Te]=qe[Vt]=!0,qe[B]=qe[W]=qe[gt]=!1;var K={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},tt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},dt={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Kt={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},je=parseFloat,ce=parseInt,Qe=typeof Va=="object"&&Va&&Va.Object===Object&&Va,lr=typeof self=="object"&&self&&self.Object===Object&&self,Ne=Qe||lr||Function("return this")(),He=t&&!t.nodeType&&t,ar=He&&!0&&e&&!e.nodeType&&e,ti=ar&&ar.exports===He,dr=ti&&Qe.process,Ye=function(){try{var et=ar&&ar.require&&ar.require("util").types;return et||dr&&dr.binding&&dr.binding("util")}catch{}}(),qr=Ye&&Ye.isArrayBuffer,on=Ye&&Ye.isDate,Pi=Ye&&Ye.isMap,Sn=Ye&&Ye.isRegExp,Aa=Ye&&Ye.isSet,Vs=Ye&&Ye.isTypedArray;function Ar(et,ut,at){switch(at.length){case 0:return et.call(ut);case 1:return et.call(ut,at[0]);case 2:return et.call(ut,at[0],at[1]);case 3:return et.call(ut,at[0],at[1],at[2])}return et.apply(ut,at)}function g2(et,ut,at,Gt){for(var ue=-1,Ue=et==null?0:et.length;++ue<Ue;){var mr=et[ue];ut(Gt,mr,at(mr),et)}return Gt}function Ri(et,ut){for(var at=-1,Gt=et==null?0:et.length;++at<Gt&&ut(et[at],at,et)!==!1;);return et}function m2(et,ut){for(var at=et==null?0:et.length;at--&&ut(et[at],at,et)!==!1;);return et}function sd(et,ut){for(var at=-1,Gt=et==null?0:et.length;++at<Gt;)if(!ut(et[at],at,et))return!1;return!0}function ws(et,ut){for(var at=-1,Gt=et==null?0:et.length,ue=0,Ue=[];++at<Gt;){var mr=et[at];ut(mr,at,et)&&(Ue[ue++]=mr)}return Ue}function zh(et,ut){var at=et==null?0:et.length;return!!at&&Mo(et,ut,0)>-1}function jc(et,ut,at){for(var Gt=-1,ue=et==null?0:et.length;++Gt<ue;)if(at(ut,et[Gt]))return!0;return!1}function Je(et,ut){for(var at=-1,Gt=et==null?0:et.length,ue=Array(Gt);++at<Gt;)ue[at]=ut(et[at],at,et);return ue}function bs(et,ut){for(var at=-1,Gt=ut.length,ue=et.length;++at<Gt;)et[ue+at]=ut[at];return et}function Hc(et,ut,at,Gt){var ue=-1,Ue=et==null?0:et.length;for(Gt&&Ue&&(at=et[++ue]);++ue<Ue;)at=ut(at,et[ue],ue,et);return at}function v2(et,ut,at,Gt){var ue=et==null?0:et.length;for(Gt&&ue&&(at=et[--ue]);ue--;)at=ut(at,et[ue],ue,et);return at}function Kc(et,ut){for(var at=-1,Gt=et==null?0:et.length;++at<Gt;)if(ut(et[at],at,et))return!0;return!1}var y2=Gc("length");function w2(et){return et.split("")}function b2(et){return et.match(jt)||[]}function od(et,ut,at){var Gt;return at(et,function(ue,Ue,mr){if(ut(ue,Ue,mr))return Gt=Ue,!1}),Gt}function jh(et,ut,at,Gt){for(var ue=et.length,Ue=at+(Gt?1:-1);Gt?Ue--:++Ue<ue;)if(ut(et[Ue],Ue,et))return Ue;return-1}function Mo(et,ut,at){return ut===ut?P2(et,ut,at):jh(et,ad,at)}function A2(et,ut,at,Gt){for(var ue=at-1,Ue=et.length;++ue<Ue;)if(Gt(et[ue],ut))return ue;return-1}function ad(et){return et!==et}function hd(et,ut){var at=et==null?0:et.length;return at?Qc(et,ut)/at:A}function Gc(et){return function(ut){return ut==null?r:ut[et]}}function Vc(et){return function(ut){return et==null?r:et[ut]}}function ud(et,ut,at,Gt,ue){return ue(et,function(Ue,mr,Ke){at=Gt?(Gt=!1,Ue):ut(at,Ue,mr,Ke)}),at}function _2(et,ut){var at=et.length;for(et.sort(ut);at--;)et[at]=et[at].value;return et}function Qc(et,ut){for(var at,Gt=-1,ue=et.length;++Gt<ue;){var Ue=ut(et[Gt]);Ue!==r&&(at=at===r?Ue:at+Ue)}return at}function Yc(et,ut){for(var at=-1,Gt=Array(et);++at<et;)Gt[at]=ut(at);return Gt}function E2(et,ut){return Je(ut,function(at){return[at,et[at]]})}function cd(et){return et&&et.slice(0,pd(et)+1).replace(Ft,"")}function wi(et){return function(ut){return et(ut)}}function Jc(et,ut){return Je(ut,function(at){return et[at]})}function _a(et,ut){return et.has(ut)}function fd(et,ut){for(var at=-1,Gt=et.length;++at<Gt&&Mo(ut,et[at],0)>-1;);return at}function ld(et,ut){for(var at=et.length;at--&&Mo(ut,et[at],0)>-1;);return at}function S2(et,ut){for(var at=et.length,Gt=0;at--;)et[at]===ut&&++Gt;return Gt}var I2=Vc(K),M2=Vc(tt);function D2(et){return"\\"+Kt[et]}function x2(et,ut){return et==null?r:et[ut]}function Do(et){return $h.test(et)}function C2(et){return Gs.test(et)}function O2(et){for(var ut,at=[];!(ut=et.next()).done;)at.push(ut.value);return at}function Wc(et){var ut=-1,at=Array(et.size);return et.forEach(function(Gt,ue){at[++ut]=[ue,Gt]}),at}function dd(et,ut){return function(at){return et(ut(at))}}function As(et,ut){for(var at=-1,Gt=et.length,ue=0,Ue=[];++at<Gt;){var mr=et[at];(mr===ut||mr===w)&&(et[at]=w,Ue[ue++]=at)}return Ue}function Hh(et){var ut=-1,at=Array(et.size);return et.forEach(function(Gt){at[++ut]=Gt}),at}function N2(et){var ut=-1,at=Array(et.size);return et.forEach(function(Gt){at[++ut]=[Gt,Gt]}),at}function P2(et,ut,at){for(var Gt=at-1,ue=et.length;++Gt<ue;)if(et[Gt]===ut)return Gt;return-1}function R2(et,ut,at){for(var Gt=at+1;Gt--;)if(et[Gt]===ut)return Gt;return Gt}function xo(et){return Do(et)?B2(et):y2(et)}function an(et){return Do(et)?U2(et):w2(et)}function pd(et){for(var ut=et.length;ut--&&_e.test(et.charAt(ut)););return ut}var T2=Vc(dt);function B2(et){for(var ut=Io.lastIndex=0;Io.test(et);)++ut;return ut}function U2(et){return et.match(Io)||[]}function L2(et){return et.match(qh)||[]}var F2=function et(ut){ut=ut==null?Ne:Co.defaults(Ne.Object(),ut,Co.pick(Ne,kh));var at=ut.Array,Gt=ut.Date,ue=ut.Error,Ue=ut.Function,mr=ut.Math,Ke=ut.Object,Xc=ut.RegExp,q2=ut.String,Ti=ut.TypeError,Kh=at.prototype,$2=Ue.prototype,Oo=Ke.prototype,Gh=ut["__core-js_shared__"],Vh=$2.toString,Fe=Oo.hasOwnProperty,k2=0,gd=function(){var s=/[^.]+$/.exec(Gh&&Gh.keys&&Gh.keys.IE_PROTO||"");return s?"Symbol(src)_1."+s:""}(),Qh=Oo.toString,z2=Vh.call(Ke),j2=Ne._,H2=Xc("^"+Vh.call(Fe).replace(Ae,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Yh=ti?ut.Buffer:r,_s=ut.Symbol,Jh=ut.Uint8Array,md=Yh?Yh.allocUnsafe:r,Wh=dd(Ke.getPrototypeOf,Ke),vd=Ke.create,yd=Oo.propertyIsEnumerable,Xh=Kh.splice,wd=_s?_s.isConcatSpreadable:r,Ea=_s?_s.iterator:r,Qs=_s?_s.toStringTag:r,Zh=function(){try{var s=Zs(Ke,"defineProperty");return s({},"",{}),s}catch{}}(),K2=ut.clearTimeout!==Ne.clearTimeout&&ut.clearTimeout,G2=Gt&&Gt.now!==Ne.Date.now&&Gt.now,V2=ut.setTimeout!==Ne.setTimeout&&ut.setTimeout,tu=mr.ceil,eu=mr.floor,Zc=Ke.getOwnPropertySymbols,Q2=Yh?Yh.isBuffer:r,bd=ut.isFinite,Y2=Kh.join,J2=dd(Ke.keys,Ke),vr=mr.max,Rr=mr.min,W2=Gt.now,X2=ut.parseInt,Ad=mr.random,Z2=Kh.reverse,tf=Zs(ut,"DataView"),Sa=Zs(ut,"Map"),ef=Zs(ut,"Promise"),No=Zs(ut,"Set"),Ia=Zs(ut,"WeakMap"),Ma=Zs(Ke,"create"),ru=Ia&&new Ia,Po={},tw=to(tf),ew=to(Sa),rw=to(ef),iw=to(No),nw=to(Ia),iu=_s?_s.prototype:r,Da=iu?iu.valueOf:r,_d=iu?iu.toString:r;function U(s){if(tr(s)&&!fe(s)&&!(s instanceof Me)){if(s instanceof Bi)return s;if(Fe.call(s,"__wrapped__"))return Ep(s)}return new Bi(s)}var Ro=function(){function s(){}return function(a){if(!Ze(a))return{};if(vd)return vd(a);s.prototype=a;var l=new s;return s.prototype=r,l}}();function nu(){}function Bi(s,a){this.__wrapped__=s,this.__actions__=[],this.__chain__=!!a,this.__index__=0,this.__values__=r}U.templateSettings={escape:be,evaluate:Lt,interpolate:Tt,variable:"",imports:{_:U}},U.prototype=nu.prototype,U.prototype.constructor=U,Bi.prototype=Ro(nu.prototype),Bi.prototype.constructor=Bi;function Me(s){this.__wrapped__=s,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=c,this.__views__=[]}function sw(){var s=new Me(this.__wrapped__);return s.__actions__=ei(this.__actions__),s.__dir__=this.__dir__,s.__filtered__=this.__filtered__,s.__iteratees__=ei(this.__iteratees__),s.__takeCount__=this.__takeCount__,s.__views__=ei(this.__views__),s}function ow(){if(this.__filtered__){var s=new Me(this);s.__dir__=-1,s.__filtered__=!0}else s=this.clone(),s.__dir__*=-1;return s}function aw(){var s=this.__wrapped__.value(),a=this.__dir__,l=fe(s),E=a<0,P=l?s.length:0,F=w3(0,P,this.__views__),Q=F.start,J=F.end,it=J-Q,ft=E?J:Q-1,lt=this.__iteratees__,pt=lt.length,Bt=0,ee=Rr(it,this.__takeCount__);if(!l||!E&&P==it&&ee==it)return Gd(s,this.__actions__);var ae=[];t:for(;it--&&Bt<ee;){ft+=a;for(var ye=-1,he=s[ft];++ye<pt;){var Ee=lt[ye],Pe=Ee.iteratee,_i=Ee.type,zr=Pe(he);if(_i==p)he=zr;else if(!zr){if(_i==u)continue t;break t}}ae[Bt++]=he}return ae}Me.prototype=Ro(nu.prototype),Me.prototype.constructor=Me;function Ys(s){var a=-1,l=s==null?0:s.length;for(this.clear();++a<l;){var E=s[a];this.set(E[0],E[1])}}function hw(){this.__data__=Ma?Ma(null):{},this.size=0}function uw(s){var a=this.has(s)&&delete this.__data__[s];return this.size-=a?1:0,a}function cw(s){var a=this.__data__;if(Ma){var l=a[s];return l===v?r:l}return Fe.call(a,s)?a[s]:r}function fw(s){var a=this.__data__;return Ma?a[s]!==r:Fe.call(a,s)}function lw(s,a){var l=this.__data__;return this.size+=this.has(s)?0:1,l[s]=Ma&&a===r?v:a,this}Ys.prototype.clear=hw,Ys.prototype.delete=uw,Ys.prototype.get=cw,Ys.prototype.has=fw,Ys.prototype.set=lw;function Jn(s){var a=-1,l=s==null?0:s.length;for(this.clear();++a<l;){var E=s[a];this.set(E[0],E[1])}}function dw(){this.__data__=[],this.size=0}function pw(s){var a=this.__data__,l=su(a,s);if(l<0)return!1;var E=a.length-1;return l==E?a.pop():Xh.call(a,l,1),--this.size,!0}function gw(s){var a=this.__data__,l=su(a,s);return l<0?r:a[l][1]}function mw(s){return su(this.__data__,s)>-1}function vw(s,a){var l=this.__data__,E=su(l,s);return E<0?(++this.size,l.push([s,a])):l[E][1]=a,this}Jn.prototype.clear=dw,Jn.prototype.delete=pw,Jn.prototype.get=gw,Jn.prototype.has=mw,Jn.prototype.set=vw;function Wn(s){var a=-1,l=s==null?0:s.length;for(this.clear();++a<l;){var E=s[a];this.set(E[0],E[1])}}function yw(){this.size=0,this.__data__={hash:new Ys,map:new(Sa||Jn),string:new Ys}}function ww(s){var a=vu(this,s).delete(s);return this.size-=a?1:0,a}function bw(s){return vu(this,s).get(s)}function Aw(s){return vu(this,s).has(s)}function _w(s,a){var l=vu(this,s),E=l.size;return l.set(s,a),this.size+=l.size==E?0:1,this}Wn.prototype.clear=yw,Wn.prototype.delete=ww,Wn.prototype.get=bw,Wn.prototype.has=Aw,Wn.prototype.set=_w;function Js(s){var a=-1,l=s==null?0:s.length;for(this.__data__=new Wn;++a<l;)this.add(s[a])}function Ew(s){return this.__data__.set(s,v),this}function Sw(s){return this.__data__.has(s)}Js.prototype.add=Js.prototype.push=Ew,Js.prototype.has=Sw;function hn(s){var a=this.__data__=new Jn(s);this.size=a.size}function Iw(){this.__data__=new Jn,this.size=0}function Mw(s){var a=this.__data__,l=a.delete(s);return this.size=a.size,l}function Dw(s){return this.__data__.get(s)}function xw(s){return this.__data__.has(s)}function Cw(s,a){var l=this.__data__;if(l instanceof Jn){var E=l.__data__;if(!Sa||E.length<n-1)return E.push([s,a]),this.size=++l.size,this;l=this.__data__=new Wn(E)}return l.set(s,a),this.size=l.size,this}hn.prototype.clear=Iw,hn.prototype.delete=Mw,hn.prototype.get=Dw,hn.prototype.has=xw,hn.prototype.set=Cw;function Ed(s,a){var l=fe(s),E=!l&&eo(s),P=!l&&!E&&Ds(s),F=!l&&!E&&!P&&Lo(s),Q=l||E||P||F,J=Q?Yc(s.length,q2):[],it=J.length;for(var ft in s)(a||Fe.call(s,ft))&&!(Q&&(ft=="length"||P&&(ft=="offset"||ft=="parent")||F&&(ft=="buffer"||ft=="byteLength"||ft=="byteOffset")||es(ft,it)))&&J.push(ft);return J}function Sd(s){var a=s.length;return a?s[df(0,a-1)]:r}function Ow(s,a){return yu(ei(s),Ws(a,0,s.length))}function Nw(s){return yu(ei(s))}function rf(s,a,l){(l!==r&&!un(s[a],l)||l===r&&!(a in s))&&Xn(s,a,l)}function xa(s,a,l){var E=s[a];(!(Fe.call(s,a)&&un(E,l))||l===r&&!(a in s))&&Xn(s,a,l)}function su(s,a){for(var l=s.length;l--;)if(un(s[l][0],a))return l;return-1}function Pw(s,a,l,E){return Es(s,function(P,F,Q){a(E,P,l(P),Q)}),E}function Id(s,a){return s&&Mn(a,_r(a),s)}function Rw(s,a){return s&&Mn(a,ii(a),s)}function Xn(s,a,l){a=="__proto__"&&Zh?Zh(s,a,{configurable:!0,enumerable:!0,value:l,writable:!0}):s[a]=l}function nf(s,a){for(var l=-1,E=a.length,P=at(E),F=s==null;++l<E;)P[l]=F?r:Ff(s,a[l]);return P}function Ws(s,a,l){return s===s&&(l!==r&&(s=s<=l?s:l),a!==r&&(s=s>=a?s:a)),s}function Ui(s,a,l,E,P,F){var Q,J=a&S,it=a&x,ft=a&C;if(l&&(Q=P?l(s,E,P,F):l(s)),Q!==r)return Q;if(!Ze(s))return s;var lt=fe(s);if(lt){if(Q=A3(s),!J)return ei(s,Q)}else{var pt=Tr(s),Bt=pt==W||pt==st;if(Ds(s))return Yd(s,J);if(pt==bt||pt==m||Bt&&!P){if(Q=it||Bt?{}:pp(s),!J)return it?c3(s,Rw(Q,s)):u3(s,Id(Q,s))}else{if(!qe[pt])return P?s:{};Q=_3(s,pt,J)}}F||(F=new hn);var ee=F.get(s);if(ee)return ee;F.set(s,Q),jp(s)?s.forEach(function(he){Q.add(Ui(he,a,l,he,s,F))}):kp(s)&&s.forEach(function(he,Ee){Q.set(Ee,Ui(he,a,l,Ee,s,F))});var ae=ft?it?Sf:Ef:it?ii:_r,ye=lt?r:ae(s);return Ri(ye||s,function(he,Ee){ye&&(Ee=he,he=s[Ee]),xa(Q,Ee,Ui(he,a,l,Ee,s,F))}),Q}function Tw(s){var a=_r(s);return function(l){return Md(l,s,a)}}function Md(s,a,l){var E=l.length;if(s==null)return!E;for(s=Ke(s);E--;){var P=l[E],F=a[P],Q=s[P];if(Q===r&&!(P in s)||!F(Q))return!1}return!0}function Dd(s,a,l){if(typeof s!="function")throw new Ti(f);return Ba(function(){s.apply(r,l)},a)}function Ca(s,a,l,E){var P=-1,F=zh,Q=!0,J=s.length,it=[],ft=a.length;if(!J)return it;l&&(a=Je(a,wi(l))),E?(F=jc,Q=!1):a.length>=n&&(F=_a,Q=!1,a=new Js(a));t:for(;++P<J;){var lt=s[P],pt=l==null?lt:l(lt);if(lt=E||lt!==0?lt:0,Q&&pt===pt){for(var Bt=ft;Bt--;)if(a[Bt]===pt)continue t;it.push(lt)}else F(a,pt,E)||it.push(lt)}return it}var Es=tp(In),xd=tp(of,!0);function Bw(s,a){var l=!0;return Es(s,function(E,P,F){return l=!!a(E,P,F),l}),l}function ou(s,a,l){for(var E=-1,P=s.length;++E<P;){var F=s[E],Q=a(F);if(Q!=null&&(J===r?Q===Q&&!Ai(Q):l(Q,J)))var J=Q,it=F}return it}function Uw(s,a,l,E){var P=s.length;for(l=ge(l),l<0&&(l=-l>P?0:P+l),E=E===r||E>P?P:ge(E),E<0&&(E+=P),E=l>E?0:Kp(E);l<E;)s[l++]=a;return s}function Cd(s,a){var l=[];return Es(s,function(E,P,F){a(E,P,F)&&l.push(E)}),l}function Mr(s,a,l,E,P){var F=-1,Q=s.length;for(l||(l=S3),P||(P=[]);++F<Q;){var J=s[F];a>0&&l(J)?a>1?Mr(J,a-1,l,E,P):bs(P,J):E||(P[P.length]=J)}return P}var sf=ep(),Od=ep(!0);function In(s,a){return s&&sf(s,a,_r)}function of(s,a){return s&&Od(s,a,_r)}function au(s,a){return ws(a,function(l){return rs(s[l])})}function Xs(s,a){a=Is(a,s);for(var l=0,E=a.length;s!=null&&l<E;)s=s[Dn(a[l++])];return l&&l==E?s:r}function Nd(s,a,l){var E=a(s);return fe(s)?E:bs(E,l(s))}function $r(s){return s==null?s===r?re:It:Qs&&Qs in Ke(s)?y3(s):N3(s)}function af(s,a){return s>a}function Lw(s,a){return s!=null&&Fe.call(s,a)}function Fw(s,a){return s!=null&&a in Ke(s)}function qw(s,a,l){return s>=Rr(a,l)&&s<vr(a,l)}function hf(s,a,l){for(var E=l?jc:zh,P=s[0].length,F=s.length,Q=F,J=at(F),it=1/0,ft=[];Q--;){var lt=s[Q];Q&&a&&(lt=Je(lt,wi(a))),it=Rr(lt.length,it),J[Q]=!l&&(a||P>=120&&lt.length>=120)?new Js(Q&&lt):r}lt=s[0];var pt=-1,Bt=J[0];t:for(;++pt<P&&ft.length<it;){var ee=lt[pt],ae=a?a(ee):ee;if(ee=l||ee!==0?ee:0,!(Bt?_a(Bt,ae):E(ft,ae,l))){for(Q=F;--Q;){var ye=J[Q];if(!(ye?_a(ye,ae):E(s[Q],ae,l)))continue t}Bt&&Bt.push(ae),ft.push(ee)}}return ft}function $w(s,a,l,E){return In(s,function(P,F,Q){a(E,l(P),F,Q)}),E}function Oa(s,a,l){a=Is(a,s),s=yp(s,a);var E=s==null?s:s[Dn(Fi(a))];return E==null?r:Ar(E,s,l)}function Pd(s){return tr(s)&&$r(s)==m}function kw(s){return tr(s)&&$r(s)==Qt}function zw(s){return tr(s)&&$r(s)==q}function Na(s,a,l,E,P){return s===a?!0:s==null||a==null||!tr(s)&&!tr(a)?s!==s&&a!==a:jw(s,a,l,E,Na,P)}function jw(s,a,l,E,P,F){var Q=fe(s),J=fe(a),it=Q?H:Tr(s),ft=J?H:Tr(a);it=it==m?bt:it,ft=ft==m?bt:ft;var lt=it==bt,pt=ft==bt,Bt=it==ft;if(Bt&&Ds(s)){if(!Ds(a))return!1;Q=!0,lt=!1}if(Bt&&!lt)return F||(F=new hn),Q||Lo(s)?fp(s,a,l,E,P,F):m3(s,a,it,l,E,P,F);if(!(l&N)){var ee=lt&&Fe.call(s,"__wrapped__"),ae=pt&&Fe.call(a,"__wrapped__");if(ee||ae){var ye=ee?s.value():s,he=ae?a.value():a;return F||(F=new hn),P(ye,he,l,E,F)}}return Bt?(F||(F=new hn),v3(s,a,l,E,P,F)):!1}function Hw(s){return tr(s)&&Tr(s)==rt}function uf(s,a,l,E){var P=l.length,F=P,Q=!E;if(s==null)return!F;for(s=Ke(s);P--;){var J=l[P];if(Q&&J[2]?J[1]!==s[J[0]]:!(J[0]in s))return!1}for(;++P<F;){J=l[P];var it=J[0],ft=s[it],lt=J[1];if(Q&&J[2]){if(ft===r&&!(it in s))return!1}else{var pt=new hn;if(E)var Bt=E(ft,lt,it,s,a,pt);if(!(Bt===r?Na(lt,ft,N|V,E,pt):Bt))return!1}}return!0}function Rd(s){if(!Ze(s)||M3(s))return!1;var a=rs(s)?H2:nr;return a.test(to(s))}function Kw(s){return tr(s)&&$r(s)==At}function Gw(s){return tr(s)&&Tr(s)==Jt}function Vw(s){return tr(s)&&Su(s.length)&&!!ze[$r(s)]}function Td(s){return typeof s=="function"?s:s==null?ni:typeof s=="object"?fe(s)?Ld(s[0],s[1]):Ud(s):r1(s)}function cf(s){if(!Ta(s))return J2(s);var a=[];for(var l in Ke(s))Fe.call(s,l)&&l!="constructor"&&a.push(l);return a}function Qw(s){if(!Ze(s))return O3(s);var a=Ta(s),l=[];for(var E in s)E=="constructor"&&(a||!Fe.call(s,E))||l.push(E);return l}function ff(s,a){return s<a}function Bd(s,a){var l=-1,E=ri(s)?at(s.length):[];return Es(s,function(P,F,Q){E[++l]=a(P,F,Q)}),E}function Ud(s){var a=Mf(s);return a.length==1&&a[0][2]?mp(a[0][0],a[0][1]):function(l){return l===s||uf(l,s,a)}}function Ld(s,a){return xf(s)&&gp(a)?mp(Dn(s),a):function(l){var E=Ff(l,s);return E===r&&E===a?qf(l,s):Na(a,E,N|V)}}function hu(s,a,l,E,P){s!==a&&sf(a,function(F,Q){if(P||(P=new hn),Ze(F))Yw(s,a,Q,l,hu,E,P);else{var J=E?E(Of(s,Q),F,Q+"",s,a,P):r;J===r&&(J=F),rf(s,Q,J)}},ii)}function Yw(s,a,l,E,P,F,Q){var J=Of(s,l),it=Of(a,l),ft=Q.get(it);if(ft){rf(s,l,ft);return}var lt=F?F(J,it,l+"",s,a,Q):r,pt=lt===r;if(pt){var Bt=fe(it),ee=!Bt&&Ds(it),ae=!Bt&&!ee&&Lo(it);lt=it,Bt||ee||ae?fe(J)?lt=J:hr(J)?lt=ei(J):ee?(pt=!1,lt=Yd(it,!0)):ae?(pt=!1,lt=Jd(it,!0)):lt=[]:Ua(it)||eo(it)?(lt=J,eo(J)?lt=Gp(J):(!Ze(J)||rs(J))&&(lt=pp(it))):pt=!1}pt&&(Q.set(it,lt),P(lt,it,E,F,Q),Q.delete(it)),rf(s,l,lt)}function Fd(s,a){var l=s.length;if(l)return a+=a<0?l:0,es(a,l)?s[a]:r}function qd(s,a,l){a.length?a=Je(a,function(F){return fe(F)?function(Q){return Xs(Q,F.length===1?F[0]:F)}:F}):a=[ni];var E=-1;a=Je(a,wi(se()));var P=Bd(s,function(F,Q,J){var it=Je(a,function(ft){return ft(F)});return{criteria:it,index:++E,value:F}});return _2(P,function(F,Q){return h3(F,Q,l)})}function Jw(s,a){return $d(s,a,function(l,E){return qf(s,E)})}function $d(s,a,l){for(var E=-1,P=a.length,F={};++E<P;){var Q=a[E],J=Xs(s,Q);l(J,Q)&&Pa(F,Is(Q,s),J)}return F}function Ww(s){return function(a){return Xs(a,s)}}function lf(s,a,l,E){var P=E?A2:Mo,F=-1,Q=a.length,J=s;for(s===a&&(a=ei(a)),l&&(J=Je(s,wi(l)));++F<Q;)for(var it=0,ft=a[F],lt=l?l(ft):ft;(it=P(J,lt,it,E))>-1;)J!==s&&Xh.call(J,it,1),Xh.call(s,it,1);return s}function kd(s,a){for(var l=s?a.length:0,E=l-1;l--;){var P=a[l];if(l==E||P!==F){var F=P;es(P)?Xh.call(s,P,1):mf(s,P)}}return s}function df(s,a){return s+eu(Ad()*(a-s+1))}function Xw(s,a,l,E){for(var P=-1,F=vr(tu((a-s)/(l||1)),0),Q=at(F);F--;)Q[E?F:++P]=s,s+=l;return Q}function pf(s,a){var l="";if(!s||a<1||a>D)return l;do a%2&&(l+=s),a=eu(a/2),a&&(s+=s);while(a);return l}function we(s,a){return Nf(vp(s,a,ni),s+"")}function Zw(s){return Sd(Fo(s))}function t3(s,a){var l=Fo(s);return yu(l,Ws(a,0,l.length))}function Pa(s,a,l,E){if(!Ze(s))return s;a=Is(a,s);for(var P=-1,F=a.length,Q=F-1,J=s;J!=null&&++P<F;){var it=Dn(a[P]),ft=l;if(it==="__proto__"||it==="constructor"||it==="prototype")return s;if(P!=Q){var lt=J[it];ft=E?E(lt,it,J):r,ft===r&&(ft=Ze(lt)?lt:es(a[P+1])?[]:{})}xa(J,it,ft),J=J[it]}return s}var zd=ru?function(s,a){return ru.set(s,a),s}:ni,e3=Zh?function(s,a){return Zh(s,"toString",{configurable:!0,enumerable:!1,value:kf(a),writable:!0})}:ni;function r3(s){return yu(Fo(s))}function Li(s,a,l){var E=-1,P=s.length;a<0&&(a=-a>P?0:P+a),l=l>P?P:l,l<0&&(l+=P),P=a>l?0:l-a>>>0,a>>>=0;for(var F=at(P);++E<P;)F[E]=s[E+a];return F}function i3(s,a){var l;return Es(s,function(E,P,F){return l=a(E,P,F),!l}),!!l}function uu(s,a,l){var E=0,P=s==null?E:s.length;if(typeof a=="number"&&a===a&&P<=Z){for(;E<P;){var F=E+P>>>1,Q=s[F];Q!==null&&!Ai(Q)&&(l?Q<=a:Q<a)?E=F+1:P=F}return P}return gf(s,a,ni,l)}function gf(s,a,l,E){var P=0,F=s==null?0:s.length;if(F===0)return 0;a=l(a);for(var Q=a!==a,J=a===null,it=Ai(a),ft=a===r;P<F;){var lt=eu((P+F)/2),pt=l(s[lt]),Bt=pt!==r,ee=pt===null,ae=pt===pt,ye=Ai(pt);if(Q)var he=E||ae;else ft?he=ae&&(E||Bt):J?he=ae&&Bt&&(E||!ee):it?he=ae&&Bt&&!ee&&(E||!ye):ee||ye?he=!1:he=E?pt<=a:pt<a;he?P=lt+1:F=lt}return Rr(F,I)}function jd(s,a){for(var l=-1,E=s.length,P=0,F=[];++l<E;){var Q=s[l],J=a?a(Q):Q;if(!l||!un(J,it)){var it=J;F[P++]=Q===0?0:Q}}return F}function Hd(s){return typeof s=="number"?s:Ai(s)?A:+s}function bi(s){if(typeof s=="string")return s;if(fe(s))return Je(s,bi)+"";if(Ai(s))return _d?_d.call(s):"";var a=s+"";return a=="0"&&1/s==-M?"-0":a}function Ss(s,a,l){var E=-1,P=zh,F=s.length,Q=!0,J=[],it=J;if(l)Q=!1,P=jc;else if(F>=n){var ft=a?null:p3(s);if(ft)return Hh(ft);Q=!1,P=_a,it=new Js}else it=a?[]:J;t:for(;++E<F;){var lt=s[E],pt=a?a(lt):lt;if(lt=l||lt!==0?lt:0,Q&&pt===pt){for(var Bt=it.length;Bt--;)if(it[Bt]===pt)continue t;a&&it.push(pt),J.push(lt)}else P(it,pt,l)||(it!==J&&it.push(pt),J.push(lt))}return J}function mf(s,a){return a=Is(a,s),s=yp(s,a),s==null||delete s[Dn(Fi(a))]}function Kd(s,a,l,E){return Pa(s,a,l(Xs(s,a)),E)}function cu(s,a,l,E){for(var P=s.length,F=E?P:-1;(E?F--:++F<P)&&a(s[F],F,s););return l?Li(s,E?0:F,E?F+1:P):Li(s,E?F+1:0,E?P:F)}function Gd(s,a){var l=s;return l instanceof Me&&(l=l.value()),Hc(a,function(E,P){return P.func.apply(P.thisArg,bs([E],P.args))},l)}function vf(s,a,l){var E=s.length;if(E<2)return E?Ss(s[0]):[];for(var P=-1,F=at(E);++P<E;)for(var Q=s[P],J=-1;++J<E;)J!=P&&(F[P]=Ca(F[P]||Q,s[J],a,l));return Ss(Mr(F,1),a,l)}function Vd(s,a,l){for(var E=-1,P=s.length,F=a.length,Q={};++E<P;){var J=E<F?a[E]:r;l(Q,s[E],J)}return Q}function yf(s){return hr(s)?s:[]}function wf(s){return typeof s=="function"?s:ni}function Is(s,a){return fe(s)?s:xf(s,a)?[s]:_p(Le(s))}var n3=we;function Ms(s,a,l){var E=s.length;return l=l===r?E:l,!a&&l>=E?s:Li(s,a,l)}var Qd=K2||function(s){return Ne.clearTimeout(s)};function Yd(s,a){if(a)return s.slice();var l=s.length,E=md?md(l):new s.constructor(l);return s.copy(E),E}function bf(s){var a=new s.constructor(s.byteLength);return new Jh(a).set(new Jh(s)),a}function s3(s,a){var l=a?bf(s.buffer):s.buffer;return new s.constructor(l,s.byteOffset,s.byteLength)}function o3(s){var a=new s.constructor(s.source,Yt.exec(s));return a.lastIndex=s.lastIndex,a}function a3(s){return Da?Ke(Da.call(s)):{}}function Jd(s,a){var l=a?bf(s.buffer):s.buffer;return new s.constructor(l,s.byteOffset,s.length)}function Wd(s,a){if(s!==a){var l=s!==r,E=s===null,P=s===s,F=Ai(s),Q=a!==r,J=a===null,it=a===a,ft=Ai(a);if(!J&&!ft&&!F&&s>a||F&&Q&&it&&!J&&!ft||E&&Q&&it||!l&&it||!P)return 1;if(!E&&!F&&!ft&&s<a||ft&&l&&P&&!E&&!F||J&&l&&P||!Q&&P||!it)return-1}return 0}function h3(s,a,l){for(var E=-1,P=s.criteria,F=a.criteria,Q=P.length,J=l.length;++E<Q;){var it=Wd(P[E],F[E]);if(it){if(E>=J)return it;var ft=l[E];return it*(ft=="desc"?-1:1)}}return s.index-a.index}function Xd(s,a,l,E){for(var P=-1,F=s.length,Q=l.length,J=-1,it=a.length,ft=vr(F-Q,0),lt=at(it+ft),pt=!E;++J<it;)lt[J]=a[J];for(;++P<Q;)(pt||P<F)&&(lt[l[P]]=s[P]);for(;ft--;)lt[J++]=s[P++];return lt}function Zd(s,a,l,E){for(var P=-1,F=s.length,Q=-1,J=l.length,it=-1,ft=a.length,lt=vr(F-J,0),pt=at(lt+ft),Bt=!E;++P<lt;)pt[P]=s[P];for(var ee=P;++it<ft;)pt[ee+it]=a[it];for(;++Q<J;)(Bt||P<F)&&(pt[ee+l[Q]]=s[P++]);return pt}function ei(s,a){var l=-1,E=s.length;for(a||(a=at(E));++l<E;)a[l]=s[l];return a}function Mn(s,a,l,E){var P=!l;l||(l={});for(var F=-1,Q=a.length;++F<Q;){var J=a[F],it=E?E(l[J],s[J],J,l,s):r;it===r&&(it=s[J]),P?Xn(l,J,it):xa(l,J,it)}return l}function u3(s,a){return Mn(s,Df(s),a)}function c3(s,a){return Mn(s,lp(s),a)}function fu(s,a){return function(l,E){var P=fe(l)?g2:Pw,F=a?a():{};return P(l,s,se(E,2),F)}}function To(s){return we(function(a,l){var E=-1,P=l.length,F=P>1?l[P-1]:r,Q=P>2?l[2]:r;for(F=s.length>3&&typeof F=="function"?(P--,F):r,Q&&kr(l[0],l[1],Q)&&(F=P<3?r:F,P=1),a=Ke(a);++E<P;){var J=l[E];J&&s(a,J,E,F)}return a})}function tp(s,a){return function(l,E){if(l==null)return l;if(!ri(l))return s(l,E);for(var P=l.length,F=a?P:-1,Q=Ke(l);(a?F--:++F<P)&&E(Q[F],F,Q)!==!1;);return l}}function ep(s){return function(a,l,E){for(var P=-1,F=Ke(a),Q=E(a),J=Q.length;J--;){var it=Q[s?J:++P];if(l(F[it],it,F)===!1)break}return a}}function f3(s,a,l){var E=a&z,P=Ra(s);function F(){var Q=this&&this!==Ne&&this instanceof F?P:s;return Q.apply(E?l:this,arguments)}return F}function rp(s){return function(a){a=Le(a);var l=Do(a)?an(a):r,E=l?l[0]:a.charAt(0),P=l?Ms(l,1).join(""):a.slice(1);return E[s]()+P}}function Bo(s){return function(a){return Hc(t1(Zp(a).replace(ba,"")),s,"")}}function Ra(s){return function(){var a=arguments;switch(a.length){case 0:return new s;case 1:return new s(a[0]);case 2:return new s(a[0],a[1]);case 3:return new s(a[0],a[1],a[2]);case 4:return new s(a[0],a[1],a[2],a[3]);case 5:return new s(a[0],a[1],a[2],a[3],a[4]);case 6:return new s(a[0],a[1],a[2],a[3],a[4],a[5]);case 7:return new s(a[0],a[1],a[2],a[3],a[4],a[5],a[6])}var l=Ro(s.prototype),E=s.apply(l,a);return Ze(E)?E:l}}function l3(s,a,l){var E=Ra(s);function P(){for(var F=arguments.length,Q=at(F),J=F,it=Uo(P);J--;)Q[J]=arguments[J];var ft=F<3&&Q[0]!==it&&Q[F-1]!==it?[]:As(Q,it);if(F-=ft.length,F<l)return ap(s,a,lu,P.placeholder,r,Q,ft,r,r,l-F);var lt=this&&this!==Ne&&this instanceof P?E:s;return Ar(lt,this,Q)}return P}function ip(s){return function(a,l,E){var P=Ke(a);if(!ri(a)){var F=se(l,3);a=_r(a),l=function(J){return F(P[J],J,P)}}var Q=s(a,l,E);return Q>-1?P[F?a[Q]:Q]:r}}function np(s){return ts(function(a){var l=a.length,E=l,P=Bi.prototype.thru;for(s&&a.reverse();E--;){var F=a[E];if(typeof F!="function")throw new Ti(f);if(P&&!Q&&mu(F)=="wrapper")var Q=new Bi([],!0)}for(E=Q?E:l;++E<l;){F=a[E];var J=mu(F),it=J=="wrapper"?If(F):r;it&&Cf(it[0])&&it[1]==(_|Y|j|L)&&!it[4].length&&it[9]==1?Q=Q[mu(it[0])].apply(Q,it[3]):Q=F.length==1&&Cf(F)?Q[J]():Q.thru(F)}return function(){var ft=arguments,lt=ft[0];if(Q&&ft.length==1&&fe(lt))return Q.plant(lt).value();for(var pt=0,Bt=l?a[pt].apply(this,ft):lt;++pt<l;)Bt=a[pt].call(this,Bt);return Bt}})}function lu(s,a,l,E,P,F,Q,J,it,ft){var lt=a&_,pt=a&z,Bt=a&X,ee=a&(Y|$),ae=a&ot,ye=Bt?r:Ra(s);function he(){for(var Ee=arguments.length,Pe=at(Ee),_i=Ee;_i--;)Pe[_i]=arguments[_i];if(ee)var zr=Uo(he),Ei=S2(Pe,zr);if(E&&(Pe=Xd(Pe,E,P,ee)),F&&(Pe=Zd(Pe,F,Q,ee)),Ee-=Ei,ee&&Ee<ft){var ur=As(Pe,zr);return ap(s,a,lu,he.placeholder,l,Pe,ur,J,it,ft-Ee)}var cn=pt?l:this,ns=Bt?cn[s]:s;return Ee=Pe.length,J?Pe=P3(Pe,J):ae&&Ee>1&&Pe.reverse(),lt&&it<Ee&&(Pe.length=it),this&&this!==Ne&&this instanceof he&&(ns=ye||Ra(ns)),ns.apply(cn,Pe)}return he}function sp(s,a){return function(l,E){return $w(l,s,a(E),{})}}function du(s,a){return function(l,E){var P;if(l===r&&E===r)return a;if(l!==r&&(P=l),E!==r){if(P===r)return E;typeof l=="string"||typeof E=="string"?(l=bi(l),E=bi(E)):(l=Hd(l),E=Hd(E)),P=s(l,E)}return P}}function Af(s){return ts(function(a){return a=Je(a,wi(se())),we(function(l){var E=this;return s(a,function(P){return Ar(P,E,l)})})})}function pu(s,a){a=a===r?" ":bi(a);var l=a.length;if(l<2)return l?pf(a,s):a;var E=pf(a,tu(s/xo(a)));return Do(a)?Ms(an(E),0,s).join(""):E.slice(0,s)}function d3(s,a,l,E){var P=a&z,F=Ra(s);function Q(){for(var J=-1,it=arguments.length,ft=-1,lt=E.length,pt=at(lt+it),Bt=this&&this!==Ne&&this instanceof Q?F:s;++ft<lt;)pt[ft]=E[ft];for(;it--;)pt[ft++]=arguments[++J];return Ar(Bt,P?l:this,pt)}return Q}function op(s){return function(a,l,E){return E&&typeof E!="number"&&kr(a,l,E)&&(l=E=r),a=is(a),l===r?(l=a,a=0):l=is(l),E=E===r?a<l?1:-1:is(E),Xw(a,l,E,s)}}function gu(s){return function(a,l){return typeof a=="string"&&typeof l=="string"||(a=qi(a),l=qi(l)),s(a,l)}}function ap(s,a,l,E,P,F,Q,J,it,ft){var lt=a&Y,pt=lt?Q:r,Bt=lt?r:Q,ee=lt?F:r,ae=lt?r:F;a|=lt?j:k,a&=~(lt?k:j),a&G||(a&=~(z|X));var ye=[s,a,P,ee,pt,ae,Bt,J,it,ft],he=l.apply(r,ye);return Cf(s)&&wp(he,ye),he.placeholder=E,bp(he,s,a)}function _f(s){var a=mr[s];return function(l,E){if(l=qi(l),E=E==null?0:Rr(ge(E),292),E&&bd(l)){var P=(Le(l)+"e").split("e"),F=a(P[0]+"e"+(+P[1]+E));return P=(Le(F)+"e").split("e"),+(P[0]+"e"+(+P[1]-E))}return a(l)}}var p3=No&&1/Hh(new No([,-0]))[1]==M?function(s){return new No(s)}:Hf;function hp(s){return function(a){var l=Tr(a);return l==rt?Wc(a):l==Jt?N2(a):E2(a,s(a))}}function Zn(s,a,l,E,P,F,Q,J){var it=a&X;if(!it&&typeof s!="function")throw new Ti(f);var ft=E?E.length:0;if(ft||(a&=~(j|k),E=P=r),Q=Q===r?Q:vr(ge(Q),0),J=J===r?J:ge(J),ft-=P?P.length:0,a&k){var lt=E,pt=P;E=P=r}var Bt=it?r:If(s),ee=[s,a,l,E,P,lt,pt,F,Q,J];if(Bt&&C3(ee,Bt),s=ee[0],a=ee[1],l=ee[2],E=ee[3],P=ee[4],J=ee[9]=ee[9]===r?it?0:s.length:vr(ee[9]-ft,0),!J&&a&(Y|$)&&(a&=~(Y|$)),!a||a==z)var ae=f3(s,a,l);else a==Y||a==$?ae=l3(s,a,J):(a==j||a==(z|j))&&!P.length?ae=d3(s,a,l,E):ae=lu.apply(r,ee);var ye=Bt?zd:wp;return bp(ye(ae,ee),s,a)}function up(s,a,l,E){return s===r||un(s,Oo[l])&&!Fe.call(E,l)?a:s}function cp(s,a,l,E,P,F){return Ze(s)&&Ze(a)&&(F.set(a,s),hu(s,a,r,cp,F),F.delete(a)),s}function g3(s){return Ua(s)?r:s}function fp(s,a,l,E,P,F){var Q=l&N,J=s.length,it=a.length;if(J!=it&&!(Q&&it>J))return!1;var ft=F.get(s),lt=F.get(a);if(ft&&lt)return ft==a&&lt==s;var pt=-1,Bt=!0,ee=l&V?new Js:r;for(F.set(s,a),F.set(a,s);++pt<J;){var ae=s[pt],ye=a[pt];if(E)var he=Q?E(ye,ae,pt,a,s,F):E(ae,ye,pt,s,a,F);if(he!==r){if(he)continue;Bt=!1;break}if(ee){if(!Kc(a,function(Ee,Pe){if(!_a(ee,Pe)&&(ae===Ee||P(ae,Ee,l,E,F)))return ee.push(Pe)})){Bt=!1;break}}else if(!(ae===ye||P(ae,ye,l,E,F))){Bt=!1;break}}return F.delete(s),F.delete(a),Bt}function m3(s,a,l,E,P,F,Q){switch(l){case mt:if(s.byteLength!=a.byteLength||s.byteOffset!=a.byteOffset)return!1;s=s.buffer,a=a.buffer;case Qt:return!(s.byteLength!=a.byteLength||!F(new Jh(s),new Jh(a)));case T:case q:case Et:return un(+s,+a);case B:return s.name==a.name&&s.message==a.message;case At:case vt:return s==a+"";case rt:var J=Wc;case Jt:var it=E&N;if(J||(J=Hh),s.size!=a.size&&!it)return!1;var ft=Q.get(s);if(ft)return ft==a;E|=V,Q.set(s,a);var lt=fp(J(s),J(a),E,P,F,Q);return Q.delete(s),lt;case yt:if(Da)return Da.call(s)==Da.call(a)}return!1}function v3(s,a,l,E,P,F){var Q=l&N,J=Ef(s),it=J.length,ft=Ef(a),lt=ft.length;if(it!=lt&&!Q)return!1;for(var pt=it;pt--;){var Bt=J[pt];if(!(Q?Bt in a:Fe.call(a,Bt)))return!1}var ee=F.get(s),ae=F.get(a);if(ee&&ae)return ee==a&&ae==s;var ye=!0;F.set(s,a),F.set(a,s);for(var he=Q;++pt<it;){Bt=J[pt];var Ee=s[Bt],Pe=a[Bt];if(E)var _i=Q?E(Pe,Ee,Bt,a,s,F):E(Ee,Pe,Bt,s,a,F);if(!(_i===r?Ee===Pe||P(Ee,Pe,l,E,F):_i)){ye=!1;break}he||(he=Bt=="constructor")}if(ye&&!he){var zr=s.constructor,Ei=a.constructor;zr!=Ei&&"constructor"in s&&"constructor"in a&&!(typeof zr=="function"&&zr instanceof zr&&typeof Ei=="function"&&Ei instanceof Ei)&&(ye=!1)}return F.delete(s),F.delete(a),ye}function ts(s){return Nf(vp(s,r,Mp),s+"")}function Ef(s){return Nd(s,_r,Df)}function Sf(s){return Nd(s,ii,lp)}var If=ru?function(s){return ru.get(s)}:Hf;function mu(s){for(var a=s.name+"",l=Po[a],E=Fe.call(Po,a)?l.length:0;E--;){var P=l[E],F=P.func;if(F==null||F==s)return P.name}return a}function Uo(s){var a=Fe.call(U,"placeholder")?U:s;return a.placeholder}function se(){var s=U.iteratee||zf;return s=s===zf?Td:s,arguments.length?s(arguments[0],arguments[1]):s}function vu(s,a){var l=s.__data__;return I3(a)?l[typeof a=="string"?"string":"hash"]:l.map}function Mf(s){for(var a=_r(s),l=a.length;l--;){var E=a[l],P=s[E];a[l]=[E,P,gp(P)]}return a}function Zs(s,a){var l=x2(s,a);return Rd(l)?l:r}function y3(s){var a=Fe.call(s,Qs),l=s[Qs];try{s[Qs]=r;var E=!0}catch{}var P=Qh.call(s);return E&&(a?s[Qs]=l:delete s[Qs]),P}var Df=Zc?function(s){return s==null?[]:(s=Ke(s),ws(Zc(s),function(a){return yd.call(s,a)}))}:Kf,lp=Zc?function(s){for(var a=[];s;)bs(a,Df(s)),s=Wh(s);return a}:Kf,Tr=$r;(tf&&Tr(new tf(new ArrayBuffer(1)))!=mt||Sa&&Tr(new Sa)!=rt||ef&&Tr(ef.resolve())!=me||No&&Tr(new No)!=Jt||Ia&&Tr(new Ia)!=gt)&&(Tr=function(s){var a=$r(s),l=a==bt?s.constructor:r,E=l?to(l):"";if(E)switch(E){case tw:return mt;case ew:return rt;case rw:return me;case iw:return Jt;case nw:return gt}return a});function w3(s,a,l){for(var E=-1,P=l.length;++E<P;){var F=l[E],Q=F.size;switch(F.type){case"drop":s+=Q;break;case"dropRight":a-=Q;break;case"take":a=Rr(a,s+Q);break;case"takeRight":s=vr(s,a-Q);break}}return{start:s,end:a}}function b3(s){var a=s.match(Nt);return a?a[1].split(Ie):[]}function dp(s,a,l){a=Is(a,s);for(var E=-1,P=a.length,F=!1;++E<P;){var Q=Dn(a[E]);if(!(F=s!=null&&l(s,Q)))break;s=s[Q]}return F||++E!=P?F:(P=s==null?0:s.length,!!P&&Su(P)&&es(Q,P)&&(fe(s)||eo(s)))}function A3(s){var a=s.length,l=new s.constructor(a);return a&&typeof s[0]=="string"&&Fe.call(s,"index")&&(l.index=s.index,l.input=s.input),l}function pp(s){return typeof s.constructor=="function"&&!Ta(s)?Ro(Wh(s)):{}}function _3(s,a,l){var E=s.constructor;switch(a){case Qt:return bf(s);case T:case q:return new E(+s);case mt:return s3(s,l);case St:case Wt:case Mt:case Dt:case oe:case Ct:case xt:case Te:case Vt:return Jd(s,l);case rt:return new E;case Et:case vt:return new E(s);case At:return o3(s);case Jt:return new E;case yt:return a3(s)}}function E3(s,a){var l=a.length;if(!l)return s;var E=l-1;return a[E]=(l>1?"& ":"")+a[E],a=a.join(l>2?", ":" "),s.replace(qt,`{
/* [wrapped with `+a+`] */
`)}function S3(s){return fe(s)||eo(s)||!!(wd&&s&&s[wd])}function es(s,a){var l=typeof s;return a=a??D,!!a&&(l=="number"||l!="symbol"&&or.test(s))&&s>-1&&s%1==0&&s<a}function kr(s,a,l){if(!Ze(l))return!1;var E=typeof a;return(E=="number"?ri(l)&&es(a,l.length):E=="string"&&a in l)?un(l[a],s):!1}function xf(s,a){if(fe(s))return!1;var l=typeof s;return l=="number"||l=="symbol"||l=="boolean"||s==null||Ai(s)?!0:$t.test(s)||!ve.test(s)||a!=null&&s in Ke(a)}function I3(s){var a=typeof s;return a=="string"||a=="number"||a=="symbol"||a=="boolean"?s!=="__proto__":s===null}function Cf(s){var a=mu(s),l=U[a];if(typeof l!="function"||!(a in Me.prototype))return!1;if(s===l)return!0;var E=If(l);return!!E&&s===E[0]}function M3(s){return!!gd&&gd in s}var D3=Gh?rs:Gf;function Ta(s){var a=s&&s.constructor,l=typeof a=="function"&&a.prototype||Oo;return s===l}function gp(s){return s===s&&!Ze(s)}function mp(s,a){return function(l){return l==null?!1:l[s]===a&&(a!==r||s in Ke(l))}}function x3(s){var a=_u(s,function(E){return l.size===g&&l.clear(),E}),l=a.cache;return a}function C3(s,a){var l=s[1],E=a[1],P=l|E,F=P<(z|X|_),Q=E==_&&l==Y||E==_&&l==L&&s[7].length<=a[8]||E==(_|L)&&a[7].length<=a[8]&&l==Y;if(!(F||Q))return s;E&z&&(s[2]=a[2],P|=l&z?0:G);var J=a[3];if(J){var it=s[3];s[3]=it?Xd(it,J,a[4]):J,s[4]=it?As(s[3],w):a[4]}return J=a[5],J&&(it=s[5],s[5]=it?Zd(it,J,a[6]):J,s[6]=it?As(s[5],w):a[6]),J=a[7],J&&(s[7]=J),E&_&&(s[8]=s[8]==null?a[8]:Rr(s[8],a[8])),s[9]==null&&(s[9]=a[9]),s[0]=a[0],s[1]=P,s}function O3(s){var a=[];if(s!=null)for(var l in Ke(s))a.push(l);return a}function N3(s){return Qh.call(s)}function vp(s,a,l){return a=vr(a===r?s.length-1:a,0),function(){for(var E=arguments,P=-1,F=vr(E.length-a,0),Q=at(F);++P<F;)Q[P]=E[a+P];P=-1;for(var J=at(a+1);++P<a;)J[P]=E[P];return J[a]=l(Q),Ar(s,this,J)}}function yp(s,a){return a.length<2?s:Xs(s,Li(a,0,-1))}function P3(s,a){for(var l=s.length,E=Rr(a.length,l),P=ei(s);E--;){var F=a[E];s[E]=es(F,l)?P[F]:r}return s}function Of(s,a){if(!(a==="constructor"&&typeof s[a]=="function")&&a!="__proto__")return s[a]}var wp=Ap(zd),Ba=V2||function(s,a){return Ne.setTimeout(s,a)},Nf=Ap(e3);function bp(s,a,l){var E=a+"";return Nf(s,E3(E,R3(b3(E),l)))}function Ap(s){var a=0,l=0;return function(){var E=W2(),P=h-(E-l);if(l=E,P>0){if(++a>=_t)return arguments[0]}else a=0;return s.apply(r,arguments)}}function yu(s,a){var l=-1,E=s.length,P=E-1;for(a=a===r?E:a;++l<a;){var F=df(l,P),Q=s[F];s[F]=s[l],s[l]=Q}return s.length=a,s}var _p=x3(function(s){var a=[];return s.charCodeAt(0)===46&&a.push(""),s.replace(kt,function(l,E,P,F){a.push(P?F.replace(pr,"$1"):E||l)}),a});function Dn(s){if(typeof s=="string"||Ai(s))return s;var a=s+"";return a=="0"&&1/s==-M?"-0":a}function to(s){if(s!=null){try{return Vh.call(s)}catch{}try{return s+""}catch{}}return""}function R3(s,a){return Ri(nt,function(l){var E="_."+l[0];a&l[1]&&!zh(s,E)&&s.push(E)}),s.sort()}function Ep(s){if(s instanceof Me)return s.clone();var a=new Bi(s.__wrapped__,s.__chain__);return a.__actions__=ei(s.__actions__),a.__index__=s.__index__,a.__values__=s.__values__,a}function T3(s,a,l){(l?kr(s,a,l):a===r)?a=1:a=vr(ge(a),0);var E=s==null?0:s.length;if(!E||a<1)return[];for(var P=0,F=0,Q=at(tu(E/a));P<E;)Q[F++]=Li(s,P,P+=a);return Q}function B3(s){for(var a=-1,l=s==null?0:s.length,E=0,P=[];++a<l;){var F=s[a];F&&(P[E++]=F)}return P}function U3(){var s=arguments.length;if(!s)return[];for(var a=at(s-1),l=arguments[0],E=s;E--;)a[E-1]=arguments[E];return bs(fe(l)?ei(l):[l],Mr(a,1))}var L3=we(function(s,a){return hr(s)?Ca(s,Mr(a,1,hr,!0)):[]}),F3=we(function(s,a){var l=Fi(a);return hr(l)&&(l=r),hr(s)?Ca(s,Mr(a,1,hr,!0),se(l,2)):[]}),q3=we(function(s,a){var l=Fi(a);return hr(l)&&(l=r),hr(s)?Ca(s,Mr(a,1,hr,!0),r,l):[]});function $3(s,a,l){var E=s==null?0:s.length;return E?(a=l||a===r?1:ge(a),Li(s,a<0?0:a,E)):[]}function k3(s,a,l){var E=s==null?0:s.length;return E?(a=l||a===r?1:ge(a),a=E-a,Li(s,0,a<0?0:a)):[]}function z3(s,a){return s&&s.length?cu(s,se(a,3),!0,!0):[]}function j3(s,a){return s&&s.length?cu(s,se(a,3),!0):[]}function H3(s,a,l,E){var P=s==null?0:s.length;return P?(l&&typeof l!="number"&&kr(s,a,l)&&(l=0,E=P),Uw(s,a,l,E)):[]}function Sp(s,a,l){var E=s==null?0:s.length;if(!E)return-1;var P=l==null?0:ge(l);return P<0&&(P=vr(E+P,0)),jh(s,se(a,3),P)}function Ip(s,a,l){var E=s==null?0:s.length;if(!E)return-1;var P=E-1;return l!==r&&(P=ge(l),P=l<0?vr(E+P,0):Rr(P,E-1)),jh(s,se(a,3),P,!0)}function Mp(s){var a=s==null?0:s.length;return a?Mr(s,1):[]}function K3(s){var a=s==null?0:s.length;return a?Mr(s,M):[]}function G3(s,a){var l=s==null?0:s.length;return l?(a=a===r?1:ge(a),Mr(s,a)):[]}function V3(s){for(var a=-1,l=s==null?0:s.length,E={};++a<l;){var P=s[a];E[P[0]]=P[1]}return E}function Dp(s){return s&&s.length?s[0]:r}function Q3(s,a,l){var E=s==null?0:s.length;if(!E)return-1;var P=l==null?0:ge(l);return P<0&&(P=vr(E+P,0)),Mo(s,a,P)}function Y3(s){var a=s==null?0:s.length;return a?Li(s,0,-1):[]}var J3=we(function(s){var a=Je(s,yf);return a.length&&a[0]===s[0]?hf(a):[]}),W3=we(function(s){var a=Fi(s),l=Je(s,yf);return a===Fi(l)?a=r:l.pop(),l.length&&l[0]===s[0]?hf(l,se(a,2)):[]}),X3=we(function(s){var a=Fi(s),l=Je(s,yf);return a=typeof a=="function"?a:r,a&&l.pop(),l.length&&l[0]===s[0]?hf(l,r,a):[]});function Z3(s,a){return s==null?"":Y2.call(s,a)}function Fi(s){var a=s==null?0:s.length;return a?s[a-1]:r}function tb(s,a,l){var E=s==null?0:s.length;if(!E)return-1;var P=E;return l!==r&&(P=ge(l),P=P<0?vr(E+P,0):Rr(P,E-1)),a===a?R2(s,a,P):jh(s,ad,P,!0)}function eb(s,a){return s&&s.length?Fd(s,ge(a)):r}var rb=we(xp);function xp(s,a){return s&&s.length&&a&&a.length?lf(s,a):s}function ib(s,a,l){return s&&s.length&&a&&a.length?lf(s,a,se(l,2)):s}function nb(s,a,l){return s&&s.length&&a&&a.length?lf(s,a,r,l):s}var sb=ts(function(s,a){var l=s==null?0:s.length,E=nf(s,a);return kd(s,Je(a,function(P){return es(P,l)?+P:P}).sort(Wd)),E});function ob(s,a){var l=[];if(!(s&&s.length))return l;var E=-1,P=[],F=s.length;for(a=se(a,3);++E<F;){var Q=s[E];a(Q,E,s)&&(l.push(Q),P.push(E))}return kd(s,P),l}function Pf(s){return s==null?s:Z2.call(s)}function ab(s,a,l){var E=s==null?0:s.length;return E?(l&&typeof l!="number"&&kr(s,a,l)?(a=0,l=E):(a=a==null?0:ge(a),l=l===r?E:ge(l)),Li(s,a,l)):[]}function hb(s,a){return uu(s,a)}function ub(s,a,l){return gf(s,a,se(l,2))}function cb(s,a){var l=s==null?0:s.length;if(l){var E=uu(s,a);if(E<l&&un(s[E],a))return E}return-1}function fb(s,a){return uu(s,a,!0)}function lb(s,a,l){return gf(s,a,se(l,2),!0)}function db(s,a){var l=s==null?0:s.length;if(l){var E=uu(s,a,!0)-1;if(un(s[E],a))return E}return-1}function pb(s){return s&&s.length?jd(s):[]}function gb(s,a){return s&&s.length?jd(s,se(a,2)):[]}function mb(s){var a=s==null?0:s.length;return a?Li(s,1,a):[]}function vb(s,a,l){return s&&s.length?(a=l||a===r?1:ge(a),Li(s,0,a<0?0:a)):[]}function yb(s,a,l){var E=s==null?0:s.length;return E?(a=l||a===r?1:ge(a),a=E-a,Li(s,a<0?0:a,E)):[]}function wb(s,a){return s&&s.length?cu(s,se(a,3),!1,!0):[]}function bb(s,a){return s&&s.length?cu(s,se(a,3)):[]}var Ab=we(function(s){return Ss(Mr(s,1,hr,!0))}),_b=we(function(s){var a=Fi(s);return hr(a)&&(a=r),Ss(Mr(s,1,hr,!0),se(a,2))}),Eb=we(function(s){var a=Fi(s);return a=typeof a=="function"?a:r,Ss(Mr(s,1,hr,!0),r,a)});function Sb(s){return s&&s.length?Ss(s):[]}function Ib(s,a){return s&&s.length?Ss(s,se(a,2)):[]}function Mb(s,a){return a=typeof a=="function"?a:r,s&&s.length?Ss(s,r,a):[]}function Rf(s){if(!(s&&s.length))return[];var a=0;return s=ws(s,function(l){if(hr(l))return a=vr(l.length,a),!0}),Yc(a,function(l){return Je(s,Gc(l))})}function Cp(s,a){if(!(s&&s.length))return[];var l=Rf(s);return a==null?l:Je(l,function(E){return Ar(a,r,E)})}var Db=we(function(s,a){return hr(s)?Ca(s,a):[]}),xb=we(function(s){return vf(ws(s,hr))}),Cb=we(function(s){var a=Fi(s);return hr(a)&&(a=r),vf(ws(s,hr),se(a,2))}),Ob=we(function(s){var a=Fi(s);return a=typeof a=="function"?a:r,vf(ws(s,hr),r,a)}),Nb=we(Rf);function Pb(s,a){return Vd(s||[],a||[],xa)}function Rb(s,a){return Vd(s||[],a||[],Pa)}var Tb=we(function(s){var a=s.length,l=a>1?s[a-1]:r;return l=typeof l=="function"?(s.pop(),l):r,Cp(s,l)});function Op(s){var a=U(s);return a.__chain__=!0,a}function Bb(s,a){return a(s),s}function wu(s,a){return a(s)}var Ub=ts(function(s){var a=s.length,l=a?s[0]:0,E=this.__wrapped__,P=function(F){return nf(F,s)};return a>1||this.__actions__.length||!(E instanceof Me)||!es(l)?this.thru(P):(E=E.slice(l,+l+(a?1:0)),E.__actions__.push({func:wu,args:[P],thisArg:r}),new Bi(E,this.__chain__).thru(function(F){return a&&!F.length&&F.push(r),F}))});function Lb(){return Op(this)}function Fb(){return new Bi(this.value(),this.__chain__)}function qb(){this.__values__===r&&(this.__values__=Hp(this.value()));var s=this.__index__>=this.__values__.length,a=s?r:this.__values__[this.__index__++];return{done:s,value:a}}function $b(){return this}function kb(s){for(var a,l=this;l instanceof nu;){var E=Ep(l);E.__index__=0,E.__values__=r,a?P.__wrapped__=E:a=E;var P=E;l=l.__wrapped__}return P.__wrapped__=s,a}function zb(){var s=this.__wrapped__;if(s instanceof Me){var a=s;return this.__actions__.length&&(a=new Me(this)),a=a.reverse(),a.__actions__.push({func:wu,args:[Pf],thisArg:r}),new Bi(a,this.__chain__)}return this.thru(Pf)}function jb(){return Gd(this.__wrapped__,this.__actions__)}var Hb=fu(function(s,a,l){Fe.call(s,l)?++s[l]:Xn(s,l,1)});function Kb(s,a,l){var E=fe(s)?sd:Bw;return l&&kr(s,a,l)&&(a=r),E(s,se(a,3))}function Gb(s,a){var l=fe(s)?ws:Cd;return l(s,se(a,3))}var Vb=ip(Sp),Qb=ip(Ip);function Yb(s,a){return Mr(bu(s,a),1)}function Jb(s,a){return Mr(bu(s,a),M)}function Wb(s,a,l){return l=l===r?1:ge(l),Mr(bu(s,a),l)}function Np(s,a){var l=fe(s)?Ri:Es;return l(s,se(a,3))}function Pp(s,a){var l=fe(s)?m2:xd;return l(s,se(a,3))}var Xb=fu(function(s,a,l){Fe.call(s,l)?s[l].push(a):Xn(s,l,[a])});function Zb(s,a,l,E){s=ri(s)?s:Fo(s),l=l&&!E?ge(l):0;var P=s.length;return l<0&&(l=vr(P+l,0)),Iu(s)?l<=P&&s.indexOf(a,l)>-1:!!P&&Mo(s,a,l)>-1}var t6=we(function(s,a,l){var E=-1,P=typeof a=="function",F=ri(s)?at(s.length):[];return Es(s,function(Q){F[++E]=P?Ar(a,Q,l):Oa(Q,a,l)}),F}),e6=fu(function(s,a,l){Xn(s,l,a)});function bu(s,a){var l=fe(s)?Je:Bd;return l(s,se(a,3))}function r6(s,a,l,E){return s==null?[]:(fe(a)||(a=a==null?[]:[a]),l=E?r:l,fe(l)||(l=l==null?[]:[l]),qd(s,a,l))}var i6=fu(function(s,a,l){s[l?0:1].push(a)},function(){return[[],[]]});function n6(s,a,l){var E=fe(s)?Hc:ud,P=arguments.length<3;return E(s,se(a,4),l,P,Es)}function s6(s,a,l){var E=fe(s)?v2:ud,P=arguments.length<3;return E(s,se(a,4),l,P,xd)}function o6(s,a){var l=fe(s)?ws:Cd;return l(s,Eu(se(a,3)))}function a6(s){var a=fe(s)?Sd:Zw;return a(s)}function h6(s,a,l){(l?kr(s,a,l):a===r)?a=1:a=ge(a);var E=fe(s)?Ow:t3;return E(s,a)}function u6(s){var a=fe(s)?Nw:r3;return a(s)}function c6(s){if(s==null)return 0;if(ri(s))return Iu(s)?xo(s):s.length;var a=Tr(s);return a==rt||a==Jt?s.size:cf(s).length}function f6(s,a,l){var E=fe(s)?Kc:i3;return l&&kr(s,a,l)&&(a=r),E(s,se(a,3))}var l6=we(function(s,a){if(s==null)return[];var l=a.length;return l>1&&kr(s,a[0],a[1])?a=[]:l>2&&kr(a[0],a[1],a[2])&&(a=[a[0]]),qd(s,Mr(a,1),[])}),Au=G2||function(){return Ne.Date.now()};function d6(s,a){if(typeof a!="function")throw new Ti(f);return s=ge(s),function(){if(--s<1)return a.apply(this,arguments)}}function Rp(s,a,l){return a=l?r:a,a=s&&a==null?s.length:a,Zn(s,_,r,r,r,r,a)}function Tp(s,a){var l;if(typeof a!="function")throw new Ti(f);return s=ge(s),function(){return--s>0&&(l=a.apply(this,arguments)),s<=1&&(a=r),l}}var Tf=we(function(s,a,l){var E=z;if(l.length){var P=As(l,Uo(Tf));E|=j}return Zn(s,E,a,l,P)}),Bp=we(function(s,a,l){var E=z|X;if(l.length){var P=As(l,Uo(Bp));E|=j}return Zn(a,E,s,l,P)});function Up(s,a,l){a=l?r:a;var E=Zn(s,Y,r,r,r,r,r,a);return E.placeholder=Up.placeholder,E}function Lp(s,a,l){a=l?r:a;var E=Zn(s,$,r,r,r,r,r,a);return E.placeholder=Lp.placeholder,E}function Fp(s,a,l){var E,P,F,Q,J,it,ft=0,lt=!1,pt=!1,Bt=!0;if(typeof s!="function")throw new Ti(f);a=qi(a)||0,Ze(l)&&(lt=!!l.leading,pt="maxWait"in l,F=pt?vr(qi(l.maxWait)||0,a):F,Bt="trailing"in l?!!l.trailing:Bt);function ee(ur){var cn=E,ns=P;return E=P=r,ft=ur,Q=s.apply(ns,cn),Q}function ae(ur){return ft=ur,J=Ba(Ee,a),lt?ee(ur):Q}function ye(ur){var cn=ur-it,ns=ur-ft,i1=a-cn;return pt?Rr(i1,F-ns):i1}function he(ur){var cn=ur-it,ns=ur-ft;return it===r||cn>=a||cn<0||pt&&ns>=F}function Ee(){var ur=Au();if(he(ur))return Pe(ur);J=Ba(Ee,ye(ur))}function Pe(ur){return J=r,Bt&&E?ee(ur):(E=P=r,Q)}function _i(){J!==r&&Qd(J),ft=0,E=it=P=J=r}function zr(){return J===r?Q:Pe(Au())}function Ei(){var ur=Au(),cn=he(ur);if(E=arguments,P=this,it=ur,cn){if(J===r)return ae(it);if(pt)return Qd(J),J=Ba(Ee,a),ee(it)}return J===r&&(J=Ba(Ee,a)),Q}return Ei.cancel=_i,Ei.flush=zr,Ei}var p6=we(function(s,a){return Dd(s,1,a)}),g6=we(function(s,a,l){return Dd(s,qi(a)||0,l)});function m6(s){return Zn(s,ot)}function _u(s,a){if(typeof s!="function"||a!=null&&typeof a!="function")throw new Ti(f);var l=function(){var E=arguments,P=a?a.apply(this,E):E[0],F=l.cache;if(F.has(P))return F.get(P);var Q=s.apply(this,E);return l.cache=F.set(P,Q)||F,Q};return l.cache=new(_u.Cache||Wn),l}_u.Cache=Wn;function Eu(s){if(typeof s!="function")throw new Ti(f);return function(){var a=arguments;switch(a.length){case 0:return!s.call(this);case 1:return!s.call(this,a[0]);case 2:return!s.call(this,a[0],a[1]);case 3:return!s.call(this,a[0],a[1],a[2])}return!s.apply(this,a)}}function v6(s){return Tp(2,s)}var y6=n3(function(s,a){a=a.length==1&&fe(a[0])?Je(a[0],wi(se())):Je(Mr(a,1),wi(se()));var l=a.length;return we(function(E){for(var P=-1,F=Rr(E.length,l);++P<F;)E[P]=a[P].call(this,E[P]);return Ar(s,this,E)})}),Bf=we(function(s,a){var l=As(a,Uo(Bf));return Zn(s,j,r,a,l)}),qp=we(function(s,a){var l=As(a,Uo(qp));return Zn(s,k,r,a,l)}),w6=ts(function(s,a){return Zn(s,L,r,r,r,a)});function b6(s,a){if(typeof s!="function")throw new Ti(f);return a=a===r?a:ge(a),we(s,a)}function A6(s,a){if(typeof s!="function")throw new Ti(f);return a=a==null?0:vr(ge(a),0),we(function(l){var E=l[a],P=Ms(l,0,a);return E&&bs(P,E),Ar(s,this,P)})}function _6(s,a,l){var E=!0,P=!0;if(typeof s!="function")throw new Ti(f);return Ze(l)&&(E="leading"in l?!!l.leading:E,P="trailing"in l?!!l.trailing:P),Fp(s,a,{leading:E,maxWait:a,trailing:P})}function E6(s){return Rp(s,1)}function S6(s,a){return Bf(wf(a),s)}function I6(){if(!arguments.length)return[];var s=arguments[0];return fe(s)?s:[s]}function M6(s){return Ui(s,C)}function D6(s,a){return a=typeof a=="function"?a:r,Ui(s,C,a)}function x6(s){return Ui(s,S|C)}function C6(s,a){return a=typeof a=="function"?a:r,Ui(s,S|C,a)}function O6(s,a){return a==null||Md(s,a,_r(a))}function un(s,a){return s===a||s!==s&&a!==a}var N6=gu(af),P6=gu(function(s,a){return s>=a}),eo=Pd(function(){return arguments}())?Pd:function(s){return tr(s)&&Fe.call(s,"callee")&&!yd.call(s,"callee")},fe=at.isArray,R6=qr?wi(qr):kw;function ri(s){return s!=null&&Su(s.length)&&!rs(s)}function hr(s){return tr(s)&&ri(s)}function T6(s){return s===!0||s===!1||tr(s)&&$r(s)==T}var Ds=Q2||Gf,B6=on?wi(on):zw;function U6(s){return tr(s)&&s.nodeType===1&&!Ua(s)}function L6(s){if(s==null)return!0;if(ri(s)&&(fe(s)||typeof s=="string"||typeof s.splice=="function"||Ds(s)||Lo(s)||eo(s)))return!s.length;var a=Tr(s);if(a==rt||a==Jt)return!s.size;if(Ta(s))return!cf(s).length;for(var l in s)if(Fe.call(s,l))return!1;return!0}function F6(s,a){return Na(s,a)}function q6(s,a,l){l=typeof l=="function"?l:r;var E=l?l(s,a):r;return E===r?Na(s,a,r,l):!!E}function Uf(s){if(!tr(s))return!1;var a=$r(s);return a==B||a==y||typeof s.message=="string"&&typeof s.name=="string"&&!Ua(s)}function $6(s){return typeof s=="number"&&bd(s)}function rs(s){if(!Ze(s))return!1;var a=$r(s);return a==W||a==st||a==R||a==Pt}function $p(s){return typeof s=="number"&&s==ge(s)}function Su(s){return typeof s=="number"&&s>-1&&s%1==0&&s<=D}function Ze(s){var a=typeof s;return s!=null&&(a=="object"||a=="function")}function tr(s){return s!=null&&typeof s=="object"}var kp=Pi?wi(Pi):Hw;function k6(s,a){return s===a||uf(s,a,Mf(a))}function z6(s,a,l){return l=typeof l=="function"?l:r,uf(s,a,Mf(a),l)}function j6(s){return zp(s)&&s!=+s}function H6(s){if(D3(s))throw new ue(o);return Rd(s)}function K6(s){return s===null}function G6(s){return s==null}function zp(s){return typeof s=="number"||tr(s)&&$r(s)==Et}function Ua(s){if(!tr(s)||$r(s)!=bt)return!1;var a=Wh(s);if(a===null)return!0;var l=Fe.call(a,"constructor")&&a.constructor;return typeof l=="function"&&l instanceof l&&Vh.call(l)==z2}var Lf=Sn?wi(Sn):Kw;function V6(s){return $p(s)&&s>=-D&&s<=D}var jp=Aa?wi(Aa):Gw;function Iu(s){return typeof s=="string"||!fe(s)&&tr(s)&&$r(s)==vt}function Ai(s){return typeof s=="symbol"||tr(s)&&$r(s)==yt}var Lo=Vs?wi(Vs):Vw;function Q6(s){return s===r}function Y6(s){return tr(s)&&Tr(s)==gt}function J6(s){return tr(s)&&$r(s)==wt}var W6=gu(ff),X6=gu(function(s,a){return s<=a});function Hp(s){if(!s)return[];if(ri(s))return Iu(s)?an(s):ei(s);if(Ea&&s[Ea])return O2(s[Ea]());var a=Tr(s),l=a==rt?Wc:a==Jt?Hh:Fo;return l(s)}function is(s){if(!s)return s===0?s:0;if(s=qi(s),s===M||s===-M){var a=s<0?-1:1;return a*O}return s===s?s:0}function ge(s){var a=is(s),l=a%1;return a===a?l?a-l:a:0}function Kp(s){return s?Ws(ge(s),0,c):0}function qi(s){if(typeof s=="number")return s;if(Ai(s))return A;if(Ze(s)){var a=typeof s.valueOf=="function"?s.valueOf():s;s=Ze(a)?a+"":a}if(typeof s!="string")return s===0?s:+s;s=cd(s);var l=ir.test(s);return l||sr.test(s)?ce(s.slice(2),l?2:8):rr.test(s)?A:+s}function Gp(s){return Mn(s,ii(s))}function Z6(s){return s?Ws(ge(s),-D,D):s===0?s:0}function Le(s){return s==null?"":bi(s)}var tA=To(function(s,a){if(Ta(a)||ri(a)){Mn(a,_r(a),s);return}for(var l in a)Fe.call(a,l)&&xa(s,l,a[l])}),Vp=To(function(s,a){Mn(a,ii(a),s)}),Mu=To(function(s,a,l,E){Mn(a,ii(a),s,E)}),eA=To(function(s,a,l,E){Mn(a,_r(a),s,E)}),rA=ts(nf);function iA(s,a){var l=Ro(s);return a==null?l:Id(l,a)}var nA=we(function(s,a){s=Ke(s);var l=-1,E=a.length,P=E>2?a[2]:r;for(P&&kr(a[0],a[1],P)&&(E=1);++l<E;)for(var F=a[l],Q=ii(F),J=-1,it=Q.length;++J<it;){var ft=Q[J],lt=s[ft];(lt===r||un(lt,Oo[ft])&&!Fe.call(s,ft))&&(s[ft]=F[ft])}return s}),sA=we(function(s){return s.push(r,cp),Ar(Qp,r,s)});function oA(s,a){return od(s,se(a,3),In)}function aA(s,a){return od(s,se(a,3),of)}function hA(s,a){return s==null?s:sf(s,se(a,3),ii)}function uA(s,a){return s==null?s:Od(s,se(a,3),ii)}function cA(s,a){return s&&In(s,se(a,3))}function fA(s,a){return s&&of(s,se(a,3))}function lA(s){return s==null?[]:au(s,_r(s))}function dA(s){return s==null?[]:au(s,ii(s))}function Ff(s,a,l){var E=s==null?r:Xs(s,a);return E===r?l:E}function pA(s,a){return s!=null&&dp(s,a,Lw)}function qf(s,a){return s!=null&&dp(s,a,Fw)}var gA=sp(function(s,a,l){a!=null&&typeof a.toString!="function"&&(a=Qh.call(a)),s[a]=l},kf(ni)),mA=sp(function(s,a,l){a!=null&&typeof a.toString!="function"&&(a=Qh.call(a)),Fe.call(s,a)?s[a].push(l):s[a]=[l]},se),vA=we(Oa);function _r(s){return ri(s)?Ed(s):cf(s)}function ii(s){return ri(s)?Ed(s,!0):Qw(s)}function yA(s,a){var l={};return a=se(a,3),In(s,function(E,P,F){Xn(l,a(E,P,F),E)}),l}function wA(s,a){var l={};return a=se(a,3),In(s,function(E,P,F){Xn(l,P,a(E,P,F))}),l}var bA=To(function(s,a,l){hu(s,a,l)}),Qp=To(function(s,a,l,E){hu(s,a,l,E)}),AA=ts(function(s,a){var l={};if(s==null)return l;var E=!1;a=Je(a,function(F){return F=Is(F,s),E||(E=F.length>1),F}),Mn(s,Sf(s),l),E&&(l=Ui(l,S|x|C,g3));for(var P=a.length;P--;)mf(l,a[P]);return l});function _A(s,a){return Yp(s,Eu(se(a)))}var EA=ts(function(s,a){return s==null?{}:Jw(s,a)});function Yp(s,a){if(s==null)return{};var l=Je(Sf(s),function(E){return[E]});return a=se(a),$d(s,l,function(E,P){return a(E,P[0])})}function SA(s,a,l){a=Is(a,s);var E=-1,P=a.length;for(P||(P=1,s=r);++E<P;){var F=s==null?r:s[Dn(a[E])];F===r&&(E=P,F=l),s=rs(F)?F.call(s):F}return s}function IA(s,a,l){return s==null?s:Pa(s,a,l)}function MA(s,a,l,E){return E=typeof E=="function"?E:r,s==null?s:Pa(s,a,l,E)}var Jp=hp(_r),Wp=hp(ii);function DA(s,a,l){var E=fe(s),P=E||Ds(s)||Lo(s);if(a=se(a,4),l==null){var F=s&&s.constructor;P?l=E?new F:[]:Ze(s)?l=rs(F)?Ro(Wh(s)):{}:l={}}return(P?Ri:In)(s,function(Q,J,it){return a(l,Q,J,it)}),l}function xA(s,a){return s==null?!0:mf(s,a)}function CA(s,a,l){return s==null?s:Kd(s,a,wf(l))}function OA(s,a,l,E){return E=typeof E=="function"?E:r,s==null?s:Kd(s,a,wf(l),E)}function Fo(s){return s==null?[]:Jc(s,_r(s))}function NA(s){return s==null?[]:Jc(s,ii(s))}function PA(s,a,l){return l===r&&(l=a,a=r),l!==r&&(l=qi(l),l=l===l?l:0),a!==r&&(a=qi(a),a=a===a?a:0),Ws(qi(s),a,l)}function RA(s,a,l){return a=is(a),l===r?(l=a,a=0):l=is(l),s=qi(s),qw(s,a,l)}function TA(s,a,l){if(l&&typeof l!="boolean"&&kr(s,a,l)&&(a=l=r),l===r&&(typeof a=="boolean"?(l=a,a=r):typeof s=="boolean"&&(l=s,s=r)),s===r&&a===r?(s=0,a=1):(s=is(s),a===r?(a=s,s=0):a=is(a)),s>a){var E=s;s=a,a=E}if(l||s%1||a%1){var P=Ad();return Rr(s+P*(a-s+je("1e-"+((P+"").length-1))),a)}return df(s,a)}var BA=Bo(function(s,a,l){return a=a.toLowerCase(),s+(l?Xp(a):a)});function Xp(s){return $f(Le(s).toLowerCase())}function Zp(s){return s=Le(s),s&&s.replace(ke,I2).replace(kc,"")}function UA(s,a,l){s=Le(s),a=bi(a);var E=s.length;l=l===r?E:Ws(ge(l),0,E);var P=l;return l-=a.length,l>=0&&s.slice(l,P)==a}function LA(s){return s=Le(s),s&&Rt.test(s)?s.replace(Xe,M2):s}function FA(s){return s=Le(s),s&&zt.test(s)?s.replace(Ae,"\\$&"):s}var qA=Bo(function(s,a,l){return s+(l?"-":"")+a.toLowerCase()}),$A=Bo(function(s,a,l){return s+(l?" ":"")+a.toLowerCase()}),kA=rp("toLowerCase");function zA(s,a,l){s=Le(s),a=ge(a);var E=a?xo(s):0;if(!a||E>=a)return s;var P=(a-E)/2;return pu(eu(P),l)+s+pu(tu(P),l)}function jA(s,a,l){s=Le(s),a=ge(a);var E=a?xo(s):0;return a&&E<a?s+pu(a-E,l):s}function HA(s,a,l){s=Le(s),a=ge(a);var E=a?xo(s):0;return a&&E<a?pu(a-E,l)+s:s}function KA(s,a,l){return l||a==null?a=0:a&&(a=+a),X2(Le(s).replace(Ft,""),a||0)}function GA(s,a,l){return(l?kr(s,a,l):a===r)?a=1:a=ge(a),pf(Le(s),a)}function VA(){var s=arguments,a=Le(s[0]);return s.length<3?a:a.replace(s[1],s[2])}var QA=Bo(function(s,a,l){return s+(l?"_":"")+a.toLowerCase()});function YA(s,a,l){return l&&typeof l!="number"&&kr(s,a,l)&&(a=l=r),l=l===r?c:l>>>0,l?(s=Le(s),s&&(typeof a=="string"||a!=null&&!Lf(a))&&(a=bi(a),!a&&Do(s))?Ms(an(s),0,l):s.split(a,l)):[]}var JA=Bo(function(s,a,l){return s+(l?" ":"")+$f(a)});function WA(s,a,l){return s=Le(s),l=l==null?0:Ws(ge(l),0,s.length),a=bi(a),s.slice(l,l+a.length)==a}function XA(s,a,l){var E=U.templateSettings;l&&kr(s,a,l)&&(a=r),s=Le(s),a=Mu({},a,E,up);var P=Mu({},a.imports,E.imports,up),F=_r(P),Q=Jc(P,F),J,it,ft=0,lt=a.interpolate||Wr,pt="__p += '",Bt=Xc((a.escape||Wr).source+"|"+lt.source+"|"+(lt===Tt?ne:Wr).source+"|"+(a.evaluate||Wr).source+"|$","g"),ee="//# sourceURL="+(Fe.call(a,"sourceURL")?(a.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++zc+"]")+`
`;s.replace(Bt,function(he,Ee,Pe,_i,zr,Ei){return Pe||(Pe=_i),pt+=s.slice(ft,Ei).replace(Xi,D2),Ee&&(J=!0,pt+=`' +
__e(`+Ee+`) +
'`),zr&&(it=!0,pt+=`';
`+zr+`;
__p += '`),Pe&&(pt+=`' +
((__t = (`+Pe+`)) == null ? '' : __t) +
'`),ft=Ei+he.length,he}),pt+=`';
`;var ae=Fe.call(a,"variable")&&a.variable;if(!ae)pt=`with (obj) {
`+pt+`
}
`;else if(ie.test(ae))throw new ue(d);pt=(it?pt.replace(Xt,""):pt).replace(Be,"$1").replace(Zt,"$1;"),pt="function("+(ae||"obj")+`) {
`+(ae?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(J?", __e = _.escape":"")+(it?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+pt+`return __p
}`;var ye=e1(function(){return Ue(F,ee+"return "+pt).apply(r,Q)});if(ye.source=pt,Uf(ye))throw ye;return ye}function ZA(s){return Le(s).toLowerCase()}function t8(s){return Le(s).toUpperCase()}function e8(s,a,l){if(s=Le(s),s&&(l||a===r))return cd(s);if(!s||!(a=bi(a)))return s;var E=an(s),P=an(a),F=fd(E,P),Q=ld(E,P)+1;return Ms(E,F,Q).join("")}function r8(s,a,l){if(s=Le(s),s&&(l||a===r))return s.slice(0,pd(s)+1);if(!s||!(a=bi(a)))return s;var E=an(s),P=ld(E,an(a))+1;return Ms(E,0,P).join("")}function i8(s,a,l){if(s=Le(s),s&&(l||a===r))return s.replace(Ft,"");if(!s||!(a=bi(a)))return s;var E=an(s),P=fd(E,an(a));return Ms(E,P).join("")}function n8(s,a){var l=ct,E=ht;if(Ze(a)){var P="separator"in a?a.separator:P;l="length"in a?ge(a.length):l,E="omission"in a?bi(a.omission):E}s=Le(s);var F=s.length;if(Do(s)){var Q=an(s);F=Q.length}if(l>=F)return s;var J=l-xo(E);if(J<1)return E;var it=Q?Ms(Q,0,J).join(""):s.slice(0,J);if(P===r)return it+E;if(Q&&(J+=it.length-J),Lf(P)){if(s.slice(J).search(P)){var ft,lt=it;for(P.global||(P=Xc(P.source,Le(Yt.exec(P))+"g")),P.lastIndex=0;ft=P.exec(lt);)var pt=ft.index;it=it.slice(0,pt===r?J:pt)}}else if(s.indexOf(bi(P),J)!=J){var Bt=it.lastIndexOf(P);Bt>-1&&(it=it.slice(0,Bt))}return it+E}function s8(s){return s=Le(s),s&&Ut.test(s)?s.replace(te,T2):s}var o8=Bo(function(s,a,l){return s+(l?" ":"")+a.toUpperCase()}),$f=rp("toUpperCase");function t1(s,a,l){return s=Le(s),a=l?r:a,a===r?C2(s)?L2(s):b2(s):s.match(a)||[]}var e1=we(function(s,a){try{return Ar(s,r,a)}catch(l){return Uf(l)?l:new ue(l)}}),a8=ts(function(s,a){return Ri(a,function(l){l=Dn(l),Xn(s,l,Tf(s[l],s))}),s});function h8(s){var a=s==null?0:s.length,l=se();return s=a?Je(s,function(E){if(typeof E[1]!="function")throw new Ti(f);return[l(E[0]),E[1]]}):[],we(function(E){for(var P=-1;++P<a;){var F=s[P];if(Ar(F[0],this,E))return Ar(F[1],this,E)}})}function u8(s){return Tw(Ui(s,S))}function kf(s){return function(){return s}}function c8(s,a){return s==null||s!==s?a:s}var f8=np(),l8=np(!0);function ni(s){return s}function zf(s){return Td(typeof s=="function"?s:Ui(s,S))}function d8(s){return Ud(Ui(s,S))}function p8(s,a){return Ld(s,Ui(a,S))}var g8=we(function(s,a){return function(l){return Oa(l,s,a)}}),m8=we(function(s,a){return function(l){return Oa(s,l,a)}});function jf(s,a,l){var E=_r(a),P=au(a,E);l==null&&!(Ze(a)&&(P.length||!E.length))&&(l=a,a=s,s=this,P=au(a,_r(a)));var F=!(Ze(l)&&"chain"in l)||!!l.chain,Q=rs(s);return Ri(P,function(J){var it=a[J];s[J]=it,Q&&(s.prototype[J]=function(){var ft=this.__chain__;if(F||ft){var lt=s(this.__wrapped__),pt=lt.__actions__=ei(this.__actions__);return pt.push({func:it,args:arguments,thisArg:s}),lt.__chain__=ft,lt}return it.apply(s,bs([this.value()],arguments))})}),s}function v8(){return Ne._===this&&(Ne._=j2),this}function Hf(){}function y8(s){return s=ge(s),we(function(a){return Fd(a,s)})}var w8=Af(Je),b8=Af(sd),A8=Af(Kc);function r1(s){return xf(s)?Gc(Dn(s)):Ww(s)}function _8(s){return function(a){return s==null?r:Xs(s,a)}}var E8=op(),S8=op(!0);function Kf(){return[]}function Gf(){return!1}function I8(){return{}}function M8(){return""}function D8(){return!0}function x8(s,a){if(s=ge(s),s<1||s>D)return[];var l=c,E=Rr(s,c);a=se(a),s-=c;for(var P=Yc(E,a);++l<s;)a(l);return P}function C8(s){return fe(s)?Je(s,Dn):Ai(s)?[s]:ei(_p(Le(s)))}function O8(s){var a=++k2;return Le(s)+a}var N8=du(function(s,a){return s+a},0),P8=_f("ceil"),R8=du(function(s,a){return s/a},1),T8=_f("floor");function B8(s){return s&&s.length?ou(s,ni,af):r}function U8(s,a){return s&&s.length?ou(s,se(a,2),af):r}function L8(s){return hd(s,ni)}function F8(s,a){return hd(s,se(a,2))}function q8(s){return s&&s.length?ou(s,ni,ff):r}function $8(s,a){return s&&s.length?ou(s,se(a,2),ff):r}var k8=du(function(s,a){return s*a},1),z8=_f("round"),j8=du(function(s,a){return s-a},0);function H8(s){return s&&s.length?Qc(s,ni):0}function K8(s,a){return s&&s.length?Qc(s,se(a,2)):0}return U.after=d6,U.ary=Rp,U.assign=tA,U.assignIn=Vp,U.assignInWith=Mu,U.assignWith=eA,U.at=rA,U.before=Tp,U.bind=Tf,U.bindAll=a8,U.bindKey=Bp,U.castArray=I6,U.chain=Op,U.chunk=T3,U.compact=B3,U.concat=U3,U.cond=h8,U.conforms=u8,U.constant=kf,U.countBy=Hb,U.create=iA,U.curry=Up,U.curryRight=Lp,U.debounce=Fp,U.defaults=nA,U.defaultsDeep=sA,U.defer=p6,U.delay=g6,U.difference=L3,U.differenceBy=F3,U.differenceWith=q3,U.drop=$3,U.dropRight=k3,U.dropRightWhile=z3,U.dropWhile=j3,U.fill=H3,U.filter=Gb,U.flatMap=Yb,U.flatMapDeep=Jb,U.flatMapDepth=Wb,U.flatten=Mp,U.flattenDeep=K3,U.flattenDepth=G3,U.flip=m6,U.flow=f8,U.flowRight=l8,U.fromPairs=V3,U.functions=lA,U.functionsIn=dA,U.groupBy=Xb,U.initial=Y3,U.intersection=J3,U.intersectionBy=W3,U.intersectionWith=X3,U.invert=gA,U.invertBy=mA,U.invokeMap=t6,U.iteratee=zf,U.keyBy=e6,U.keys=_r,U.keysIn=ii,U.map=bu,U.mapKeys=yA,U.mapValues=wA,U.matches=d8,U.matchesProperty=p8,U.memoize=_u,U.merge=bA,U.mergeWith=Qp,U.method=g8,U.methodOf=m8,U.mixin=jf,U.negate=Eu,U.nthArg=y8,U.omit=AA,U.omitBy=_A,U.once=v6,U.orderBy=r6,U.over=w8,U.overArgs=y6,U.overEvery=b8,U.overSome=A8,U.partial=Bf,U.partialRight=qp,U.partition=i6,U.pick=EA,U.pickBy=Yp,U.property=r1,U.propertyOf=_8,U.pull=rb,U.pullAll=xp,U.pullAllBy=ib,U.pullAllWith=nb,U.pullAt=sb,U.range=E8,U.rangeRight=S8,U.rearg=w6,U.reject=o6,U.remove=ob,U.rest=b6,U.reverse=Pf,U.sampleSize=h6,U.set=IA,U.setWith=MA,U.shuffle=u6,U.slice=ab,U.sortBy=l6,U.sortedUniq=pb,U.sortedUniqBy=gb,U.split=YA,U.spread=A6,U.tail=mb,U.take=vb,U.takeRight=yb,U.takeRightWhile=wb,U.takeWhile=bb,U.tap=Bb,U.throttle=_6,U.thru=wu,U.toArray=Hp,U.toPairs=Jp,U.toPairsIn=Wp,U.toPath=C8,U.toPlainObject=Gp,U.transform=DA,U.unary=E6,U.union=Ab,U.unionBy=_b,U.unionWith=Eb,U.uniq=Sb,U.uniqBy=Ib,U.uniqWith=Mb,U.unset=xA,U.unzip=Rf,U.unzipWith=Cp,U.update=CA,U.updateWith=OA,U.values=Fo,U.valuesIn=NA,U.without=Db,U.words=t1,U.wrap=S6,U.xor=xb,U.xorBy=Cb,U.xorWith=Ob,U.zip=Nb,U.zipObject=Pb,U.zipObjectDeep=Rb,U.zipWith=Tb,U.entries=Jp,U.entriesIn=Wp,U.extend=Vp,U.extendWith=Mu,jf(U,U),U.add=N8,U.attempt=e1,U.camelCase=BA,U.capitalize=Xp,U.ceil=P8,U.clamp=PA,U.clone=M6,U.cloneDeep=x6,U.cloneDeepWith=C6,U.cloneWith=D6,U.conformsTo=O6,U.deburr=Zp,U.defaultTo=c8,U.divide=R8,U.endsWith=UA,U.eq=un,U.escape=LA,U.escapeRegExp=FA,U.every=Kb,U.find=Vb,U.findIndex=Sp,U.findKey=oA,U.findLast=Qb,U.findLastIndex=Ip,U.findLastKey=aA,U.floor=T8,U.forEach=Np,U.forEachRight=Pp,U.forIn=hA,U.forInRight=uA,U.forOwn=cA,U.forOwnRight=fA,U.get=Ff,U.gt=N6,U.gte=P6,U.has=pA,U.hasIn=qf,U.head=Dp,U.identity=ni,U.includes=Zb,U.indexOf=Q3,U.inRange=RA,U.invoke=vA,U.isArguments=eo,U.isArray=fe,U.isArrayBuffer=R6,U.isArrayLike=ri,U.isArrayLikeObject=hr,U.isBoolean=T6,U.isBuffer=Ds,U.isDate=B6,U.isElement=U6,U.isEmpty=L6,U.isEqual=F6,U.isEqualWith=q6,U.isError=Uf,U.isFinite=$6,U.isFunction=rs,U.isInteger=$p,U.isLength=Su,U.isMap=kp,U.isMatch=k6,U.isMatchWith=z6,U.isNaN=j6,U.isNative=H6,U.isNil=G6,U.isNull=K6,U.isNumber=zp,U.isObject=Ze,U.isObjectLike=tr,U.isPlainObject=Ua,U.isRegExp=Lf,U.isSafeInteger=V6,U.isSet=jp,U.isString=Iu,U.isSymbol=Ai,U.isTypedArray=Lo,U.isUndefined=Q6,U.isWeakMap=Y6,U.isWeakSet=J6,U.join=Z3,U.kebabCase=qA,U.last=Fi,U.lastIndexOf=tb,U.lowerCase=$A,U.lowerFirst=kA,U.lt=W6,U.lte=X6,U.max=B8,U.maxBy=U8,U.mean=L8,U.meanBy=F8,U.min=q8,U.minBy=$8,U.stubArray=Kf,U.stubFalse=Gf,U.stubObject=I8,U.stubString=M8,U.stubTrue=D8,U.multiply=k8,U.nth=eb,U.noConflict=v8,U.noop=Hf,U.now=Au,U.pad=zA,U.padEnd=jA,U.padStart=HA,U.parseInt=KA,U.random=TA,U.reduce=n6,U.reduceRight=s6,U.repeat=GA,U.replace=VA,U.result=SA,U.round=z8,U.runInContext=et,U.sample=a6,U.size=c6,U.snakeCase=QA,U.some=f6,U.sortedIndex=hb,U.sortedIndexBy=ub,U.sortedIndexOf=cb,U.sortedLastIndex=fb,U.sortedLastIndexBy=lb,U.sortedLastIndexOf=db,U.startCase=JA,U.startsWith=WA,U.subtract=j8,U.sum=H8,U.sumBy=K8,U.template=XA,U.times=x8,U.toFinite=is,U.toInteger=ge,U.toLength=Kp,U.toLower=ZA,U.toNumber=qi,U.toSafeInteger=Z6,U.toString=Le,U.toUpper=t8,U.trim=e8,U.trimEnd=r8,U.trimStart=i8,U.truncate=n8,U.unescape=s8,U.uniqueId=O8,U.upperCase=o8,U.upperFirst=$f,U.each=Np,U.eachRight=Pp,U.first=Dp,jf(U,function(){var s={};return In(U,function(a,l){Fe.call(U.prototype,l)||(s[l]=a)}),s}(),{chain:!1}),U.VERSION=i,Ri(["bind","bindKey","curry","curryRight","partial","partialRight"],function(s){U[s].placeholder=U}),Ri(["drop","take"],function(s,a){Me.prototype[s]=function(l){l=l===r?1:vr(ge(l),0);var E=this.__filtered__&&!a?new Me(this):this.clone();return E.__filtered__?E.__takeCount__=Rr(l,E.__takeCount__):E.__views__.push({size:Rr(l,c),type:s+(E.__dir__<0?"Right":"")}),E},Me.prototype[s+"Right"]=function(l){return this.reverse()[s](l).reverse()}}),Ri(["filter","map","takeWhile"],function(s,a){var l=a+1,E=l==u||l==b;Me.prototype[s]=function(P){var F=this.clone();return F.__iteratees__.push({iteratee:se(P,3),type:l}),F.__filtered__=F.__filtered__||E,F}}),Ri(["head","last"],function(s,a){var l="take"+(a?"Right":"");Me.prototype[s]=function(){return this[l](1).value()[0]}}),Ri(["initial","tail"],function(s,a){var l="drop"+(a?"":"Right");Me.prototype[s]=function(){return this.__filtered__?new Me(this):this[l](1)}}),Me.prototype.compact=function(){return this.filter(ni)},Me.prototype.find=function(s){return this.filter(s).head()},Me.prototype.findLast=function(s){return this.reverse().find(s)},Me.prototype.invokeMap=we(function(s,a){return typeof s=="function"?new Me(this):this.map(function(l){return Oa(l,s,a)})}),Me.prototype.reject=function(s){return this.filter(Eu(se(s)))},Me.prototype.slice=function(s,a){s=ge(s);var l=this;return l.__filtered__&&(s>0||a<0)?new Me(l):(s<0?l=l.takeRight(-s):s&&(l=l.drop(s)),a!==r&&(a=ge(a),l=a<0?l.dropRight(-a):l.take(a-s)),l)},Me.prototype.takeRightWhile=function(s){return this.reverse().takeWhile(s).reverse()},Me.prototype.toArray=function(){return this.take(c)},In(Me.prototype,function(s,a){var l=/^(?:filter|find|map|reject)|While$/.test(a),E=/^(?:head|last)$/.test(a),P=U[E?"take"+(a=="last"?"Right":""):a],F=E||/^find/.test(a);P&&(U.prototype[a]=function(){var Q=this.__wrapped__,J=E?[1]:arguments,it=Q instanceof Me,ft=J[0],lt=it||fe(Q),pt=function(Ee){var Pe=P.apply(U,bs([Ee],J));return E&&Bt?Pe[0]:Pe};lt&&l&&typeof ft=="function"&&ft.length!=1&&(it=lt=!1);var Bt=this.__chain__,ee=!!this.__actions__.length,ae=F&&!Bt,ye=it&&!ee;if(!F&&lt){Q=ye?Q:new Me(this);var he=s.apply(Q,J);return he.__actions__.push({func:wu,args:[pt],thisArg:r}),new Bi(he,Bt)}return ae&&ye?s.apply(this,J):(he=this.thru(pt),ae?E?he.value()[0]:he.value():he)})}),Ri(["pop","push","shift","sort","splice","unshift"],function(s){var a=Kh[s],l=/^(?:push|sort|unshift)$/.test(s)?"tap":"thru",E=/^(?:pop|shift)$/.test(s);U.prototype[s]=function(){var P=arguments;if(E&&!this.__chain__){var F=this.value();return a.apply(fe(F)?F:[],P)}return this[l](function(Q){return a.apply(fe(Q)?Q:[],P)})}}),In(Me.prototype,function(s,a){var l=U[a];if(l){var E=l.name+"";Fe.call(Po,E)||(Po[E]=[]),Po[E].push({name:a,func:l})}}),Po[lu(r,X).name]=[{name:"wrapper",func:r}],Me.prototype.clone=sw,Me.prototype.reverse=ow,Me.prototype.value=aw,U.prototype.at=Ub,U.prototype.chain=Lb,U.prototype.commit=Fb,U.prototype.next=qb,U.prototype.plant=kb,U.prototype.reverse=zb,U.prototype.toJSON=U.prototype.valueOf=U.prototype.value=jb,U.prototype.first=U.prototype.head,Ea&&(U.prototype[Ea]=$b),U},Co=F2();ar?((ar.exports=Co)._=Co,He._=Co):Ne._=Co}).call(Va)})(E0,E0.exports);var mR=Object.defineProperty,vR=Object.defineProperties,yR=Object.getOwnPropertyDescriptors,Pm=Object.getOwnPropertySymbols,wR=Object.prototype.hasOwnProperty,bR=Object.prototype.propertyIsEnumerable,Rm=(e,t,r)=>t in e?mR(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,$u=(e,t)=>{for(var r in t||(t={}))wR.call(t,r)&&Rm(e,r,t[r]);if(Pm)for(var r of Pm(t))bR.call(t,r)&&Rm(e,r,t[r]);return e},AR=(e,t)=>vR(e,yR(t));function $s(e,t,r){var i;const n=Yu(e);return((i=t.rpcMap)==null?void 0:i[n.reference])||`${gR}?chainId=${n.namespace}:${n.reference}&projectId=${r}`}function Ao(e){return e.includes(":")?e.split(":")[1]:e}function d2(e){return e.map(t=>`${t.split(":")[0]}:${t.split(":")[1]}`)}function _R(e,t){const r=Object.keys(t.namespaces).filter(n=>n.includes(e));if(!r.length)return[];const i=[];return r.forEach(n=>{const o=t.namespaces[n].accounts;i.push(...o)}),i}function Ul(e={},t={}){const r=Tm(e),i=Tm(t);return E0.exports.merge(r,i)}function Tm(e){var t,r,i,n;const o={};if(!ch(e))return o;for(const[f,d]of Object.entries(e)){const v=J0(f)?[f]:d.chains,g=d.methods||[],w=d.events||[],S=d.rpcMap||{},x=Ja(f);o[x]=AR($u($u({},o[x]),d),{chains:Ju(v,(t=o[x])==null?void 0:t.chains),methods:Ju(g,(r=o[x])==null?void 0:r.methods),events:Ju(w,(i=o[x])==null?void 0:i.events),rpcMap:$u($u({},S),(n=o[x])==null?void 0:n.rpcMap)})}return o}function ER(e){return e.includes(":")?e.split(":")[2]:e}function Bm(e){const t={};for(const[r,i]of Object.entries(e)){const n=i.methods||[],o=i.events||[],f=i.accounts||[],d=J0(r)?[r]:i.chains?i.chains:d2(i.accounts);t[r]={chains:d,methods:n,events:o,accounts:f}}return t}function Ll(e){return typeof e=="number"?e:e.includes("0x")?parseInt(e,16):(e=e.includes(":")?e.split(":")[1]:e,isNaN(Number(e))?e:Number(e))}const p2={},We=e=>p2[e],Fl=(e,t)=>{p2[e]=t};class SR{constructor(t){this.name="polkadot",this.namespace=t.namespace,this.events=We("events"),this.client=We("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,r){this.httpProviders[t]||this.setHttpProvider(t,r),this.chainId=t,this.events.emit(vs.DEFAULT_CHAIN_CHANGED,`${this.name}:${t}`)}getAccounts(){const t=this.namespace.accounts;return t?t.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2])||[]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(r=>{var i;const n=Ao(r);t[n]=this.createHttpProvider(n,(i=this.namespace.rpcMap)==null?void 0:i[r])}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,r=this.httpProviders[t];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return r}setHttpProvider(t,r){const i=this.createHttpProvider(t,r);i&&(this.httpProviders[t]=i)}createHttpProvider(t,r){const i=r||$s(t,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${t}`);return new ms(new zs(i,We("disableProviderPing")))}}class IR{constructor(t){this.name="eip155",this.namespace=t.namespace,this.events=We("events"),this.client=We("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(t){switch(t.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(t);case"eth_chainId":return parseInt(this.getDefaultChain())}return this.namespace.methods.includes(t.request.method)?await this.client.request(t):this.getHttpProvider().request(t.request)}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}setDefaultChain(t,r){this.httpProviders[t]||this.setHttpProvider(parseInt(t),r),this.chainId=parseInt(t),this.events.emit(vs.DEFAULT_CHAIN_CHANGED,`${this.name}:${t}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}createHttpProvider(t,r){const i=r||$s(`${this.name}:${t}`,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${t}`);return new ms(new zs(i,We("disableProviderPing")))}setHttpProvider(t,r){const i=this.createHttpProvider(t,r);i&&(this.httpProviders[t]=i)}createHttpProviders(){const t={};return this.namespace.chains.forEach(r=>{var i;const n=parseInt(Ao(r));t[n]=this.createHttpProvider(n,(i=this.namespace.rpcMap)==null?void 0:i[r])}),t}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}getHttpProvider(){const t=this.chainId,r=this.httpProviders[t];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return r}async handleSwitchChain(t){var r,i;let n=t.request.params?(r=t.request.params[0])==null?void 0:r.chainId:"0x0";n=n.startsWith("0x")?n:`0x${n}`;const o=parseInt(n,16);if(this.isChainApproved(o))this.setDefaultChain(`${o}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:t.topic,request:{method:t.request.method,params:[{chainId:n}]},chainId:(i=this.namespace.chains)==null?void 0:i[0]}),this.setDefaultChain(`${o}`);else throw new Error(`Failed to switch to chain 'eip155:${o}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(t){return this.namespace.chains.includes(`${this.name}:${t}`)}}class MR{constructor(t){this.name="solana",this.namespace=t.namespace,this.events=We("events"),this.client=We("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,r){this.httpProviders[t]||this.setHttpProvider(t,r),this.chainId=t,this.events.emit(vs.DEFAULT_CHAIN_CHANGED,`${this.name}:${t}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(r=>{var i;const n=Ao(r);t[n]=this.createHttpProvider(n,(i=this.namespace.rpcMap)==null?void 0:i[r])}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,r=this.httpProviders[t];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return r}setHttpProvider(t,r){const i=this.createHttpProvider(t,r);i&&(this.httpProviders[t]=i)}createHttpProvider(t,r){const i=r||$s(t,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${t}`);return new ms(new zs(i,We("disableProviderPing")))}}class DR{constructor(t){this.name="cosmos",this.namespace=t.namespace,this.events=We("events"),this.client=We("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,r){this.httpProviders[t]||this.setHttpProvider(t,r),this.chainId=t,this.events.emit(vs.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(r=>{var i;const n=Ao(r);t[n]=this.createHttpProvider(n,(i=this.namespace.rpcMap)==null?void 0:i[r])}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,r=this.httpProviders[t];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return r}setHttpProvider(t,r){const i=this.createHttpProvider(t,r);i&&(this.httpProviders[t]=i)}createHttpProvider(t,r){const i=r||$s(t,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${t}`);return new ms(new zs(i,We("disableProviderPing")))}}class xR{constructor(t){this.name="cip34",this.namespace=t.namespace,this.events=We("events"),this.client=We("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,r){this.httpProviders[t]||this.setHttpProvider(t,r),this.chainId=t,this.events.emit(vs.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(r=>{const i=this.getCardanoRPCUrl(r),n=Ao(r);t[n]=this.createHttpProvider(n,i)}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,r=this.httpProviders[t];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return r}getCardanoRPCUrl(t){const r=this.namespace.rpcMap;if(r)return r[t]}setHttpProvider(t,r){const i=this.createHttpProvider(t,r);i&&(this.httpProviders[t]=i)}createHttpProvider(t,r){const i=r||this.getCardanoRPCUrl(t);if(!i)throw new Error(`No RPC url provided for chainId: ${t}`);return new ms(new zs(i,We("disableProviderPing")))}}class CR{constructor(t){this.name="elrond",this.namespace=t.namespace,this.events=We("events"),this.client=We("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,r){this.httpProviders[t]||this.setHttpProvider(t,r),this.chainId=t,this.events.emit(vs.DEFAULT_CHAIN_CHANGED,`${this.name}:${t}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(r=>{var i;const n=Ao(r);t[n]=this.createHttpProvider(n,(i=this.namespace.rpcMap)==null?void 0:i[r])}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,r=this.httpProviders[t];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return r}setHttpProvider(t,r){const i=this.createHttpProvider(t,r);i&&(this.httpProviders[t]=i)}createHttpProvider(t,r){const i=r||$s(t,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${t}`);return new ms(new zs(i,We("disableProviderPing")))}}class OR{constructor(t){this.name="multiversx",this.namespace=t.namespace,this.events=We("events"),this.client=We("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,r){this.httpProviders[t]||this.setHttpProvider(t,r),this.chainId=t,this.events.emit(vs.DEFAULT_CHAIN_CHANGED,`${this.name}:${t}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(r=>{var i;const n=Ao(r);t[n]=this.createHttpProvider(n,(i=this.namespace.rpcMap)==null?void 0:i[r])}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,r=this.httpProviders[t];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return r}setHttpProvider(t,r){const i=this.createHttpProvider(t,r);i&&(this.httpProviders[t]=i)}createHttpProvider(t,r){const i=r||$s(t,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${t}`);return new ms(new zs(i,We("disableProviderPing")))}}class NR{constructor(t){this.name="near",this.namespace=t.namespace,this.events=We("events"),this.client=We("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,r){if(this.chainId=t,!this.httpProviders[t]){const i=r||$s(`${this.name}:${t}`,this.namespace);if(!i)throw new Error(`No RPC url provided for chainId: ${t}`);this.setHttpProvider(t,i)}this.events.emit(vs.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const t=this.namespace.accounts;return t?t.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2])||[]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(r=>{var i;t[r]=this.createHttpProvider(r,(i=this.namespace.rpcMap)==null?void 0:i[r])}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,r=this.httpProviders[t];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return r}setHttpProvider(t,r){const i=this.createHttpProvider(t,r);i&&(this.httpProviders[t]=i)}createHttpProvider(t,r){const i=r||$s(t,this.namespace);return typeof i>"u"?void 0:new ms(new zs(i,We("disableProviderPing")))}}var PR=Object.defineProperty,RR=Object.defineProperties,TR=Object.getOwnPropertyDescriptors,Um=Object.getOwnPropertySymbols,BR=Object.prototype.hasOwnProperty,UR=Object.prototype.propertyIsEnumerable,Lm=(e,t,r)=>t in e?PR(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ku=(e,t)=>{for(var r in t||(t={}))BR.call(t,r)&&Lm(e,r,t[r]);if(Um)for(var r of Um(t))UR.call(t,r)&&Lm(e,r,t[r]);return e},ql=(e,t)=>RR(e,TR(t));class id{constructor(t){this.events=new D0,this.rpcProviders={},this.shouldAbortPairingAttempt=!1,this.maxPairingAttempts=10,this.disableProviderPing=!1,this.providerOpts=t,this.logger=typeof(t==null?void 0:t.logger)<"u"&&typeof(t==null?void 0:t.logger)!="string"?t.logger:wh(Oc({level:(t==null?void 0:t.logger)||Om})),this.disableProviderPing=(t==null?void 0:t.disableProviderPing)||!1}static async init(t){const r=new id(t);return await r.initialize(),r}async request(t,r,i){const[n,o]=this.validateChain(r);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(n).request({request:ku({},t),chainId:`${n}:${o}`,topic:this.session.topic,expiry:i})}sendAsync(t,r,i,n){const o=new Date().getTime();this.request(t,i,n).then(f=>r(null,Pc(o,f))).catch(f=>r(f,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties}),await this.requestAccounts()}async disconnect(){var t;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(t=this.session)==null?void 0:t.topic,reason:$e("USER_DISCONNECTED")}),await this.cleanup()}async connect(t){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(t),await this.cleanupPendingPairings(),!t.skipPairing)return await this.pair(t.pairingTopic)}async authenticate(t){if(!this.client)throw new Error("Sign Client not initialized");this.setNamespaces(t),await this.cleanupPendingPairings();const{uri:r,response:i}=await this.client.authenticate(t);r&&(this.uri=r,this.events.emit("display_uri",r));const n=await i();if(this.session=n.session,this.session){const o=Bm(this.session.namespaces);this.namespaces=Ul(this.namespaces,o),this.persist("namespaces",this.namespaces),this.onConnect()}return n}on(t,r){this.events.on(t,r)}once(t,r){this.events.once(t,r)}removeListener(t,r){this.events.removeListener(t,r)}off(t,r){this.events.off(t,r)}get isWalletConnect(){return!0}async pair(t){this.shouldAbortPairingAttempt=!1;let r=0;do{if(this.shouldAbortPairingAttempt)throw new Error("Pairing aborted");if(r>=this.maxPairingAttempts)throw new Error("Max auto pairing attempts reached");const{uri:i,approval:n}=await this.client.connect({pairingTopic:t,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties});i&&(this.uri=i,this.events.emit("display_uri",i)),await n().then(o=>{this.session=o;const f=Bm(o.namespaces);this.namespaces=Ul(this.namespaces,f),this.persist("namespaces",this.namespaces)}).catch(o=>{if(o.message!==l2)throw o;r++})}while(!this.session);return this.onConnect(),this.session}setDefaultChain(t,r){try{if(!this.session)return;const[i,n]=this.validateChain(t);this.getProvider(i).setDefaultChain(n,r)}catch(i){if(!/Please call connect/.test(i.message))throw i}}async cleanupPendingPairings(t={}){this.logger.info("Cleaning up inactive pairings...");const r=this.client.pairing.getAll();if(lo(r)){for(const i of r)t.deletePairings?this.client.core.expirer.set(i.topic,0):await this.client.core.relayer.subscriber.unsubscribe(i.topic);this.logger.info(`Inactive pairings cleared: ${r.length}`)}}abortPairingAttempt(){this.shouldAbortPairingAttempt=!0}async checkStorage(){if(this.namespaces=await this.getFromStore("namespaces"),this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.client.session.length){const t=this.client.session.keys.length-1;this.session=this.client.session.get(this.client.session.keys[t]),this.createProviders()}}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){this.client=this.providerOpts.client||await rd.init({logger:this.providerOpts.logger||Om,relayUrl:this.providerOpts.relayUrl||lR,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name}),this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const t=[...new Set(Object.keys(this.session.namespaces).map(r=>Ja(r)))];Fl("client",this.client),Fl("events",this.events),Fl("disableProviderPing",this.disableProviderPing),t.forEach(r=>{if(!this.session)return;const i=_R(r,this.session),n=d2(i),o=Ul(this.namespaces,this.optionalNamespaces),f=ql(ku({},o[r]),{accounts:i,chains:n});switch(r){case"eip155":this.rpcProviders[r]=new IR({namespace:f});break;case"solana":this.rpcProviders[r]=new MR({namespace:f});break;case"cosmos":this.rpcProviders[r]=new DR({namespace:f});break;case"polkadot":this.rpcProviders[r]=new SR({namespace:f});break;case"cip34":this.rpcProviders[r]=new xR({namespace:f});break;case"elrond":this.rpcProviders[r]=new CR({namespace:f});break;case"multiversx":this.rpcProviders[r]=new OR({namespace:f});break;case"near":this.rpcProviders[r]=new NR({namespace:f});break}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",t=>{this.events.emit("session_ping",t)}),this.client.on("session_event",t=>{const{params:r}=t,{event:i}=r;if(i.name==="accountsChanged"){const n=i.data;n&&lo(n)&&this.events.emit("accountsChanged",n.map(ER))}else if(i.name==="chainChanged"){const n=r.chainId,o=r.event.data,f=Ja(n),d=Ll(n)!==Ll(o)?`${f}:${Ll(o)}`:n;this.onChainChanged(d)}else this.events.emit(i.name,i.data);this.events.emit("session_event",t)}),this.client.on("session_update",({topic:t,params:r})=>{var i;const{namespaces:n}=r,o=(i=this.client)==null?void 0:i.session.get(t);this.session=ql(ku({},o),{namespaces:n}),this.onSessionUpdate(),this.events.emit("session_update",{topic:t,params:r})}),this.client.on("session_delete",async t=>{await this.cleanup(),this.events.emit("session_delete",t),this.events.emit("disconnect",ql(ku({},$e("USER_DISCONNECTED")),{data:t.topic}))}),this.on(vs.DEFAULT_CHAIN_CHANGED,t=>{this.onChainChanged(t,!0)})}getProvider(t){if(!this.rpcProviders[t])throw new Error(`Provider not found: ${t}`);return this.rpcProviders[t]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(t=>{var r;this.getProvider(t).updateNamespace((r=this.session)==null?void 0:r.namespaces[t])})}setNamespaces(t){const{namespaces:r,optionalNamespaces:i,sessionProperties:n}=t;r&&Object.keys(r).length&&(this.namespaces=r),i&&Object.keys(i).length&&(this.optionalNamespaces=i),this.sessionProperties=n,this.persist("namespaces",r),this.persist("optionalNamespaces",i)}validateChain(t){const[r,i]=(t==null?void 0:t.split(":"))||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[r,i];if(r&&!Object.keys(this.namespaces||{}).map(f=>Ja(f)).includes(r))throw new Error(`Namespace '${r}' is not configured. Please call connect() first with namespace config.`);if(r&&i)return[r,i];const n=Ja(Object.keys(this.namespaces)[0]),o=this.rpcProviders[n].getDefaultChain();return[n,o]}async requestAccounts(){const[t]=this.validateChain();return await this.getProvider(t).requestAccounts()}onChainChanged(t,r=!1){if(!this.namespaces)return;const[i,n]=this.validateChain(t);n&&(r||this.getProvider(i).setDefaultChain(n),this.namespaces[i]?this.namespaces[i].defaultChain=n:this.namespaces[`${i}:${n}`]?this.namespaces[`${i}:${n}`].defaultChain=n:this.namespaces[`${i}:${n}`]={defaultChain:n},this.persist("namespaces",this.namespaces),this.events.emit("chainChanged",n))}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.session=void 0,this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,this.persist("namespaces",void 0),this.persist("optionalNamespaces",void 0),this.persist("sessionProperties",void 0),await this.cleanupPendingPairings({deletePairings:!0})}persist(t,r){this.client.core.storage.setItem(`${Nm}/${t}`,r)}async getFromStore(t){return await this.client.core.storage.getItem(`${Nm}/${t}`)}}const LR=id,FR="wc",qR="ethereum_provider",$R=`${FR}@2:${qR}:`,kR="https://rpc.walletconnect.com/v1/",S0=["eth_sendTransaction","personal_sign"],zR=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_sendCalls","wallet_getCapabilities","wallet_getCallsStatus","wallet_showCallsStatus"],I0=["chainChanged","accountsChanged"],jR=["chainChanged","accountsChanged","message","disconnect","connect"];var HR=Object.defineProperty,KR=Object.defineProperties,GR=Object.getOwnPropertyDescriptors,Fm=Object.getOwnPropertySymbols,VR=Object.prototype.hasOwnProperty,QR=Object.prototype.propertyIsEnumerable,qm=(e,t,r)=>t in e?HR(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Go=(e,t)=>{for(var r in t||(t={}))VR.call(t,r)&&qm(e,r,t[r]);if(Fm)for(var r of Fm(t))QR.call(t,r)&&qm(e,r,t[r]);return e},$l=(e,t)=>KR(e,GR(t));function wc(e){return Number(e[0].split(":")[1])}function zu(e){return`0x${e.toString(16)}`}function YR(e){const{chains:t,optionalChains:r,methods:i,optionalMethods:n,events:o,optionalEvents:f,rpcMap:d}=e;if(!i0(t))throw new Error("Invalid chains");const v={chains:t,methods:i||S0,events:o||I0,rpcMap:Go({},t.length?{[wc(t)]:d[wc(t)]}:{})},g=o==null?void 0:o.filter(C=>!I0.includes(C)),w=i==null?void 0:i.filter(C=>!S0.includes(C));if(!r&&!f&&!n&&!(g!=null&&g.length)&&!(w!=null&&w.length))return{required:t.length?v:void 0};const S=(g==null?void 0:g.length)&&(w==null?void 0:w.length)||!r,x={chains:[...new Set(S?v.chains.concat(r||[]):r)],methods:[...new Set(v.methods.concat(n!=null&&n.length?n:zR))],events:[...new Set(v.events.concat(f!=null&&f.length?f:jR))],rpcMap:d};return{required:t.length?v:void 0,optional:r.length?x:void 0}}class nd{constructor(){this.events=new Wi.EventEmitter,this.namespace="eip155",this.accounts=[],this.chainId=1,this.STORAGE_KEY=$R,this.on=(t,r)=>(this.events.on(t,r),this),this.once=(t,r)=>(this.events.once(t,r),this),this.removeListener=(t,r)=>(this.events.removeListener(t,r),this),this.off=(t,r)=>(this.events.off(t,r),this),this.parseAccount=t=>this.isCompatibleChainId(t)?this.parseAccountId(t).address:t,this.signer={},this.rpc={}}static async init(t){const r=new nd;return await r.initialize(t),r}async request(t,r){return await this.signer.request(t,this.formatChainId(this.chainId),r)}sendAsync(t,r,i){this.signer.sendAsync(t,r,this.formatChainId(this.chainId),i)}get connected(){return this.signer.client?this.signer.client.core.relayer.connected:!1}get connecting(){return this.signer.client?this.signer.client.core.relayer.connecting:!1}async enable(){return this.session||await this.connect(),await this.request({method:"eth_requestAccounts"})}async connect(t){if(!this.signer.client)throw new Error("Provider not initialized. Call init() first");this.loadConnectOpts(t);const{required:r,optional:i}=YR(this.rpc);try{const n=await new Promise(async(f,d)=>{var v;this.rpc.showQrModal&&((v=this.modal)==null||v.subscribeModal(g=>{!g.open&&!this.signer.session&&(this.signer.abortPairingAttempt(),d(new Error("Connection request reset. Please try again.")))})),await this.signer.connect($l(Go({namespaces:Go({},r&&{[this.namespace]:r})},i&&{optionalNamespaces:{[this.namespace]:i}}),{pairingTopic:t==null?void 0:t.pairingTopic})).then(g=>{f(g)}).catch(g=>{d(new Error(g.message))})});if(!n)return;const o=A1(n.namespaces,[this.namespace]);this.setChainIds(this.rpc.chains.length?this.rpc.chains:o),this.setAccounts(o),this.events.emit("connect",{chainId:zu(this.chainId)})}catch(n){throw this.signer.logger.error(n),n}finally{this.modal&&this.modal.closeModal()}}async authenticate(t){if(!this.signer.client)throw new Error("Provider not initialized. Call init() first");this.loadConnectOpts({chains:t==null?void 0:t.chains});try{const r=await new Promise(async(n,o)=>{var f;this.rpc.showQrModal&&((f=this.modal)==null||f.subscribeModal(d=>{!d.open&&!this.signer.session&&(this.signer.abortPairingAttempt(),o(new Error("Connection request reset. Please try again.")))})),await this.signer.authenticate($l(Go({},t),{chains:this.rpc.chains})).then(d=>{n(d)}).catch(d=>{o(new Error(d.message))})}),i=r.session;if(i){const n=A1(i.namespaces,[this.namespace]);this.setChainIds(this.rpc.chains.length?this.rpc.chains:n),this.setAccounts(n),this.events.emit("connect",{chainId:zu(this.chainId)})}return r}catch(r){throw this.signer.logger.error(r),r}finally{this.modal&&this.modal.closeModal()}}async disconnect(){this.session&&await this.signer.disconnect(),this.reset()}get isWalletConnect(){return!0}get session(){return this.signer.session}registerEventListeners(){this.signer.on("session_event",t=>{const{params:r}=t,{event:i}=r;i.name==="accountsChanged"?(this.accounts=this.parseAccounts(i.data),this.events.emit("accountsChanged",this.accounts)):i.name==="chainChanged"?this.setChainId(this.formatChainId(i.data)):this.events.emit(i.name,i.data),this.events.emit("session_event",t)}),this.signer.on("chainChanged",t=>{const r=parseInt(t);this.chainId=r,this.events.emit("chainChanged",zu(this.chainId)),this.persist()}),this.signer.on("session_update",t=>{this.events.emit("session_update",t)}),this.signer.on("session_delete",t=>{this.reset(),this.events.emit("session_delete",t),this.events.emit("disconnect",$l(Go({},T7("USER_DISCONNECTED")),{data:t.topic,name:"USER_DISCONNECTED"}))}),this.signer.on("display_uri",t=>{var r,i;this.rpc.showQrModal&&((r=this.modal)==null||r.closeModal(),(i=this.modal)==null||i.openModal({uri:t})),this.events.emit("display_uri",t)})}switchEthereumChain(t){this.request({method:"wallet_switchEthereumChain",params:[{chainId:t.toString(16)}]})}isCompatibleChainId(t){return typeof t=="string"?t.startsWith(`${this.namespace}:`):!1}formatChainId(t){return`${this.namespace}:${t}`}parseChainId(t){return Number(t.split(":")[1])}setChainIds(t){const r=t.filter(i=>this.isCompatibleChainId(i)).map(i=>this.parseChainId(i));r.length&&(this.chainId=r[0],this.events.emit("chainChanged",zu(this.chainId)),this.persist())}setChainId(t){if(this.isCompatibleChainId(t)){const r=this.parseChainId(t);this.chainId=r,this.switchEthereumChain(r)}}parseAccountId(t){const[r,i,n]=t.split(":");return{chainId:`${r}:${i}`,address:n}}setAccounts(t){this.accounts=t.filter(r=>this.parseChainId(this.parseAccountId(r).chainId)===this.chainId).map(r=>this.parseAccountId(r).address),this.events.emit("accountsChanged",this.accounts)}getRpcConfig(t){var r,i;const n=(r=t==null?void 0:t.chains)!=null?r:[],o=(i=t==null?void 0:t.optionalChains)!=null?i:[],f=n.concat(o);if(!f.length)throw new Error("No chains specified in either `chains` or `optionalChains`");const d=n.length?(t==null?void 0:t.methods)||S0:[],v=n.length?(t==null?void 0:t.events)||I0:[],g=(t==null?void 0:t.optionalMethods)||[],w=(t==null?void 0:t.optionalEvents)||[],S=(t==null?void 0:t.rpcMap)||this.buildRpcMap(f,t.projectId),x=(t==null?void 0:t.qrModalOptions)||void 0;return{chains:n==null?void 0:n.map(C=>this.formatChainId(C)),optionalChains:o.map(C=>this.formatChainId(C)),methods:d,events:v,optionalMethods:g,optionalEvents:w,rpcMap:S,showQrModal:!!(t!=null&&t.showQrModal),qrModalOptions:x,projectId:t.projectId,metadata:t.metadata}}buildRpcMap(t,r){const i={};return t.forEach(n=>{i[n]=this.getRpcUrl(n,r)}),i}async initialize(t){if(this.rpc=this.getRpcConfig(t),this.chainId=this.rpc.chains.length?wc(this.rpc.chains):wc(this.rpc.optionalChains),this.signer=await LR.init({projectId:this.rpc.projectId,metadata:this.rpc.metadata,disableProviderPing:t.disableProviderPing,relayUrl:t.relayUrl,storageOptions:t.storageOptions}),this.registerEventListeners(),await this.loadPersistedSession(),this.rpc.showQrModal){let r;try{const{WalletConnectModal:i}=await Q8(()=>import("./index-DOl8xZYz.js").then(n=>n.i),__vite__mapDeps([0,1,2]));r=i}catch{throw new Error("To use QR modal, please install @walletconnect/modal package")}if(r)try{this.modal=new r(Go({projectId:this.rpc.projectId},this.rpc.qrModalOptions))}catch(i){throw this.signer.logger.error(i),new Error("Could not generate WalletConnectModal Instance")}}}loadConnectOpts(t){if(!t)return;const{chains:r,optionalChains:i,rpcMap:n}=t;r&&i0(r)&&(this.rpc.chains=r.map(o=>this.formatChainId(o)),r.forEach(o=>{this.rpc.rpcMap[o]=(n==null?void 0:n[o])||this.getRpcUrl(o)})),i&&i0(i)&&(this.rpc.optionalChains=[],this.rpc.optionalChains=i==null?void 0:i.map(o=>this.formatChainId(o)),i.forEach(o=>{this.rpc.rpcMap[o]=(n==null?void 0:n[o])||this.getRpcUrl(o)}))}getRpcUrl(t,r){var i;return((i=this.rpc.rpcMap)==null?void 0:i[t])||`${kR}?chainId=eip155:${t}&projectId=${r||this.rpc.projectId}`}async loadPersistedSession(){if(this.session)try{const t=await this.signer.client.core.storage.getItem(`${this.STORAGE_KEY}/chainId`),r=this.session.namespaces[`${this.namespace}:${t}`]?this.session.namespaces[`${this.namespace}:${t}`]:this.session.namespaces[this.namespace];this.setChainIds(t?[this.formatChainId(t)]:r==null?void 0:r.accounts),this.setAccounts(r==null?void 0:r.accounts)}catch(t){this.signer.logger.error("Failed to load persisted session, clearing state..."),this.signer.logger.error(t),await this.disconnect().catch(r=>this.signer.logger.warn(r))}}reset(){this.chainId=1,this.accounts=[]}persist(){this.session&&this.signer.client.core.storage.setItem(`${this.STORAGE_KEY}/chainId`,this.chainId)}parseAccounts(t){return typeof t=="string"||t instanceof String?[this.parseAccount(t)]:t.map(r=>this.parseAccount(r))}}const ST=nd;export{ST as EthereumProvider,jR as OPTIONAL_EVENTS,zR as OPTIONAL_METHODS,I0 as REQUIRED_EVENTS,S0 as REQUIRED_METHODS,nd as default};
